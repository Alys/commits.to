/* !
 * pickadate.js v3.5.6, 2015/04/20
 * By Amsul, http://amsul.ca
 * Hosted on http://amsul.github.io/pickadate.js
 * Licensed under MIT
 */
!(function(a) {typeof define == 'function' && define.amd ? define('picker', ['jquery'], a) : typeof exports == 'object' ? module.exports = a(require('jquery')) : this.Picker = a(jQuery)}(function(a) {
  function b(f, g, i, m) {
    function n() {return b._.node('div', b._.node('div', b._.node('div', b._.node('div', B.component.nodes(w.open), y.box), y.wrap), y.frame), y.holder, 'tabindex="-1"')} function o() {
      z.data(g, B).addClass(y.input)
        .val(z.data('value') ? B.get('select', x.format) : f.value), x.editable || z.on('focus.' + w.id + ' click.' + w.id, function(a) {a.preventDefault(), B.open()}).on('keydown.' + w.id, u), e(f, { haspopup: !0, expanded: !1, readonly: !1, owns: f.id + '_root' })
    } function p() {e(B.$root[0], 'hidden', !0)} function q() {B.$holder.on({ keydown: u, 'focus.toOpen': t, blur: function() {z.removeClass(y.target)}, focusin: function(a) {B.$root.removeClass(y.focused), a.stopPropagation()}, 'mousedown click': function(b) {let c = b.target;c != B.$holder[0] && (b.stopPropagation(), b.type != 'mousedown' || a(c).is('input, select, textarea, button, option') || (b.preventDefault(), B.$holder[0].focus()))} }).on('click', '[data-pick], [data-nav], [data-clear], [data-close]', function() {let b = a(this), c = b.data(), d = b.hasClass(y.navDisabled) || b.hasClass(y.disabled), e = h();e = e && (e.type || e.href), (d || e && !a.contains(B.$root[0], e)) && B.$holder[0].focus(), !d && c.nav ? B.set('highlight', B.component.item.highlight, { nav: c.nav }) : !d && 'pick' in c ? (B.set('select', c.pick), x.closeOnSelect && B.close(!0)) : c.clear ? (B.clear(), x.closeOnClear && B.close(!0)) : c.close && B.close(!0)})} function r() {let b;x.hiddenName === !0 ? (b = f.name, f.name = '') : (b = [typeof x.hiddenPrefix == 'string' ? x.hiddenPrefix : '', typeof x.hiddenSuffix == 'string' ? x.hiddenSuffix : '_submit'], b = b[0] + f.name + b[1]), B._hidden = a('<input type=hidden name="' + b + '"' + (z.data('value') || f.value ? ' value="' + B.get('select', x.formatSubmit) + '"' : '') + '>')[0], z.on('change.' + w.id, function() {B._hidden.value = f.value ? B.get('select', x.formatSubmit) : ''})} function s() {v && l ? B.$holder.find('.' + y.frame).one('transitionend', function() {B.$holder[0].focus()}) : B.$holder[0].focus()} function t(a) {a.stopPropagation(), z.addClass(y.target), B.$root.addClass(y.focused), B.open()} function u(a) {let b = a.keyCode, c = /^(8|46)$/.test(b);return b == 27 ? (B.close(!0), !1) : void((b == 32 || c || !w.open && B.component.key[b]) && (a.preventDefault(), a.stopPropagation(), c ? B.clear().close() : B.open()))} if (!f) return b;var v = !1, w = { id: f.id || 'P' + Math.abs(~~(Math.random() * new Date)) }, x = i ? a.extend(!0, {}, i.defaults, m) : m || {}, y = a.extend({}, b.klasses(), x.klass), z = a(f), A = function() {return this.start()}, B = A.prototype = { constructor: A, $node: z, start: function() {return w && w.start ? B : (w.methods = {}, w.start = !0, w.open = !1, w.type = f.type, f.autofocus = f == h(), f.readOnly = !x.editable, f.id = f.id || w.id, f.type != 'text' && (f.type = 'text'), B.component = new i(B, x), B.$root = a('<div class="' + y.picker + '" id="' + f.id + '_root" />'), p(), B.$holder = a(n()).appendTo(B.$root), q(), x.formatSubmit && r(), o(), x.containerHidden ? a(x.containerHidden).append(B._hidden) : z.after(B._hidden), x.container ? a(x.container).append(B.$root) : z.after(B.$root), B.on({ start: B.component.onStart, render: B.component.onRender, stop: B.component.onStop, open: B.component.onOpen, close: B.component.onClose, set: B.component.onSet }).on({ start: x.onStart, render: x.onRender, stop: x.onStop, open: x.onOpen, close: x.onClose, set: x.onSet }), v = c(B.$holder[0]), f.autofocus && B.open(), B.trigger('start').trigger('render'))}, render: function(b) {return b ? (B.$holder = a(n()), q(), B.$root.html(B.$holder)) : B.$root.find('.' + y.box).html(B.component.nodes(w.open)), B.trigger('render')}, stop: function() {return w.start ? (B.close(), B._hidden && B._hidden.parentNode.removeChild(B._hidden), B.$root.remove(), z.removeClass(y.input).removeData(g), setTimeout(function() {z.off('.' + w.id)}, 0), f.type = w.type, f.readOnly = !1, B.trigger('stop'), w.methods = {}, w.start = !1, B) : B}, open: function(c) {return w.open ? B : (z.addClass(y.active), e(f, 'expanded', !0), setTimeout(function() {B.$root.addClass(y.opened), e(B.$root[0], 'hidden', !1)}, 0), c !== !1 && (w.open = !0, v && k.css('overflow', 'hidden').css('padding-right', '+=' + d()), s(), j.on('click.' + w.id + ' focusin.' + w.id, function(a) {let b = a.target;b != f && b != document && a.which != 3 && B.close(b === B.$holder[0])}).on('keydown.' + w.id, function(c) {let d = c.keyCode, e = B.component.key[d], f = c.target;d == 27 ? B.close(!0) : f != B.$holder[0] || !e && d != 13 ? a.contains(B.$root[0], f) && d == 13 && (c.preventDefault(), f.click()) : (c.preventDefault(), e ? b._.trigger(B.component.key.go, B, [b._.trigger(e)]) : B.$root.find('.' + y.highlighted).hasClass(y.disabled) || (B.set('select', B.component.item.highlight), x.closeOnSelect && B.close(!0)))})), B.trigger('open'))}, close: function(a) {return a && (x.editable ? f.focus() : (B.$holder.off('focus.toOpen').focus(), setTimeout(function() {B.$holder.on('focus.toOpen', t)}, 0))), z.removeClass(y.active), e(f, 'expanded', !1), setTimeout(function() {B.$root.removeClass(y.opened + ' ' + y.focused), e(B.$root[0], 'hidden', !0)}, 0), w.open ? (w.open = !1, v && k.css('overflow', '').css('padding-right', '-=' + d()), j.off('.' + w.id), B.trigger('close')) : B}, clear: function(a) {return B.set('clear', null, a)}, set: function(b, c, d) {let e, f, g = a.isPlainObject(b), h = g ? b : {};if (d = g && a.isPlainObject(c) ? c : d || {}, b) {g || (h[b] = c);for (e in h)f = h[e], e in B.component.item && (void 0 === f && (f = null), B.component.set(e, f, d)), (e == 'select' || e == 'clear') && z.val(e == 'clear' ? '' : B.get(e, x.format)).trigger('change');B.render()} return d.muted ? B : B.trigger('set', h)}, get: function(a, c) {if (a = a || 'value', w[a] != null) return w[a];if (a == 'valueSubmit') {if (B._hidden) return B._hidden.value;a = 'value'} if (a == 'value') return f.value;if (a in B.component.item) {if (typeof c == 'string') {let d = B.component.get(a);return d ? b._.trigger(B.component.formats.toString, B.component, [c, d]) : ''} return B.component.get(a)}}, on: function(b, c, d) {let e, f, g = a.isPlainObject(b), h = g ? b : {};if (b) {g || (h[b] = c);for (e in h)f = h[e], d && (e = '_' + e), w.methods[e] = w.methods[e] || [], w.methods[e].push(f)} return B}, off: function() {let a, b, c = arguments;for (a = 0, namesCount = c.length;a < namesCount;a += 1)b = c[a], b in w.methods && delete w.methods[b];return B}, trigger: function(a, c) {let d = function(a) {let d = w.methods[a];d && d.map(function(a) {b._.trigger(a, B, [c])})};return d('_' + a), d(a), B} };return new A
  } function c(a) {let b, c = 'position';return a.currentStyle ? b = a.currentStyle[c] : window.getComputedStyle && (b = getComputedStyle(a)[c]), b == 'fixed'} function d() {if (k.height() <= i.height()) return 0;let b = a('<div style="visibility:hidden;width:100px" />').appendTo('body'), c = b[0].offsetWidth;b.css('overflow', 'scroll');let d = a('<div style="width:100%" />').appendTo(b), e = d[0].offsetWidth;return b.remove(), c - e} function e(b, c, d) {if (a.isPlainObject(c)) for (let e in c)f(b, e, c[e]);else f(b, c, d)} function f(a, b, c) {a.setAttribute((b == 'role' ? '' : 'aria-') + b, c)} function g(b, c) {a.isPlainObject(b) || (b = { attribute: c }), c = '';for (let d in b) {let e = (d == 'role' ? '' : 'aria-') + d, f = b[d];c += f == null ? '' : e + '="' + b[d] + '"'} return c} function h() {try {return document.activeElement} catch (a) {}} var i = a(window), j = a(document), k = a(document.documentElement), l = document.documentElement.style.transition != null;return b.klasses = function(a) {return a = a || 'picker', { picker: a, opened: a + '--opened', focused: a + '--focused', input: a + '__input', active: a + '__input--active', target: a + '__input--target', holder: a + '__holder', frame: a + '__frame', wrap: a + '__wrap', box: a + '__box' }}, b._ = { group: function(a) {for (var c, d = '', e = b._.trigger(a.min, a);e <= b._.trigger(a.max, a, [e]);e += a.i)c = b._.trigger(a.item, a, [e]), d += b._.node(a.node, c[0], c[1], c[2]);return d}, node: function(b, c, d, e) {return c ? (c = a.isArray(c) ? c.join('') : c, d = d ? ' class="' + d + '"' : '', e = e ? ' ' + e : '', '<' + b + d + e + '>' + c + '</' + b + '>') : ''}, lead: function(a) {return (a < 10 ? '0' : '') + a}, trigger: function(a, b, c) {return typeof a == 'function' ? a.apply(b, c || []) : a}, digits: function(a) {return /\d/.test(a[1]) ? 2 : 1}, isDate: function(a) {return {}.toString.call(a).indexOf('Date') > -1 && this.isInteger(a.getDate())}, isInteger: function(a) {return {}.toString.call(a).indexOf('Number') > -1 && a % 1 === 0}, ariaAttr: g }, b.extend = function(c, d) {a.fn[c] = function(e, f) {let g = this.data(c);return e == 'picker' ? g : g && typeof e == 'string' ? b._.trigger(g[e], g, [f]) : this.each(function() {let f = a(this);f.data(c) || new b(this, c, d, e)})}, a.fn[c].defaults = d.defaults}, b
}))

/* !
 * Date picker for pickadate.js v3.5.6
 * http://amsul.github.io/pickadate.js/date.htm
 */
!(function(a) {typeof define == 'function' && define.amd ? define(['picker', 'jquery'], a) : typeof exports == 'object' ? module.exports = a(require('./picker.js'), require('jquery')) : a(Picker, jQuery)}(function(a, b) {
  function c(a, b) {
    let c = this, d = a.$node[0], e = d.value, f = a.$node.data('value'), g = f || e, h = f ? b.formatSubmit : b.format, i = function() {return d.currentStyle ? d.currentStyle.direction == 'rtl' : getComputedStyle(a.$root[0]).direction == 'rtl'};c.settings = b, c.$node = a.$node, c.queue = { min: 'measure create', max: 'measure create', now: 'now create', select: 'parse create validate', highlight: 'parse navigate create validate', view: 'parse create validate viewset', disable: 'deactivate', enable: 'activate' }, c.item = {}, c.item.clear = null, c.item.disable = (b.disable || []).slice(0), c.item.enable = -(function(a) {return a[0] === !0 ? a.shift() : -1}(c.item.disable)), c.set('min', b.min).set('max', b.max)
      .set('now'), g ? c.set('select', g, { format: h, defaultValue: !0 }) : c.set('select', null).set('highlight', c.item.now), c.key = { 40: 7, 38: -7, 39: function() {return i() ? -1 : 1}, 37: function() {return i() ? 1 : -1}, go: function(a) {let b = c.item.highlight, d = new Date(b.year, b.month, b.date + a);c.set('highlight', d, { interval: a }), this.render()} }, a.on('render', function() {a.$root.find('.' + b.klass.selectMonth).on('change', function() {let c = this.value;c && (a.set('highlight', [a.get('view').year, c, a.get('highlight').date]), a.$root.find('.' + b.klass.selectMonth).trigger('focus'))}), a.$root.find('.' + b.klass.selectYear).on('change', function() {let c = this.value;c && (a.set('highlight', [c, a.get('view').month, a.get('highlight').date]), a.$root.find('.' + b.klass.selectYear).trigger('focus'))})}, 1).on('open', function() {let d = '';c.disabled(c.get('now')) && (d = ':not(.' + b.klass.buttonToday + ')'), a.$root.find('button' + d + ', select').attr('disabled', !1)}, 1)
      .on('close', function() {a.$root.find('button, select').attr('disabled', !0)}, 1)
  } let d = 7, e = 6, f = a._;c.prototype.set = function(a, b, c) {
    let d = this, e = d.item;return b === null ? (a == 'clear' && (a = 'select'), e[a] = b, d) : (e[a == 'enable' ? 'disable' : a == 'flip' ? 'enable' : a] = d.queue[a].split(' ').map(function(e) {return b = d[e](a, b, c)})
      .pop(), a == 'select' ? d.set('highlight', e.select, c) : a == 'highlight' ? d.set('view', e.highlight, c) : a.match(/^(flip|min|max|disable|enable)$/) && (e.select && d.disabled(e.select) && d.set('select', e.select, c), e.highlight && d.disabled(e.highlight) && d.set('highlight', e.highlight, c)), d)
  }, c.prototype.get = function(a) {return this.item[a]}, c.prototype.create = function(a, c, d) {let e, g = this;return c = void 0 === c ? a : c, c == -(1 / 0) || c == 1 / 0 ? e = c : b.isPlainObject(c) && f.isInteger(c.pick) ? c = c.obj : b.isArray(c) ? (c = new Date(c[0], c[1], c[2]), c = f.isDate(c) ? c : g.create().obj) : c = f.isInteger(c) || f.isDate(c) ? g.normalize(new Date(c), d) : g.now(a, c, d), { year: e || c.getFullYear(), month: e || c.getMonth(), date: e || c.getDate(), day: e || c.getDay(), obj: e || c, pick: e || c.getTime() }}, c.prototype.createRange = function(a, c) {let d = this, e = function(a) {return a === !0 || b.isArray(a) || f.isDate(a) ? d.create(a) : a};return f.isInteger(a) || (a = e(a)), f.isInteger(c) || (c = e(c)), f.isInteger(a) && b.isPlainObject(c) ? a = [c.year, c.month, c.date + a] : f.isInteger(c) && b.isPlainObject(a) && (c = [a.year, a.month, a.date + c]), { from: e(a), to: e(c) }}, c.prototype.withinRange = function(a, b) {return a = this.createRange(a.from, a.to), b.pick >= a.from.pick && b.pick <= a.to.pick}, c.prototype.overlapRanges = function(a, b) {let c = this;return a = c.createRange(a.from, a.to), b = c.createRange(b.from, b.to), c.withinRange(a, b.from) || c.withinRange(a, b.to) || c.withinRange(b, a.from) || c.withinRange(b, a.to)}, c.prototype.now = function(a, b, c) {return b = new Date, c && c.rel && b.setDate(b.getDate() + c.rel), this.normalize(b, c)}, c.prototype.navigate = function(a, c, d) {let e, f, g, h, i = b.isArray(c), j = b.isPlainObject(c), k = this.item.view;if (i || j) {for (j ? (f = c.year, g = c.month, h = c.date) : (f = +c[0], g = +c[1], h = +c[2]), d && d.nav && k && k.month !== g && (f = k.year, g = k.month), e = new Date(f, g + (d && d.nav ? d.nav : 0), 1), f = e.getFullYear(), g = e.getMonth();new Date(f, g, h).getMonth() !== g;)h -= 1;c = [f, g, h]} return c}, c.prototype.normalize = function(a) {return a.setHours(0, 0, 0, 0), a}, c.prototype.measure = function(a, b) {let c = this;return b ? typeof b == 'string' ? b = c.parse(a, b) : f.isInteger(b) && (b = c.now(a, b, { rel: b })) : b = a == 'min' ? -(1 / 0) : 1 / 0, b}, c.prototype.viewset = function(a, b) {return this.create([b.year, b.month, 1])}, c.prototype.validate = function(a, c, d) {let e, g, h, i, j = this, k = c, l = d && d.interval ? d.interval : 1, m = j.item.enable === -1, n = j.item.min, o = j.item.max, p = m && j.item.disable.filter(function(a) {if (b.isArray(a)) {let d = j.create(a).pick;d < c.pick ? e = !0 : d > c.pick && (g = !0)} return f.isInteger(a)}).length;if ((!d || !d.nav && !d.defaultValue) && (!m && j.disabled(c) || m && j.disabled(c) && (p || e || g) || !m && (c.pick <= n.pick || c.pick >= o.pick))) for (m && !p && (!g && l > 0 || !e && l < 0) && (l *= -1);j.disabled(c) && (Math.abs(l) > 1 && (c.month < k.month || c.month > k.month) && (c = k, l = l > 0 ? 1 : -1), c.pick <= n.pick ? (h = !0, l = 1, c = j.create([n.year, n.month, n.date + (c.pick === n.pick ? 0 : -1)])) : c.pick >= o.pick && (i = !0, l = -1, c = j.create([o.year, o.month, o.date + (c.pick === o.pick ? 0 : 1)])), !h || !i);)c = j.create([c.year, c.month, c.date + l]);return c}, c.prototype.disabled = function(a) {let c = this, d = c.item.disable.filter(function(d) {return f.isInteger(d) ? a.day === (c.settings.firstDay ? d : d - 1) % 7 : b.isArray(d) || f.isDate(d) ? a.pick === c.create(d).pick : b.isPlainObject(d) ? c.withinRange(d, a) : void 0});return d = d.length && !d.filter(function(a) {return b.isArray(a) && a[3] == 'inverted' || b.isPlainObject(a) && a.inverted}).length, c.item.enable === -1 ? !d : d || a.pick < c.item.min.pick || a.pick > c.item.max.pick}, c.prototype.parse = function(a, b, c) {let d = this, e = {};return b && typeof b == 'string' ? (c && c.format || (c = c || {}, c.format = d.settings.format), d.formats.toArray(c.format).map(function(a) {let c = d.formats[a], g = c ? f.trigger(c, d, [b, e]) : a.replace(/^!/, '').length;c && (e[a] = b.substr(0, g)), b = b.substr(g)}), [e.yyyy || e.yy, +(e.mm || e.m) - 1, e.dd || e.d]) : b}, c.prototype.formats = (function() {
    function a(a, b, c) {let d = a.match(/[^\x00-\x7F]+|\w+/)[0];return c.mm || c.m || (c.m = b.indexOf(d) + 1), d.length} function b(a) {return a.match(/\w+/)[0].length} return { d: function(a, b) {return a ? f.digits(a) : b.date}, dd: function(a, b) {return a ? 2 : f.lead(b.date)}, ddd: function(a, c) {return a ? b(a) : this.settings.weekdaysShort[c.day]}, dddd: function(a, c) {return a ? b(a) : this.settings.weekdaysFull[c.day]}, m: function(a, b) {return a ? f.digits(a) : b.month + 1}, mm: function(a, b) {return a ? 2 : f.lead(b.month + 1)}, mmm: function(b, c) {let d = this.settings.monthsShort;return b ? a(b, d, c) : d[c.month]}, mmmm: function(b, c) {let d = this.settings.monthsFull;return b ? a(b, d, c) : d[c.month]}, yy: function(a, b) {return a ? 2 : ('' + b.year).slice(2)}, yyyy: function(a, b) {return a ? 4 : b.year}, toArray: function(a) {return a.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g)}, toString: function(a, b) {
      let c = this;return c.formats.toArray(a).map(function(a) {return f.trigger(c.formats[a], c, [0, b]) || a.replace(/^!/, '')})
        .join('')
    } }
  }()), c.prototype.isDateExact = function(a, c) {let d = this;return f.isInteger(a) && f.isInteger(c) || typeof a == 'boolean' && typeof c == 'boolean' ? a === c : (f.isDate(a) || b.isArray(a)) && (f.isDate(c) || b.isArray(c)) ? d.create(a).pick === d.create(c).pick : b.isPlainObject(a) && b.isPlainObject(c) ? d.isDateExact(a.from, c.from) && d.isDateExact(a.to, c.to) : !1}, c.prototype.isDateOverlap = function(a, c) {let d = this, e = d.settings.firstDay ? 1 : 0;return f.isInteger(a) && (f.isDate(c) || b.isArray(c)) ? (a = a % 7 + e, a === d.create(c).day + 1) : f.isInteger(c) && (f.isDate(a) || b.isArray(a)) ? (c = c % 7 + e, c === d.create(a).day + 1) : b.isPlainObject(a) && b.isPlainObject(c) ? d.overlapRanges(a, c) : !1}, c.prototype.flipEnable = function(a) {let b = this.item;b.enable = a || (b.enable == -1 ? 1 : -1)}, c.prototype.deactivate = function(a, c) {let d = this, e = d.item.disable.slice(0);return c == 'flip' ? d.flipEnable() : c === !1 ? (d.flipEnable(1), e = []) : c === !0 ? (d.flipEnable(-1), e = []) : c.map(function(a) {for (var c, g = 0;g < e.length;g += 1) if (d.isDateExact(a, e[g])) {c = !0;break}c || (f.isInteger(a) || f.isDate(a) || b.isArray(a) || b.isPlainObject(a) && a.from && a.to) && e.push(a)}), e}, c.prototype.activate = function(a, c) {let d = this, e = d.item.disable, g = e.length;return c == 'flip' ? d.flipEnable() : c === !0 ? (d.flipEnable(1), e = []) : c === !1 ? (d.flipEnable(-1), e = []) : c.map(function(a) {let c, h, i, j;for (i = 0;g > i;i += 1) {if (h = e[i], d.isDateExact(h, a)) {c = e[i] = null, j = !0;break} if (d.isDateOverlap(h, a)) {b.isPlainObject(a) ? (a.inverted = !0, c = a) : b.isArray(a) ? (c = a, c[3] || c.push('inverted')) : f.isDate(a) && (c = [a.getFullYear(), a.getMonth(), a.getDate(), 'inverted']);break}} if (c) for (i = 0;g > i;i += 1) if (d.isDateExact(e[i], a)) {e[i] = null;break} if (j) for (i = 0;g > i;i += 1) if (d.isDateOverlap(e[i], a)) {e[i] = null;break}c && e.push(c)}), e.filter(function(a) {return a != null})}, c.prototype.nodes = function(a) {let b = this, c = b.settings, g = b.item, h = g.now, i = g.select, j = g.highlight, k = g.view, l = g.disable, m = g.min, n = g.max, o = (function(a, b) {return c.firstDay && (a.push(a.shift()), b.push(b.shift())), f.node('thead', f.node('tr', f.group({ min: 0, max: d - 1, i: 1, node: 'th', item: function(d) {return [a[d], c.klass.weekdays, 'scope=col title="' + b[d] + '"']} })))}((c.showWeekdaysFull ? c.weekdaysFull : c.weekdaysShort).slice(0), c.weekdaysFull.slice(0))), p = function(a) {return f.node('div', ' ', c.klass['nav' + (a ? 'Next' : 'Prev')] + (a && k.year >= n.year && k.month >= n.month || !a && k.year <= m.year && k.month <= m.month ? ' ' + c.klass.navDisabled : ''), 'data-nav=' + (a || -1) + ' ' + f.ariaAttr({ role: 'button', controls: b.$node[0].id + '_table' }) + ' title="' + (a ? c.labelMonthNext : c.labelMonthPrev) + '"')}, q = function() {let d = c.showMonthsShort ? c.monthsShort : c.monthsFull;return c.selectMonths ? f.node('select', f.group({ min: 0, max: 11, i: 1, node: 'option', item: function(a) {return [d[a], 0, 'value=' + a + (k.month == a ? ' selected' : '') + (k.year == m.year && a < m.month || k.year == n.year && a > n.month ? ' disabled' : '')]} }), c.klass.selectMonth, (a ? '' : 'disabled') + ' ' + f.ariaAttr({ controls: b.$node[0].id + '_table' }) + ' title="' + c.labelMonthSelect + '"') : f.node('div', d[k.month], c.klass.month)}, r = function() {let d = k.year, e = c.selectYears === !0 ? 5 : ~~(c.selectYears / 2);if (e) {let g = m.year, h = n.year, i = d - e, j = d + e;if (g > i && (j += g - i, i = g), j > h) {let l = i - g, o = j - h;i -= l > o ? o : l, j = h} return f.node('select', f.group({ min: i, max: j, i: 1, node: 'option', item: function(a) {return [a, 0, 'value=' + a + (d == a ? ' selected' : '')]} }), c.klass.selectYear, (a ? '' : 'disabled') + ' ' + f.ariaAttr({ controls: b.$node[0].id + '_table' }) + ' title="' + c.labelYearSelect + '"')} return f.node('div', d, c.klass.year)};return f.node('div', (c.selectYears ? r() + q() : q() + r()) + p() + p(1), c.klass.header) + f.node('table', o + f.node('tbody', f.group({ min: 0, max: e - 1, i: 1, node: 'tr', item: function(a) {let e = c.firstDay && b.create([k.year, k.month, 1]).day === 0 ? -7 : 0;return [f.group({ min: d * a - k.day + e + 1, max: function() {return this.min + d - 1}, i: 1, node: 'td', item: function(a) {a = b.create([k.year, k.month, a + (c.firstDay ? 1 : 0)]);let d = i && i.pick == a.pick, e = j && j.pick == a.pick, g = l && b.disabled(a) || a.pick < m.pick || a.pick > n.pick, o = f.trigger(b.formats.toString, b, [c.format, a]);return [f.node('div', a.date, (function(b) {return b.push(k.month == a.month ? c.klass.infocus : c.klass.outfocus), h.pick == a.pick && b.push(c.klass.now), d && b.push(c.klass.selected), e && b.push(c.klass.highlighted), g && b.push(c.klass.disabled), b.join(' ')}([c.klass.day])), 'data-pick=' + a.pick + ' ' + f.ariaAttr({ role: 'gridcell', label: o, selected: d && b.$node.val() === o ? !0 : null, activedescendant: e ? !0 : null, disabled: g ? !0 : null })), '', f.ariaAttr({ role: 'presentation' })]} })]} })), c.klass.table, 'id="' + b.$node[0].id + '_table" ' + f.ariaAttr({ role: 'grid', controls: b.$node[0].id, readonly: !0 })) + f.node('div', f.node('button', c.today, c.klass.buttonToday, 'type=button data-pick=' + h.pick + (a && !b.disabled(h) ? '' : ' disabled') + ' ' + f.ariaAttr({ controls: b.$node[0].id })) + f.node('button', c.clear, c.klass.buttonClear, 'type=button data-clear=1' + (a ? '' : ' disabled') + ' ' + f.ariaAttr({ controls: b.$node[0].id })) + f.node('button', c.close, c.klass.buttonClose, 'type=button data-close=true ' + (a ? '' : ' disabled') + ' ' + f.ariaAttr({ controls: b.$node[0].id })), c.klass.footer)}, c.defaults = (function(a) {return { labelMonthNext: 'Next month', labelMonthPrev: 'Previous month', labelMonthSelect: 'Select a month', labelYearSelect: 'Select a year', monthsFull: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'], monthsShort: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'], weekdaysFull: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'], weekdaysShort: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'], today: 'Today', clear: 'Clear', close: 'Close', closeOnSelect: !0, closeOnClear: !0, format: 'd mmmm, yyyy', klass: { table: a + 'table', header: a + 'header', navPrev: a + 'nav--prev', navNext: a + 'nav--next', navDisabled: a + 'nav--disabled', month: a + 'month', year: a + 'year', selectMonth: a + 'select--month', selectYear: a + 'select--year', weekdays: a + 'weekday', day: a + 'day', disabled: a + 'day--disabled', selected: a + 'day--selected', highlighted: a + 'day--highlighted', now: a + 'day--today', infocus: a + 'day--infocus', outfocus: a + 'day--outfocus', footer: a + 'footer', buttonClear: a + 'button--clear', buttonToday: a + 'button--today', buttonClose: a + 'button--close' } }}(a.klasses().picker + '__')), a.extend('pickadate', c)
}))

/* !
 * Time picker for pickadate.js v3.5.6
 * http://amsul.github.io/pickadate.js/time.htm
 */
!(function(a) {typeof define == 'function' && define.amd ? define(['picker', 'jquery'], a) : typeof exports == 'object' ? module.exports = a(require('./picker.js'), require('jquery')) : a(Picker, jQuery)}(function(a, b) {
  function c(a, b) {
    let c = this, d = a.$node[0].value, e = a.$node.data('value'), f = e || d, g = e ? b.formatSubmit : b.format;c.settings = b, c.$node = a.$node, c.queue = { interval: 'i', min: 'measure create', max: 'measure create', now: 'now create', select: 'parse create validate', highlight: 'parse create validate', view: 'parse create validate', disable: 'deactivate', enable: 'activate' }, c.item = {}, c.item.clear = null, c.item.interval = b.interval || 30, c.item.disable = (b.disable || []).slice(0), c.item.enable = -(function(a) {return a[0] === !0 ? a.shift() : -1}(c.item.disable)), c.set('min', b.min).set('max', b.max)
      .set('now'), f ? c.set('select', f, { format: g }) : c.set('select', null).set('highlight', c.item.now), c.key = { 40: 1, 38: -1, 39: 1, 37: -1, go: function(a) {c.set('highlight', c.item.highlight.pick + a * c.item.interval, { interval: a * c.item.interval }), this.render()} }, a.on('render', function() {let c = a.$root.children(), d = c.find('.' + b.klass.viewset), e = function(a) {return ['webkit', 'moz', 'ms', 'o', ''].map(function(b) {return (b ? '-' + b + '-' : '') + a})}, f = function(a, b) {e('transform').map(function(c) {a.css(c, b)}), e('transition').map(function(c) {a.css(c, b)})};d.length && (f(c, 'none'), c[0].scrollTop = ~~d.position().top - 2 * d[0].clientHeight, f(c, ''))}, 1).on('open', function() {a.$root.find('button').attr('disabled', !1)}, 1)
      .on('close', function() {a.$root.find('button').attr('disabled', !0)}, 1)
  } let d = 24, e = 60, f = 12, g = d * e, h = a._;c.prototype.set = function(a, b, c) {
    let d = this, e = d.item;return b === null ? (a == 'clear' && (a = 'select'), e[a] = b, d) : (e[a == 'enable' ? 'disable' : a == 'flip' ? 'enable' : a] = d.queue[a].split(' ').map(function(e) {return b = d[e](a, b, c)})
      .pop(), a == 'select' ? d.set('highlight', e.select, c) : a == 'highlight' ? d.set('view', e.highlight, c) : a == 'interval' ? d.set('min', e.min, c).set('max', e.max, c) : a.match(/^(flip|min|max|disable|enable)$/) && (e.select && d.disabled(e.select) && d.set('select', b, c), e.highlight && d.disabled(e.highlight) && d.set('highlight', b, c), a == 'min' && d.set('max', e.max, c)), d)
  }, c.prototype.get = function(a) {return this.item[a]}, c.prototype.create = function(a, c, f) {let i = this;return c = void 0 === c ? a : c, h.isDate(c) && (c = [c.getHours(), c.getMinutes()]), b.isPlainObject(c) && h.isInteger(c.pick) ? c = c.pick : b.isArray(c) ? c = +c[0] * e + +c[1] : h.isInteger(c) || (c = i.now(a, c, f)), a == 'max' && c < i.item.min.pick && (c += g), a != 'min' && a != 'max' && (c - i.item.min.pick) % i.item.interval !== 0 && (c += i.item.interval), c = i.normalize(a, c, f), { hour: ~~(d + c / e) % d, mins: (e + c % e) % e, time: (g + c) % g, pick: c % g }}, c.prototype.createRange = function(a, c) {let d = this, e = function(a) {return a === !0 || b.isArray(a) || h.isDate(a) ? d.create(a) : a};return h.isInteger(a) || (a = e(a)), h.isInteger(c) || (c = e(c)), h.isInteger(a) && b.isPlainObject(c) ? a = [c.hour, c.mins + a * d.settings.interval] : h.isInteger(c) && b.isPlainObject(a) && (c = [a.hour, a.mins + c * d.settings.interval]), { from: e(a), to: e(c) }}, c.prototype.withinRange = function(a, b) {return a = this.createRange(a.from, a.to), b.pick >= a.from.pick && b.pick <= a.to.pick}, c.prototype.overlapRanges = function(a, b) {let c = this;return a = c.createRange(a.from, a.to), b = c.createRange(b.from, b.to), c.withinRange(a, b.from) || c.withinRange(a, b.to) || c.withinRange(b, a.from) || c.withinRange(b, a.to)}, c.prototype.now = function(a, b) {let c, d = this.item.interval, f = new Date, g = f.getHours() * e + f.getMinutes(), i = h.isInteger(b);return g -= g % d, c = b < 0 && -d >= d * b + g, g += a == 'min' && c ? 0 : d, i && (g += d * (c && a != 'max' ? b + 1 : b)), g}, c.prototype.normalize = function(a, b) {let c = this.item.interval, d = this.item.min && this.item.min.pick || 0;return b -= a == 'min' ? 0 : (b - d) % c}, c.prototype.measure = function(a, c, f) {let g = this;return c || (c = a == 'min' ? [0, 0] : [d - 1, e - 1]), typeof c == 'string' ? c = g.parse(a, c) : c === !0 || h.isInteger(c) ? c = g.now(a, c, f) : b.isPlainObject(c) && h.isInteger(c.pick) && (c = g.normalize(a, c.pick, f)), c}, c.prototype.validate = function(a, b, c) {let d = this, e = c && c.interval ? c.interval : d.item.interval;return d.disabled(b) && (b = d.shift(b, e)), b = d.scope(b), d.disabled(b) && (b = d.shift(b, -1 * e)), b}, c.prototype.disabled = function(a) {let c = this, d = c.item.disable.filter(function(d) {return h.isInteger(d) ? a.hour == d : b.isArray(d) || h.isDate(d) ? a.pick == c.create(d).pick : b.isPlainObject(d) ? c.withinRange(d, a) : void 0});return d = d.length && !d.filter(function(a) {return b.isArray(a) && a[2] == 'inverted' || b.isPlainObject(a) && a.inverted}).length, c.item.enable === -1 ? !d : d || a.pick < c.item.min.pick || a.pick > c.item.max.pick}, c.prototype.shift = function(a, b) {let c = this, d = c.item.min.pick, e = c.item.max.pick;for (b = b || c.item.interval;c.disabled(a) && (a = c.create(a.pick += b), !(a.pick <= d || a.pick >= e)););return a}, c.prototype.scope = function(a) {let b = this.item.min.pick, c = this.item.max.pick;return this.create(a.pick > c ? c : a.pick < b ? b : a)}, c.prototype.parse = function(a, b, c) {let d, f, g, i, j, k = this, l = {};if (!b || typeof b != 'string') return b;c && c.format || (c = c || {}, c.format = k.settings.format), k.formats.toArray(c.format).map(function(a) {let c, d = k.formats[a], e = d ? h.trigger(d, k, [b, l]) : a.replace(/^!/, '').length;d && (c = b.substr(0, e), l[a] = c.match(/^\d+$/) ? +c : c), b = b.substr(e)});for (i in l)j = l[i], h.isInteger(j) ? i.match(/^(h|hh)$/i) ? (d = j, (i == 'h' || i == 'hh') && (d %= 12)) : i == 'i' && (f = j) : i.match(/^a$/i) && j.match(/^p/i) && ('h' in l || 'hh' in l) && (g = !0);return (g ? d + 12 : d) * e + f}, c.prototype.formats = { h: function(a, b) {return a ? h.digits(a) : b.hour % f || f}, hh: function(a, b) {return a ? 2 : h.lead(b.hour % f || f)}, H: function(a, b) {return a ? h.digits(a) : '' + b.hour % 24}, HH: function(a, b) {return a ? h.digits(a) : h.lead(b.hour % 24)}, i: function(a, b) {return a ? 2 : h.lead(b.mins)}, a: function(a, b) {return a ? 4 : g / 2 > b.time % g ? 'a.m.' : 'p.m.'}, A: function(a, b) {return a ? 2 : g / 2 > b.time % g ? 'AM' : 'PM'}, toArray: function(a) {return a.split(/(h{1,2}|H{1,2}|i|a|A|!.)/g)}, toString: function(a, b) {
    let c = this;return c.formats.toArray(a).map(function(a) {return h.trigger(c.formats[a], c, [0, b]) || a.replace(/^!/, '')})
      .join('')
  } }, c.prototype.isTimeExact = function(a, c) {let d = this;return h.isInteger(a) && h.isInteger(c) || typeof a == 'boolean' && typeof c == 'boolean' ? a === c : (h.isDate(a) || b.isArray(a)) && (h.isDate(c) || b.isArray(c)) ? d.create(a).pick === d.create(c).pick : b.isPlainObject(a) && b.isPlainObject(c) ? d.isTimeExact(a.from, c.from) && d.isTimeExact(a.to, c.to) : !1}, c.prototype.isTimeOverlap = function(a, c) {let d = this;return h.isInteger(a) && (h.isDate(c) || b.isArray(c)) ? a === d.create(c).hour : h.isInteger(c) && (h.isDate(a) || b.isArray(a)) ? c === d.create(a).hour : b.isPlainObject(a) && b.isPlainObject(c) ? d.overlapRanges(a, c) : !1}, c.prototype.flipEnable = function(a) {let b = this.item;b.enable = a || (b.enable == -1 ? 1 : -1)}, c.prototype.deactivate = function(a, c) {let d = this, e = d.item.disable.slice(0);return c == 'flip' ? d.flipEnable() : c === !1 ? (d.flipEnable(1), e = []) : c === !0 ? (d.flipEnable(-1), e = []) : c.map(function(a) {for (var c, f = 0;f < e.length;f += 1) if (d.isTimeExact(a, e[f])) {c = !0;break}c || (h.isInteger(a) || h.isDate(a) || b.isArray(a) || b.isPlainObject(a) && a.from && a.to) && e.push(a)}), e}, c.prototype.activate = function(a, c) {let d = this, e = d.item.disable, f = e.length;return c == 'flip' ? d.flipEnable() : c === !0 ? (d.flipEnable(1), e = []) : c === !1 ? (d.flipEnable(-1), e = []) : c.map(function(a) {let c, g, i, j;for (i = 0;f > i;i += 1) {if (g = e[i], d.isTimeExact(g, a)) {c = e[i] = null, j = !0;break} if (d.isTimeOverlap(g, a)) {b.isPlainObject(a) ? (a.inverted = !0, c = a) : b.isArray(a) ? (c = a, c[2] || c.push('inverted')) : h.isDate(a) && (c = [a.getFullYear(), a.getMonth(), a.getDate(), 'inverted']);break}} if (c) for (i = 0;f > i;i += 1) if (d.isTimeExact(e[i], a)) {e[i] = null;break} if (j) for (i = 0;f > i;i += 1) if (d.isTimeOverlap(e[i], a)) {e[i] = null;break}c && e.push(c)}), e.filter(function(a) {return a != null})}, c.prototype.i = function(a, b) {return h.isInteger(b) && b > 0 ? b : this.item.interval}, c.prototype.nodes = function(a) {let b = this, c = b.settings, d = b.item.select, e = b.item.highlight, f = b.item.view, g = b.item.disable;return h.node('ul', h.group({ min: b.item.min.pick, max: b.item.max.pick, i: b.item.interval, node: 'li', item: function(a) {a = b.create(a);let i = a.pick, j = d && d.pick == i, k = e && e.pick == i, l = g && b.disabled(a), m = h.trigger(b.formats.toString, b, [c.format, a]);return [h.trigger(b.formats.toString, b, [h.trigger(c.formatLabel, b, [a]) || c.format, a]), (function(a) {return j && a.push(c.klass.selected), k && a.push(c.klass.highlighted), f && f.pick == i && a.push(c.klass.viewset), l && a.push(c.klass.disabled), a.join(' ')}([c.klass.listItem])), 'data-pick=' + a.pick + ' ' + h.ariaAttr({ role: 'option', label: m, selected: j && b.$node.val() === m ? !0 : null, activedescendant: k ? !0 : null, disabled: l ? !0 : null })]} }) + h.node('li', h.node('button', c.clear, c.klass.buttonClear, 'type=button data-clear=1' + (a ? '' : ' disabled') + ' ' + h.ariaAttr({ controls: b.$node[0].id })), '', h.ariaAttr({ role: 'presentation' })), c.klass.list, h.ariaAttr({ role: 'listbox', controls: b.$node[0].id }))}, c.defaults = (function(a) {return { clear: 'Clear', format: 'h:i A', interval: 30, closeOnSelect: !0, closeOnClear: !0, klass: { picker: a + ' ' + a + '--time', holder: a + '__holder', list: a + '__list', listItem: a + '__list-item', disabled: a + '__list-item--disabled', selected: a + '__list-item--selected', highlighted: a + '__list-item--highlighted', viewset: a + '__list-item--viewset', now: a + '__list-item--now', buttonClear: a + '__button--clear' } }}(a.klasses().picker)), a.extend('pickatime', c)
}))

/**
 * Version: 1.0 Alpha-1
 * Build Date: 13-Nov-2007
 * Copyright (c) 2006-2007, Coolite Inc. (http://www.coolite.com/). All rights reserved.
 * License: Licensed under The MIT License. See license.txt and http://www.datejs.com/license/.
 * Website: http://www.datejs.com/ or http://www.coolite.com/datejs/
 */
Date.CultureInfo = { name: 'en-US', englishName: 'English (United States)', nativeName: 'English (United States)', dayNames: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'], abbreviatedDayNames: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'], shortestDayNames: ['Su', 'Mo', 'Tu', 'We', 'Th', 'Fr', 'Sa'], firstLetterDayNames: ['S', 'M', 'T', 'W', 'T', 'F', 'S'], monthNames: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'], abbreviatedMonthNames: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'], amDesignator: 'AM', pmDesignator: 'PM', firstDayOfWeek: 0, twoDigitYearMax: 2029, dateElementOrder: 'mdy', formatPatterns: { shortDate: 'M/d/yyyy', longDate: 'dddd, MMMM dd, yyyy', shortTime: 'h:mm tt', longTime: 'h:mm:ss tt', fullDateTime: 'dddd, MMMM dd, yyyy h:mm:ss tt', sortableDateTime: 'yyyy-MM-ddTHH:mm:ss', universalSortableDateTime: 'yyyy-MM-dd HH:mm:ssZ', rfc1123: 'ddd, dd MMM yyyy HH:mm:ss GMT', monthDay: 'MMMM dd', yearMonth: 'MMMM, yyyy' }, regexPatterns: { jan: /^jan(uary)?/i, feb: /^feb(ruary)?/i, mar: /^mar(ch)?/i, apr: /^apr(il)?/i, may: /^may/i, jun: /^jun(e)?/i, jul: /^jul(y)?/i, aug: /^aug(ust)?/i, sep: /^sep(t(ember)?)?/i, oct: /^oct(ober)?/i, nov: /^nov(ember)?/i, dec: /^dec(ember)?/i, sun: /^su(n(day)?)?/i, mon: /^mo(n(day)?)?/i, tue: /^tu(e(s(day)?)?)?/i, wed: /^we(d(nesday)?)?/i, thu: /^th(u(r(s(day)?)?)?)?/i, fri: /^fr(i(day)?)?/i, sat: /^sa(t(urday)?)?/i, future: /^next/i, past: /^last|past|prev(ious)?/i, add: /^(\+|after|from)/i, subtract: /^(\-|before|ago)/i, yesterday: /^yesterday/i, today: /^t(oday)?/i, tomorrow: /^tomorrow/i, now: /^n(ow)?/i, millisecond: /^ms|milli(second)?s?/i, second: /^sec(ond)?s?/i, minute: /^min(ute)?s?/i, hour: /^h(ou)?rs?/i, week: /^w(ee)?k/i, month: /^m(o(nth)?s?)?/i, day: /^d(ays?)?/i, year: /^y((ea)?rs?)?/i, shortMeridian: /^(a|p)/i, longMeridian: /^(a\.?m?\.?|p\.?m?\.?)/i, timezone: /^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt)/i, ordinalSuffix: /^\s*(st|nd|rd|th)/i, timeContext: /^\s*(\:|a|p)/i }, abbreviatedTimeZoneStandard: { GMT: '-000', EST: '-0400', CST: '-0500', MST: '-0600', PST: '-0700' }, abbreviatedTimeZoneDST: { GMT: '-000', EDT: '-0500', CDT: '-0600', MDT: '-0700', PDT: '-0800' } }
Date.getMonthNumberFromName = function(name) {
  let n = Date.CultureInfo.monthNames, m = Date.CultureInfo.abbreviatedMonthNames, s = name.toLowerCase();for (let i = 0;i < n.length;i++) {if (n[i].toLowerCase() == s || m[i].toLowerCase() == s) {return i}}
  return -1
};Date.getDayNumberFromName = function(name) {
  let n = Date.CultureInfo.dayNames, m = Date.CultureInfo.abbreviatedDayNames, o = Date.CultureInfo.shortestDayNames, s = name.toLowerCase();for (let i = 0;i < n.length;i++) {if (n[i].toLowerCase() == s || m[i].toLowerCase() == s) {return i}}
  return -1
};Date.isLeapYear = function(year) {return (((year % 4 === 0) && (year % 100 !== 0)) || (year % 400 === 0))};Date.getDaysInMonth = function(year, month) {return [31, (Date.isLeapYear(year) ? 29 : 28), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][month]};Date.getTimezoneOffset = function(s, dst) {return (dst || false) ? Date.CultureInfo.abbreviatedTimeZoneDST[s.toUpperCase()] : Date.CultureInfo.abbreviatedTimeZoneStandard[s.toUpperCase()]};Date.getTimezoneAbbreviation = function(offset, dst) {
  let n = (dst || false) ? Date.CultureInfo.abbreviatedTimeZoneDST : Date.CultureInfo.abbreviatedTimeZoneStandard, p;for (p in n) {if (n[p] === offset) {return p}}
  return null
};Date.prototype.clone = function() {return new Date(this.getTime())};Date.prototype.compareTo = function(date) {
  if (isNaN(this)) {throw new Error(this)}
  if (date instanceof Date && !isNaN(date)) {return (this > date) ? 1 : (this < date) ? -1 : 0} throw new TypeError(date)
};Date.prototype.equals = function(date) {return (this.compareTo(date) === 0)};Date.prototype.between = function(start, end) {let t = this.getTime();return t >= start.getTime() && t <= end.getTime()};Date.prototype.addMilliseconds = function(value) {this.setMilliseconds(this.getMilliseconds() + value);return this};Date.prototype.addSeconds = function(value) {return this.addMilliseconds(value * 1000)};Date.prototype.addMinutes = function(value) {return this.addMilliseconds(value * 60000)};Date.prototype.addHours = function(value) {return this.addMilliseconds(value * 3600000)};Date.prototype.addDays = function(value) {return this.addMilliseconds(value * 86400000)};Date.prototype.addWeeks = function(value) {return this.addMilliseconds(value * 604800000)};Date.prototype.addMonths = function(value) {let n = this.getDate();this.setDate(1);this.setMonth(this.getMonth() + value);this.setDate(Math.min(n, this.getDaysInMonth()));return this};Date.prototype.addYears = function(value) {return this.addMonths(value * 12)};Date.prototype.add = function(config) {
  if (typeof config == 'number') {this._orient = config;return this}
  let x = config;if (x.millisecond || x.milliseconds) {this.addMilliseconds(x.millisecond || x.milliseconds)}
  if (x.second || x.seconds) {this.addSeconds(x.second || x.seconds)}
  if (x.minute || x.minutes) {this.addMinutes(x.minute || x.minutes)}
  if (x.hour || x.hours) {this.addHours(x.hour || x.hours)}
  if (x.month || x.months) {this.addMonths(x.month || x.months)}
  if (x.year || x.years) {this.addYears(x.year || x.years)}
  if (x.day || x.days) {this.addDays(x.day || x.days)}
  return this
};Date._validate = function(value, min, max, name) {
  if (typeof value != 'number') {throw new TypeError(value + ' is not a Number.')} else if (value < min || value > max) {throw new RangeError(value + ' is not a valid value for ' + name + '.')}
  return true
};Date.validateMillisecond = function(n) {return Date._validate(n, 0, 999, 'milliseconds')};Date.validateSecond = function(n) {return Date._validate(n, 0, 59, 'seconds')};Date.validateMinute = function(n) {return Date._validate(n, 0, 59, 'minutes')};Date.validateHour = function(n) {return Date._validate(n, 0, 23, 'hours')};Date.validateDay = function(n, year, month) {return Date._validate(n, 1, Date.getDaysInMonth(year, month), 'days')};Date.validateMonth = function(n) {return Date._validate(n, 0, 11, 'months')};Date.validateYear = function(n) {return Date._validate(n, 1, 9999, 'seconds')};Date.prototype.set = function(config) {
  let x = config;if (!x.millisecond && x.millisecond !== 0) {x.millisecond = -1}
  if (!x.second && x.second !== 0) {x.second = -1}
  if (!x.minute && x.minute !== 0) {x.minute = -1}
  if (!x.hour && x.hour !== 0) {x.hour = -1}
  if (!x.day && x.day !== 0) {x.day = -1}
  if (!x.month && x.month !== 0) {x.month = -1}
  if (!x.year && x.year !== 0) {x.year = -1}
  if (x.millisecond != -1 && Date.validateMillisecond(x.millisecond)) {this.addMilliseconds(x.millisecond - this.getMilliseconds())}
  if (x.second != -1 && Date.validateSecond(x.second)) {this.addSeconds(x.second - this.getSeconds())}
  if (x.minute != -1 && Date.validateMinute(x.minute)) {this.addMinutes(x.minute - this.getMinutes())}
  if (x.hour != -1 && Date.validateHour(x.hour)) {this.addHours(x.hour - this.getHours())}
  if (x.month !== -1 && Date.validateMonth(x.month)) {this.addMonths(x.month - this.getMonth())}
  if (x.year != -1 && Date.validateYear(x.year)) {this.addYears(x.year - this.getFullYear())}
  if (x.day != -1 && Date.validateDay(x.day, this.getFullYear(), this.getMonth())) {this.addDays(x.day - this.getDate())}
  if (x.timezone) {this.setTimezone(x.timezone)}
  if (x.timezoneOffset) {this.setTimezoneOffset(x.timezoneOffset)}
  return this
};Date.prototype.clearTime = function() {this.setHours(0);this.setMinutes(0);this.setSeconds(0);this.setMilliseconds(0);return this};Date.prototype.isLeapYear = function() {let y = this.getFullYear();return (((y % 4 === 0) && (y % 100 !== 0)) || (y % 400 === 0))};Date.prototype.isWeekday = function() {return !(this.is().sat() || this.is().sun())};Date.prototype.getDaysInMonth = function() {return Date.getDaysInMonth(this.getFullYear(), this.getMonth())};Date.prototype.moveToFirstDayOfMonth = function() {return this.set({ day: 1 })};Date.prototype.moveToLastDayOfMonth = function() {return this.set({ day: this.getDaysInMonth() })};Date.prototype.moveToDayOfWeek = function(day, orient) {let diff = (day - this.getDay() + 7 * (orient || +1)) % 7;return this.addDays((diff === 0) ? diff += 7 * (orient || +1) : diff)};Date.prototype.moveToMonth = function(month, orient) {let diff = (month - this.getMonth() + 12 * (orient || +1)) % 12;return this.addMonths((diff === 0) ? diff += 12 * (orient || +1) : diff)};Date.prototype.getDayOfYear = function() {return Math.floor((this - new Date(this.getFullYear(), 0, 1)) / 86400000)};Date.prototype.getWeekOfYear = function(firstDayOfWeek) {
  let y = this.getFullYear(), m = this.getMonth(), d = this.getDate();let dow = firstDayOfWeek || Date.CultureInfo.firstDayOfWeek;let offset = 7 + 1 - new Date(y, 0, 1).getDay();if (offset == 8) {offset = 1}
  let daynum = ((Date.UTC(y, m, d, 0, 0, 0) - Date.UTC(y, 0, 1, 0, 0, 0)) / 86400000) + 1;let w = Math.floor((daynum - offset + 7) / 7);if (w === dow) {y--;let prevOffset = 7 + 1 - new Date(y, 0, 1).getDay();if (prevOffset == 2 || prevOffset == 8) {w = 53} else {w = 52}}
  return w
};Date.prototype.isDST = function() {console.log('isDST');return this.toString().match(/(E|C|M|P)(S|D)T/)[2] == 'D'};Date.prototype.getTimezone = function() {return Date.getTimezoneAbbreviation(this.getUTCOffset, this.isDST())};Date.prototype.setTimezoneOffset = function(s) {let here = this.getTimezoneOffset(), there = Number(s) * -6 / 10;this.addMinutes(there - here);return this};Date.prototype.setTimezone = function(s) {return this.setTimezoneOffset(Date.getTimezoneOffset(s))};Date.prototype.getUTCOffset = function() {let n = this.getTimezoneOffset() * -10 / 6, r;if (n < 0) {r = (n - 10000).toString();return r[0] + r.substr(2)}r = (n + 10000).toString();return '+' + r.substr(1)};Date.prototype.getDayName = function(abbrev) {return abbrev ? Date.CultureInfo.abbreviatedDayNames[this.getDay()] : Date.CultureInfo.dayNames[this.getDay()]};Date.prototype.getMonthName = function(abbrev) {return abbrev ? Date.CultureInfo.abbreviatedMonthNames[this.getMonth()] : Date.CultureInfo.monthNames[this.getMonth()]};Date.prototype._toString = Date.prototype.toString;Date.prototype.toString = function(format) {
  let self = this;let p = function p(s) {return (s.toString().length == 1) ? '0' + s : s};return format ? format.replace(/dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?/g, function(format) {
    switch (format) {
      case 'hh':return p(self.getHours() < 13 ? self.getHours() : (self.getHours() - 12));case 'h':return self.getHours() < 13 ? self.getHours() : (self.getHours() - 12);case 'HH':return p(self.getHours());case 'H':return self.getHours();case 'mm':return p(self.getMinutes());case 'm':return self.getMinutes();case 'ss':return p(self.getSeconds());case 's':return self.getSeconds();case 'yyyy':return self.getFullYear();case 'yy':return self.getFullYear().toString()
        .substring(2, 4);case 'dddd':return self.getDayName();case 'ddd':return self.getDayName(true);case 'dd':return p(self.getDate());case 'd':return self.getDate().toString();case 'MMMM':return self.getMonthName();case 'MMM':return self.getMonthName(true);case 'MM':return p((self.getMonth() + 1));case 'M':return self.getMonth() + 1;case 't':return self.getHours() < 12 ? Date.CultureInfo.amDesignator.substring(0, 1) : Date.CultureInfo.pmDesignator.substring(0, 1);case 'tt':return self.getHours() < 12 ? Date.CultureInfo.amDesignator : Date.CultureInfo.pmDesignator;case 'zzz':case 'zz':case 'z':return ''
    }
  }) : this._toString()
}
Date.now = function() {return new Date()};Date.today = function() {return Date.now().clearTime()};Date.prototype._orient = +1;Date.prototype.next = function() {this._orient = +1;return this};Date.prototype.last = Date.prototype.prev = Date.prototype.previous = function() {this._orient = -1;return this};Date.prototype._is = false;Date.prototype.is = function() {this._is = true;return this};Number.prototype._dateElement = 'day';Number.prototype.fromNow = function() {let c = {};c[this._dateElement] = this;return Date.now().add(c)};Number.prototype.ago = function() {let c = {};c[this._dateElement] = this * -1;return Date.now().add(c)};(function() {
  let $D = Date.prototype, $N = Number.prototype;let dx = ('sunday monday tuesday wednesday thursday friday saturday').split(/\s/), mx = ('january february march april may june july august september october november december').split(/\s/), px = ('Millisecond Second Minute Hour Day Week Month Year').split(/\s/), de;let df = function(n) {
    return function() {
      if (this._is) {this._is = false;return this.getDay() == n}
      return this.moveToDayOfWeek(n, this._orient)
    }
  };for (let i = 0;i < dx.length;i++) {$D[dx[i]] = $D[dx[i].substring(0, 3)] = df(i)}
  let mf = function(n) {
    return function() {
      if (this._is) {this._is = false;return this.getMonth() === n}
      return this.moveToMonth(n, this._orient)
    }
  };for (let j = 0;j < mx.length;j++) {$D[mx[j]] = $D[mx[j].substring(0, 3)] = mf(j)}
  let ef = function(j) {
    return function() {
      if (j.substring(j.length - 1) != 's') {j += 's'}
      return this['add' + j](this._orient)
    }
  };let nf = function(n) {return function() {this._dateElement = n;return this}};for (let k = 0;k < px.length;k++) {de = px[k].toLowerCase();$D[de] = $D[de + 's'] = ef(px[k]);$N[de] = $N[de + 's'] = nf(de)}
}());Date.prototype.toJSONString = function() {return this.toString('yyyy-MM-ddThh:mm:ssZ')};Date.prototype.toShortDateString = function() {return this.toString(Date.CultureInfo.formatPatterns.shortDatePattern)};Date.prototype.toLongDateString = function() {return this.toString(Date.CultureInfo.formatPatterns.longDatePattern)};Date.prototype.toShortTimeString = function() {return this.toString(Date.CultureInfo.formatPatterns.shortTimePattern)};Date.prototype.toLongTimeString = function() {return this.toString(Date.CultureInfo.formatPatterns.longTimePattern)};Date.prototype.getOrdinal = function() {switch (this.getDate()) {case 1:case 21:case 31:return 'st';case 2:case 22:return 'nd';case 3:case 23:return 'rd';default:return 'th'}};
(function() {
  Date.Parsing = { Exception: function(s) {this.message = 'Parse error at \'' + s.substring(0, 10) + ' ...\''} };let $P = Date.Parsing;var _ = $P.Operators = { rtoken: function(r) {return function(s) {let mx = s.match(r);if (mx) {return ([mx[0], s.substring(mx[0].length)])} throw new $P.Exception(s)}}, token: function(s) {return function(s) {return _.rtoken(new RegExp('^\s*' + s + '\s*'))(s)}}, stoken: function(s) {return _.rtoken(new RegExp('^' + s))}, until: function(p) {
    return function(s) {
      let qx = [], rx = null;while (s.length) {
        try {rx = p.call(this, s)} catch (e) {qx.push(rx[0]);s = rx[1];continue}
        break
      }
      return [qx, s]
    }
  }, many: function(p) {
    return function(s) {
      let rx = [], r = null;while (s.length) {
        try {r = p.call(this, s)} catch (e) {return [rx, s]}
        rx.push(r[0]);s = r[1]
      }
      return [rx, s]
    }
  }, optional: function(p) {
    return function(s) {
      let r = null;try {r = p.call(this, s)} catch (e) {return [null, s]}
      return [r[0], r[1]]
    }
  }, not: function(p) {
    return function(s) {
      try {p.call(this, s)} catch (e) {return [null, s]}
      throw new $P.Exception(s)
    }
  }, ignore: function(p) {return p ? function(s) {let r = null;r = p.call(this, s);return [null, r[1]]} : null}, product: function() {
    let px = arguments[0], qx = Array.prototype.slice.call(arguments, 1), rx = [];for (let i = 0;i < px.length;i++) {rx.push(_.each(px[i], qx))}
    return rx
  }, cache: function(rule) {
    let cache = {}, r = null;return function(s) {
      try {r = cache[s] = (cache[s] || rule.call(this, s))} catch (e) {r = cache[s] = e}
      if (r instanceof $P.Exception) {throw r} else {return r}
    }
  }, any: function() {
    let px = arguments;return function(s) {
      let r = null;for (let i = 0;i < px.length;i++) {
        if (px[i] == null) {continue}
        try {r = (px[i].call(this, s))} catch (e) {r = null}
        if (r) {return r}
      }
      throw new $P.Exception(s)
    }
  }, each: function() {
    let px = arguments;return function(s) {
      let rx = [], r = null;for (let i = 0;i < px.length;i++) {
        if (px[i] == null) {continue}
        try {r = (px[i].call(this, s))} catch (e) {throw new $P.Exception(s)}
        rx.push(r[0]);s = r[1]
      }
      return [rx, s]
    }
  }, all: function() {var px = arguments, _ = _;return _.each(_.optional(px))}, sequence: function(px, d, c) {
    d = d || _.rtoken(/^\s*/);c = c || null;if (px.length == 1) {return px[0]}
    return function(s) {
      let r = null, q = null;let rx = [];for (let i = 0;i < px.length;i++) {
        try {r = px[i].call(this, s)} catch (e) {break}
        rx.push(r[0]);try {q = d.call(this, r[1])} catch (ex) {q = null;break}
        s = q[1]
      }
      if (!r) {throw new $P.Exception(s)}
      if (q) {throw new $P.Exception(q[1])}
      if (c) {try {r = c.call(this, r[1])} catch (ey) {throw new $P.Exception(r[1])}}
      return [rx, (r ? r[1] : s)]
    }
  }, between: function(d1, p, d2) {d2 = d2 || d1;let _fn = _.each(_.ignore(d1), p, _.ignore(d2));return function(s) {let rx = _fn.call(this, s);return [[rx[0][0], r[0][2]], rx[1]]}}, list: function(p, d, c) {d = d || _.rtoken(/^\s*/);c = c || null;return (p instanceof Array ? _.each(_.product(p.slice(0, -1), _.ignore(d)), p.slice(-1), _.ignore(c)) : _.each(_.many(_.each(p, _.ignore(d))), px, _.ignore(c)))}, set: function(px, d, c) {
    d = d || _.rtoken(/^\s*/);c = c || null;return function(s) {
      let r = null, p = null, q = null, rx = null, best = [[], s], last = false;for (let i = 0;i < px.length;i++) {
        q = null;p = null;r = null;last = (px.length == 1);try {r = px[i].call(this, s)} catch (e) {continue}
        rx = [[r[0]], r[1]];if (r[1].length > 0 && !last) {try {q = d.call(this, r[1])} catch (ex) {last = true}} else {last = true}
        if (!last && q[1].length === 0) {last = true}
        if (!last) {
          let qx = [];for (let j = 0;j < px.length;j++) {if (i != j) {qx.push(px[j])}}
          p = _.set(qx, d).call(this, q[1]);if (p[0].length > 0) {rx[0] = rx[0].concat(p[0]);rx[1] = p[1]}
        }
        if (rx[1].length < best[1].length) {best = rx}
        if (best[1].length === 0) {break}
      }
      if (best[0].length === 0) {return best}
      if (c) {
        try {q = c.call(this, best[1])} catch (ey) {throw new $P.Exception(best[1])}
        best[1] = q[1]
      }
      return best
    }
  }, forward: function(gr, fname) {return function(s) {return gr[fname].call(this, s)}}, replace: function(rule, repl) {return function(s) {let r = rule.call(this, s);return [repl, r[1]]}}, process: function(rule, fn) {return function(s) {let r = rule.call(this, s);return [fn.call(this, r[0]), r[1]]}}, min: function(min, rule) {
    return function(s) {
      let rx = rule.call(this, s);if (rx[0].length < min) {throw new $P.Exception(s)}
      return rx
    }
  } };let _generator = function(op) {
    return function() {
      let args = null, rx = [];if (arguments.length > 1) {args = Array.prototype.slice.call(arguments)} else if (arguments[0] instanceof Array) {args = arguments[0]}
      if (args) {for (let i = 0, px = args.shift();i < px.length;i++) {args.unshift(px[i]);rx.push(op.apply(null, args));args.shift();return rx}} else {return op.apply(null, arguments)}
    }
  };let gx = 'optional not ignore cache'.split(/\s/);for (let i = 0;i < gx.length;i++) {_[gx[i]] = _generator(_[gx[i]])}
  let _vector = function(op) {return function() {if (arguments[0] instanceof Array) {return op.apply(null, arguments[0])} return op.apply(null, arguments)}};let vx = 'each any all'.split(/\s/);for (let j = 0;j < vx.length;j++) {_[vx[j]] = _vector(_[vx[j]])}
}());(function() {
  var flattenAndCompact = function(ax) {
    let rx = [];for (let i = 0;i < ax.length;i++) {if (ax[i] instanceof Array) {rx = rx.concat(flattenAndCompact(ax[i]))} else {if (ax[i]) {rx.push(ax[i])}}}
    return rx
  };Date.Grammar = {};Date.Translator = { hour: function(s) {return function() {this.hour = Number(s)}}, minute: function(s) {return function() {this.minute = Number(s)}}, second: function(s) {return function() {this.second = Number(s)}}, meridian: function(s) {return function() {this.meridian = s.slice(0, 1).toLowerCase()}}, timezone: function(s) {return function() {let n = s.replace(/[^\d\+\-]/g, '');if (n.length) {this.timezoneOffset = Number(n)} else {this.timezone = s.toLowerCase()}}}, day: function(x) {let s = x[0];return function() {this.day = Number(s.match(/\d+/)[0])}}, month: function(s) {return function() {this.month = ((s.length == 3) ? Date.getMonthNumberFromName(s) : (Number(s) - 1))}}, year: function(s) {return function() {let n = Number(s);this.year = ((s.length > 2) ? n : (n + (((n + 2000) < Date.CultureInfo.twoDigitYearMax) ? 2000 : 1900)))}}, rday: function(s) {return function() {switch (s) {case 'yesterday':this.days = -1;break;case 'tomorrow':this.days = 1;break;case 'today':this.days = 0;break;case 'now':this.days = 0;this.now = true;break}}}, finishExact: function(x) {
    x = (x instanceof Array) ? x : [x];let now = new Date();this.year = now.getFullYear();this.month = now.getMonth();this.day = 1;this.hour = 0;this.minute = 0;this.second = 0;for (let i = 0;i < x.length;i++) {if (x[i]) {x[i].call(this)}}
    this.hour = (this.meridian == 'p' && this.hour < 13) ? this.hour + 12 : this.hour;if (this.day > Date.getDaysInMonth(this.year, this.month)) {throw new RangeError(this.day + ' is not a valid value for days.')}
    let r = new Date(this.year, this.month, this.day, this.hour, this.minute, this.second);if (this.timezone) {r.set({ timezone: this.timezone })} else if (this.timezoneOffset) {r.set({ timezoneOffset: this.timezoneOffset })}
    return r
  }, finish: function(x) {
    x = (x instanceof Array) ? flattenAndCompact(x) : [x];if (x.length === 0) {return null}
    for (let i = 0;i < x.length;i++) {if (typeof x[i] == 'function') {x[i].call(this)}}
    if (this.now) {return new Date()}
    let today = Date.today();let method = null;let expression = !!(this.days != null || this.orient || this.operator);if (expression) {
      let gap, mod, orient;orient = ((this.orient == 'past' || this.operator == 'subtract') ? -1 : 1);if (this.weekday) {this.unit = 'day';gap = (Date.getDayNumberFromName(this.weekday) - today.getDay());mod = 7;this.days = gap ? ((gap + (orient * mod)) % mod) : (orient * mod)}
      if (this.month) {this.unit = 'month';gap = (this.month - today.getMonth());mod = 12;this.months = gap ? ((gap + (orient * mod)) % mod) : (orient * mod);this.month = null}
      if (!this.unit) {this.unit = 'day'}
      if (this[this.unit + 's'] == null || this.operator != null) {
        if (!this.value) {this.value = 1}
        if (this.unit == 'week') {this.unit = 'day';this.value = this.value * 7}
        this[this.unit + 's'] = this.value * orient
      }
      return today.add(this)
    }
    if (this.meridian && this.hour) {this.hour = (this.hour < 13 && this.meridian == 'p') ? this.hour + 12 : this.hour}
    if (this.weekday && !this.day) {this.day = (today.addDays((Date.getDayNumberFromName(this.weekday) - today.getDay()))).getDate()}
    if (this.month && !this.day) {this.day = 1}
    return today.set(this)
  } };let _ = Date.Parsing.Operators, g = Date.Grammar, t = Date.Translator, _fn;g.datePartDelimiter = _.rtoken(/^([\s\-\.\,\/\x27]+)/);g.timePartDelimiter = _.stoken(':');g.whiteSpace = _.rtoken(/^\s*/);g.generalDelimiter = _.rtoken(/^(([\s\,]|at|on)+)/);let _C = {};g.ctoken = function(keys) {
    let fn = _C[keys];if (!fn) {
      let c = Date.CultureInfo.regexPatterns;let kx = keys.split(/\s+/), px = [];for (let i = 0;i < kx.length;i++) {px.push(_.replace(_.rtoken(c[kx[i]]), kx[i]))}
      fn = _C[keys] = _.any.apply(null, px)
    }
    return fn
  };g.ctoken2 = function(key) {return _.rtoken(Date.CultureInfo.regexPatterns[key])};g.h = _.cache(_.process(_.rtoken(/^(0[0-9]|1[0-2]|[1-9])/), t.hour));g.hh = _.cache(_.process(_.rtoken(/^(0[0-9]|1[0-2])/), t.hour));g.H = _.cache(_.process(_.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/), t.hour));g.HH = _.cache(_.process(_.rtoken(/^([0-1][0-9]|2[0-3])/), t.hour));g.m = _.cache(_.process(_.rtoken(/^([0-5][0-9]|[0-9])/), t.minute));g.mm = _.cache(_.process(_.rtoken(/^[0-5][0-9]/), t.minute));g.s = _.cache(_.process(_.rtoken(/^([0-5][0-9]|[0-9])/), t.second));g.ss = _.cache(_.process(_.rtoken(/^[0-5][0-9]/), t.second));g.hms = _.cache(_.sequence([g.H, g.mm, g.ss], g.timePartDelimiter));g.t = _.cache(_.process(g.ctoken2('shortMeridian'), t.meridian));g.tt = _.cache(_.process(g.ctoken2('longMeridian'), t.meridian));g.z = _.cache(_.process(_.rtoken(/^(\+|\-)?\s*\d\d\d\d?/), t.timezone));g.zz = _.cache(_.process(_.rtoken(/^(\+|\-)\s*\d\d\d\d/), t.timezone));g.zzz = _.cache(_.process(g.ctoken2('timezone'), t.timezone));g.timeSuffix = _.each(_.ignore(g.whiteSpace), _.set([g.tt, g.zzz]));g.time = _.each(_.optional(_.ignore(_.stoken('T'))), g.hms, g.timeSuffix);g.d = _.cache(_.process(_.each(_.rtoken(/^([0-2]\d|3[0-1]|\d)/), _.optional(g.ctoken2('ordinalSuffix'))), t.day));g.dd = _.cache(_.process(_.each(_.rtoken(/^([0-2]\d|3[0-1])/), _.optional(g.ctoken2('ordinalSuffix'))), t.day));g.ddd = g.dddd = _.cache(_.process(g.ctoken('sun mon tue wed thu fri sat'), function(s) {return function() {this.weekday = s}}));g.M = _.cache(_.process(_.rtoken(/^(1[0-2]|0\d|\d)/), t.month));g.MM = _.cache(_.process(_.rtoken(/^(1[0-2]|0\d)/), t.month));g.MMM = g.MMMM = _.cache(_.process(g.ctoken('jan feb mar apr may jun jul aug sep oct nov dec'), t.month));g.y = _.cache(_.process(_.rtoken(/^(\d\d?)/), t.year));g.yy = _.cache(_.process(_.rtoken(/^(\d\d)/), t.year));g.yyy = _.cache(_.process(_.rtoken(/^(\d\d?\d?\d?)/), t.year));g.yyyy = _.cache(_.process(_.rtoken(/^(\d\d\d\d)/), t.year));_fn = function() {return _.each(_.any.apply(null, arguments), _.not(g.ctoken2('timeContext')))};g.day = _fn(g.d, g.dd);g.month = _fn(g.M, g.MMM);g.year = _fn(g.yyyy, g.yy);g.orientation = _.process(g.ctoken('past future'), function(s) {return function() {this.orient = s}});g.operator = _.process(g.ctoken('add subtract'), function(s) {return function() {this.operator = s}});g.rday = _.process(g.ctoken('yesterday tomorrow today now'), t.rday);g.unit = _.process(g.ctoken('minute hour day week month year'), function(s) {return function() {this.unit = s}});g.value = _.process(_.rtoken(/^\d\d?(st|nd|rd|th)?/), function(s) {return function() {this.value = s.replace(/\D/g, '')}});g.expression = _.set([g.rday, g.operator, g.value, g.unit, g.orientation, g.ddd, g.MMM]);_fn = function() {return _.set(arguments, g.datePartDelimiter)};g.mdy = _fn(g.ddd, g.month, g.day, g.year);g.ymd = _fn(g.ddd, g.year, g.month, g.day);g.dmy = _fn(g.ddd, g.day, g.month, g.year);g.date = function(s) {return ((g[Date.CultureInfo.dateElementOrder] || g.mdy).call(this, s))};g.format = _.process(_.many(_.any(_.process(_.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/), function(fmt) {if (g[fmt]) {return g[fmt]} throw Date.Parsing.Exception(fmt)}), _.process(_.rtoken(/^[^dMyhHmstz]+/), function(s) {return _.ignore(_.stoken(s))}))), function(rules) {return _.process(_.each.apply(null, rules), t.finishExact)});let _F = {};let _get = function(f) {return _F[f] = (_F[f] || g.format(f)[0])};g.formats = function(fx) {
    if (fx instanceof Array) {
      let rx = [];for (let i = 0;i < fx.length;i++) {rx.push(_get(fx[i]))}
      return _.any.apply(null, rx)
    } return _get(fx)
  };g._formats = g.formats(['yyyy-MM-ddTHH:mm:ss', 'ddd, MMM dd, yyyy H:mm:ss tt', 'ddd MMM d yyyy HH:mm:ss zzz', 'd']);g._start = _.process(_.set([g.date, g.time, g.expression], g.generalDelimiter, g.whiteSpace), t.finish);g.start = function(s) {
    try {let r = g._formats.call({}, s);if (r[1].length === 0) {return r}} catch (e) {}
    return g._start.call({}, s)
  }
}());Date._parse = Date.parse;Date.parse = function(s) {
  let r = null;if (!s) {return null}
  try {r = Date.Grammar.start.call({}, s)} catch (e) {return null}
  return ((r[1].length === 0) ? r[0] : null)
};Date.getParseFunction = function(fx) {
  let fn = Date.Grammar.formats(fx);return function(s) {
    let r = null;try {r = fn.call({}, s)} catch (e) {return null}
    return ((r[1].length === 0) ? r[0] : null)
  }
};Date.parseExact = function(s, fx) {return Date.getParseFunction(fx)(s)}
