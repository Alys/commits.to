{
  "{\"filename\":\"/app/app.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "express",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "express"
              }
            ]
          },
          {
            "source": "express-handlebars",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "expressHandlebars"
              }
            ]
          },
          {
            "source": "chrono-node",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "chrono"
              }
            ]
          },
          {
            "source": "moment",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "moment"
              }
            ]
          },
          {
            "source": "node-sass-middleware",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "sassMiddleware"
              }
            ]
          },
          {
            "source": "./models/promise.js",
            "imported": [
              "Promise",
              "sequelize"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "Promise",
                "local": "Promise"
              },
              {
                "kind": "named",
                "imported": "sequelize",
                "local": "sequelize"
              }
            ]
          },
          {
            "source": "./data/seed.js",
            "imported": [
              "users",
              "promises"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "users",
                "local": "users"
              },
              {
                "kind": "named",
                "imported": "promises",
                "local": "promises"
              }
            ]
          },
          {
            "source": "./lib/latepenalty.js",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "computeCredit"
              }
            ]
          },
          {
            "source": "./lib/parse.js",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "parsePromise"
              }
            ]
          },
          {
            "source": "./lib/middleware.js",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "handlePromiseRequest"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/app/app.js",
      "filenameRelative": "/app/app.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "app.js",
      "sourceFileName": "app.js",
      "sourceRoot": "/app",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "app"
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _express = require('express');\n\nvar _express2 = _interopRequireDefault(_express);\n\nvar _expressHandlebars = require('express-handlebars');\n\nvar _expressHandlebars2 = _interopRequireDefault(_expressHandlebars);\n\nvar _chronoNode = require('chrono-node');\n\nvar _chronoNode2 = _interopRequireDefault(_chronoNode);\n\nvar _moment = require('moment');\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _nodeSassMiddleware = require('node-sass-middleware');\n\nvar _nodeSassMiddleware2 = _interopRequireDefault(_nodeSassMiddleware);\n\nvar _promise = require('./models/promise.js');\n\nvar _seed = require('./data/seed.js');\n\nvar _latepenalty = require('./lib/latepenalty.js');\n\nvar _latepenalty2 = _interopRequireDefault(_latepenalty);\n\nvar _parse = require('./lib/parse.js');\n\nvar _parse2 = _interopRequireDefault(_parse);\n\nvar _middleware = require('./lib/middleware.js');\n\nvar _middleware2 = _interopRequireDefault(_middleware);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// --------------------------------- 80chars ---------------------------------->\n\nvar app = (0, _express2.default)(); // Sugar.js parses some things better\n\n\napp.use((0, _nodeSassMiddleware2.default)({\n  src: __dirname + '/public',\n  dest: '/tmp',\n  // debug: true,\n  force: true\n  //outputStyle: 'compressed',\n}));\n\napp.use(_express2.default.static('public'));\napp.use(_express2.default.static('tmp'));\n\napp.engine('handlebars', (0, _expressHandlebars2.default)({ defaultLayout: 'main' }));\napp.set('view engine', 'handlebars');\n\napp.listen(process.env.PORT);\n\n// Routes\n\napp.get(['/?', '/promises.to/?', '/commits.to/?'], function (req, resp) {\n  // no reason to care what actual domain is given in the urtext\n  var usersWithPromises = {};\n  _promise.Promise.findAll({\n    order: _promise.sequelize.literal('tini DESC'),\n    limit: 10\n  }).then(function (promises) {\n    console.log('all promises', promises);\n    resp.render('home', { domain: 'commits.to', promises: promises });\n    // create nested array of promises by user:\n    // proms.forEach(function(promise) { \n    //   usersWithPromises[promise.user] = usersWithPromises[promise.user] || []\n    //   usersWithPromises.push(promise.dataValues)\n    // });\n    // console.log('home with users', usersWithPromises)\n  });\n});\n\napp.get('/sign-up', function (req, resp) {\n  resp.render('signup');\n});\n\n// if a user visits bob.promises.to (or iwill.glitch.me/bob.promises.to) then\n// render the home view, but with only that user's promises\napp.get('/:user.([promises|commits]+\\.to+)', function (req, resp) {\n  var dbPromises = {};\n  _promise.Promise.findAll({\n    where: {\n      user: req.params.user\n    }\n  }).then(function (promises) {\n    resp.render('pages/account', { promises: promises, domain: 'commits.to', user: req.params.user });\n  });\n});\n\n// we want any actionable route to be handled by the middleware and for now we \n// probably don't want to let anyone just create promises with domains that \n// don't exist\n// FIXME: we should have a single configurable list of domains\n// TODO: this breaks if there are slashes in the date, i think\n// -chris: i just added the * before the ?, which globs everything together under params[1]\napp.get('/:user.([promises|commits]+\\.to+)/:promise?/:modifier?/:date*?', _middleware2.default);\n\n// Actions\n\n// FIXME refactor/secure this\napp.get('/promises/remove/:id', function (req, resp) {\n  console.log('remove', req.params);\n  _promise.Promise.destroy({\n    where: {\n      id: req.params.id\n    }\n  }).then(function (deletedRows) {\n    console.log('promise removed', deletedRows);\n    resp.redirect('/');\n  });\n});\n\n// Endpoints\n\napp.get('/promise/:udp/:urtx', function (req, resp) {\n  var urtx = req.originalUrl.substr(9);\n  _promise.Promise.findOne({ where: { urtx: urtx } }).then(function (promise) {\n    console.log('single promise', urtx, promise);\n    // resp.write(promise)\n    resp.json(promise);\n  });\n});\n\napp.get('/promises', function (req, resp) {\n  var dbPromises = {};\n  _promise.Promise.findAll({\n    order: _promise.sequelize.literal('tini DESC')\n  }).then(function (promises) {\n    // console.log('all promises', promises)\n    // create nested array of promises by user:\n    promises.forEach(function (promise) {\n      dbPromises[promise.user] = dbPromises[promise.user] || [];\n      dbPromises[promise.user].push(promise);\n    });\n    resp.json(dbPromises);\n  });\n});\n\napp.get('/promises/:user', function (req, resp) {\n  var dbPromises = {};\n  _promise.Promise.findAll({\n    where: {\n      user: req.params.user\n    }\n  }).then(function (promises) {\n    console.log('user promises', promises);\n    promises.forEach(function (promise) {\n      dbPromises[promise.user] = dbPromises[promise.user] || [];\n      dbPromises[promise.user].push(promise);\n    });\n    resp.json(dbPromises);\n  });\n});\n\n// Utils\n\napp.get('/reset', function (req, resp) {\n  setup();\n  resp.redirect('/');\n});\n\n// removes all entries from the promises table\napp.get('/clear', function (req, resp) {\n  _promise.Promise.destroy({ where: {} });\n  resp.redirect('/');\n});\n\n// utility to populate table with hardcoded promises above\nfunction setup() {\n  _promise.Promise.sync({ force: true }) // 'force: true' just drops the table if it exists\n  .then(function () {\n    // and creates a new one!\n    // Add the default promises to the database\n    for (var i = 0; i < _seed.promises.length; i++) {\n      _promise.Promise.create((0, _parse2.default)(_seed.promises[i]));\n    }\n  });\n}\n\n/*\nLittle picture: Why does this error handling code not run when I surf to \na bad URL like iwill.glitch.me/foo%bar\n\nBigger picture: We're making an app that needs to process any URL the user may \nthrow at it. I need the server to get the exact URL the way the user sees it in \nthe browser. That's going to be especially tricky for things like '#' characters\nbut right now I'm just trying to figure out the case of arbitrary '%' characters\nthat may not correspond to proper %-encodings.\n\nI'm thinking like a catchall error-handling route that no matter what weird\nencoding or whatever error is thrown I can still have the code here do something\nwith the URL as the user typed it.\n\nFor now we're just dropping all this and having the app give the user an error\nif there are any weird characters in the URL.\n\napp.use(function(req, resp, next) {\n  var err = null\n  try {\n    console.log(\"TRYING\", req.path, req.url)\n    decodeURIComponent(req.path)\n  } catch(e) {\n    err = e\n  }\n  if (err) {\n    console.log(\"CAUGHT ERR:\", err, req.url)\n    return resp.redirect('/')\n  }\n  next();\n\n  //console.log(\"DEBUG USE1:\", req.originalUrl)\n  //resp.redirect('/')\n})\n*/\n\n/* \nlet test\n//test = chrono.parseDate(\"foo the bar by sep 15th noon\")\ntest = chrono.parseDate(\"Call_the_dentist by 2017-10-15 12pm\")\nconsole.log(`DEBUG: ${test} (unixtime = ${test.getTime()/1000}`)\nconsole.log(\"DEBUG: \", JSON.stringify(parsePromise(promises[2])))\n*/\n\n// --------------------------------- 80chars ---------------------------------->\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJhcHAiLCJ1c2UiLCJzcmMiLCJfX2Rpcm5hbWUiLCJkZXN0IiwiZm9yY2UiLCJzdGF0aWMiLCJlbmdpbmUiLCJkZWZhdWx0TGF5b3V0Iiwic2V0IiwibGlzdGVuIiwicHJvY2VzcyIsImVudiIsIlBPUlQiLCJnZXQiLCJyZXEiLCJyZXNwIiwidXNlcnNXaXRoUHJvbWlzZXMiLCJmaW5kQWxsIiwib3JkZXIiLCJsaXRlcmFsIiwibGltaXQiLCJ0aGVuIiwicHJvbWlzZXMiLCJjb25zb2xlIiwibG9nIiwicmVuZGVyIiwiZG9tYWluIiwiZGJQcm9taXNlcyIsIndoZXJlIiwidXNlciIsInBhcmFtcyIsImRlc3Ryb3kiLCJpZCIsImRlbGV0ZWRSb3dzIiwicmVkaXJlY3QiLCJ1cnR4Iiwib3JpZ2luYWxVcmwiLCJzdWJzdHIiLCJmaW5kT25lIiwicHJvbWlzZSIsImpzb24iLCJmb3JFYWNoIiwicHVzaCIsInNldHVwIiwic3luYyIsImkiLCJsZW5ndGgiLCJjcmVhdGUiXSwibWFwcGluZ3MiOiI7O0FBRUE7Ozs7QUFDQTs7OztBQUVBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUVBOztBQUVBOztBQUVBOzs7O0FBQ0E7Ozs7QUFFQTs7Ozs7O0FBaEJBOztBQWtCQSxJQUFJQSxNQUFNLHdCQUFWLEMsQ0FiaUM7OztBQWVqQ0EsSUFBSUMsR0FBSixDQUFRLGtDQUFlO0FBQ3JCQyxPQUFLQyxZQUFZLFNBREk7QUFFckJDLFFBQU0sTUFGZTtBQUdyQjtBQUNBQyxTQUFPO0FBQ1A7QUFMcUIsQ0FBZixDQUFSOztBQVFBTCxJQUFJQyxHQUFKLENBQVEsa0JBQVFLLE1BQVIsQ0FBZSxRQUFmLENBQVI7QUFDQU4sSUFBSUMsR0FBSixDQUFRLGtCQUFRSyxNQUFSLENBQWUsS0FBZixDQUFSOztBQUVBTixJQUFJTyxNQUFKLENBQVcsWUFBWCxFQUF5QixpQ0FBa0IsRUFBQ0MsZUFBZSxNQUFoQixFQUFsQixDQUF6QjtBQUNBUixJQUFJUyxHQUFK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QixtQkFBUWdCLE9BQVIsQ0FBZ0IsRUFBQ0gsT0FBTyxFQUFSLEVBQWhCO0FBQ0FiLE9BQUttQixRQUFMLENBQWMsR0FBZDtBQUNELENBSEQ7O0FBS0E7QUFDQSxTQUFTUyxLQUFULEdBQWlCO0FBQ2YsbUJBQVFDLElBQVIsQ0FBYSxFQUFDeEMsT0FBTyxJQUFSLEVBQWIsRUFBNEI7QUFBNUIsR0FDR2lCLElBREgsQ0FDUSxZQUFVO0FBQVU7QUFDeEI7QUFDQSxTQUFLLElBQUl3QixJQUFJLENBQWIsRUFBZ0JBLElBQUksZUFBU0MsTUFBN0IsRUFBcUNELEdBQXJDLEVBQTBDO0FBQ3hDLHVCQUFRRSxNQUFSLENBQWUscUJBQWEsZUFBU0YsQ0FBVCxDQUFiLENBQWY7QUFDRDtBQUNGLEdBTkg7QUFPRDs7QUFFRDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBb0NBOzs7Ozs7OztBQVFBIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZVJvb3QiOiIvYXBwIiwic291cmNlc0NvbnRlbnQiOlsiLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIDgwY2hhcnMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT5cblxuaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcydcbmltcG9ydCBleHByZXNzSGFuZGxlYmFycyBmcm9tICdleHByZXNzLWhhbmRsZWJhcnMnXG5cbmltcG9ydCBjaHJvbm8gZnJvbSAnY2hyb25vLW5vZGUnIC8vIFN1Z2FyLmpzIHBhcnNlcyBzb21lIHRoaW5ncyBiZXR0ZXJcbmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50J1xuaW1wb3J0IHNhc3NNaWRkbGV3YXJlIGZyb20gJ25vZGUtc2Fzcy1taWRkbGV3YXJlJ1xuXG5pbXBvcnQgeyBQcm9taXNlLCBzZXF1ZWxpemUgfSBmcm9tICcuL21vZGVscy9wcm9taXNlLmpzJ1xuXG5pbXBvcnQgeyB1c2VycywgcHJvbWlzZXMgfSBmcm9tICcuL2RhdGEvc2VlZC5qcydcblxuaW1wb3J0IGNvbXB1dGVDcmVkaXQgZnJvbSAnLi9saWIvbGF0ZXBlbmFsdHkuanMnXG5pbXBvcnQgcGFyc2VQcm9taXNlIGZyb20gJy4vbGliL3BhcnNlLmpzJ1xuXG5pbXBvcnQgaGFuZGxlUHJvbWlzZVJlcXVlc3QgZnJvbSAnLi9saWIvbWlkZGxld2FyZS5qcydcblxubGV0IGFwcCA9IGV4cHJlc3MoKVxuXG5hcHAudXNlKHNhc3NNaWRkbGV3YXJlKHtcbiAgc3JjOiBfX2Rpcm5hbWUgKyAnL3B1YmxpYycsXG4gIGRlc3Q6ICcvdG1wJyxcbiAgLy8gZGVidWc6IHRydWUsXG4gIGZvcmNlOiB0cnVlLFxuICAvL291dHB1dFN0eWxlOiAnY29tcHJlc3NlZCcsXG59KSlcblxuYXBwLnVzZShleHByZXNzLnN0YXRpYygncHVibGljJykpXG5hcHAudXNlKGV4cHJlc3Muc3RhdGljKCd0bXAnKSlcblxuYXBwLmVuZ2luZSgnaGFuZGxlYmFycycsIGV4cHJlc3NIYW5kbGViYXJzKHtkZWZhdWx0TGF5b3V0OiAnbWFpbid9KSlcbmFwcC5zZXQoJ3ZpZXcgZW5naW5lJywgJ2hhbmRsZWJhcnMnKVxuXG5hcHAubGlzdGVuKHByb2Nlc3MuZW52LlBPUlQpXG5cbi8vIFJvdXRlc1xuXG5hcHAuZ2V0KFtcbiAgJy8/JyxcbiAgJy9wcm9taXNlcy50by8/JyxcbiAgJy9jb21taXRzLnRvLz8nXG5dLCAocmVxLCByZXNwKSA9PiB7XG4gIC8vIG5vIHJlYXNvbiB0byBjYXJlIHdoYXQgYWN0dWFsIGRvbWFpbiBpcyBnaXZlbiBpbiB0aGUgdXJ0ZXh0XG4gICAgdmFyIHVzZXJzV2l0aFByb21pc2VzID0ge31cbiAgICBQcm9taXNlLmZpbmRBbGwoe1xuICAgICAgb3JkZXI6IHNlcXVlbGl6ZS5saXRlcmFsKCd0aW5pIERFU0MnKSxcbiAgICAgIGxpbWl0OiAxMFxuICAgIH0pLnRoZW4oZnVuY3Rpb24ocHJvbWlzZXMpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdhbGwgcHJvbWlzZXMnLCBwcm9taXNlcylcbiAgICAgIHJlc3AucmVuZGVyKCdob21lJywge2RvbWFpbjogJ2NvbW1pdHMudG8nLCBwcm9taXNlczogcHJvbWlzZXN9KVxuICAgICAgLy8gY3JlYXRlIG5lc3RlZCBhcnJheSBvZiBwcm9taXNlcyBieSB1c2VyOlxuICAgICAgLy8gcHJvbXMuZm9yRWFjaChmdW5jdGlvbihwcm9taXNlKSB7IFxuICAgICAgLy8gICB1c2Vyc1dpdGhQcm9taXNlc1twcm9taXNlLnVzZXJdID0gdXNlcnNXaXRoUHJvbWlzZXNbcHJvbWlzZS51c2VyXSB8fCBbXVxuICAgICAgLy8gICB1c2Vyc1dpdGhQcm9taXNlcy5wdXNoKHByb21pc2UuZGF0YVZhbHVlcylcbiAgICAgIC8vIH0pO1xuICAgICAgLy8gY29uc29sZS5sb2coJ2hvbWUgd2l0aCB1c2VycycsIHVzZXJzV2l0aFByb21pc2VzKVxuICAgIH0pXG59KVxuXG5hcHAuZ2V0KCcvc2lnbi11cCcsIChyZXEsIHJlc3ApID0+IHsgcmVzcC5yZW5kZXIoJ3NpZ251cCcpIH0pXG5cbi8vIGlmIGEgdXNlciB2aXNpdHMgYm9iLnByb21pc2VzLnRvIChvciBpd2lsbC5nbGl0Y2gubWUvYm9iLnByb21pc2VzLnRvKSB0aGVuXG4vLyByZW5kZXIgdGhlIGhvbWUgdmlldywgYnV0IHdpdGggb25seSB0aGF0IHVzZXIncyBwcm9taXNlc1xuYXBwLmdldCgnLzp1c2VyLihbcHJvbWlzZXN8Y29tbWl0c10rXFwudG8rKScsIChyZXEscmVzcCkgPT4ge1xuICB2YXIgZGJQcm9taXNlcyA9IHt9XG4gIFByb21pc2UuZmluZEFsbCh7XG4gICB3aGVyZToge1xuICAgICB1c2VyOiByZXEucGFyYW1zLnVzZXJcbiAgIH0sXG4gIH0pLnRoZW4oZnVuY3Rpb24ocHJvbWlzZXMpIHtcbiAgICByZXNwLnJlbmRlcigncGFnZXMvYWNjb3VudCcsIHsgcHJvbWlzZXM6IHByb21pc2VzLCBkb21haW46ICdjb21taXRzLnRvJywgdXNlcjogcmVxLnBhcmFtcy51c2VyIH0pXG4gIH0pXG59KVxuXG4vLyB3ZSB3YW50IGFueSBhY3Rpb25hYmxlIHJvdXRlIHRvIGJlIGhhbmRsZWQgYnkgdGhlIG1pZGRsZXdhcmUgYW5kIGZvciBub3cgd2UgXG4vLyBwcm9iYWJseSBkb24ndCB3YW50IHRvIGxldCBhbnlvbmUganVzdCBjcmVhdGUgcHJvbWlzZXMgd2l0aCBkb21haW5zIHRoYXQgXG4vLyBkb24ndCBleGlzdFxuLy8gRklYTUU6IHdlIHNob3VsZCBoYXZlIGEgc2luZ2xlIGNvbmZpZ3VyYWJsZSBsaXN0IG9mIGRvbWFpbnNcbi8vIFRPRE86IHRoaXMgYnJlYWtzIGlmIHRoZXJlIGFyZSBzbGFzaGVzIGluIHRoZSBkYXRlLCBpIHRoaW5rXG4vLyAtY2hyaXM6IGkganVzdCBhZGRlZCB0aGUgKiBiZWZvcmUgdGhlID8sIHdoaWNoIGdsb2JzIGV2ZXJ5dGhpbmcgdG9nZXRoZXIgdW5kZXIgcGFyYW1zWzFdXG5hcHAuZ2V0KCcvOnVzZXIuKFtwcm9taXNlc3xjb21taXRzXStcXC50byspLzpwcm9taXNlPy86bW9kaWZpZXI/LzpkYXRlKj8nLCBcbiAgICAgICAgaGFuZGxlUHJvbWlzZVJlcXVlc3QpXG5cblxuLy8gQWN0aW9uc1xuXG4vLyBGSVhNRSByZWZhY3Rvci9zZWN1cmUgdGhpc1xuYXBwLmdldCgnL3Byb21pc2VzL3JlbW92ZS86aWQnLCAocmVxLCByZXNwKSA9PiB7XG4gIGNvbnNvbGUubG9nKCdyZW1vdmUnLCByZXEucGFyYW1zKTtcbiAgUHJvbWlzZS5kZXN0cm95KHtcbiAgIHdoZXJlOiB7XG4gICAgIGlkOiByZXEucGFyYW1zLmlkXG4gICB9XG4gIH0pXG4gIC50aGVuKGZ1bmN0aW9uKGRlbGV0ZWRSb3dzKXtcbiAgICBjb25zb2xlLmxvZygncHJvbWlzZSByZW1vdmVkJywgZGVsZXRlZFJvd3MpO1xuICAgIHJlc3AucmVkaXJlY3QoJy8nKTtcbiAgfSlcbn0pXG5cbi8vIEVuZHBvaW50c1xuXG5hcHAuZ2V0KCcvcHJvbWlzZS86dWRwLzp1cnR4JywgZnVuY3Rpb24ocmVxLCByZXNwKSB7XG4gIGxldCB1cnR4ID0gcmVxLm9yaWdpbmFsVXJsLnN1YnN0cig5KVxuICBQcm9taXNlLmZpbmRPbmUoeyB3aGVyZToge3VydHh9fSlcbiAgICAudGhlbihmdW5jdGlvbihwcm9taXNlKSB7XG4gICAgICBjb25zb2xlLmxvZygnc2luZ2xlIHByb21pc2UnLCB1cnR4LCBwcm9taXNlKVxuICAgIC8vIHJlc3Aud3JpdGUocHJvbWlzZSlcbiAgICByZXNwLmpzb24ocHJvbWlzZSlcbiAgfSlcblxufSlcblxuYXBwLmdldCgnL3Byb21pc2VzJywgZnVuY3Rpb24ocmVxLCByZXNwKSB7XG4gIHZhciBkYlByb21pc2VzID0ge31cbiAgUHJvbWlzZS5maW5kQWxsKHtcbiAgICBvcmRlcjogc2VxdWVsaXplLmxpdGVyYWwoJ3RpbmkgREVTQycpXG4gIH0pLnRoZW4oZnVuY3Rpb24ocHJvbWlzZXMpIHtcbiAgICAvLyBjb25zb2xlLmxvZygnYWxsIHByb21pc2VzJywgcHJvbWlzZXMpXG4gICAgLy8gY3JlYXRlIG5lc3RlZCBhcnJheSBvZiBwcm9taXNlcyBieSB1c2VyOlxuICAgIHByb21pc2VzLmZvckVhY2goZnVuY3Rpb24ocHJvbWlzZSkgeyBcbiAgICAgIGRiUHJvbWlzZXNbcHJvbWlzZS51c2VyXSA9IGRiUHJvbWlzZXNbcHJvbWlzZS51c2VyXSB8fCBbXVxuICAgICAgZGJQcm9taXNlc1twcm9taXNlLnVzZXJdLnB1c2gocHJvbWlzZSlcbiAgICB9KTtcbiAgICByZXNwLmpzb24oZGJQcm9taXNlcyk7XG4gIH0pXG59KVxuXG5hcHAuZ2V0KCcvcHJvbWlzZXMvOnVzZXInLCBmdW5jdGlvbihyZXEsIHJlc3ApIHtcbiAgdmFyIGRiUHJvbWlzZXMgPSB7fTtcbiAgUHJvbWlzZS5maW5kQWxsKHtcbiAgIHdoZXJlOiB7XG4gICAgIHVzZXI6IHJlcS5wYXJhbXMudXNlclxuICAgfSxcbiAgfSkudGhlbihmdW5jdGlvbihwcm9taXNlcykge1xuICAgIGNvbnNvbGUubG9nKCd1c2VyIHByb21pc2VzJywgcHJvbWlzZXMpO1xuICAgIHByb21pc2VzLmZvckVhY2goZnVuY3Rpb24ocHJvbWlzZSkge1xuICAgICAgZGJQcm9taXNlc1twcm9taXNlLnVzZXJdID0gZGJQcm9taXNlc1twcm9taXNlLnVzZXJdIHx8IFtdXG4gICAgICBkYlByb21pc2VzW3Byb21pc2UudXNlcl0ucHVzaChwcm9taXNlKVxuICAgIH0pXG4gICAgcmVzcC5qc29uKGRiUHJvbWlzZXMpXG4gIH0pXG59KVxuXG5cbi8vIFV0aWxzXG5cbmFwcC5nZXQoJy9yZXNldCcsIChyZXEsIHJlc3ApID0+IHtcbiAgc2V0dXAoKVxuICByZXNwLnJlZGlyZWN0KCcvJylcbn0pXG5cbi8vIHJlbW92ZXMgYWxsIGVudHJpZXMgZnJvbSB0aGUgcHJvbWlzZXMgdGFibGVcbmFwcC5nZXQoJy9jbGVhcicsIChyZXEsIHJlc3ApID0+IHtcbiAgUHJvbWlzZS5kZXN0cm95KHt3aGVyZToge319KVxuICByZXNwLnJlZGlyZWN0KCcvJylcbn0pXG5cbi8vIHV0aWxpdHkgdG8gcG9wdWxhdGUgdGFibGUgd2l0aCBoYXJkY29kZWQgcHJvbWlzZXMgYWJvdmVcbmZ1bmN0aW9uIHNldHVwKCkgeyBcbiAgUHJvbWlzZS5zeW5jKHtmb3JjZTogdHJ1ZX0pIC8vICdmb3JjZTogdHJ1ZScganVzdCBkcm9wcyB0aGUgdGFibGUgaWYgaXQgZXhpc3RzXG4gICAgLnRoZW4oZnVuY3Rpb24oKXsgICAgICAgICAvLyBhbmQgY3JlYXRlcyBhIG5ldyBvbmUhXG4gICAgICAvLyBBZGQgdGhlIGRlZmF1bHQgcHJvbWlzZXMgdG8gdGhlIGRhdGFiYXNlXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb21pc2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIFByb21pc2UuY3JlYXRlKHBhcnNlUHJvbWlzZShwcm9taXNlc1tpXSkpXG4gICAgICB9XG4gICAgfSlcbn1cblxuLypcbkxpdHRsZSBwaWN0dXJlOiBXaHkgZG9lcyB0aGlzIGVycm9yIGhhbmRsaW5nIGNvZGUgbm90IHJ1biB3aGVuIEkgc3VyZiB0byBcbmEgYmFkIFVSTCBsaWtlIGl3aWxsLmdsaXRjaC5tZS9mb28lYmFyXG5cbkJpZ2dlciBwaWN0dXJlOiBXZSdyZSBtYWtpbmcgYW4gYXBwIHRoYXQgbmVlZHMgdG8gcHJvY2VzcyBhbnkgVVJMIHRoZSB1c2VyIG1heSBcbnRocm93IGF0IGl0LiBJIG5lZWQgdGhlIHNlcnZlciB0byBnZXQgdGhlIGV4YWN0IFVSTCB0aGUgd2F5IHRoZSB1c2VyIHNlZXMgaXQgaW4gXG50aGUgYnJvd3Nlci4gVGhhdCdzIGdvaW5nIHRvIGJlIGVzcGVjaWFsbHkgdHJpY2t5IGZvciB0aGluZ3MgbGlrZSAnIycgY2hhcmFjdGVyc1xuYnV0IHJpZ2h0IG5vdyBJJ20ganVzdCB0cnlpbmcgdG8gZmlndXJlIG91dCB0aGUgY2FzZSBvZiBhcmJpdHJhcnkgJyUnIGNoYXJhY3RlcnNcbnRoYXQgbWF5IG5vdCBjb3JyZXNwb25kIHRvIHByb3BlciAlLWVuY29kaW5ncy5cblxuSSdtIHRoaW5raW5nIGxpa2UgYSBjYXRjaGFsbCBlcnJvci1oYW5kbGluZyByb3V0ZSB0aGF0IG5vIG1hdHRlciB3aGF0IHdlaXJkXG5lbmNvZGluZyBvciB3aGF0ZXZlciBlcnJvciBpcyB0aHJvd24gSSBjYW4gc3RpbGwgaGF2ZSB0aGUgY29kZSBoZXJlIGRvIHNvbWV0aGluZ1xud2l0aCB0aGUgVVJMIGFzIHRoZSB1c2VyIHR5cGVkIGl0LlxuXG5Gb3Igbm93IHdlJ3JlIGp1c3QgZHJvcHBpbmcgYWxsIHRoaXMgYW5kIGhhdmluZyB0aGUgYXBwIGdpdmUgdGhlIHVzZXIgYW4gZXJyb3JcbmlmIHRoZXJlIGFyZSBhbnkgd2VpcmQgY2hhcmFjdGVycyBpbiB0aGUgVVJMLlxuXG5hcHAudXNlKGZ1bmN0aW9uKHJlcSwgcmVzcCwgbmV4dCkge1xuICB2YXIgZXJyID0gbnVsbFxuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKFwiVFJZSU5HXCIsIHJlcS5wYXRoLCByZXEudXJsKVxuICAgIGRlY29kZVVSSUNvbXBvbmVudChyZXEucGF0aClcbiAgfSBjYXRjaChlKSB7XG4gICAgZXJyID0gZVxuICB9XG4gIGlmIChlcnIpIHtcbiAgICBjb25zb2xlLmxvZyhcIkNBVUdIVCBFUlI6XCIsIGVyciwgcmVxLnVybClcbiAgICByZXR1cm4gcmVzcC5yZWRpcmVjdCgnLycpXG4gIH1cbiAgbmV4dCgpO1xuXG4gIC8vY29uc29sZS5sb2coXCJERUJVRyBVU0UxOlwiLCByZXEub3JpZ2luYWxVcmwpXG4gIC8vcmVzcC5yZWRpcmVjdCgnLycpXG59KVxuKi9cblxuLyogXG5sZXQgdGVzdFxuLy90ZXN0ID0gY2hyb25vLnBhcnNlRGF0ZShcImZvbyB0aGUgYmFyIGJ5IHNlcCAxNXRoIG5vb25cIilcbnRlc3QgPSBjaHJvbm8ucGFyc2VEYXRlKFwiQ2FsbF90aGVfZGVudGlzdCBieSAyMDE3LTEwLTE1IDEycG1cIilcbmNvbnNvbGUubG9nKGBERUJVRzogJHt0ZXN0fSAodW5peHRpbWUgPSAke3Rlc3QuZ2V0VGltZSgpLzEwMDB9YClcbmNvbnNvbGUubG9nKFwiREVCVUc6IFwiLCBKU09OLnN0cmluZ2lmeShwYXJzZVByb21pc2UocHJvbWlzZXNbMl0pKSlcbiovXG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSA4MGNoYXJzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "app.js"
      ],
      "names": [
        "app",
        "use",
        "src",
        "__dirname",
        "dest",
        "force",
        "static",
        "engine",
        "defaultLayout",
        "set",
        "listen",
        "process",
        "env",
        "PORT",
        "get",
        "req",
        "resp",
        "usersWithPromises",
        "findAll",
        "order",
        "literal",
        "limit",
        "then",
        "promises",
        "console",
        "log",
        "render",
        "domain",
        "dbPromises",
        "where",
        "user",
        "params",
        "destroy",
        "id",
        "deletedRows",
        "redirect",
        "urtx",
        "originalUrl",
        "substr",
        "findOne",
        "promise",
        "json",
        "forEach",
        "push",
        "setup",
        "sync",
        "i",
        "length",
        "create"
      ],
      "mappings": "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",
      "file": "app.js",
      "sourceRoot": "/app",
      "sourcesContent": [
        "// --------------------------------- 80chars ---------------------------------->\n\nimport express from 'express'\nimport expressHandlebars from 'express-handlebars'\n\nimport chrono from 'chrono-node' // Sugar.js parses some things better\nimport moment from 'moment'\nimport sassMiddleware from 'node-sass-middleware'\n\nimport { Promise, sequelize } from './models/promise.js'\n\nimport { users, promises } from './data/seed.js'\n\nimport computeCredit from './lib/latepenalty.js'\nimport parsePromise from './lib/parse.js'\n\nimport handlePromiseRequest from './lib/middleware.js'\n\nlet app = express()\n\napp.use(sassMiddleware({\n  src: __dirname + '/public',\n  dest: '/tmp',\n  // debug: true,\n  force: true,\n  //outputStyle: 'compressed',\n}))\n\napp.use(express.static('public'))\napp.use(express.static('tmp'))\n\napp.engine('handlebars', expressHandlebars({defaultLayout: 'main'}))\napp.set('view engine', 'handlebars')\n\napp.listen(process.env.PORT)\n\n// Routes\n\napp.get([\n  '/?',\n  '/promises.to/?',\n  '/commits.to/?'\n], (req, resp) => {\n  // no reason to care what actual domain is given in the urtext\n    var usersWithPromises = {}\n    Promise.findAll({\n      order: sequelize.literal('tini DESC'),\n      limit: 10\n    }).then(function(promises) {\n      console.log('all promises', promises)\n      resp.render('home', {domain: 'commits.to', promises: promises})\n      // create nested array of promises by user:\n      // proms.forEach(function(promise) { \n      //   usersWithPromises[promise.user] = usersWithPromises[promise.user] || []\n      //   usersWithPromises.push(promise.dataValues)\n      // });\n      // console.log('home with users', usersWithPromises)\n    })\n})\n\napp.get('/sign-up', (req, resp) => { resp.render('signup') })\n\n// if a user visits bob.promises.to (or iwill.glitch.me/bob.promises.to) then\n// render the home view, but with only that user's promises\napp.get('/:user.([promises|commits]+\\.to+)', (req,resp) => {\n  var dbPromises = {}\n  Promise.findAll({\n   where: {\n     user: req.params.user\n   },\n  }).then(function(promises) {\n    resp.render('pages/account', { promises: promises, domain: 'commits.to', user: req.params.user })\n  })\n})\n\n// we want any actionable route to be handled by the middleware and for now we \n// probably don't want to let anyone just create promises with domains that \n// don't exist\n// FIXME: we should have a single configurable list of domains\n// TODO: this breaks if there are slashes in the date, i think\n// -chris: i just added the * before the ?, which globs everything together under params[1]\napp.get('/:user.([promises|commits]+\\.to+)/:promise?/:modifier?/:date*?', \n        handlePromiseRequest)\n\n\n// Actions\n\n// FIXME refactor/secure this\napp.get('/promises/remove/:id', (req, resp) => {\n  console.log('remove', req.params);\n  Promise.destroy({\n   where: {\n     id: req.params.id\n   }\n  })\n  .then(function(deletedRows){\n    console.log('promise removed', deletedRows);\n    resp.redirect('/');\n  })\n})\n\n// Endpoints\n\napp.get('/promise/:udp/:urtx', function(req, resp) {\n  let urtx = req.originalUrl.substr(9)\n  Promise.findOne({ where: {urtx}})\n    .then(function(promise) {\n      console.log('single promise', urtx, promise)\n    // resp.write(promise)\n    resp.json(promise)\n  })\n\n})\n\napp.get('/promises', function(req, resp) {\n  var dbPromises = {}\n  Promise.findAll({\n    order: sequelize.literal('tini DESC')\n  }).then(function(promises) {\n    // console.log('all promises', promises)\n    // create nested array of promises by user:\n    promises.forEach(function(promise) { \n      dbPromises[promise.user] = dbPromises[promise.user] || []\n      dbPromises[promise.user].push(promise)\n    });\n    resp.json(dbPromises);\n  })\n})\n\napp.get('/promises/:user', function(req, resp) {\n  var dbPromises = {};\n  Promise.findAll({\n   where: {\n     user: req.params.user\n   },\n  }).then(function(promises) {\n    console.log('user promises', promises);\n    promises.forEach(function(promise) {\n      dbPromises[promise.user] = dbPromises[promise.user] || []\n      dbPromises[promise.user].push(promise)\n    })\n    resp.json(dbPromises)\n  })\n})\n\n\n// Utils\n\napp.get('/reset', (req, resp) => {\n  setup()\n  resp.redirect('/')\n})\n\n// removes all entries from the promises table\napp.get('/clear', (req, resp) => {\n  Promise.destroy({where: {}})\n  resp.redirect('/')\n})\n\n// utility to populate table with hardcoded promises above\nfunction setup() { \n  Promise.sync({force: true}) // 'force: true' just drops the table if it exists\n    .then(function(){         // and creates a new one!\n      // Add the default promises to the database\n      for (var i = 0; i < promises.length; i++) {\n        Promise.create(parsePromise(promises[i]))\n      }\n    })\n}\n\n/*\nLittle picture: Why does this error handling code not run when I surf to \na bad URL like iwill.glitch.me/foo%bar\n\nBigger picture: We're making an app that needs to process any URL the user may \nthrow at it. I need the server to get the exact URL the way the user sees it in \nthe browser. That's going to be especially tricky for things like '#' characters\nbut right now I'm just trying to figure out the case of arbitrary '%' characters\nthat may not correspond to proper %-encodings.\n\nI'm thinking like a catchall error-handling route that no matter what weird\nencoding or whatever error is thrown I can still have the code here do something\nwith the URL as the user typed it.\n\nFor now we're just dropping all this and having the app give the user an error\nif there are any weird characters in the URL.\n\napp.use(function(req, resp, next) {\n  var err = null\n  try {\n    console.log(\"TRYING\", req.path, req.url)\n    decodeURIComponent(req.path)\n  } catch(e) {\n    err = e\n  }\n  if (err) {\n    console.log(\"CAUGHT ERR:\", err, req.url)\n    return resp.redirect('/')\n  }\n  next();\n\n  //console.log(\"DEBUG USE1:\", req.originalUrl)\n  //resp.redirect('/')\n})\n*/\n\n/* \nlet test\n//test = chrono.parseDate(\"foo the bar by sep 15th noon\")\ntest = chrono.parseDate(\"Call_the_dentist by 2017-10-15 12pm\")\nconsole.log(`DEBUG: ${test} (unixtime = ${test.getTime()/1000}`)\nconsole.log(\"DEBUG: \", JSON.stringify(parsePromise(promises[2])))\n*/\n\n// --------------------------------- 80chars ---------------------------------->\n"
      ]
    },
    "mtime": 1507285008400
  },
  "{\"filename\":\"/app/models/promise.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/models\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "sequelize",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Sequelize"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "Promise",
            "sequelize"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "Promise",
              "exported": "Promise"
            },
            {
              "kind": "local",
              "local": "sequelize",
              "exported": "sequelize"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/models/promise.js",
      "filenameRelative": "/app/models/promise.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "promise.js",
      "sourceFileName": "promise.js",
      "sourceRoot": "/app/models",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/models",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "promise"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.sequelize = exports.Promise = undefined;\n\nvar _sequelize = require('sequelize');\n\nvar _sequelize2 = _interopRequireDefault(_sequelize);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar sequelize, Promise;\n\n// set up a new database using database credentials set in .env\n// --------------------------------- 80chars ---------------------------------->\nexports.sequelize = sequelize = new _sequelize2.default('database', process.env.DB_USER, process.env.DB_PASS, {\n  host: '0.0.0.0',\n  dialect: 'sqlite',\n  pool: {\n    max: 5,\n    min: 0,\n    idle: 10000\n  },\n  // Security note: db is saved to `.data/database.sqlite` in local filesystem.\n  // Nothing in `.data` directory gets copied if someone remixes the project.\n  storage: '.data/database.sqlite'\n});\n\n// authenticate with the database\nsequelize.authenticate().then(function (err) {\n  console.log('Connection has been established successfully.');\n  // define a new table 'promises'\n  exports.Promise = Promise = sequelize.define('promises', {\n    urtx: { type: _sequelize2.default.STRING }, // urtext, including whole URL\n    user: { type: _sequelize2.default.STRING }, // who's making the promise\n    what: { type: _sequelize2.default.STRING }, // what's being promised\n    //whom: { type: Sequelize.STRING  }, // to whom are you promising\n    tini: { type: _sequelize2.default.INTEGER }, // unixtime that promise was made\n    tdue: { type: _sequelize2.default.STRING } // unixtime that the promise is due\n    //tmzn: { type: Sequelize.STRING  }, // timezone\n    //wtdid: { type: Sequelize.INTEGER }, // unixtime promise was fulfilled\n    //fill: { type: Sequelize.FLOAT   }, // fraction fulfilled\n    //void: { type: Sequelize.BOOLEAN }, // whether promise was voided\n    // text:   { type: Sequelize.STRING }, // this was just for testing\n  });\n  //setup()\n}).catch(function (err) {\n  console.log('Unable to connect to the database: ', err);\n});\n\nexports.Promise = Promise;\nexports.sequelize = sequelize;\n\n// DATABASE FIELDS:\n//   urtx -- urtext, ie, full original text the user typed to create the promise\n//   user -- who's making the promise\n//   what -- what's being promised\n//   whom -- to whom are you promising\n//   tini -- unixtime that the promise was made\n//   tdue -- unixtime that the promise is due\n//   tmzn -- timezone assumed for parsing the deadline\n//   tfin -- unixtime that the promise was fulfilled\n//   fill -- fraction fulfilled, default 0\n//   void -- true if the promise became unfulfillable or moot\n//   clix -- number of clicks a promise has gotten\n//   conf -- true when someone clicks the button to confirm the commitment\n//   audt -- audit trail of http header info for who confirmed it (or username)\n//   text -- optional additional notes or text or context for the promise\n// For example:\n//   urtx = \"bob.promises.to/foo_the_bar/by/noon_tomorrow\"\n//   user = \"bob\"\n//   what = \"foo the bar\"\n//   whom = null\n//   tini = [unixtime of first GET request of the promise's URL]\n//   tdue = [what \"noon tomorrow\" parsed to at time tini]\n//   tmzn = \"America/Los_Angeles\"\n//   tfin = [unixtime that the promise was fulfilled]\n//   fill = 0\n//   void = false\n//   clix = 0\n//   conf = false\n//   audt = \"MacOS/Chrome user in Portland OR\"\n//   text = \"promised in slack discussion about such-and-such\"\n\n// Other ideas for fields: \n// * information about the client that originally created the promise\n// * whether the promise was created by the actual user (if they were logged in \n//   and were the first to click on it) or by another logged-in user or by \n//   someone not logged in\n// * conf: maybe we create the promise whether or not anyone clicks the button \n//   to confirm it, in which case we store when it's actually been confirmed\n// * \n// --------------------------------- 80chars ---------------------------------->\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb21pc2UuanMiXSwibmFtZXMiOlsic2VxdWVsaXplIiwiUHJvbWlzZSIsInByb2Nlc3MiLCJlbnYiLCJEQl9VU0VSIiwiREJfUEFTUyIsImhvc3QiLCJkaWFsZWN0IiwicG9vbCIsIm1heCIsIm1pbiIsImlkbGUiLCJzdG9yYWdlIiwiYXV0aGVudGljYXRlIiwidGhlbiIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJkZWZpbmUiLCJ1cnR4IiwidHlwZSIsIlNUUklORyIsInVzZXIiLCJ3aGF0IiwidGluaSIsIklOVEVHRVIiLCJ0ZHVlIiwiY2F0Y2giXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFDQTs7Ozs7O0FBRUEsSUFBSUEsU0FBSixFQUFlQyxPQUFmOztBQUVBO0FBTEE7QUFNQSxRQXNDa0JELFNBdENsQixlQUFZLHdCQUFjLFVBQWQsRUFBMEJFLFFBQVFDLEdBQVIsQ0FBWUMsT0FBdEMsRUFDMEJGLFFBQVFDLEdBQVIsQ0FBWUUsT0FEdEMsRUFDK0M7QUFDekRDLFFBQU0sU0FEbUQ7QUFFekRDLFdBQVMsUUFGZ0Q7QUFHekRDLFFBQU07QUFDSkMsU0FBSyxDQUREO0FBRUpDLFNBQUssQ0FGRDtBQUdKQyxVQUFNO0FBSEYsR0FIbUQ7QUFRekQ7QUFDQTtBQUNBQyxXQUFTO0FBVmdELENBRC9DLENBQVo7O0FBY0E7QUFDQVosVUFBVWEsWUFBVixHQUNHQyxJQURILENBQ1EsVUFBU0MsR0FBVCxFQUFjO0FBQ2xCQyxVQUFRQyxHQUFSLENBQVksK0NBQVo7QUFDQTtBQUNBLFVBbUJLaEIsT0FuQkwsYUFBVUQsVUFBVWtCLE1BQVYsQ0FBaUIsVUFBakIsRUFBNkI7QUFDckNDLFVBQU0sRUFBRUMsTUFBTSxvQkFBVUMsTUFBbEIsRUFEK0IsRUFDRjtBQUNuQ0MsVUFBTSxFQUFFRixNQUFNLG9CQUFVQyxNQUFsQixFQUYrQixFQUVGO0FBQ25DRSxVQUFNLEVBQUVILE1BQU0sb0JBQVVDLE1BQWxCLEVBSCtCLEVBR0Y7QUFDbkM7QUFDQUcsVUFBTSxFQUFFSixNQUFNLG9CQUFVSyxPQUFsQixFQUwrQixFQUtGO0FBQ25DQyxVQUFNLEVBQUVOLE1BQU0sb0JBQVVDLE1BQWxCLEVBTitCLENBTUg7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVhxQyxHQUE3QixDQUFWO0FBYUE7QUFDRCxDQWxCSCxFQW1CR00sS0FuQkgsQ0FtQlMsVUFBVVosR0FBVixFQUFlO0FBQ3BCQyxVQUFRQyxHQUFSLENBQVkscUNBQVosRUFBbURGLEdBQW5EO0FBQ0QsQ0FyQkg7O1FBdUJTZCxPLEdBQUFBLE87UUFBU0QsUyxHQUFBQSxTOztBQUVsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6InByb21pc2UuanMiLCJzb3VyY2VSb290IjoiL2FwcC9tb2RlbHMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gODBjaGFycyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPlxuaW1wb3J0IFNlcXVlbGl6ZSBmcm9tICdzZXF1ZWxpemUnXG5cbnZhciBzZXF1ZWxpemUsIFByb21pc2VcblxuLy8gc2V0IHVwIGEgbmV3IGRhdGFiYXNlIHVzaW5nIGRhdGFiYXNlIGNyZWRlbnRpYWxzIHNldCBpbiAuZW52XG5zZXF1ZWxpemUgPSBuZXcgU2VxdWVsaXplKCdkYXRhYmFzZScsIHByb2Nlc3MuZW52LkRCX1VTRVIsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmVudi5EQl9QQVNTLCB7XG4gIGhvc3Q6ICcwLjAuMC4wJyxcbiAgZGlhbGVjdDogJ3NxbGl0ZScsXG4gIHBvb2w6IHtcbiAgICBtYXg6IDUsXG4gICAgbWluOiAwLFxuICAgIGlkbGU6IDEwMDAwLFxuICB9LFxuICAvLyBTZWN1cml0eSBub3RlOiBkYiBpcyBzYXZlZCB0byBgLmRhdGEvZGF0YWJhc2Uuc3FsaXRlYCBpbiBsb2NhbCBmaWxlc3lzdGVtLlxuICAvLyBOb3RoaW5nIGluIGAuZGF0YWAgZGlyZWN0b3J5IGdldHMgY29waWVkIGlmIHNvbWVvbmUgcmVtaXhlcyB0aGUgcHJvamVjdC5cbiAgc3RvcmFnZTogJy5kYXRhL2RhdGFiYXNlLnNxbGl0ZSdcbn0pO1xuXG4vLyBhdXRoZW50aWNhdGUgd2l0aCB0aGUgZGF0YWJhc2VcbnNlcXVlbGl6ZS5hdXRoZW50aWNhdGUoKVxuICAudGhlbihmdW5jdGlvbihlcnIpIHtcbiAgICBjb25zb2xlLmxvZygnQ29ubmVjdGlvbiBoYXMgYmVlbiBlc3RhYmxpc2hlZCBzdWNjZXNzZnVsbHkuJylcbiAgICAvLyBkZWZpbmUgYSBuZXcgdGFibGUgJ3Byb21pc2VzJ1xuICAgIFByb21pc2UgPSBzZXF1ZWxpemUuZGVmaW5lKCdwcm9taXNlcycsIHtcbiAgICAgIHVydHg6IHsgdHlwZTogU2VxdWVsaXplLlNUUklORyAgfSwgLy8gdXJ0ZXh0LCBpbmNsdWRpbmcgd2hvbGUgVVJMXG4gICAgICB1c2VyOiB7IHR5cGU6IFNlcXVlbGl6ZS5TVFJJTkcgIH0sIC8vIHdobydzIG1ha2luZyB0aGUgcHJvbWlzZVxuICAgICAgd2hhdDogeyB0eXBlOiBTZXF1ZWxpemUuU1RSSU5HICB9LCAvLyB3aGF0J3MgYmVpbmcgcHJvbWlzZWRcbiAgICAgIC8vd2hvbTogeyB0eXBlOiBTZXF1ZWxpemUuU1RSSU5HICB9LCAvLyB0byB3aG9tIGFyZSB5b3UgcHJvbWlzaW5nXG4gICAgICB0aW5pOiB7IHR5cGU6IFNlcXVlbGl6ZS5JTlRFR0VSIH0sIC8vIHVuaXh0aW1lIHRoYXQgcHJvbWlzZSB3YXMgbWFkZVxuICAgICAgdGR1ZTogeyB0eXBlOiBTZXF1ZWxpemUuU1RSSU5HIH0sIC8vIHVuaXh0aW1lIHRoYXQgdGhlIHByb21pc2UgaXMgZHVlXG4gICAgICAvL3Rtem46IHsgdHlwZTogU2VxdWVsaXplLlNUUklORyAgfSwgLy8gdGltZXpvbmVcbiAgICAgIC8vd3RkaWQ6IHsgdHlwZTogU2VxdWVsaXplLklOVEVHRVIgfSwgLy8gdW5peHRpbWUgcHJvbWlzZSB3YXMgZnVsZmlsbGVkXG4gICAgICAvL2ZpbGw6IHsgdHlwZTogU2VxdWVsaXplLkZMT0FUICAgfSwgLy8gZnJhY3Rpb24gZnVsZmlsbGVkXG4gICAgICAvL3ZvaWQ6IHsgdHlwZTogU2VxdWVsaXplLkJPT0xFQU4gfSwgLy8gd2hldGhlciBwcm9taXNlIHdhcyB2b2lkZWRcbiAgICAgIC8vIHRleHQ6ICAgeyB0eXBlOiBTZXF1ZWxpemUuU1RSSU5HIH0sIC8vIHRoaXMgd2FzIGp1c3QgZm9yIHRlc3RpbmdcbiAgICB9KVxuICAgIC8vc2V0dXAoKVxuICB9KVxuICAuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgIGNvbnNvbGUubG9nKCdVbmFibGUgdG8gY29ubmVjdCB0byB0aGUgZGF0YWJhc2U6ICcsIGVycilcbiAgfSlcblxuZXhwb3J0IHsgUHJvbWlzZSwgc2VxdWVsaXplIH1cblxuLy8gREFUQUJBU0UgRklFTERTOlxuLy8gICB1cnR4IC0tIHVydGV4dCwgaWUsIGZ1bGwgb3JpZ2luYWwgdGV4dCB0aGUgdXNlciB0eXBlZCB0byBjcmVhdGUgdGhlIHByb21pc2Vcbi8vICAgdXNlciAtLSB3aG8ncyBtYWtpbmcgdGhlIHByb21pc2Vcbi8vICAgd2hhdCAtLSB3aGF0J3MgYmVpbmcgcHJvbWlzZWRcbi8vICAgd2hvbSAtLSB0byB3aG9tIGFyZSB5b3UgcHJvbWlzaW5nXG4vLyAgIHRpbmkgLS0gdW5peHRpbWUgdGhhdCB0aGUgcHJvbWlzZSB3YXMgbWFkZVxuLy8gICB0ZHVlIC0tIHVuaXh0aW1lIHRoYXQgdGhlIHByb21pc2UgaXMgZHVlXG4vLyAgIHRtem4gLS0gdGltZXpvbmUgYXNzdW1lZCBmb3IgcGFyc2luZyB0aGUgZGVhZGxpbmVcbi8vICAgdGZpbiAtLSB1bml4dGltZSB0aGF0IHRoZSBwcm9taXNlIHdhcyBmdWxmaWxsZWRcbi8vICAgZmlsbCAtLSBmcmFjdGlvbiBmdWxmaWxsZWQsIGRlZmF1bHQgMFxuLy8gICB2b2lkIC0tIHRydWUgaWYgdGhlIHByb21pc2UgYmVjYW1lIHVuZnVsZmlsbGFibGUgb3IgbW9vdFxuLy8gICBjbGl4IC0tIG51bWJlciBvZiBjbGlja3MgYSBwcm9taXNlIGhhcyBnb3R0ZW5cbi8vICAgY29uZiAtLSB0cnVlIHdoZW4gc29tZW9uZSBjbGlja3MgdGhlIGJ1dHRvbiB0byBjb25maXJtIHRoZSBjb21taXRtZW50XG4vLyAgIGF1ZHQgLS0gYXVkaXQgdHJhaWwgb2YgaHR0cCBoZWFkZXIgaW5mbyBmb3Igd2hvIGNvbmZpcm1lZCBpdCAob3IgdXNlcm5hbWUpXG4vLyAgIHRleHQgLS0gb3B0aW9uYWwgYWRkaXRpb25hbCBub3RlcyBvciB0ZXh0IG9yIGNvbnRleHQgZm9yIHRoZSBwcm9taXNlXG4vLyBGb3IgZXhhbXBsZTpcbi8vICAgdXJ0eCA9IFwiYm9iLnByb21pc2VzLnRvL2Zvb190aGVfYmFyL2J5L25vb25fdG9tb3Jyb3dcIlxuLy8gICB1c2VyID0gXCJib2JcIlxuLy8gICB3aGF0ID0gXCJmb28gdGhlIGJhclwiXG4vLyAgIHdob20gPSBudWxsXG4vLyAgIHRpbmkgPSBbdW5peHRpbWUgb2YgZmlyc3QgR0VUIHJlcXVlc3Qgb2YgdGhlIHByb21pc2UncyBVUkxdXG4vLyAgIHRkdWUgPSBbd2hhdCBcIm5vb24gdG9tb3Jyb3dcIiBwYXJzZWQgdG8gYXQgdGltZSB0aW5pXVxuLy8gICB0bXpuID0gXCJBbWVyaWNhL0xvc19BbmdlbGVzXCJcbi8vICAgdGZpbiA9IFt1bml4dGltZSB0aGF0IHRoZSBwcm9taXNlIHdhcyBmdWxmaWxsZWRdXG4vLyAgIGZpbGwgPSAwXG4vLyAgIHZvaWQgPSBmYWxzZVxuLy8gICBjbGl4ID0gMFxuLy8gICBjb25mID0gZmFsc2Vcbi8vICAgYXVkdCA9IFwiTWFjT1MvQ2hyb21lIHVzZXIgaW4gUG9ydGxhbmQgT1JcIlxuLy8gICB0ZXh0ID0gXCJwcm9taXNlZCBpbiBzbGFjayBkaXNjdXNzaW9uIGFib3V0IHN1Y2gtYW5kLXN1Y2hcIlxuXG4vLyBPdGhlciBpZGVhcyBmb3IgZmllbGRzOiBcbi8vICogaW5mb3JtYXRpb24gYWJvdXQgdGhlIGNsaWVudCB0aGF0IG9yaWdpbmFsbHkgY3JlYXRlZCB0aGUgcHJvbWlzZVxuLy8gKiB3aGV0aGVyIHRoZSBwcm9taXNlIHdhcyBjcmVhdGVkIGJ5IHRoZSBhY3R1YWwgdXNlciAoaWYgdGhleSB3ZXJlIGxvZ2dlZCBpbiBcbi8vICAgYW5kIHdlcmUgdGhlIGZpcnN0IHRvIGNsaWNrIG9uIGl0KSBvciBieSBhbm90aGVyIGxvZ2dlZC1pbiB1c2VyIG9yIGJ5IFxuLy8gICBzb21lb25lIG5vdCBsb2dnZWQgaW5cbi8vICogY29uZjogbWF5YmUgd2UgY3JlYXRlIHRoZSBwcm9taXNlIHdoZXRoZXIgb3Igbm90IGFueW9uZSBjbGlja3MgdGhlIGJ1dHRvbiBcbi8vICAgdG8gY29uZmlybSBpdCwgaW4gd2hpY2ggY2FzZSB3ZSBzdG9yZSB3aGVuIGl0J3MgYWN0dWFsbHkgYmVlbiBjb25maXJtZWRcbi8vICogXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gODBjaGFycyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPlxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "promise.js"
      ],
      "names": [
        "sequelize",
        "Promise",
        "process",
        "env",
        "DB_USER",
        "DB_PASS",
        "host",
        "dialect",
        "pool",
        "max",
        "min",
        "idle",
        "storage",
        "authenticate",
        "then",
        "err",
        "console",
        "log",
        "define",
        "urtx",
        "type",
        "STRING",
        "user",
        "what",
        "tini",
        "INTEGER",
        "tdue",
        "catch"
      ],
      "mappings": ";;;;;;;AACA;;;;;;AAEA,IAAIA,SAAJ,EAAeC,OAAf;;AAEA;AALA;AAMA,QAsCkBD,SAtClB,eAAY,wBAAc,UAAd,EAA0BE,QAAQC,GAAR,CAAYC,OAAtC,EAC0BF,QAAQC,GAAR,CAAYE,OADtC,EAC+C;AACzDC,QAAM,SADmD;AAEzDC,WAAS,QAFgD;AAGzDC,QAAM;AACJC,SAAK,CADD;AAEJC,SAAK,CAFD;AAGJC,UAAM;AAHF,GAHmD;AAQzD;AACA;AACAC,WAAS;AAVgD,CAD/C,CAAZ;;AAcA;AACAZ,UAAUa,YAAV,GACGC,IADH,CACQ,UAASC,GAAT,EAAc;AAClBC,UAAQC,GAAR,CAAY,+CAAZ;AACA;AACA,UAmBKhB,OAnBL,aAAUD,UAAUkB,MAAV,CAAiB,UAAjB,EAA6B;AACrCC,UAAM,EAAEC,MAAM,oBAAUC,MAAlB,EAD+B,EACF;AACnCC,UAAM,EAAEF,MAAM,oBAAUC,MAAlB,EAF+B,EAEF;AACnCE,UAAM,EAAEH,MAAM,oBAAUC,MAAlB,EAH+B,EAGF;AACnC;AACAG,UAAM,EAAEJ,MAAM,oBAAUK,OAAlB,EAL+B,EAKF;AACnCC,UAAM,EAAEN,MAAM,oBAAUC,MAAlB,EAN+B,CAMH;AAClC;AACA;AACA;AACA;AACA;AAXqC,GAA7B,CAAV;AAaA;AACD,CAlBH,EAmBGM,KAnBH,CAmBS,UAAUZ,GAAV,EAAe;AACpBC,UAAQC,GAAR,CAAY,qCAAZ,EAAmDF,GAAnD;AACD,CArBH;;QAuBSd,O,GAAAA,O;QAASD,S,GAAAA,S;;AAElB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA",
      "file": "promise.js",
      "sourceRoot": "/app/models",
      "sourcesContent": [
        "// --------------------------------- 80chars ---------------------------------->\nimport Sequelize from 'sequelize'\n\nvar sequelize, Promise\n\n// set up a new database using database credentials set in .env\nsequelize = new Sequelize('database', process.env.DB_USER, \n                                      process.env.DB_PASS, {\n  host: '0.0.0.0',\n  dialect: 'sqlite',\n  pool: {\n    max: 5,\n    min: 0,\n    idle: 10000,\n  },\n  // Security note: db is saved to `.data/database.sqlite` in local filesystem.\n  // Nothing in `.data` directory gets copied if someone remixes the project.\n  storage: '.data/database.sqlite'\n});\n\n// authenticate with the database\nsequelize.authenticate()\n  .then(function(err) {\n    console.log('Connection has been established successfully.')\n    // define a new table 'promises'\n    Promise = sequelize.define('promises', {\n      urtx: { type: Sequelize.STRING  }, // urtext, including whole URL\n      user: { type: Sequelize.STRING  }, // who's making the promise\n      what: { type: Sequelize.STRING  }, // what's being promised\n      //whom: { type: Sequelize.STRING  }, // to whom are you promising\n      tini: { type: Sequelize.INTEGER }, // unixtime that promise was made\n      tdue: { type: Sequelize.STRING }, // unixtime that the promise is due\n      //tmzn: { type: Sequelize.STRING  }, // timezone\n      //wtdid: { type: Sequelize.INTEGER }, // unixtime promise was fulfilled\n      //fill: { type: Sequelize.FLOAT   }, // fraction fulfilled\n      //void: { type: Sequelize.BOOLEAN }, // whether promise was voided\n      // text:   { type: Sequelize.STRING }, // this was just for testing\n    })\n    //setup()\n  })\n  .catch(function (err) {\n    console.log('Unable to connect to the database: ', err)\n  })\n\nexport { Promise, sequelize }\n\n// DATABASE FIELDS:\n//   urtx -- urtext, ie, full original text the user typed to create the promise\n//   user -- who's making the promise\n//   what -- what's being promised\n//   whom -- to whom are you promising\n//   tini -- unixtime that the promise was made\n//   tdue -- unixtime that the promise is due\n//   tmzn -- timezone assumed for parsing the deadline\n//   tfin -- unixtime that the promise was fulfilled\n//   fill -- fraction fulfilled, default 0\n//   void -- true if the promise became unfulfillable or moot\n//   clix -- number of clicks a promise has gotten\n//   conf -- true when someone clicks the button to confirm the commitment\n//   audt -- audit trail of http header info for who confirmed it (or username)\n//   text -- optional additional notes or text or context for the promise\n// For example:\n//   urtx = \"bob.promises.to/foo_the_bar/by/noon_tomorrow\"\n//   user = \"bob\"\n//   what = \"foo the bar\"\n//   whom = null\n//   tini = [unixtime of first GET request of the promise's URL]\n//   tdue = [what \"noon tomorrow\" parsed to at time tini]\n//   tmzn = \"America/Los_Angeles\"\n//   tfin = [unixtime that the promise was fulfilled]\n//   fill = 0\n//   void = false\n//   clix = 0\n//   conf = false\n//   audt = \"MacOS/Chrome user in Portland OR\"\n//   text = \"promised in slack discussion about such-and-such\"\n\n// Other ideas for fields: \n// * information about the client that originally created the promise\n// * whether the promise was created by the actual user (if they were logged in \n//   and were the first to click on it) or by another logged-in user or by \n//   someone not logged in\n// * conf: maybe we create the promise whether or not anyone clicks the button \n//   to confirm it, in which case we store when it's actually been confirmed\n// * \n// --------------------------------- 80chars ---------------------------------->\n"
      ]
    },
    "mtime": 1507277858578
  },
  "{\"filename\":\"/app/data/seed.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/data\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "users",
            "promises"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "users",
              "exported": "users"
            },
            {
              "kind": "local",
              "local": "promises",
              "exported": "promises"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/data/seed.js",
      "filenameRelative": "/app/data/seed.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "seed.js",
      "sourceFileName": "seed.js",
      "sourceRoot": "/app/data",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/data",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "seed"
    },
    "ignored": false,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar users = exports.users = [\n/* testing */\n\"alice\", \"bob\", \"carol\",\n/* initial co-conspirators */\n\"dreev\", \"sergii\", \"kim\", \"bee\", \"braden\",\n/* daily beemail */\n\"byorgey\", \"nick\", \"josh\", \"dehowell\", \"caillu\", \"mbork\", \"roy\", \"jennyli\", \"owen\",\n/* weekly beemail */\n\"samuel\", \"cole\", \"jessica\", \"steven\",\n/* contributors */\n\"chris\", \"stephen\",\n/* invitees */\n\"pierre\", \"chelsea\"];\n\n// dreev calls dibs on \"danny\", \"dan\", & \"d\" in case we implement aliases\n// usernames to disallow: \"www\", \"admin\", \n\n// Initial promise list hardcoded so don't have to worry about blowing db away\nvar promises = exports.promises = [\"alice.promises.to/File_the_TPS_report/by/noon_mon\", \"bob.promises.to/Send_vacation_photos/by/saturday\", \"carol.promises.to/Call_the_dentist/by/12am\", \"dreev.promises.to/show_sergii_this_doing_something_useful/by/3am\", // 9-10, done\n\"dreev.promises.to/show_bee_open_questions/by/10:30pm\", // 9-10, done\n\"braden.promises.to/help_with_javascript/by/5pm\", // 9-11\n\"dreev.promises.to/show_brennan_intro/by/10:50pm\", // 9-11, done\n\"dreev.promises.to/queue_tweet_etc_for_blog_post/by/2pm\", // 9-11, done\n\"dreev.promises.to/order_indian/by/5:30pm\", // 9-12, done\n\"dreev.commits.to/ask_bee_re_sunday_parkways\", // 9-13, done\n\"dreev.commits.to/follow_up_with_everyone_re_guest_blogging\", // 9-13\n\"josh.commits.to/get_realisies_running/by/september_30\", // 9-13\n\"braden.commits.to/outline_bite_counting_post/by/Sunday_11pm\", // 9-13\n\"dreev.commits.to/report_glitch_bug\", // 9-14, done\n\"dreev.commits.to/googledocify_intern_form/by/12pm\", // 9-14, done\n\"dreev.promises.to/test_penalty_func/by/saturday_noon\", // 9-14, done\n\"sergii.promises.to/work_on_points_2_to_4/by/next_monday\", // 9-14\n\"dreev.commits.to/meta_debrief_kim/by/midnight_friday\", // 9-14, done\n\"dreev.commits.to/ping_mirabai/by/sep_22\", // 9-14, done\n\"dreev.commits.to/send_ms_gross_email/by/sunday_11am\", // 9-14, done\n\"dreev.promises.to/ping_oli/by/nov_16\", // 9-15\n\"dreev.promises.to/ping_byorgey/by/dec_20\", // 9-15\n\"dreev.promises.to/labelzero/by/1am\", // 9-15, done\n\"chris.promises.to/follow_up_on_that_support_thread\", // 9-18\n\"bee.commits.to/new-family-photo-to-yoko/by/tomorrow-night\", // 9-18, done\n\"bee.commits.to/rest-of-paperwork-to-yoko-before-the-gym-tomorrow\", // 9-18, done 2 hours late\n\"dreev.promises.to/debug_capitalization/by/tomorrow\", // 9-18, done 23.4 hours late\n\"bee.commits.to/email-sleep-as-android-for-specifics-about-sleep-length-measurement\", // 9-19\n\"jessica.commits.to/let_bob_know_re_meeting/by/tomorrow_5pm\", // 9-19\n\"samuel.commits.to/finish_ch_23_problem_set/by/today_6_pm\", // 9-19\n\"dreev.promises.to/intern_disc/by/wed\", // 9-19, done\n\"kim.promises.to/email_argue_summary/by/fri\", // 9-19\n\"dreev.commits.to/clear_bogus_commit_for_nick/by/5_minutes_from_now\", // 9-19, done\n\"kim.promises.to/reflect_Respond_anxiety_spiral_Assist/by/sat\", // 9-19\n\"dreev.commits.to/schedule-k_tax_thing/by/5pm\", // 9-19, done\n\"dreev.promises.to/set_up_mom_on_wordfeud/by/tomorrow\", // 9-20, done/void\n\"dreev.promises.to/reply_to_use_case_email/by/midnight\", // 9-20, done\n\"kim.promises.to/consider_all_weekend_social_options/by/fri/10pm\", // 9-20\n\"kim.promises.to/submit_conclusion_email/by/10/16\", // 9-21\n\"kim.promises.to/complete_type_1_essay/by/10/1\", // 9-21\n\"kim.promises.to/inform_eve_plans/by/2\", // 9-21\n\"kim.promises.to/email_cynthia_charlap_tickets/by/9/22\", // 9-21\n\"kim.promises.to/schedule_attorney_meet/by/10/1\", // 9-21\n\"kim.promises.to/john_PAM_photos_ask/by/10/1\", // 9-21\n\"kim.promises.to/Nike_p5_email/by/10/1\", // 9-21\n\"kim.promises.to/intro_martin_marna/by/10/5\", // 9-21\n\"kim.promises.to/sbonomic_jitsjudgelist_doc/by/10/15\", // 9-21\n\"kim.promises.to/consider_all_weekend_social_options/by/fri/10pm\", // 9-21\n\"dreev.commits.to/dedup_the_iwills/by/nov\", // 9-22\n\"byorgey.promises.to/email_cut_property_summary/by/7pm\", // 9-22\n\"dreev.commits.to/copy_editing_pass_on_tao2/by/tmw_2pm\", // 9-22, done\n\"chris.promises.to/open_a_smoothie_shop/by/December\", // 9-25\n\"pierre.promises.to/water_the_office_plant/by/Friday\", // 9-25\n\"dreev.promises.to/hanna_reply/by/tonight\", // 9-26, done\n\"bee.promises.to/read-hannas-emails\", // 9-26, done\n\"bee.promises.to/reping-one-with-heart\", // 9-26\n\"bee.promises.to/fill-out-metromile-feedback\", // 9-26\n\"bee.promises.to/schedule-planning-with-cantor/by/friday-night\", // 9-26, done\n\"dreev.promises.to/ask_jana_about_blood_testers/by/dec_1\", // 9-26\n\"dreev.commits.to/take_copyediting_pass_on_micheles_draft/by/saturday\", // 9/27, done\n\"stephen.promises.to/decide_upon_late_october_trip/by/saturday\", // 9-27\n\"roy.promises.to/sign_up_for_app\", // 9-27\n\"jennyli.promises.to/water_the_plants/by/sunday\", // 9-27\n\"owen.promises.to/adjust-the-shed/by/tonight_7pm\", // 9-28\n\"cole.promises.to/find_a_rep_for_dining_vendors\", // 9-28\n\"chris.promises.to/learn-more-about-glitch/by/monday\", // 9-28\n\"chris.promises.to/learn-more-about-something-else/by/monday\", // 9-28\n\"dreev.promises.to/add_chelsea_to_commits_to/by/11am\", // 9-29, done\n\"bee.commits.to/put-away-camping-gear-this-weekend\", // 9-29\n\"owen.promises.to/research_and_pseudocode_calendar_integration/by/oct_6\", // 9-29\n\"caillu.commits.to/test_trying_out_time/by/2017-09-30_20:42\", // 9-30\n\"dreev.commits.to/let_yall_know_about_monitor/by/next_week\", // 10-02\n\"bee.commits.to/prettying_road_editor\", // 10-04\n\"kim.promises.to/talk_finances_w_D/by/10/30/2017\", // 10-05\n\"dreev.commits.to/give_marcin_status_update/by/oct-5-noon\", // 9-04, done 10.5 hours late\n\"dreev.commits.to/give_james_d_status_update/by/oct-5-noon\"];\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlZWQuanMiXSwibmFtZXMiOlsidXNlcnMiLCJwcm9taXNlcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBTyxJQUFNQSx3QkFBUTtBQUNuQjtBQUNBLE9BRm1CLEVBRVYsS0FGVSxFQUVILE9BRkc7QUFHbkI7QUFDQSxPQUptQixFQUlWLFFBSlUsRUFJQSxLQUpBLEVBSU8sS0FKUCxFQUljLFFBSmQ7QUFLbkI7QUFDQSxTQU5tQixFQU1SLE1BTlEsRUFNQSxNQU5BLEVBTVEsVUFOUixFQU1vQixRQU5wQixFQU04QixPQU45QixFQU11QyxLQU52QyxFQU04QyxTQU45QyxFQU9uQixNQVBtQjtBQVFuQjtBQUNBLFFBVG1CLEVBU1QsTUFUUyxFQVNELFNBVEMsRUFTVSxRQVRWO0FBVW5CO0FBQ0EsT0FYbUIsRUFXVixTQVhVO0FBWW5CO0FBQ0EsUUFibUIsRUFhVCxTQWJTLENBQWQ7O0FBZ0JQO0FBQ0E7O0FBRUE7QUFDTyxJQUFNQyw4QkFBVyxDQUN0QixtREFEc0IsRUFFdEIsa0RBRnNCLEVBR3RCLDRDQUhzQixFQUl0QixrRUFKc0IsRUFJOEM7QUFDcEUsc0RBTHNCLEVBS2tDO0FBQ3hELGdEQU5zQixFQU00QjtBQUNsRCxpREFQc0IsRUFPNkI7QUFDbkQsd0RBUnNCLEVBUW9DO0FBQzFELDBDQVRzQixFQVNzQjtBQUM1Qyw2Q0FWc0IsRUFVeUI7QUFDL0MsNERBWHNCLEVBV3dDO0FBQzlELHVEQVpzQixFQVltQztBQUN6RCw2REFic0IsRUFheUM7QUFDL0Qsb0NBZHNCLEVBY2dCO0FBQ3RDLG1EQWZzQixFQWUrQjtBQUNyRCxzREFoQnNCLEVBZ0JrQztBQUN4RCx5REFqQnNCLEVBaUJxQztBQUMzRCxzREFsQnNCLEVBa0JrQztBQUN4RCx5Q0FuQnNCLEVBbUJxQjtBQUMzQyxxREFwQnNCLEVBb0JpQztBQUN2RCxzQ0FyQnNCLEVBcUJrQjtBQUN4QywwQ0F0QnNCLEVBc0JzQjtBQUM1QyxvQ0F2QnNCLEVBdUJnQjtBQUN0QyxvREF4QnNCLEVBd0JnQztBQUN0RCwyREF6QnNCLEVBeUJ1QztBQUM3RCxrRUExQnNCLEVBMEI4QztBQUNwRSxvREEzQnNCLEVBMkJnQztBQUN0RCxvRkE1QnNCLEVBNEJnRTtBQUN0Riw0REE3QnNCLEVBNkJ3QztBQUM5RCwwREE5QnNCLEVBOEJzQztBQUM1RCxzQ0EvQnNCLEVBK0JrQjtBQUN4Qyw0Q0FoQ3NCLEVBZ0N3QjtBQUM5QyxvRUFqQ3NCLEVBaUNnRDtBQUN0RSw4REFsQ3NCLEVBa0MwQztBQUNoRSw4Q0FuQ3NCLEVBbUMwQjtBQUNoRCxzREFwQ3NCLEVBb0NrQztBQUN4RCx1REFyQ3NCLEVBcUNtQztBQUN6RCxpRUF0Q3NCLEVBc0M2QztBQUNuRSxrREF2Q3NCLEVBdUM4QjtBQUNwRCwrQ0F4Q3NCLEVBd0MyQjtBQUNqRCx1Q0F6Q3NCLEVBeUNtQjtBQUN6Qyx1REExQ3NCLEVBMENtQztBQUN6RCxnREEzQ3NCLEVBMkM0QjtBQUNsRCw2Q0E1Q3NCLEVBNEN5QjtBQUMvQyx1Q0E3Q3NCLEVBNkNtQjtBQUN6Qyw0Q0E5Q3NCLEVBOEN3QjtBQUM5QyxxREEvQ3NCLEVBK0NpQztBQUN2RCxpRUFoRHNCLEVBZ0Q2QztBQUNuRSwwQ0FqRHNCLEVBaURzQjtBQUM1Qyx1REFsRHNCLEVBa0RtQztBQUN6RCx1REFuRHNCLEVBbURtQztBQUN6RCxvREFwRHNCLEVBb0RnQztBQUN0RCxxREFyRHNCLEVBcURpQztBQUN2RCwwQ0F0RHNCLEVBc0RzQjtBQUM1QyxvQ0F2RHNCLEVBdURnQjtBQUN0Qyx1Q0F4RHNCLEVBd0RtQjtBQUN6Qyw2Q0F6RHNCLEVBeUR5QjtBQUMvQywrREExRHNCLEVBMEQyQztBQUNqRSx5REEzRHNCLEVBMkRxQztBQUMzRCxzRUE1RHNCLEVBNERrRDtBQUN4RSwrREE3RHNCLEVBNkQyQztBQUNqRSxpQ0E5RHNCLEVBOERhO0FBQ25DLGdEQS9Ec0IsRUErRDRCO0FBQ2xELGlEQWhFc0IsRUFnRTZCO0FBQ25ELGdEQWpFc0IsRUFpRTRCO0FBQ2xELHFEQWxFc0IsRUFrRWlDO0FBQ3ZELDZEQW5Fc0IsRUFtRXlDO0FBQy9ELHFEQXBFc0IsRUFvRWlDO0FBQ3ZELG1EQXJFc0IsRUFxRStCO0FBQ3JELHdFQXRFc0IsRUFzRW9EO0FBQzFFLDREQXZFc0IsRUF1RXdDO0FBQzlELDJEQXhFc0IsRUF3RXVDO0FBQzdELHNDQXpFc0IsRUF5RWtCO0FBQ3hDLGlEQTFFc0IsRUEwRTZCO0FBQ25ELDBEQTNFc0IsRUEyRXNDO0FBQzVELDJEQTVFc0IsQ0FBakIiLCJmaWxlIjoic2VlZC5qcyIsInNvdXJjZVJvb3QiOiIvYXBwL2RhdGEiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgdXNlcnMgPSBbIFxuICAvKiB0ZXN0aW5nICovIFxuICBcImFsaWNlXCIsIFwiYm9iXCIsIFwiY2Fyb2xcIixcbiAgLyogaW5pdGlhbCBjby1jb25zcGlyYXRvcnMgKi8gXG4gIFwiZHJlZXZcIiwgXCJzZXJnaWlcIiwgXCJraW1cIiwgXCJiZWVcIiwgXCJicmFkZW5cIiwgXG4gIC8qIGRhaWx5IGJlZW1haWwgKi8gXG4gIFwiYnlvcmdleVwiLCBcIm5pY2tcIiwgXCJqb3NoXCIsIFwiZGVob3dlbGxcIiwgXCJjYWlsbHVcIiwgXCJtYm9ya1wiLCBcInJveVwiLCBcImplbm55bGlcIiwgXG4gIFwib3dlblwiLFxuICAvKiB3ZWVrbHkgYmVlbWFpbCAqLyBcbiAgXCJzYW11ZWxcIiwgXCJjb2xlXCIsIFwiamVzc2ljYVwiLCBcInN0ZXZlblwiLFxuICAvKiBjb250cmlidXRvcnMgKi8gXG4gIFwiY2hyaXNcIiwgXCJzdGVwaGVuXCIsXG4gIC8qIGludml0ZWVzICovIFxuICBcInBpZXJyZVwiLCBcImNoZWxzZWFcIiwgXG5dXG5cbi8vIGRyZWV2IGNhbGxzIGRpYnMgb24gXCJkYW5ueVwiLCBcImRhblwiLCAmIFwiZFwiIGluIGNhc2Ugd2UgaW1wbGVtZW50IGFsaWFzZXNcbi8vIHVzZXJuYW1lcyB0byBkaXNhbGxvdzogXCJ3d3dcIiwgXCJhZG1pblwiLCBcblxuLy8gSW5pdGlhbCBwcm9taXNlIGxpc3QgaGFyZGNvZGVkIHNvIGRvbid0IGhhdmUgdG8gd29ycnkgYWJvdXQgYmxvd2luZyBkYiBhd2F5XG5leHBvcnQgY29uc3QgcHJvbWlzZXMgPSBbXG4gIFwiYWxpY2UucHJvbWlzZXMudG8vRmlsZV90aGVfVFBTX3JlcG9ydC9ieS9ub29uX21vblwiLFxuICBcImJvYi5wcm9taXNlcy50by9TZW5kX3ZhY2F0aW9uX3Bob3Rvcy9ieS9zYXR1cmRheVwiLFxuICBcImNhcm9sLnByb21pc2VzLnRvL0NhbGxfdGhlX2RlbnRpc3QvYnkvMTJhbVwiLFxuICBcImRyZWV2LnByb21pc2VzLnRvL3Nob3dfc2VyZ2lpX3RoaXNfZG9pbmdfc29tZXRoaW5nX3VzZWZ1bC9ieS8zYW1cIiwgLy8gOS0xMCwgZG9uZVxuICBcImRyZWV2LnByb21pc2VzLnRvL3Nob3dfYmVlX29wZW5fcXVlc3Rpb25zL2J5LzEwOjMwcG1cIiwgLy8gOS0xMCwgZG9uZVxuICBcImJyYWRlbi5wcm9taXNlcy50by9oZWxwX3dpdGhfamF2YXNjcmlwdC9ieS81cG1cIiwgLy8gOS0xMVxuICBcImRyZWV2LnByb21pc2VzLnRvL3Nob3dfYnJlbm5hbl9pbnRyby9ieS8xMDo1MHBtXCIsIC8vIDktMTEsIGRvbmVcbiAgXCJkcmVldi5wcm9taXNlcy50by9xdWV1ZV90d2VldF9ldGNfZm9yX2Jsb2dfcG9zdC9ieS8ycG1cIiwgLy8gOS0xMSwgZG9uZVxuICBcImRyZWV2LnByb21pc2VzLnRvL29yZGVyX2luZGlhbi9ieS81OjMwcG1cIiwgLy8gOS0xMiwgZG9uZVxuICBcImRyZWV2LmNvbW1pdHMudG8vYXNrX2JlZV9yZV9zdW5kYXlfcGFya3dheXNcIiwgLy8gOS0xMywgZG9uZVxuICBcImRyZWV2LmNvbW1pdHMudG8vZm9sbG93X3VwX3dpdGhfZXZlcnlvbmVfcmVfZ3Vlc3RfYmxvZ2dpbmdcIiwgLy8gOS0xM1xuICBcImpvc2guY29tbWl0cy50by9nZXRfcmVhbGlzaWVzX3J1bm5pbmcvYnkvc2VwdGVtYmVyXzMwXCIsIC8vIDktMTNcbiAgXCJicmFkZW4uY29tbWl0cy50by9vdXRsaW5lX2JpdGVfY291bnRpbmdfcG9zdC9ieS9TdW5kYXlfMTFwbVwiLCAvLyA5LTEzXG4gIFwiZHJlZXYuY29tbWl0cy50by9yZXBvcnRfZ2xpdGNoX2J1Z1wiLCAvLyA5LTE0LCBkb25lXG4gIFwiZHJlZXYuY29tbWl0cy50by9nb29nbGVkb2NpZnlfaW50ZXJuX2Zvcm0vYnkvMTJwbVwiLCAvLyA5LTE0LCBkb25lXG4gIFwiZHJlZXYucHJvbWlzZXMudG8vdGVzdF9wZW5hbHR5X2Z1bmMvYnkvc2F0dXJkYXlfbm9vblwiLCAvLyA5LTE0LCBkb25lXG4gIFwic2VyZ2lpLnByb21pc2VzLnRvL3dvcmtfb25fcG9pbnRzXzJfdG9fNC9ieS9uZXh0X21vbmRheVwiLCAvLyA5LTE0XG4gIFwiZHJlZXYuY29tbWl0cy50by9tZXRhX2RlYnJpZWZfa2ltL2J5L21pZG5pZ2h0X2ZyaWRheVwiLCAvLyA5LTE0LCBkb25lXG4gIFwiZHJlZXYuY29tbWl0cy50by9waW5nX21pcmFiYWkvYnkvc2VwXzIyXCIsIC8vIDktMTQsIGRvbmVcbiAgXCJkcmVldi5jb21taXRzLnRvL3NlbmRfbXNfZ3Jvc3NfZW1haWwvYnkvc3VuZGF5XzExYW1cIiwgLy8gOS0xNCwgZG9uZVxuICBcImRyZWV2LnByb21pc2VzLnRvL3Bpbmdfb2xpL2J5L25vdl8xNlwiLCAvLyA5LTE1XG4gIFwiZHJlZXYucHJvbWlzZXMudG8vcGluZ19ieW9yZ2V5L2J5L2RlY18yMFwiLCAvLyA5LTE1XG4gIFwiZHJlZXYucHJvbWlzZXMudG8vbGFiZWx6ZXJvL2J5LzFhbVwiLCAvLyA5LTE1LCBkb25lXG4gIFwiY2hyaXMucHJvbWlzZXMudG8vZm9sbG93X3VwX29uX3RoYXRfc3VwcG9ydF90aHJlYWRcIiwgLy8gOS0xOFxuICBcImJlZS5jb21taXRzLnRvL25ldy1mYW1pbHktcGhvdG8tdG8teW9rby9ieS90b21vcnJvdy1uaWdodFwiLCAvLyA5LTE4LCBkb25lXG4gIFwiYmVlLmNvbW1pdHMudG8vcmVzdC1vZi1wYXBlcndvcmstdG8teW9rby1iZWZvcmUtdGhlLWd5bS10b21vcnJvd1wiLCAvLyA5LTE4LCBkb25lIDIgaG91cnMgbGF0ZVxuICBcImRyZWV2LnByb21pc2VzLnRvL2RlYnVnX2NhcGl0YWxpemF0aW9uL2J5L3RvbW9ycm93XCIsIC8vIDktMTgsIGRvbmUgMjMuNCBob3VycyBsYXRlXG4gIFwiYmVlLmNvbW1pdHMudG8vZW1haWwtc2xlZXAtYXMtYW5kcm9pZC1mb3Itc3BlY2lmaWNzLWFib3V0LXNsZWVwLWxlbmd0aC1tZWFzdXJlbWVudFwiLCAvLyA5LTE5XG4gIFwiamVzc2ljYS5jb21taXRzLnRvL2xldF9ib2Jfa25vd19yZV9tZWV0aW5nL2J5L3RvbW9ycm93XzVwbVwiLCAvLyA5LTE5XG4gIFwic2FtdWVsLmNvbW1pdHMudG8vZmluaXNoX2NoXzIzX3Byb2JsZW1fc2V0L2J5L3RvZGF5XzZfcG1cIiwgLy8gOS0xOVxuICBcImRyZWV2LnByb21pc2VzLnRvL2ludGVybl9kaXNjL2J5L3dlZFwiLCAvLyA5LTE5LCBkb25lXG4gIFwia2ltLnByb21pc2VzLnRvL2VtYWlsX2FyZ3VlX3N1bW1hcnkvYnkvZnJpXCIsIC8vIDktMTlcbiAgXCJkcmVldi5jb21taXRzLnRvL2NsZWFyX2JvZ3VzX2NvbW1pdF9mb3Jfbmljay9ieS81X21pbnV0ZXNfZnJvbV9ub3dcIiwgLy8gOS0xOSwgZG9uZVxuICBcImtpbS5wcm9taXNlcy50by9yZWZsZWN0X1Jlc3BvbmRfYW54aWV0eV9zcGlyYWxfQXNzaXN0L2J5L3NhdFwiLCAvLyA5LTE5XG4gIFwiZHJlZXYuY29tbWl0cy50by9zY2hlZHVsZS1rX3RheF90aGluZy9ieS81cG1cIiwgLy8gOS0xOSwgZG9uZVxuICBcImRyZWV2LnByb21pc2VzLnRvL3NldF91cF9tb21fb25fd29yZGZldWQvYnkvdG9tb3Jyb3dcIiwgLy8gOS0yMCwgZG9uZS92b2lkXG4gIFwiZHJlZXYucHJvbWlzZXMudG8vcmVwbHlfdG9fdXNlX2Nhc2VfZW1haWwvYnkvbWlkbmlnaHRcIiwgLy8gOS0yMCwgZG9uZVxuICBcImtpbS5wcm9taXNlcy50by9jb25zaWRlcl9hbGxfd2Vla2VuZF9zb2NpYWxfb3B0aW9ucy9ieS9mcmkvMTBwbVwiLCAvLyA5LTIwXG4gIFwia2ltLnByb21pc2VzLnRvL3N1Ym1pdF9jb25jbHVzaW9uX2VtYWlsL2J5LzEwLzE2XCIsIC8vIDktMjFcbiAgXCJraW0ucHJvbWlzZXMudG8vY29tcGxldGVfdHlwZV8xX2Vzc2F5L2J5LzEwLzFcIiwgLy8gOS0yMVxuICBcImtpbS5wcm9taXNlcy50by9pbmZvcm1fZXZlX3BsYW5zL2J5LzJcIiwgLy8gOS0yMVxuICBcImtpbS5wcm9taXNlcy50by9lbWFpbF9jeW50aGlhX2NoYXJsYXBfdGlja2V0cy9ieS85LzIyXCIsIC8vIDktMjFcbiAgXCJraW0ucHJvbWlzZXMudG8vc2NoZWR1bGVfYXR0b3JuZXlfbWVldC9ieS8xMC8xXCIsIC8vIDktMjFcbiAgXCJraW0ucHJvbWlzZXMudG8vam9obl9QQU1fcGhvdG9zX2Fzay9ieS8xMC8xXCIsIC8vIDktMjFcbiAgXCJraW0ucHJvbWlzZXMudG8vTmlrZV9wNV9lbWFpbC9ieS8xMC8xXCIsIC8vIDktMjFcbiAgXCJraW0ucHJvbWlzZXMudG8vaW50cm9fbWFydGluX21hcm5hL2J5LzEwLzVcIiwgLy8gOS0yMVxuICBcImtpbS5wcm9taXNlcy50by9zYm9ub21pY19qaXRzanVkZ2VsaXN0X2RvYy9ieS8xMC8xNVwiLCAvLyA5LTIxXG4gIFwia2ltLnByb21pc2VzLnRvL2NvbnNpZGVyX2FsbF93ZWVrZW5kX3NvY2lhbF9vcHRpb25zL2J5L2ZyaS8xMHBtXCIsIC8vIDktMjFcbiAgXCJkcmVldi5jb21taXRzLnRvL2RlZHVwX3RoZV9pd2lsbHMvYnkvbm92XCIsIC8vIDktMjJcbiAgXCJieW9yZ2V5LnByb21pc2VzLnRvL2VtYWlsX2N1dF9wcm9wZXJ0eV9zdW1tYXJ5L2J5LzdwbVwiLCAvLyA5LTIyXG4gIFwiZHJlZXYuY29tbWl0cy50by9jb3B5X2VkaXRpbmdfcGFzc19vbl90YW8yL2J5L3Rtd18ycG1cIiwgLy8gOS0yMiwgZG9uZVxuICBcImNocmlzLnByb21pc2VzLnRvL29wZW5fYV9zbW9vdGhpZV9zaG9wL2J5L0RlY2VtYmVyXCIsIC8vIDktMjVcbiAgXCJwaWVycmUucHJvbWlzZXMudG8vd2F0ZXJfdGhlX29mZmljZV9wbGFudC9ieS9GcmlkYXlcIiwgLy8gOS0yNVxuICBcImRyZWV2LnByb21pc2VzLnRvL2hhbm5hX3JlcGx5L2J5L3RvbmlnaHRcIiwgLy8gOS0yNiwgZG9uZVxuICBcImJlZS5wcm9taXNlcy50by9yZWFkLWhhbm5hcy1lbWFpbHNcIiwgLy8gOS0yNiwgZG9uZVxuICBcImJlZS5wcm9taXNlcy50by9yZXBpbmctb25lLXdpdGgtaGVhcnRcIiwgLy8gOS0yNlxuICBcImJlZS5wcm9taXNlcy50by9maWxsLW91dC1tZXRyb21pbGUtZmVlZGJhY2tcIiwgLy8gOS0yNlxuICBcImJlZS5wcm9taXNlcy50by9zY2hlZHVsZS1wbGFubmluZy13aXRoLWNhbnRvci9ieS9mcmlkYXktbmlnaHRcIiwgLy8gOS0yNiwgZG9uZVxuICBcImRyZWV2LnByb21pc2VzLnRvL2Fza19qYW5hX2Fib3V0X2Jsb29kX3Rlc3RlcnMvYnkvZGVjXzFcIiwgLy8gOS0yNlxuICBcImRyZWV2LmNvbW1pdHMudG8vdGFrZV9jb3B5ZWRpdGluZ19wYXNzX29uX21pY2hlbGVzX2RyYWZ0L2J5L3NhdHVyZGF5XCIsIC8vIDkvMjcsIGRvbmVcbiAgXCJzdGVwaGVuLnByb21pc2VzLnRvL2RlY2lkZV91cG9uX2xhdGVfb2N0b2Jlcl90cmlwL2J5L3NhdHVyZGF5XCIsIC8vIDktMjdcbiAgXCJyb3kucHJvbWlzZXMudG8vc2lnbl91cF9mb3JfYXBwXCIsIC8vIDktMjdcbiAgXCJqZW5ueWxpLnByb21pc2VzLnRvL3dhdGVyX3RoZV9wbGFudHMvYnkvc3VuZGF5XCIsIC8vIDktMjdcbiAgXCJvd2VuLnByb21pc2VzLnRvL2FkanVzdC10aGUtc2hlZC9ieS90b25pZ2h0XzdwbVwiLCAvLyA5LTI4XG4gIFwiY29sZS5wcm9taXNlcy50by9maW5kX2FfcmVwX2Zvcl9kaW5pbmdfdmVuZG9yc1wiLCAvLyA5LTI4XG4gIFwiY2hyaXMucHJvbWlzZXMudG8vbGVhcm4tbW9yZS1hYm91dC1nbGl0Y2gvYnkvbW9uZGF5XCIsIC8vIDktMjhcbiAgXCJjaHJpcy5wcm9taXNlcy50by9sZWFybi1tb3JlLWFib3V0LXNvbWV0aGluZy1lbHNlL2J5L21vbmRheVwiLCAvLyA5LTI4XG4gIFwiZHJlZXYucHJvbWlzZXMudG8vYWRkX2NoZWxzZWFfdG9fY29tbWl0c190by9ieS8xMWFtXCIsIC8vIDktMjksIGRvbmVcbiAgXCJiZWUuY29tbWl0cy50by9wdXQtYXdheS1jYW1waW5nLWdlYXItdGhpcy13ZWVrZW5kXCIsIC8vIDktMjlcbiAgXCJvd2VuLnByb21pc2VzLnRvL3Jlc2VhcmNoX2FuZF9wc2V1ZG9jb2RlX2NhbGVuZGFyX2ludGVncmF0aW9uL2J5L29jdF82XCIsIC8vIDktMjlcbiAgXCJjYWlsbHUuY29tbWl0cy50by90ZXN0X3RyeWluZ19vdXRfdGltZS9ieS8yMDE3LTA5LTMwXzIwOjQyXCIsIC8vIDktMzBcbiAgXCJkcmVldi5jb21taXRzLnRvL2xldF95YWxsX2tub3dfYWJvdXRfbW9uaXRvci9ieS9uZXh0X3dlZWtcIiwgLy8gMTAtMDJcbiAgXCJiZWUuY29tbWl0cy50by9wcmV0dHlpbmdfcm9hZF9lZGl0b3JcIiwgLy8gMTAtMDRcbiAgXCJraW0ucHJvbWlzZXMudG8vdGFsa19maW5hbmNlc193X0QvYnkvMTAvMzAvMjAxN1wiLCAvLyAxMC0wNVxuICBcImRyZWV2LmNvbW1pdHMudG8vZ2l2ZV9tYXJjaW5fc3RhdHVzX3VwZGF0ZS9ieS9vY3QtNS1ub29uXCIsIC8vIDktMDQsIGRvbmUgMTAuNSBob3VycyBsYXRlXG4gIFwiZHJlZXYuY29tbWl0cy50by9naXZlX2phbWVzX2Rfc3RhdHVzX3VwZGF0ZS9ieS9vY3QtNS1ub29uXCIsIC8vIDktMDQsIGRvbmUgMTAuNSBob3VycyBsYXRlXG5dXG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "seed.js"
      ],
      "names": [
        "users",
        "promises"
      ],
      "mappings": ";;;;;AAAO,IAAMA,wBAAQ;AACnB;AACA,OAFmB,EAEV,KAFU,EAEH,OAFG;AAGnB;AACA,OAJmB,EAIV,QAJU,EAIA,KAJA,EAIO,KAJP,EAIc,QAJd;AAKnB;AACA,SANmB,EAMR,MANQ,EAMA,MANA,EAMQ,UANR,EAMoB,QANpB,EAM8B,OAN9B,EAMuC,KANvC,EAM8C,SAN9C,EAOnB,MAPmB;AAQnB;AACA,QATmB,EAST,MATS,EASD,SATC,EASU,QATV;AAUnB;AACA,OAXmB,EAWV,SAXU;AAYnB;AACA,QAbmB,EAaT,SAbS,CAAd;;AAgBP;AACA;;AAEA;AACO,IAAMC,8BAAW,CACtB,mDADsB,EAEtB,kDAFsB,EAGtB,4CAHsB,EAItB,kEAJsB,EAI8C;AACpE,sDALsB,EAKkC;AACxD,gDANsB,EAM4B;AAClD,iDAPsB,EAO6B;AACnD,wDARsB,EAQoC;AAC1D,0CATsB,EASsB;AAC5C,6CAVsB,EAUyB;AAC/C,4DAXsB,EAWwC;AAC9D,uDAZsB,EAYmC;AACzD,6DAbsB,EAayC;AAC/D,oCAdsB,EAcgB;AACtC,mDAfsB,EAe+B;AACrD,sDAhBsB,EAgBkC;AACxD,yDAjBsB,EAiBqC;AAC3D,sDAlBsB,EAkBkC;AACxD,yCAnBsB,EAmBqB;AAC3C,qDApBsB,EAoBiC;AACvD,sCArBsB,EAqBkB;AACxC,0CAtBsB,EAsBsB;AAC5C,oCAvBsB,EAuBgB;AACtC,oDAxBsB,EAwBgC;AACtD,2DAzBsB,EAyBuC;AAC7D,kEA1BsB,EA0B8C;AACpE,oDA3BsB,EA2BgC;AACtD,oFA5BsB,EA4BgE;AACtF,4DA7BsB,EA6BwC;AAC9D,0DA9BsB,EA8BsC;AAC5D,sCA/BsB,EA+BkB;AACxC,4CAhCsB,EAgCwB;AAC9C,oEAjCsB,EAiCgD;AACtE,8DAlCsB,EAkC0C;AAChE,8CAnCsB,EAmC0B;AAChD,sDApCsB,EAoCkC;AACxD,uDArCsB,EAqCmC;AACzD,iEAtCsB,EAsC6C;AACnE,kDAvCsB,EAuC8B;AACpD,+CAxCsB,EAwC2B;AACjD,uCAzCsB,EAyCmB;AACzC,uDA1CsB,EA0CmC;AACzD,gDA3CsB,EA2C4B;AAClD,6CA5CsB,EA4CyB;AAC/C,uCA7CsB,EA6CmB;AACzC,4CA9CsB,EA8CwB;AAC9C,qDA/CsB,EA+CiC;AACvD,iEAhDsB,EAgD6C;AACnE,0CAjDsB,EAiDsB;AAC5C,uDAlDsB,EAkDmC;AACzD,uDAnDsB,EAmDmC;AACzD,oDApDsB,EAoDgC;AACtD,qDArDsB,EAqDiC;AACvD,0CAtDsB,EAsDsB;AAC5C,oCAvDsB,EAuDgB;AACtC,uCAxDsB,EAwDmB;AACzC,6CAzDsB,EAyDyB;AAC/C,+DA1DsB,EA0D2C;AACjE,yDA3DsB,EA2DqC;AAC3D,sEA5DsB,EA4DkD;AACxE,+DA7DsB,EA6D2C;AACjE,iCA9DsB,EA8Da;AACnC,gDA/DsB,EA+D4B;AAClD,iDAhEsB,EAgE6B;AACnD,gDAjEsB,EAiE4B;AAClD,qDAlEsB,EAkEiC;AACvD,6DAnEsB,EAmEyC;AAC/D,qDApEsB,EAoEiC;AACvD,mDArEsB,EAqE+B;AACrD,wEAtEsB,EAsEoD;AAC1E,4DAvEsB,EAuEwC;AAC9D,2DAxEsB,EAwEuC;AAC7D,sCAzEsB,EAyEkB;AACxC,iDA1EsB,EA0E6B;AACnD,0DA3EsB,EA2EsC;AAC5D,2DA5EsB,CAAjB",
      "file": "seed.js",
      "sourceRoot": "/app/data",
      "sourcesContent": [
        "export const users = [ \n  /* testing */ \n  \"alice\", \"bob\", \"carol\",\n  /* initial co-conspirators */ \n  \"dreev\", \"sergii\", \"kim\", \"bee\", \"braden\", \n  /* daily beemail */ \n  \"byorgey\", \"nick\", \"josh\", \"dehowell\", \"caillu\", \"mbork\", \"roy\", \"jennyli\", \n  \"owen\",\n  /* weekly beemail */ \n  \"samuel\", \"cole\", \"jessica\", \"steven\",\n  /* contributors */ \n  \"chris\", \"stephen\",\n  /* invitees */ \n  \"pierre\", \"chelsea\", \n]\n\n// dreev calls dibs on \"danny\", \"dan\", & \"d\" in case we implement aliases\n// usernames to disallow: \"www\", \"admin\", \n\n// Initial promise list hardcoded so don't have to worry about blowing db away\nexport const promises = [\n  \"alice.promises.to/File_the_TPS_report/by/noon_mon\",\n  \"bob.promises.to/Send_vacation_photos/by/saturday\",\n  \"carol.promises.to/Call_the_dentist/by/12am\",\n  \"dreev.promises.to/show_sergii_this_doing_something_useful/by/3am\", // 9-10, done\n  \"dreev.promises.to/show_bee_open_questions/by/10:30pm\", // 9-10, done\n  \"braden.promises.to/help_with_javascript/by/5pm\", // 9-11\n  \"dreev.promises.to/show_brennan_intro/by/10:50pm\", // 9-11, done\n  \"dreev.promises.to/queue_tweet_etc_for_blog_post/by/2pm\", // 9-11, done\n  \"dreev.promises.to/order_indian/by/5:30pm\", // 9-12, done\n  \"dreev.commits.to/ask_bee_re_sunday_parkways\", // 9-13, done\n  \"dreev.commits.to/follow_up_with_everyone_re_guest_blogging\", // 9-13\n  \"josh.commits.to/get_realisies_running/by/september_30\", // 9-13\n  \"braden.commits.to/outline_bite_counting_post/by/Sunday_11pm\", // 9-13\n  \"dreev.commits.to/report_glitch_bug\", // 9-14, done\n  \"dreev.commits.to/googledocify_intern_form/by/12pm\", // 9-14, done\n  \"dreev.promises.to/test_penalty_func/by/saturday_noon\", // 9-14, done\n  \"sergii.promises.to/work_on_points_2_to_4/by/next_monday\", // 9-14\n  \"dreev.commits.to/meta_debrief_kim/by/midnight_friday\", // 9-14, done\n  \"dreev.commits.to/ping_mirabai/by/sep_22\", // 9-14, done\n  \"dreev.commits.to/send_ms_gross_email/by/sunday_11am\", // 9-14, done\n  \"dreev.promises.to/ping_oli/by/nov_16\", // 9-15\n  \"dreev.promises.to/ping_byorgey/by/dec_20\", // 9-15\n  \"dreev.promises.to/labelzero/by/1am\", // 9-15, done\n  \"chris.promises.to/follow_up_on_that_support_thread\", // 9-18\n  \"bee.commits.to/new-family-photo-to-yoko/by/tomorrow-night\", // 9-18, done\n  \"bee.commits.to/rest-of-paperwork-to-yoko-before-the-gym-tomorrow\", // 9-18, done 2 hours late\n  \"dreev.promises.to/debug_capitalization/by/tomorrow\", // 9-18, done 23.4 hours late\n  \"bee.commits.to/email-sleep-as-android-for-specifics-about-sleep-length-measurement\", // 9-19\n  \"jessica.commits.to/let_bob_know_re_meeting/by/tomorrow_5pm\", // 9-19\n  \"samuel.commits.to/finish_ch_23_problem_set/by/today_6_pm\", // 9-19\n  \"dreev.promises.to/intern_disc/by/wed\", // 9-19, done\n  \"kim.promises.to/email_argue_summary/by/fri\", // 9-19\n  \"dreev.commits.to/clear_bogus_commit_for_nick/by/5_minutes_from_now\", // 9-19, done\n  \"kim.promises.to/reflect_Respond_anxiety_spiral_Assist/by/sat\", // 9-19\n  \"dreev.commits.to/schedule-k_tax_thing/by/5pm\", // 9-19, done\n  \"dreev.promises.to/set_up_mom_on_wordfeud/by/tomorrow\", // 9-20, done/void\n  \"dreev.promises.to/reply_to_use_case_email/by/midnight\", // 9-20, done\n  \"kim.promises.to/consider_all_weekend_social_options/by/fri/10pm\", // 9-20\n  \"kim.promises.to/submit_conclusion_email/by/10/16\", // 9-21\n  \"kim.promises.to/complete_type_1_essay/by/10/1\", // 9-21\n  \"kim.promises.to/inform_eve_plans/by/2\", // 9-21\n  \"kim.promises.to/email_cynthia_charlap_tickets/by/9/22\", // 9-21\n  \"kim.promises.to/schedule_attorney_meet/by/10/1\", // 9-21\n  \"kim.promises.to/john_PAM_photos_ask/by/10/1\", // 9-21\n  \"kim.promises.to/Nike_p5_email/by/10/1\", // 9-21\n  \"kim.promises.to/intro_martin_marna/by/10/5\", // 9-21\n  \"kim.promises.to/sbonomic_jitsjudgelist_doc/by/10/15\", // 9-21\n  \"kim.promises.to/consider_all_weekend_social_options/by/fri/10pm\", // 9-21\n  \"dreev.commits.to/dedup_the_iwills/by/nov\", // 9-22\n  \"byorgey.promises.to/email_cut_property_summary/by/7pm\", // 9-22\n  \"dreev.commits.to/copy_editing_pass_on_tao2/by/tmw_2pm\", // 9-22, done\n  \"chris.promises.to/open_a_smoothie_shop/by/December\", // 9-25\n  \"pierre.promises.to/water_the_office_plant/by/Friday\", // 9-25\n  \"dreev.promises.to/hanna_reply/by/tonight\", // 9-26, done\n  \"bee.promises.to/read-hannas-emails\", // 9-26, done\n  \"bee.promises.to/reping-one-with-heart\", // 9-26\n  \"bee.promises.to/fill-out-metromile-feedback\", // 9-26\n  \"bee.promises.to/schedule-planning-with-cantor/by/friday-night\", // 9-26, done\n  \"dreev.promises.to/ask_jana_about_blood_testers/by/dec_1\", // 9-26\n  \"dreev.commits.to/take_copyediting_pass_on_micheles_draft/by/saturday\", // 9/27, done\n  \"stephen.promises.to/decide_upon_late_october_trip/by/saturday\", // 9-27\n  \"roy.promises.to/sign_up_for_app\", // 9-27\n  \"jennyli.promises.to/water_the_plants/by/sunday\", // 9-27\n  \"owen.promises.to/adjust-the-shed/by/tonight_7pm\", // 9-28\n  \"cole.promises.to/find_a_rep_for_dining_vendors\", // 9-28\n  \"chris.promises.to/learn-more-about-glitch/by/monday\", // 9-28\n  \"chris.promises.to/learn-more-about-something-else/by/monday\", // 9-28\n  \"dreev.promises.to/add_chelsea_to_commits_to/by/11am\", // 9-29, done\n  \"bee.commits.to/put-away-camping-gear-this-weekend\", // 9-29\n  \"owen.promises.to/research_and_pseudocode_calendar_integration/by/oct_6\", // 9-29\n  \"caillu.commits.to/test_trying_out_time/by/2017-09-30_20:42\", // 9-30\n  \"dreev.commits.to/let_yall_know_about_monitor/by/next_week\", // 10-02\n  \"bee.commits.to/prettying_road_editor\", // 10-04\n  \"kim.promises.to/talk_finances_w_D/by/10/30/2017\", // 10-05\n  \"dreev.commits.to/give_marcin_status_update/by/oct-5-noon\", // 9-04, done 10.5 hours late\n  \"dreev.commits.to/give_james_d_status_update/by/oct-5-noon\", // 9-04, done 10.5 hours late\n]\n"
      ]
    },
    "mtime": 1507277858494
  },
  "{\"filename\":\"/app/lib/latepenalty.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/lib\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "credit",
            "t"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "credit",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "t",
              "exported": "default"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/lib/latepenalty.js",
      "filenameRelative": "/app/lib/latepenalty.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "latepenalty.js",
      "sourceFileName": "latepenalty.js",
      "sourceRoot": "/app/lib",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/lib",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "latepenalty"
    },
    "ignored": false,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = credit;\n// --------------------------------- 80chars ---------------------------------->\n\n/* The main function here is credit(t) which computes the fraction of full \ncredit you get for being t seconds late. It's roughly a continuous version of\nthe following:\n  credit(t) = 1    if t<60s  # seconds late (no or almost no penalty)\n  credit(t) = .999 if t<1h   # minutes late (baaaasically counts)\n  credit(t) = .99  if t<1d   # hours late   (no big deal, almost fully counts)\n  credit(t) = .9   if t<1w   # days late    (main thing is it's done)\n  credit(t) = .5   if t<1mo  # weeks late   (half counts if this late)\n  credit(t) = .1   if t<1y   # months late  (mostly doesn't count)\n  credit(t) = .01  if t<10y  # years late   (better late than never, barely)\n  credit(t) = 0    otherwise # decades late (zero or essentially zero credit)\n*/\n\nvar SIH = 3600; // seconds in hour\nvar SID = 86400; // seconds in day\nvar SIW = SID * 7; // seconds in week\nvar DIY = 365.25; // days in year\nvar SIM = SID * DIY / 12; // seconds in month\nvar SIY = SID * DIY; // seconds in year\n\n// Linearly interpolate to return u when x=a and v when x=b (NOT CURRENTLY USED)\nfunction lscale(x, a, b, u, v) {\n  return (b * u - a * v + (v - u) * x) / (b - a);\n}\n\n// Exponentially interpolate to return u when x=a and v when x=b\nfunction escale(x, a, b, u, v) {\n  return u * Math.pow(u / v, a / (b - a)) * Math.exp(Math.log(v / u) / (b - a) * x);\n}\n\n// Do an h-interpolation to return u when x=a and v when x=b. \n// Special cases: h=-1 is linear, h=0 is exponential, h=1 is hyperbolic.\nfunction hscale(h, x, a, b, u, v) {\n  if (h === 0) {\n    return escale(x, a, b, u, v);\n  }\n  var r = (Math.pow(v / u, -h) - 1) / h / (a - b);\n  return u * Math.pow(1 - h * r * (x - a), -1 / h);\n}\n\n// Compute the credit you get for being t seconds late\nfunction credit(t) {\n  var h = 8;\n  if (t <= 0) {\n    return 1;\n  } // maybe <=59s late should still be 1 (no penalty)?\n  else if (t < SIH) {\n      return hscale(h, t, 0, SIH, 1, .999);\n    } else if (t < SID) {\n      return hscale(h, t, SIH, SID, .999, .99);\n    } else if (t < SIW) {\n      return hscale(h, t, SID, SIW, .99, .9);\n    } else if (t < SIM) {\n      return hscale(h, t, SIW, SIM, .9, .5);\n    } else if (t < SIY) {\n      return hscale(h, t, SIM, SIY, .5, .1);\n    } else {\n      return hscale(h, t, SIY, 10 * SIY, .1, .01);\n    }\n}\n\n/* \nAn alternative simple late penalty function I've used before in another context \nis 1-(t/(86400*7))^4 which gives you a couple days of very little penalty and\nthen your credit plummets till you get 0 credit for being more than a week late.\n*/\n\n// --------------------------------- 80chars ---------------------------------->\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxhdGVwZW5hbHR5LmpzIl0sIm5hbWVzIjpbImNyZWRpdCIsIlNJSCIsIlNJRCIsIlNJVyIsIkRJWSIsIlNJTSIsIlNJWSIsImxzY2FsZSIsIngiLCJhIiwiYiIsInUiLCJ2IiwiZXNjYWxlIiwiTWF0aCIsInBvdyIsImV4cCIsImxvZyIsImhzY2FsZSIsImgiLCJyIiwidCJdLCJtYXBwaW5ncyI6Ijs7Ozs7a0JBdUN3QkEsTTtBQXZDeEI7O0FBRUE7Ozs7Ozs7Ozs7Ozs7QUFhQSxJQUFNQyxNQUFNLElBQVosQyxDQUF3QjtBQUN4QixJQUFNQyxNQUFNLEtBQVosQyxDQUF3QjtBQUN4QixJQUFNQyxNQUFNRCxNQUFJLENBQWhCLEMsQ0FBd0I7QUFDeEIsSUFBTUUsTUFBTSxNQUFaLEMsQ0FBd0I7QUFDeEIsSUFBTUMsTUFBTUgsTUFBSUUsR0FBSixHQUFRLEVBQXBCLEMsQ0FBd0I7QUFDeEIsSUFBTUUsTUFBTUosTUFBSUUsR0FBaEIsQyxDQUF3Qjs7QUFFeEI7QUFDQSxTQUFTRyxNQUFULENBQWdCQyxDQUFoQixFQUFtQkMsQ0FBbkIsRUFBc0JDLENBQXRCLEVBQXlCQyxDQUF6QixFQUE0QkMsQ0FBNUIsRUFBK0I7QUFBRSxTQUFPLENBQUNGLElBQUVDLENBQUYsR0FBTUYsSUFBRUcsQ0FBUixHQUFZLENBQUNBLElBQUVELENBQUgsSUFBTUgsQ0FBbkIsS0FBdUJFLElBQUVELENBQXpCLENBQVA7QUFBb0M7O0FBRXJFO0FBQ0EsU0FBU0ksTUFBVCxDQUFnQkwsQ0FBaEIsRUFBbUJDLENBQW5CLEVBQXNCQyxDQUF0QixFQUF5QkMsQ0FBekIsRUFBNEJDLENBQTVCLEVBQStCO0FBQzdCLFNBQU9ELElBQUVHLEtBQUtDLEdBQUwsQ0FBU0osSUFBRUMsQ0FBWCxFQUFjSCxLQUFHQyxJQUFFRCxDQUFMLENBQWQsQ0FBRixHQUF5QkssS0FBS0UsR0FBTCxDQUFTRixLQUFLRyxHQUFMLENBQVNMLElBQUVELENBQVgsS0FBZUQsSUFBRUQsQ0FBakIsSUFBb0JELENBQTdCLENBQWhDO0FBQ0Q7O0FBRUQ7QUFDQTtBQUNBLFNBQVNVLE1BQVQsQ0FBZ0JDLENBQWhCLEVBQW1CWCxDQUFuQixFQUFzQkMsQ0FBdEIsRUFBeUJDLENBQXpCLEVBQTRCQyxDQUE1QixFQUErQkMsQ0FBL0IsRUFBa0M7QUFDaEMsTUFBSU8sTUFBTSxDQUFWLEVBQWE7QUFBRSxXQUFPTixPQUFPTCxDQUFQLEVBQVVDLENBQVYsRUFBYUMsQ0FBYixFQUFnQkMsQ0FBaEIsRUFBbUJDLENBQW5CLENBQVA7QUFBOEI7QUFDN0MsTUFBSVEsSUFBSSxDQUFDTixLQUFLQyxHQUFMLENBQVNILElBQUVELENBQVgsRUFBYyxDQUFDUSxDQUFmLElBQWtCLENBQW5CLElBQXNCQSxDQUF0QixJQUF5QlYsSUFBRUMsQ0FBM0IsQ0FBUjtBQUNBLFNBQU9DLElBQUVHLEtBQUtDLEdBQUwsQ0FBUyxJQUFFSSxJQUFFQyxDQUFGLElBQUtaLElBQUlDLENBQVQsQ0FBWCxFQUF3QixDQUFDLENBQUQsR0FBR1UsQ0FBM0IsQ0FBVDtBQUNEOztBQUVEO0FBQ2UsU0FBU25CLE1BQVQsQ0FBZ0JxQixDQUFoQixFQUFtQjtBQUNoQyxNQUFJRixJQUFJLENBQVI7QUFDQSxNQUFJRSxLQUFLLENBQVQsRUFBWTtBQUFFLFdBQU8sQ0FBUDtBQUFVLEdBQXhCLENBQXlCO0FBQXpCLE9BQ0ssSUFBSUEsSUFBSXBCLEdBQVIsRUFBYTtBQUFFLGFBQU9pQixPQUFPQyxDQUFQLEVBQVVFLENBQVYsRUFBYSxDQUFiLEVBQWtCcEIsR0FBbEIsRUFBMEIsQ0FBMUIsRUFBZ0MsSUFBaEMsQ0FBUDtBQUE4QyxLQUE3RCxNQUNBLElBQUlvQixJQUFJbkIsR0FBUixFQUFhO0FBQUUsYUFBT2dCLE9BQU9DLENBQVAsRUFBVUUsQ0FBVixFQUFhcEIsR0FBYixFQUFrQkMsR0FBbEIsRUFBMEIsSUFBMUIsRUFBZ0MsR0FBaEMsQ0FBUDtBQUE4QyxLQUE3RCxNQUNBLElBQUltQixJQUFJbEIsR0FBUixFQUFhO0FBQUUsYUFBT2UsT0FBT0MsQ0FBUCxFQUFVRSxDQUFWLEVBQWFuQixHQUFiLEVBQWtCQyxHQUFsQixFQUEwQixHQUExQixFQUFnQyxFQUFoQyxDQUFQO0FBQThDLEtBQTdELE1BQ0EsSUFBSWtCLElBQUloQixHQUFSLEVBQWE7QUFBRSxhQUFPYSxPQUFPQyxDQUFQLEVBQVVFLENBQVYsRUFBYWxCLEdBQWIsRUFBa0JFLEdBQWxCLEVBQTBCLEVBQTFCLEVBQWdDLEVBQWhDLENBQVA7QUFBOEMsS0FBN0QsTUFDQSxJQUFJZ0IsSUFBSWYsR0FBUixFQUFhO0FBQUUsYUFBT1ksT0FBT0MsQ0FBUCxFQUFVRSxDQUFWLEVBQWFoQixHQUFiLEVBQWtCQyxHQUFsQixFQUEwQixFQUExQixFQUFnQyxFQUFoQyxDQUFQO0FBQThDLEtBQTdELE1BQ2E7QUFBRSxhQUFPWSxPQUFPQyxDQUFQLEVBQVVFLENBQVYsRUFBYWYsR0FBYixFQUFrQixLQUFHQSxHQUFyQixFQUEwQixFQUExQixFQUFnQyxHQUFoQyxDQUFQO0FBQThDO0FBQ25FOztBQUVEOzs7Ozs7QUFNQSIsImZpbGUiOiJsYXRlcGVuYWx0eS5qcyIsInNvdXJjZVJvb3QiOiIvYXBwL2xpYiIsInNvdXJjZXNDb250ZW50IjpbIi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSA4MGNoYXJzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+XG5cbi8qIFRoZSBtYWluIGZ1bmN0aW9uIGhlcmUgaXMgY3JlZGl0KHQpIHdoaWNoIGNvbXB1dGVzIHRoZSBmcmFjdGlvbiBvZiBmdWxsIFxuY3JlZGl0IHlvdSBnZXQgZm9yIGJlaW5nIHQgc2Vjb25kcyBsYXRlLiBJdCdzIHJvdWdobHkgYSBjb250aW51b3VzIHZlcnNpb24gb2ZcbnRoZSBmb2xsb3dpbmc6XG4gIGNyZWRpdCh0KSA9IDEgICAgaWYgdDw2MHMgICMgc2Vjb25kcyBsYXRlIChubyBvciBhbG1vc3Qgbm8gcGVuYWx0eSlcbiAgY3JlZGl0KHQpID0gLjk5OSBpZiB0PDFoICAgIyBtaW51dGVzIGxhdGUgKGJhYWFhc2ljYWxseSBjb3VudHMpXG4gIGNyZWRpdCh0KSA9IC45OSAgaWYgdDwxZCAgICMgaG91cnMgbGF0ZSAgIChubyBiaWcgZGVhbCwgYWxtb3N0IGZ1bGx5IGNvdW50cylcbiAgY3JlZGl0KHQpID0gLjkgICBpZiB0PDF3ICAgIyBkYXlzIGxhdGUgICAgKG1haW4gdGhpbmcgaXMgaXQncyBkb25lKVxuICBjcmVkaXQodCkgPSAuNSAgIGlmIHQ8MW1vICAjIHdlZWtzIGxhdGUgICAoaGFsZiBjb3VudHMgaWYgdGhpcyBsYXRlKVxuICBjcmVkaXQodCkgPSAuMSAgIGlmIHQ8MXkgICAjIG1vbnRocyBsYXRlICAobW9zdGx5IGRvZXNuJ3QgY291bnQpXG4gIGNyZWRpdCh0KSA9IC4wMSAgaWYgdDwxMHkgICMgeWVhcnMgbGF0ZSAgIChiZXR0ZXIgbGF0ZSB0aGFuIG5ldmVyLCBiYXJlbHkpXG4gIGNyZWRpdCh0KSA9IDAgICAgb3RoZXJ3aXNlICMgZGVjYWRlcyBsYXRlICh6ZXJvIG9yIGVzc2VudGlhbGx5IHplcm8gY3JlZGl0KVxuKi9cblxuY29uc3QgU0lIID0gMzYwMCAgICAgICAgLy8gc2Vjb25kcyBpbiBob3VyXG5jb25zdCBTSUQgPSA4NjQwMCAgICAgICAvLyBzZWNvbmRzIGluIGRheVxuY29uc3QgU0lXID0gU0lEKjcgICAgICAgLy8gc2Vjb25kcyBpbiB3ZWVrXG5jb25zdCBESVkgPSAzNjUuMjUgICAgICAvLyBkYXlzIGluIHllYXJcbmNvbnN0IFNJTSA9IFNJRCpESVkvMTIgIC8vIHNlY29uZHMgaW4gbW9udGhcbmNvbnN0IFNJWSA9IFNJRCpESVkgICAgIC8vIHNlY29uZHMgaW4geWVhclxuXG4vLyBMaW5lYXJseSBpbnRlcnBvbGF0ZSB0byByZXR1cm4gdSB3aGVuIHg9YSBhbmQgdiB3aGVuIHg9YiAoTk9UIENVUlJFTlRMWSBVU0VEKVxuZnVuY3Rpb24gbHNjYWxlKHgsIGEsIGIsIHUsIHYpIHsgcmV0dXJuIChiKnUgLSBhKnYgKyAodi11KSp4KS8oYi1hKSB9XG5cbi8vIEV4cG9uZW50aWFsbHkgaW50ZXJwb2xhdGUgdG8gcmV0dXJuIHUgd2hlbiB4PWEgYW5kIHYgd2hlbiB4PWJcbmZ1bmN0aW9uIGVzY2FsZSh4LCBhLCBiLCB1LCB2KSB7XG4gIHJldHVybiB1Kk1hdGgucG93KHUvdiwgYS8oYi1hKSkqTWF0aC5leHAoTWF0aC5sb2codi91KS8oYi1hKSp4KVxufVxuXG4vLyBEbyBhbiBoLWludGVycG9sYXRpb24gdG8gcmV0dXJuIHUgd2hlbiB4PWEgYW5kIHYgd2hlbiB4PWIuIFxuLy8gU3BlY2lhbCBjYXNlczogaD0tMSBpcyBsaW5lYXIsIGg9MCBpcyBleHBvbmVudGlhbCwgaD0xIGlzIGh5cGVyYm9saWMuXG5mdW5jdGlvbiBoc2NhbGUoaCwgeCwgYSwgYiwgdSwgdikge1xuICBpZiAoaCA9PT0gMCkgeyByZXR1cm4gZXNjYWxlKHgsIGEsIGIsIHUsIHYpIH1cbiAgbGV0IHIgPSAoTWF0aC5wb3codi91LCAtaCktMSkvaC8oYS1iKVxuICByZXR1cm4gdSpNYXRoLnBvdygxLWgqciooeCAtIGEpLCAtMS9oKVxufVxuXG4vLyBDb21wdXRlIHRoZSBjcmVkaXQgeW91IGdldCBmb3IgYmVpbmcgdCBzZWNvbmRzIGxhdGVcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNyZWRpdCh0KSB7XG4gIGxldCBoID0gOFxuICBpZiAodCA8PSAwKSB7IHJldHVybiAxIH0gLy8gbWF5YmUgPD01OXMgbGF0ZSBzaG91bGQgc3RpbGwgYmUgMSAobm8gcGVuYWx0eSk/XG4gIGVsc2UgaWYgKHQgPCBTSUgpIHsgcmV0dXJuIGhzY2FsZShoLCB0LCAwLCAgIFNJSCwgICAgMSwgICAgLjk5OSkgfVxuICBlbHNlIGlmICh0IDwgU0lEKSB7IHJldHVybiBoc2NhbGUoaCwgdCwgU0lILCBTSUQsICAgIC45OTksIC45OSkgIH1cbiAgZWxzZSBpZiAodCA8IFNJVykgeyByZXR1cm4gaHNjYWxlKGgsIHQsIFNJRCwgU0lXLCAgICAuOTksICAuOSkgICB9XG4gIGVsc2UgaWYgKHQgPCBTSU0pIHsgcmV0dXJuIGhzY2FsZShoLCB0LCBTSVcsIFNJTSwgICAgLjksICAgLjUpICAgfVxuICBlbHNlIGlmICh0IDwgU0lZKSB7IHJldHVybiBoc2NhbGUoaCwgdCwgU0lNLCBTSVksICAgIC41LCAgIC4xKSAgIH1cbiAgZWxzZSAgICAgICAgICAgICAgeyByZXR1cm4gaHNjYWxlKGgsIHQsIFNJWSwgMTAqU0lZLCAuMSwgICAuMDEpICB9XG59XG5cbi8qIFxuQW4gYWx0ZXJuYXRpdmUgc2ltcGxlIGxhdGUgcGVuYWx0eSBmdW5jdGlvbiBJJ3ZlIHVzZWQgYmVmb3JlIGluIGFub3RoZXIgY29udGV4dCBcbmlzIDEtKHQvKDg2NDAwKjcpKV40IHdoaWNoIGdpdmVzIHlvdSBhIGNvdXBsZSBkYXlzIG9mIHZlcnkgbGl0dGxlIHBlbmFsdHkgYW5kXG50aGVuIHlvdXIgY3JlZGl0IHBsdW1tZXRzIHRpbGwgeW91IGdldCAwIGNyZWRpdCBmb3IgYmVpbmcgbW9yZSB0aGFuIGEgd2VlayBsYXRlLlxuKi9cblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIDgwY2hhcnMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT5cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "latepenalty.js"
      ],
      "names": [
        "credit",
        "SIH",
        "SID",
        "SIW",
        "DIY",
        "SIM",
        "SIY",
        "lscale",
        "x",
        "a",
        "b",
        "u",
        "v",
        "escale",
        "Math",
        "pow",
        "exp",
        "log",
        "hscale",
        "h",
        "r",
        "t"
      ],
      "mappings": "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",
      "file": "latepenalty.js",
      "sourceRoot": "/app/lib",
      "sourcesContent": [
        "// --------------------------------- 80chars ---------------------------------->\n\n/* The main function here is credit(t) which computes the fraction of full \ncredit you get for being t seconds late. It's roughly a continuous version of\nthe following:\n  credit(t) = 1    if t<60s  # seconds late (no or almost no penalty)\n  credit(t) = .999 if t<1h   # minutes late (baaaasically counts)\n  credit(t) = .99  if t<1d   # hours late   (no big deal, almost fully counts)\n  credit(t) = .9   if t<1w   # days late    (main thing is it's done)\n  credit(t) = .5   if t<1mo  # weeks late   (half counts if this late)\n  credit(t) = .1   if t<1y   # months late  (mostly doesn't count)\n  credit(t) = .01  if t<10y  # years late   (better late than never, barely)\n  credit(t) = 0    otherwise # decades late (zero or essentially zero credit)\n*/\n\nconst SIH = 3600        // seconds in hour\nconst SID = 86400       // seconds in day\nconst SIW = SID*7       // seconds in week\nconst DIY = 365.25      // days in year\nconst SIM = SID*DIY/12  // seconds in month\nconst SIY = SID*DIY     // seconds in year\n\n// Linearly interpolate to return u when x=a and v when x=b (NOT CURRENTLY USED)\nfunction lscale(x, a, b, u, v) { return (b*u - a*v + (v-u)*x)/(b-a) }\n\n// Exponentially interpolate to return u when x=a and v when x=b\nfunction escale(x, a, b, u, v) {\n  return u*Math.pow(u/v, a/(b-a))*Math.exp(Math.log(v/u)/(b-a)*x)\n}\n\n// Do an h-interpolation to return u when x=a and v when x=b. \n// Special cases: h=-1 is linear, h=0 is exponential, h=1 is hyperbolic.\nfunction hscale(h, x, a, b, u, v) {\n  if (h === 0) { return escale(x, a, b, u, v) }\n  let r = (Math.pow(v/u, -h)-1)/h/(a-b)\n  return u*Math.pow(1-h*r*(x - a), -1/h)\n}\n\n// Compute the credit you get for being t seconds late\nexport default function credit(t) {\n  let h = 8\n  if (t <= 0) { return 1 } // maybe <=59s late should still be 1 (no penalty)?\n  else if (t < SIH) { return hscale(h, t, 0,   SIH,    1,    .999) }\n  else if (t < SID) { return hscale(h, t, SIH, SID,    .999, .99)  }\n  else if (t < SIW) { return hscale(h, t, SID, SIW,    .99,  .9)   }\n  else if (t < SIM) { return hscale(h, t, SIW, SIM,    .9,   .5)   }\n  else if (t < SIY) { return hscale(h, t, SIM, SIY,    .5,   .1)   }\n  else              { return hscale(h, t, SIY, 10*SIY, .1,   .01)  }\n}\n\n/* \nAn alternative simple late penalty function I've used before in another context \nis 1-(t/(86400*7))^4 which gives you a couple days of very little penalty and\nthen your credit plummets till you get 0 credit for being more than a week late.\n*/\n\n// --------------------------------- 80chars ---------------------------------->\n"
      ]
    },
    "mtime": 1507277858522
  },
  "{\"filename\":\"/app/lib/parse.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/lib\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "chrono-node",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "chrono"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "parseprom",
            "urtx"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "parseprom",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "urtx",
              "exported": "default"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/lib/parse.js",
      "filenameRelative": "/app/lib/parse.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "parse.js",
      "sourceFileName": "parse.js",
      "sourceRoot": "/app/lib",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/lib",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "parse"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = parseprom;\n\nvar _chronoNode = require('chrono-node');\n\nvar _chronoNode2 = _interopRequireDefault(_chronoNode);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Take urtext and return a promise data structure\nfunction parseprom(urtx) {\n  console.log('DEBUG ' + urtx);\n  // Parse urtext into username, domain, and path -- username.commits.to/path\n  // This version assumes no dots in usernames, so bob.really.commits.to would\n  // parse as username \"bob\" and domain \"really.commits.to\":\n  var m = urtx.match(/^([^\\.]+)\\.([^\\.\\/]+\\.[^\\/]+)\\/?(.*)$/);\n  // TODO: handle the case that no user is given, just \"promises.to/foo\"\n  console.log('DEBUG PARSING: ' + JSON.stringify(m));\n  var user = m ? m[1] : '';\n  var domain = m ? m[2] : '';\n  var path = m ? m[3] : '';\n  // following should never happen -- we have a route for the empty promise case\n  if (!path || path === '') {\n    console.log('ERROR: empty promise: ' + urtx);\n  }\n  var what = '';\n  var tdue = Date.now() + 7 * 24 * 60 * 60 * 1000;\n  if (path.length > 0) {\n    var parsedPath = path.match(/^(.*?)(\\/by\\/|$)(.*)$/);\n\n    tdue = parsedPath[3];\n    // tdue = parseDate(parsedPath[3])\n    what = replaceSeparatorWithSpaces(parsedPath[1]);\n\n    //tdue = parsedPath.length > 1 ? \n    //       chrono.parseDate(parsedPath[3].replace(/_/g, ' ')) * 1 : \n    //       Date.now() + 7*24*60*60*1000\n    //tdue = tdue ? ( ( tdue < Date.now() && Date.now() - tdue < 24*60*60*1000 ) ?\n    //                tdue + 24*60*60*1000 : tdue )\n    //            : Date.now() + 7*24*60*60*1000\n  }\n  // TODO: path is now everything after \".promises.to\" so now parse out the \n  //       \"what\" (thing being promised) and the \"tdue\" (deadline)\n  console.log('parseProm', { user: user, path: path, domain: domain, what: what, tdue: tdue, urtx: urtx });\n  return { user: user, path: path, domain: domain, what: what, tdue: tdue, urtx: urtx, tini: Date.now() };\n}\n\nfunction replaceSeparatorWithSpaces(string) {\n  // TODO: (maybe) Escaping characters?\n  var dash_regex = new RegExp('-', 'g');\n  var underscore_regex = new RegExp('_', 'g');\n\n  try {\n    var dashes = string.match(dash_regex).length;\n  } catch (e) {\n    var dashes = 0;\n  }\n  try {\n    var underscores = string.match(underscore_regex).length;\n  } catch (e) {\n    var underscores = 0;\n  }\n\n  if (dashes > underscores) {\n    var separator = dash_regex;\n  } else if (underscores > dashes) {\n    var separator = underscore_regex;\n  } else {\n    return string;\n  }\n\n  return string.replace(separator, ' ');\n}\n\nfunction parseDate(string) {\n  // TODO: user's timezone\n  // TODO: unix time format for db\n  if (string.length) {\n    try {\n      return _chronoNode2.default.parseDate(replaceSeparatorWithSpaces(string));\n    } catch (e) {}\n  }\n  return _chronoNode2.default.parseDate('next week');\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhcnNlLmpzIl0sIm5hbWVzIjpbInBhcnNlcHJvbSIsInVydHgiLCJjb25zb2xlIiwibG9nIiwibSIsIm1hdGNoIiwiSlNPTiIsInN0cmluZ2lmeSIsInVzZXIiLCJkb21haW4iLCJwYXRoIiwid2hhdCIsInRkdWUiLCJEYXRlIiwibm93IiwibGVuZ3RoIiwicGFyc2VkUGF0aCIsInJlcGxhY2VTZXBhcmF0b3JXaXRoU3BhY2VzIiwidGluaSIsInN0cmluZyIsImRhc2hfcmVnZXgiLCJSZWdFeHAiLCJ1bmRlcnNjb3JlX3JlZ2V4IiwiZGFzaGVzIiwiZSIsInVuZGVyc2NvcmVzIiwic2VwYXJhdG9yIiwicmVwbGFjZSIsInBhcnNlRGF0ZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7a0JBR3dCQSxTOztBQUh4Qjs7Ozs7O0FBRUE7QUFDZSxTQUFTQSxTQUFULENBQW1CQyxJQUFuQixFQUF5QjtBQUN0Q0MsVUFBUUMsR0FBUixZQUFxQkYsSUFBckI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFJRyxJQUFJSCxLQUFLSSxLQUFMLENBQVcsdUNBQVgsQ0FBUjtBQUNBO0FBQ0FILFVBQVFDLEdBQVIscUJBQThCRyxLQUFLQyxTQUFMLENBQWVILENBQWYsQ0FBOUI7QUFDQSxNQUFJSSxPQUFTSixJQUFJQSxFQUFFLENBQUYsQ0FBSixHQUFXLEVBQXhCO0FBQ0EsTUFBSUssU0FBU0wsSUFBSUEsRUFBRSxDQUFGLENBQUosR0FBVyxFQUF4QjtBQUNBLE1BQUlNLE9BQVNOLElBQUlBLEVBQUUsQ0FBRixDQUFKLEdBQVcsRUFBeEI7QUFDQTtBQUNBLE1BQUksQ0FBQ00sSUFBRCxJQUFTQSxTQUFTLEVBQXRCLEVBQTBCO0FBQUVSLFlBQVFDLEdBQVIsNEJBQXFDRixJQUFyQztBQUE4QztBQUMxRSxNQUFJVSxPQUFPLEVBQVg7QUFDQSxNQUFJQyxPQUFPQyxLQUFLQyxHQUFMLEtBQWEsSUFBRSxFQUFGLEdBQUssRUFBTCxHQUFRLEVBQVIsR0FBVyxJQUFuQztBQUNBLE1BQUlKLEtBQUtLLE1BQUwsR0FBYyxDQUFsQixFQUFxQjtBQUNuQixRQUFJQyxhQUFhTixLQUFLTCxLQUFMLENBQVcsdUJBQVgsQ0FBakI7O0FBRUFPLFdBQU9JLFdBQVcsQ0FBWCxDQUFQO0FBQ0E7QUFDQUwsV0FBT00sMkJBQTJCRCxXQUFXLENBQVgsQ0FBM0IsQ0FBUDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDRDtBQUNEO0FBQ0E7QUFDQWQsVUFBUUMsR0FBUixDQUFZLFdBQVosRUFBeUIsRUFBRUssVUFBRixFQUFRRSxVQUFSLEVBQWNELGNBQWQsRUFBc0JFLFVBQXRCLEVBQTRCQyxVQUE1QixFQUFrQ1gsVUFBbEMsRUFBekI7QUFDQSxTQUFPLEVBQUVPLFVBQUYsRUFBUUUsVUFBUixFQUFjRCxjQUFkLEVBQXNCRSxVQUF0QixFQUE0QkMsVUFBNUIsRUFBa0NYLFVBQWxDLEVBQXdDaUIsTUFBTUwsS0FBS0MsR0FBTCxFQUE5QyxFQUFQO0FBQ0Q7O0FBRUQsU0FBU0csMEJBQVQsQ0FBb0NFLE1BQXBDLEVBQTRDO0FBQzFDO0FBQ0EsTUFBSUMsYUFBYSxJQUFJQyxNQUFKLENBQVcsR0FBWCxFQUFnQixHQUFoQixDQUFqQjtBQUNBLE1BQUlDLG1CQUFtQixJQUFJRCxNQUFKLENBQVcsR0FBWCxFQUFnQixHQUFoQixDQUF2Qjs7QUFFQSxNQUFJO0FBQ0YsUUFBSUUsU0FBU0osT0FBT2QsS0FBUCxDQUFhZSxVQUFiLEVBQXlCTCxNQUF0QztBQUNELEdBRkQsQ0FFRSxPQUFPUyxDQUFQLEVBQVU7QUFDVixRQUFJRCxTQUFTLENBQWI7QUFDRDtBQUNELE1BQUk7QUFDRixRQUFJRSxjQUFjTixPQUFPZCxLQUFQLENBQWFpQixnQkFBYixFQUErQlAsTUFBakQ7QUFDRCxHQUZELENBRUUsT0FBT1MsQ0FBUCxFQUFVO0FBQ1YsUUFBSUMsY0FBYyxDQUFsQjtBQUNEOztBQUVELE1BQUlGLFNBQVNFLFdBQWIsRUFBMEI7QUFDeEIsUUFBSUMsWUFBWU4sVUFBaEI7QUFDRCxHQUZELE1BRU8sSUFBSUssY0FBY0YsTUFBbEIsRUFBMEI7QUFDL0IsUUFBSUcsWUFBWUosZ0JBQWhCO0FBQ0QsR0FGTSxNQUVBO0FBQ0wsV0FBT0gsTUFBUDtBQUNEOztBQUVELFNBQU9BLE9BQU9RLE9BQVAsQ0FBZUQsU0FBZixFQUEwQixHQUExQixDQUFQO0FBQ0Q7O0FBRUQsU0FBU0UsU0FBVCxDQUFtQlQsTUFBbkIsRUFBMkI7QUFDekI7QUFDQTtBQUNBLE1BQUlBLE9BQU9KLE1BQVgsRUFBbUI7QUFDakIsUUFBSTtBQUNGLGFBQU8scUJBQU9hLFNBQVAsQ0FBaUJYLDJCQUEyQkUsTUFBM0IsQ0FBakIsQ0FBUDtBQUNELEtBRkQsQ0FFRSxPQUFPSyxDQUFQLEVBQVUsQ0FDWDtBQUNGO0FBQ0QsU0FBTyxxQkFBT0ksU0FBUCxDQUFpQixXQUFqQixDQUFQO0FBQ0QiLCJmaWxlIjoicGFyc2UuanMiLCJzb3VyY2VSb290IjoiL2FwcC9saWIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY2hyb25vIGZyb20gJ2Nocm9uby1ub2RlJ1xuXG4vLyBUYWtlIHVydGV4dCBhbmQgcmV0dXJuIGEgcHJvbWlzZSBkYXRhIHN0cnVjdHVyZVxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcGFyc2Vwcm9tKHVydHgpIHtcbiAgY29uc29sZS5sb2coYERFQlVHICR7dXJ0eH1gKVxuICAvLyBQYXJzZSB1cnRleHQgaW50byB1c2VybmFtZSwgZG9tYWluLCBhbmQgcGF0aCAtLSB1c2VybmFtZS5jb21taXRzLnRvL3BhdGhcbiAgLy8gVGhpcyB2ZXJzaW9uIGFzc3VtZXMgbm8gZG90cyBpbiB1c2VybmFtZXMsIHNvIGJvYi5yZWFsbHkuY29tbWl0cy50byB3b3VsZFxuICAvLyBwYXJzZSBhcyB1c2VybmFtZSBcImJvYlwiIGFuZCBkb21haW4gXCJyZWFsbHkuY29tbWl0cy50b1wiOlxuICBsZXQgbSA9IHVydHgubWF0Y2goL14oW15cXC5dKylcXC4oW15cXC5cXC9dK1xcLlteXFwvXSspXFwvPyguKikkLylcbiAgLy8gVE9ETzogaGFuZGxlIHRoZSBjYXNlIHRoYXQgbm8gdXNlciBpcyBnaXZlbiwganVzdCBcInByb21pc2VzLnRvL2Zvb1wiXG4gIGNvbnNvbGUubG9nKGBERUJVRyBQQVJTSU5HOiAke0pTT04uc3RyaW5naWZ5KG0pfWApXG4gIGxldCB1c2VyICAgPSBtID8gbVsxXSA6ICcnXG4gIGxldCBkb21haW4gPSBtID8gbVsyXSA6ICcnXG4gIGxldCBwYXRoICAgPSBtID8gbVszXSA6ICcnXG4gIC8vIGZvbGxvd2luZyBzaG91bGQgbmV2ZXIgaGFwcGVuIC0tIHdlIGhhdmUgYSByb3V0ZSBmb3IgdGhlIGVtcHR5IHByb21pc2UgY2FzZVxuICBpZiAoIXBhdGggfHwgcGF0aCA9PT0gJycpIHsgY29uc29sZS5sb2coYEVSUk9SOiBlbXB0eSBwcm9taXNlOiAke3VydHh9YCkgfVxuICBsZXQgd2hhdCA9ICcnXG4gIGxldCB0ZHVlID0gRGF0ZS5ub3coKSArIDcqMjQqNjAqNjAqMTAwMFxuICBpZiAocGF0aC5sZW5ndGggPiAwKSB7XG4gICAgbGV0IHBhcnNlZFBhdGggPSBwYXRoLm1hdGNoKC9eKC4qPykoXFwvYnlcXC98JCkoLiopJC8pXG4gICAgXG4gICAgdGR1ZSA9IHBhcnNlZFBhdGhbM11cbiAgICAvLyB0ZHVlID0gcGFyc2VEYXRlKHBhcnNlZFBhdGhbM10pXG4gICAgd2hhdCA9IHJlcGxhY2VTZXBhcmF0b3JXaXRoU3BhY2VzKHBhcnNlZFBhdGhbMV0pXG4gICAgXG4gICAgLy90ZHVlID0gcGFyc2VkUGF0aC5sZW5ndGggPiAxID8gXG4gICAgLy8gICAgICAgY2hyb25vLnBhcnNlRGF0ZShwYXJzZWRQYXRoWzNdLnJlcGxhY2UoL18vZywgJyAnKSkgKiAxIDogXG4gICAgLy8gICAgICAgRGF0ZS5ub3coKSArIDcqMjQqNjAqNjAqMTAwMFxuICAgIC8vdGR1ZSA9IHRkdWUgPyAoICggdGR1ZSA8IERhdGUubm93KCkgJiYgRGF0ZS5ub3coKSAtIHRkdWUgPCAyNCo2MCo2MCoxMDAwICkgP1xuICAgIC8vICAgICAgICAgICAgICAgIHRkdWUgKyAyNCo2MCo2MCoxMDAwIDogdGR1ZSApXG4gICAgLy8gICAgICAgICAgICA6IERhdGUubm93KCkgKyA3KjI0KjYwKjYwKjEwMDBcbiAgfVxuICAvLyBUT0RPOiBwYXRoIGlzIG5vdyBldmVyeXRoaW5nIGFmdGVyIFwiLnByb21pc2VzLnRvXCIgc28gbm93IHBhcnNlIG91dCB0aGUgXG4gIC8vICAgICAgIFwid2hhdFwiICh0aGluZyBiZWluZyBwcm9taXNlZCkgYW5kIHRoZSBcInRkdWVcIiAoZGVhZGxpbmUpXG4gIGNvbnNvbGUubG9nKCdwYXJzZVByb20nLCB7IHVzZXIsIHBhdGgsIGRvbWFpbiwgd2hhdCwgdGR1ZSwgdXJ0eCB9KVxuICByZXR1cm4geyB1c2VyLCBwYXRoLCBkb21haW4sIHdoYXQsIHRkdWUsIHVydHgsIHRpbmk6IERhdGUubm93KCkgfVxufVxuXG5mdW5jdGlvbiByZXBsYWNlU2VwYXJhdG9yV2l0aFNwYWNlcyhzdHJpbmcpIHtcbiAgLy8gVE9ETzogKG1heWJlKSBFc2NhcGluZyBjaGFyYWN0ZXJzP1xuICB2YXIgZGFzaF9yZWdleCA9IG5ldyBSZWdFeHAoJy0nLCAnZycpO1xuICB2YXIgdW5kZXJzY29yZV9yZWdleCA9IG5ldyBSZWdFeHAoJ18nLCAnZycpO1xuICBcbiAgdHJ5IHtcbiAgICB2YXIgZGFzaGVzID0gc3RyaW5nLm1hdGNoKGRhc2hfcmVnZXgpLmxlbmd0aDtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHZhciBkYXNoZXMgPSAwO1xuICB9XG4gIHRyeSB7XG4gICAgdmFyIHVuZGVyc2NvcmVzID0gc3RyaW5nLm1hdGNoKHVuZGVyc2NvcmVfcmVnZXgpLmxlbmd0aDtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHZhciB1bmRlcnNjb3JlcyA9IDA7XG4gIH1cblxuICBpZiAoZGFzaGVzID4gdW5kZXJzY29yZXMpIHtcbiAgICB2YXIgc2VwYXJhdG9yID0gZGFzaF9yZWdleDtcbiAgfSBlbHNlIGlmICh1bmRlcnNjb3JlcyA+IGRhc2hlcykge1xuICAgIHZhciBzZXBhcmF0b3IgPSB1bmRlcnNjb3JlX3JlZ2V4O1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBzdHJpbmc7XG4gIH1cblxuICByZXR1cm4gc3RyaW5nLnJlcGxhY2Uoc2VwYXJhdG9yLCAnICcpO1xufVxuXG5mdW5jdGlvbiBwYXJzZURhdGUoc3RyaW5nKSB7XG4gIC8vIFRPRE86IHVzZXIncyB0aW1lem9uZVxuICAvLyBUT0RPOiB1bml4IHRpbWUgZm9ybWF0IGZvciBkYlxuICBpZiAoc3RyaW5nLmxlbmd0aCkge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gY2hyb25vLnBhcnNlRGF0ZShyZXBsYWNlU2VwYXJhdG9yV2l0aFNwYWNlcyhzdHJpbmcpKVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGNocm9uby5wYXJzZURhdGUoJ25leHQgd2VlaycpXG59Il19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "parse.js"
      ],
      "names": [
        "parseprom",
        "urtx",
        "console",
        "log",
        "m",
        "match",
        "JSON",
        "stringify",
        "user",
        "domain",
        "path",
        "what",
        "tdue",
        "Date",
        "now",
        "length",
        "parsedPath",
        "replaceSeparatorWithSpaces",
        "tini",
        "string",
        "dash_regex",
        "RegExp",
        "underscore_regex",
        "dashes",
        "e",
        "underscores",
        "separator",
        "replace",
        "parseDate"
      ],
      "mappings": ";;;;;kBAGwBA,S;;AAHxB;;;;;;AAEA;AACe,SAASA,SAAT,CAAmBC,IAAnB,EAAyB;AACtCC,UAAQC,GAAR,YAAqBF,IAArB;AACA;AACA;AACA;AACA,MAAIG,IAAIH,KAAKI,KAAL,CAAW,uCAAX,CAAR;AACA;AACAH,UAAQC,GAAR,qBAA8BG,KAAKC,SAAL,CAAeH,CAAf,CAA9B;AACA,MAAII,OAASJ,IAAIA,EAAE,CAAF,CAAJ,GAAW,EAAxB;AACA,MAAIK,SAASL,IAAIA,EAAE,CAAF,CAAJ,GAAW,EAAxB;AACA,MAAIM,OAASN,IAAIA,EAAE,CAAF,CAAJ,GAAW,EAAxB;AACA;AACA,MAAI,CAACM,IAAD,IAASA,SAAS,EAAtB,EAA0B;AAAER,YAAQC,GAAR,4BAAqCF,IAArC;AAA8C;AAC1E,MAAIU,OAAO,EAAX;AACA,MAAIC,OAAOC,KAAKC,GAAL,KAAa,IAAE,EAAF,GAAK,EAAL,GAAQ,EAAR,GAAW,IAAnC;AACA,MAAIJ,KAAKK,MAAL,GAAc,CAAlB,EAAqB;AACnB,QAAIC,aAAaN,KAAKL,KAAL,CAAW,uBAAX,CAAjB;;AAEAO,WAAOI,WAAW,CAAX,CAAP;AACA;AACAL,WAAOM,2BAA2BD,WAAW,CAAX,CAA3B,CAAP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACD;AACD;AACA;AACAd,UAAQC,GAAR,CAAY,WAAZ,EAAyB,EAAEK,UAAF,EAAQE,UAAR,EAAcD,cAAd,EAAsBE,UAAtB,EAA4BC,UAA5B,EAAkCX,UAAlC,EAAzB;AACA,SAAO,EAAEO,UAAF,EAAQE,UAAR,EAAcD,cAAd,EAAsBE,UAAtB,EAA4BC,UAA5B,EAAkCX,UAAlC,EAAwCiB,MAAML,KAAKC,GAAL,EAA9C,EAAP;AACD;;AAED,SAASG,0BAAT,CAAoCE,MAApC,EAA4C;AAC1C;AACA,MAAIC,aAAa,IAAIC,MAAJ,CAAW,GAAX,EAAgB,GAAhB,CAAjB;AACA,MAAIC,mBAAmB,IAAID,MAAJ,CAAW,GAAX,EAAgB,GAAhB,CAAvB;;AAEA,MAAI;AACF,QAAIE,SAASJ,OAAOd,KAAP,CAAae,UAAb,EAAyBL,MAAtC;AACD,GAFD,CAEE,OAAOS,CAAP,EAAU;AACV,QAAID,SAAS,CAAb;AACD;AACD,MAAI;AACF,QAAIE,cAAcN,OAAOd,KAAP,CAAaiB,gBAAb,EAA+BP,MAAjD;AACD,GAFD,CAEE,OAAOS,CAAP,EAAU;AACV,QAAIC,cAAc,CAAlB;AACD;;AAED,MAAIF,SAASE,WAAb,EAA0B;AACxB,QAAIC,YAAYN,UAAhB;AACD,GAFD,MAEO,IAAIK,cAAcF,MAAlB,EAA0B;AAC/B,QAAIG,YAAYJ,gBAAhB;AACD,GAFM,MAEA;AACL,WAAOH,MAAP;AACD;;AAED,SAAOA,OAAOQ,OAAP,CAAeD,SAAf,EAA0B,GAA1B,CAAP;AACD;;AAED,SAASE,SAAT,CAAmBT,MAAnB,EAA2B;AACzB;AACA;AACA,MAAIA,OAAOJ,MAAX,EAAmB;AACjB,QAAI;AACF,aAAO,qBAAOa,SAAP,CAAiBX,2BAA2BE,MAA3B,CAAjB,CAAP;AACD,KAFD,CAEE,OAAOK,CAAP,EAAU,CACX;AACF;AACD,SAAO,qBAAOI,SAAP,CAAiB,WAAjB,CAAP;AACD",
      "file": "parse.js",
      "sourceRoot": "/app/lib",
      "sourcesContent": [
        "import chrono from 'chrono-node'\n\n// Take urtext and return a promise data structure\nexport default function parseprom(urtx) {\n  console.log(`DEBUG ${urtx}`)\n  // Parse urtext into username, domain, and path -- username.commits.to/path\n  // This version assumes no dots in usernames, so bob.really.commits.to would\n  // parse as username \"bob\" and domain \"really.commits.to\":\n  let m = urtx.match(/^([^\\.]+)\\.([^\\.\\/]+\\.[^\\/]+)\\/?(.*)$/)\n  // TODO: handle the case that no user is given, just \"promises.to/foo\"\n  console.log(`DEBUG PARSING: ${JSON.stringify(m)}`)\n  let user   = m ? m[1] : ''\n  let domain = m ? m[2] : ''\n  let path   = m ? m[3] : ''\n  // following should never happen -- we have a route for the empty promise case\n  if (!path || path === '') { console.log(`ERROR: empty promise: ${urtx}`) }\n  let what = ''\n  let tdue = Date.now() + 7*24*60*60*1000\n  if (path.length > 0) {\n    let parsedPath = path.match(/^(.*?)(\\/by\\/|$)(.*)$/)\n    \n    tdue = parsedPath[3]\n    // tdue = parseDate(parsedPath[3])\n    what = replaceSeparatorWithSpaces(parsedPath[1])\n    \n    //tdue = parsedPath.length > 1 ? \n    //       chrono.parseDate(parsedPath[3].replace(/_/g, ' ')) * 1 : \n    //       Date.now() + 7*24*60*60*1000\n    //tdue = tdue ? ( ( tdue < Date.now() && Date.now() - tdue < 24*60*60*1000 ) ?\n    //                tdue + 24*60*60*1000 : tdue )\n    //            : Date.now() + 7*24*60*60*1000\n  }\n  // TODO: path is now everything after \".promises.to\" so now parse out the \n  //       \"what\" (thing being promised) and the \"tdue\" (deadline)\n  console.log('parseProm', { user, path, domain, what, tdue, urtx })\n  return { user, path, domain, what, tdue, urtx, tini: Date.now() }\n}\n\nfunction replaceSeparatorWithSpaces(string) {\n  // TODO: (maybe) Escaping characters?\n  var dash_regex = new RegExp('-', 'g');\n  var underscore_regex = new RegExp('_', 'g');\n  \n  try {\n    var dashes = string.match(dash_regex).length;\n  } catch (e) {\n    var dashes = 0;\n  }\n  try {\n    var underscores = string.match(underscore_regex).length;\n  } catch (e) {\n    var underscores = 0;\n  }\n\n  if (dashes > underscores) {\n    var separator = dash_regex;\n  } else if (underscores > dashes) {\n    var separator = underscore_regex;\n  } else {\n    return string;\n  }\n\n  return string.replace(separator, ' ');\n}\n\nfunction parseDate(string) {\n  // TODO: user's timezone\n  // TODO: unix time format for db\n  if (string.length) {\n    try {\n      return chrono.parseDate(replaceSeparatorWithSpaces(string))\n    } catch (e) {\n    }\n  }\n  return chrono.parseDate('next week')\n}"
      ]
    },
    "mtime": 1507277858558
  },
  "{\"filename\":\"/app/lib/middleware.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/lib\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "extends",
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "./mail.js",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "mailself"
              }
            ]
          },
          {
            "source": "./parse.js",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "parsePromise"
              }
            ]
          },
          {
            "source": "../data/seed.js",
            "imported": [
              "users"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "users",
                "local": "users"
              }
            ]
          },
          {
            "source": "../models/promise.js",
            "imported": [
              "Promise",
              "sequelize"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "Promise",
                "local": "Promise"
              },
              {
                "kind": "named",
                "imported": "sequelize",
                "local": "sequelize"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "handleRequest",
            "req",
            "resp"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "handleRequest",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "req",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "resp",
              "exported": "default"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/lib/middleware.js",
      "filenameRelative": "/app/lib/middleware.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "middleware.js",
      "sourceFileName": "middleware.js",
      "sourceRoot": "/app/lib",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/lib",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "middleware"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; // --------------------------------- 80chars ---------------------------------->\n\n\nexports.default = handleRequest;\n\nvar _mail = require('./mail.js');\n\nvar _mail2 = _interopRequireDefault(_mail);\n\nvar _parse = require('./parse.js');\n\nvar _parse2 = _interopRequireDefault(_parse);\n\nvar _seed = require('../data/seed.js');\n\nvar _promise = require('../models/promise.js');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction handleRequest(req, resp) {\n  // The server at promises.to passes along the full URL the way the user typed\n  // it, so when the user hits \"bob.promises.to/foo\" the Glitch app is called\n  // with \"iwill.glitch.me/bob.promises.to/foo\" and req.originalUrl is\n  // \"/bob.promises.to/foo\" (req.originalUrl doesn't include the hostname which\n  // from the perspective of this Glitch app is \"iwill.glitch.me\")\n  var urtx = req.originalUrl.substr(1); // get rid of the initial slash\n  // urtx is now, eg, \"bob.promises.to/foo_the_bar/by/9am\"\n\n  // TODOLATER: how to handle \"bob.promises.to/foo%bar\"\n  // TODOLATER: need to url-decode to handle \"bob.promises.to/foo^bar\"\n  // TODOLATER: handle bob.promises.to/do_item_#2/by/9am\n  //            https://stackoverflow.com/questions/18796421/capture-anchor-link\n\n  // quick hack to make it so both bob.commits.to and bob.commits.to/ \n  // show the full list of promises:\n  urtx = urtx.replace(/\\/$/, '');\n\n  //console.log('handleRequest', req.params);\n\n  var p = (0, _parse2.default)(urtx); // p is now a hash {user, what, tini, tdue, etc}\n  console.log('DEBUG: PROMISE PARSED: ' + JSON.stringify(p));\n\n  if (p.user === 'www' || p.user === '') {\n    // this is the case of no username, like if someone just went to\n    // \"promises.to\" or tried to fetch \"promises.to/robots.txt\" or whatever\n    resp.redirect('/');\n  } else if (!_seed.users.includes(p.user)) {\n    // don't let people create new subdomains/users on the fly\n    resp.redirect('/sign-up');\n  } else {\n    // Check if a promise already exists with matching user+'|'+what\n    // If not, create it\n    // If so, do nothing\n\n    console.log('valid request', req.params);\n    _promise.Promise.findOne({ where: { urtx: urtx } }).then(function (promise) {\n      var existing = false;\n\n      if (promise) {\n        console.log('duplicate', urtx, promise.id);\n        existing = true;\n        // resp.redirect(urtx);\n      } else {\n        console.log('creating new', urtx);\n        _promise.Promise.create(p);\n        (0, _mail2.default)('PROMISE', urtx);\n      }\n\n      console.log('promises.to/ request', req.params);\n      resp.render('partials/single/promise', _extends({}, p, {\n        existing: existing\n      }));\n    });\n  }\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1pZGRsZXdhcmUuanMiXSwibmFtZXMiOlsiaGFuZGxlUmVxdWVzdCIsInJlcSIsInJlc3AiLCJ1cnR4Iiwib3JpZ2luYWxVcmwiLCJzdWJzdHIiLCJyZXBsYWNlIiwicCIsImNvbnNvbGUiLCJsb2ciLCJKU09OIiwic3RyaW5naWZ5IiwidXNlciIsInJlZGlyZWN0IiwiaW5jbHVkZXMiLCJwYXJhbXMiLCJmaW5kT25lIiwid2hlcmUiLCJ0aGVuIiwiZXhpc3RpbmciLCJwcm9taXNlIiwiaWQiLCJjcmVhdGUiLCJyZW5kZXIiXSwibWFwcGluZ3MiOiI7Ozs7OztrUUFBQTs7O2tCQU13QkEsYTs7QUFMeEI7Ozs7QUFDQTs7OztBQUNBOztBQUNBOzs7O0FBRWUsU0FBU0EsYUFBVCxDQUF1QkMsR0FBdkIsRUFBNEJDLElBQTVCLEVBQWtDO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFJQyxPQUFPRixJQUFJRyxXQUFKLENBQWdCQyxNQUFoQixDQUF1QixDQUF2QixDQUFYLENBTitDLENBTVQ7QUFDdEM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBRixTQUFPQSxLQUFLRyxPQUFMLENBQWEsS0FBYixFQUFvQixFQUFwQixDQUFQOztBQUVBOztBQUVBLE1BQUlDLElBQUkscUJBQWFKLElBQWIsQ0FBUixDQXBCK0MsQ0FvQnBCO0FBQzNCSyxVQUFRQyxHQUFSLDZCQUFzQ0MsS0FBS0MsU0FBTCxDQUFlSixDQUFmLENBQXRDOztBQUdBLE1BQUlBLEVBQUVLLElBQUYsS0FBVyxLQUFYLElBQW9CTCxFQUFFSyxJQUFGLEtBQVcsRUFBbkMsRUFBdUM7QUFDckM7QUFDQTtBQUNBVixTQUFLVyxRQUFMLENBQWMsR0FBZDtBQUNELEdBSkQsTUFJTyxJQUFJLENBQUMsWUFBTUMsUUFBTixDQUFlUCxFQUFFSyxJQUFqQixDQUFMLEVBQTZCO0FBQ2xDO0FBQ0FWLFNBQUtXLFFBQUwsQ0FBYyxVQUFkO0FBQ0QsR0FITSxNQUdBO0FBQ0w7QUFDQTtBQUNBOztBQUVBTCxZQUFRQyxHQUFSLENBQVksZUFBWixFQUE2QlIsSUFBSWMsTUFBakM7QUFDQSxxQkFBUUMsT0FBUixDQUFnQixFQUFFQyxPQUFPLEVBQUNkLFVBQUQsRUFBVCxFQUFoQixFQUNHZSxJQURILENBQ1EsbUJBQVc7QUFDZixVQUFJQyxXQUFXLEtBQWY7O0FBRUEsVUFBSUMsT0FBSixFQUFhO0FBQ1haLGdCQUFRQyxHQUFSLENBQVksV0FBWixFQUF5Qk4sSUFBekIsRUFBK0JpQixRQUFRQyxFQUF2QztBQUNBRixtQkFBVyxJQUFYO0FBQ0E7QUFDRCxPQUpELE1BSU87QUFDTFgsZ0JBQVFDLEdBQVIsQ0FBWSxjQUFaLEVBQTRCTixJQUE1QjtBQUNBLHlCQUFRbUIsTUFBUixDQUFlZixDQUFmO0FBQ0EsNEJBQVMsU0FBVCxFQUFvQkosSUFBcEI7QUFDRDs7QUFFREssY0FBUUMsR0FBUixDQUFZLHNCQUFaLEVBQW9DUixJQUFJYyxNQUF4QztBQUNBYixXQUFLcUIsTUFBTCxDQUFZLHlCQUFaLGVBQ0toQixDQURMO0FBRUVZO0FBRkY7QUFJSCxLQW5CRDtBQXFCRDtBQUNGIiwiZmlsZSI6Im1pZGRsZXdhcmUuanMiLCJzb3VyY2VSb290IjoiL2FwcC9saWIiLCJzb3VyY2VzQ29udGVudCI6WyIvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gODBjaGFycyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPlxuaW1wb3J0IG1haWxzZWxmIGZyb20gJy4vbWFpbC5qcydcbmltcG9ydCBwYXJzZVByb21pc2UgZnJvbSAnLi9wYXJzZS5qcydcbmltcG9ydCB7IHVzZXJzIH0gZnJvbSAnLi4vZGF0YS9zZWVkLmpzJ1xuaW1wb3J0IHsgUHJvbWlzZSwgc2VxdWVsaXplIH0gZnJvbSAnLi4vbW9kZWxzL3Byb21pc2UuanMnXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGhhbmRsZVJlcXVlc3QocmVxLCByZXNwKSB7XG4gIC8vIFRoZSBzZXJ2ZXIgYXQgcHJvbWlzZXMudG8gcGFzc2VzIGFsb25nIHRoZSBmdWxsIFVSTCB0aGUgd2F5IHRoZSB1c2VyIHR5cGVkXG4gIC8vIGl0LCBzbyB3aGVuIHRoZSB1c2VyIGhpdHMgXCJib2IucHJvbWlzZXMudG8vZm9vXCIgdGhlIEdsaXRjaCBhcHAgaXMgY2FsbGVkXG4gIC8vIHdpdGggXCJpd2lsbC5nbGl0Y2gubWUvYm9iLnByb21pc2VzLnRvL2Zvb1wiIGFuZCByZXEub3JpZ2luYWxVcmwgaXNcbiAgLy8gXCIvYm9iLnByb21pc2VzLnRvL2Zvb1wiIChyZXEub3JpZ2luYWxVcmwgZG9lc24ndCBpbmNsdWRlIHRoZSBob3N0bmFtZSB3aGljaFxuICAvLyBmcm9tIHRoZSBwZXJzcGVjdGl2ZSBvZiB0aGlzIEdsaXRjaCBhcHAgaXMgXCJpd2lsbC5nbGl0Y2gubWVcIilcbiAgbGV0IHVydHggPSByZXEub3JpZ2luYWxVcmwuc3Vic3RyKDEpOyAvLyBnZXQgcmlkIG9mIHRoZSBpbml0aWFsIHNsYXNoXG4gIC8vIHVydHggaXMgbm93LCBlZywgXCJib2IucHJvbWlzZXMudG8vZm9vX3RoZV9iYXIvYnkvOWFtXCJcbiAgXG4gIC8vIFRPRE9MQVRFUjogaG93IHRvIGhhbmRsZSBcImJvYi5wcm9taXNlcy50by9mb28lYmFyXCJcbiAgLy8gVE9ET0xBVEVSOiBuZWVkIHRvIHVybC1kZWNvZGUgdG8gaGFuZGxlIFwiYm9iLnByb21pc2VzLnRvL2Zvb15iYXJcIlxuICAvLyBUT0RPTEFURVI6IGhhbmRsZSBib2IucHJvbWlzZXMudG8vZG9faXRlbV8jMi9ieS85YW1cbiAgLy8gICAgICAgICAgICBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xODc5NjQyMS9jYXB0dXJlLWFuY2hvci1saW5rXG4gIFxuICAvLyBxdWljayBoYWNrIHRvIG1ha2UgaXQgc28gYm90aCBib2IuY29tbWl0cy50byBhbmQgYm9iLmNvbW1pdHMudG8vIFxuICAvLyBzaG93IHRoZSBmdWxsIGxpc3Qgb2YgcHJvbWlzZXM6XG4gIHVydHggPSB1cnR4LnJlcGxhY2UoL1xcLyQvLCAnJylcbiAgXG4gIC8vY29uc29sZS5sb2coJ2hhbmRsZVJlcXVlc3QnLCByZXEucGFyYW1zKTtcbiAgXG4gIGxldCBwID0gcGFyc2VQcm9taXNlKHVydHgpIC8vIHAgaXMgbm93IGEgaGFzaCB7dXNlciwgd2hhdCwgdGluaSwgdGR1ZSwgZXRjfVxuICBjb25zb2xlLmxvZyhgREVCVUc6IFBST01JU0UgUEFSU0VEOiAke0pTT04uc3RyaW5naWZ5KHApfWApXG4gIFxuICBcbiAgaWYgKHAudXNlciA9PT0gJ3d3dycgfHwgcC51c2VyID09PSAnJykgeyBcbiAgICAvLyB0aGlzIGlzIHRoZSBjYXNlIG9mIG5vIHVzZXJuYW1lLCBsaWtlIGlmIHNvbWVvbmUganVzdCB3ZW50IHRvXG4gICAgLy8gXCJwcm9taXNlcy50b1wiIG9yIHRyaWVkIHRvIGZldGNoIFwicHJvbWlzZXMudG8vcm9ib3RzLnR4dFwiIG9yIHdoYXRldmVyXG4gICAgcmVzcC5yZWRpcmVjdCgnLycpO1xuICB9IGVsc2UgaWYgKCF1c2Vycy5pbmNsdWRlcyhwLnVzZXIpKSB7XG4gICAgLy8gZG9uJ3QgbGV0IHBlb3BsZSBjcmVhdGUgbmV3IHN1YmRvbWFpbnMvdXNlcnMgb24gdGhlIGZseVxuICAgIHJlc3AucmVkaXJlY3QoJy9zaWduLXVwJylcbiAgfSBlbHNlIHtcbiAgICAvLyBDaGVjayBpZiBhIHByb21pc2UgYWxyZWFkeSBleGlzdHMgd2l0aCBtYXRjaGluZyB1c2VyKyd8Jyt3aGF0XG4gICAgLy8gSWYgbm90LCBjcmVhdGUgaXRcbiAgICAvLyBJZiBzbywgZG8gbm90aGluZ1xuXG4gICAgY29uc29sZS5sb2coJ3ZhbGlkIHJlcXVlc3QnLCByZXEucGFyYW1zKTtcbiAgICBQcm9taXNlLmZpbmRPbmUoeyB3aGVyZToge3VydHh9IH0pXG4gICAgICAudGhlbihwcm9taXNlID0+IHtcbiAgICAgICAgbGV0IGV4aXN0aW5nID0gZmFsc2VcbiAgICAgICAgXG4gICAgICAgIGlmIChwcm9taXNlKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ2R1cGxpY2F0ZScsIHVydHgsIHByb21pc2UuaWQpO1xuICAgICAgICAgIGV4aXN0aW5nID0gdHJ1ZTtcbiAgICAgICAgICAvLyByZXNwLnJlZGlyZWN0KHVydHgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdjcmVhdGluZyBuZXcnLCB1cnR4KTtcbiAgICAgICAgICBQcm9taXNlLmNyZWF0ZShwKTtcbiAgICAgICAgICBtYWlsc2VsZignUFJPTUlTRScsIHVydHgpO1xuICAgICAgICB9XG4gICAgICBcbiAgICAgICAgY29uc29sZS5sb2coJ3Byb21pc2VzLnRvLyByZXF1ZXN0JywgcmVxLnBhcmFtcyk7XG4gICAgICAgIHJlc3AucmVuZGVyKCdwYXJ0aWFscy9zaW5nbGUvcHJvbWlzZScsIHtcbiAgICAgICAgICAuLi5wLFxuICAgICAgICAgIGV4aXN0aW5nLFxuICAgICAgICB9KVxuICAgIH0pXG4gXG4gIH1cbn1cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "middleware.js"
      ],
      "names": [
        "handleRequest",
        "req",
        "resp",
        "urtx",
        "originalUrl",
        "substr",
        "replace",
        "p",
        "console",
        "log",
        "JSON",
        "stringify",
        "user",
        "redirect",
        "includes",
        "params",
        "findOne",
        "where",
        "then",
        "existing",
        "promise",
        "id",
        "create",
        "render"
      ],
      "mappings": ";;;;;;kQAAA;;;kBAMwBA,a;;AALxB;;;;AACA;;;;AACA;;AACA;;;;AAEe,SAASA,aAAT,CAAuBC,GAAvB,EAA4BC,IAA5B,EAAkC;AAC/C;AACA;AACA;AACA;AACA;AACA,MAAIC,OAAOF,IAAIG,WAAJ,CAAgBC,MAAhB,CAAuB,CAAvB,CAAX,CAN+C,CAMT;AACtC;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACAF,SAAOA,KAAKG,OAAL,CAAa,KAAb,EAAoB,EAApB,CAAP;;AAEA;;AAEA,MAAIC,IAAI,qBAAaJ,IAAb,CAAR,CApB+C,CAoBpB;AAC3BK,UAAQC,GAAR,6BAAsCC,KAAKC,SAAL,CAAeJ,CAAf,CAAtC;;AAGA,MAAIA,EAAEK,IAAF,KAAW,KAAX,IAAoBL,EAAEK,IAAF,KAAW,EAAnC,EAAuC;AACrC;AACA;AACAV,SAAKW,QAAL,CAAc,GAAd;AACD,GAJD,MAIO,IAAI,CAAC,YAAMC,QAAN,CAAeP,EAAEK,IAAjB,CAAL,EAA6B;AAClC;AACAV,SAAKW,QAAL,CAAc,UAAd;AACD,GAHM,MAGA;AACL;AACA;AACA;;AAEAL,YAAQC,GAAR,CAAY,eAAZ,EAA6BR,IAAIc,MAAjC;AACA,qBAAQC,OAAR,CAAgB,EAAEC,OAAO,EAACd,UAAD,EAAT,EAAhB,EACGe,IADH,CACQ,mBAAW;AACf,UAAIC,WAAW,KAAf;;AAEA,UAAIC,OAAJ,EAAa;AACXZ,gBAAQC,GAAR,CAAY,WAAZ,EAAyBN,IAAzB,EAA+BiB,QAAQC,EAAvC;AACAF,mBAAW,IAAX;AACA;AACD,OAJD,MAIO;AACLX,gBAAQC,GAAR,CAAY,cAAZ,EAA4BN,IAA5B;AACA,yBAAQmB,MAAR,CAAef,CAAf;AACA,4BAAS,SAAT,EAAoBJ,IAApB;AACD;;AAEDK,cAAQC,GAAR,CAAY,sBAAZ,EAAoCR,IAAIc,MAAxC;AACAb,WAAKqB,MAAL,CAAY,yBAAZ,eACKhB,CADL;AAEEY;AAFF;AAIH,KAnBD;AAqBD;AACF",
      "file": "middleware.js",
      "sourceRoot": "/app/lib",
      "sourcesContent": [
        "// --------------------------------- 80chars ---------------------------------->\nimport mailself from './mail.js'\nimport parsePromise from './parse.js'\nimport { users } from '../data/seed.js'\nimport { Promise, sequelize } from '../models/promise.js'\n\nexport default function handleRequest(req, resp) {\n  // The server at promises.to passes along the full URL the way the user typed\n  // it, so when the user hits \"bob.promises.to/foo\" the Glitch app is called\n  // with \"iwill.glitch.me/bob.promises.to/foo\" and req.originalUrl is\n  // \"/bob.promises.to/foo\" (req.originalUrl doesn't include the hostname which\n  // from the perspective of this Glitch app is \"iwill.glitch.me\")\n  let urtx = req.originalUrl.substr(1); // get rid of the initial slash\n  // urtx is now, eg, \"bob.promises.to/foo_the_bar/by/9am\"\n  \n  // TODOLATER: how to handle \"bob.promises.to/foo%bar\"\n  // TODOLATER: need to url-decode to handle \"bob.promises.to/foo^bar\"\n  // TODOLATER: handle bob.promises.to/do_item_#2/by/9am\n  //            https://stackoverflow.com/questions/18796421/capture-anchor-link\n  \n  // quick hack to make it so both bob.commits.to and bob.commits.to/ \n  // show the full list of promises:\n  urtx = urtx.replace(/\\/$/, '')\n  \n  //console.log('handleRequest', req.params);\n  \n  let p = parsePromise(urtx) // p is now a hash {user, what, tini, tdue, etc}\n  console.log(`DEBUG: PROMISE PARSED: ${JSON.stringify(p)}`)\n  \n  \n  if (p.user === 'www' || p.user === '') { \n    // this is the case of no username, like if someone just went to\n    // \"promises.to\" or tried to fetch \"promises.to/robots.txt\" or whatever\n    resp.redirect('/');\n  } else if (!users.includes(p.user)) {\n    // don't let people create new subdomains/users on the fly\n    resp.redirect('/sign-up')\n  } else {\n    // Check if a promise already exists with matching user+'|'+what\n    // If not, create it\n    // If so, do nothing\n\n    console.log('valid request', req.params);\n    Promise.findOne({ where: {urtx} })\n      .then(promise => {\n        let existing = false\n        \n        if (promise) {\n          console.log('duplicate', urtx, promise.id);\n          existing = true;\n          // resp.redirect(urtx);\n        } else {\n          console.log('creating new', urtx);\n          Promise.create(p);\n          mailself('PROMISE', urtx);\n        }\n      \n        console.log('promises.to/ request', req.params);\n        resp.render('partials/single/promise', {\n          ...p,\n          existing,\n        })\n    })\n \n  }\n}\n"
      ]
    },
    "mtime": 1507284943818
  },
  "{\"filename\":\"/app/lib/mail.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/lib\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "mailgun-js",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Mailgun"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "mailself",
            "subj",
            "body"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "mailself",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "subj",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "body",
              "exported": "default"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/lib/mail.js",
      "filenameRelative": "/app/lib/mail.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "mail.js",
      "sourceFileName": "mail.js",
      "sourceRoot": "/app/lib",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/lib",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "mail"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = mailself;\n\nvar _mailgunJs = require('mailgun-js');\n\nvar _mailgunJs2 = _interopRequireDefault(_mailgunJs);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction mailself(subj, body) {\n  var mailgun = new _mailgunJs2.default({ apiKey: process.env.MAILGUN_KEY,\n    domain: process.env.MAILGUN_DOMAIN });\n  var data = {\n    from: process.env.MAILGUN_FROM,\n    to: process.env.MY_EMAIL,\n    subject: subj,\n    text: body\n  };\n  mailgun.messages().send(data, function (err, body) {});\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haWwuanMiXSwibmFtZXMiOlsibWFpbHNlbGYiLCJzdWJqIiwiYm9keSIsIm1haWxndW4iLCJhcGlLZXkiLCJwcm9jZXNzIiwiZW52IiwiTUFJTEdVTl9LRVkiLCJkb21haW4iLCJNQUlMR1VOX0RPTUFJTiIsImRhdGEiLCJmcm9tIiwiTUFJTEdVTl9GUk9NIiwidG8iLCJNWV9FTUFJTCIsInN1YmplY3QiLCJ0ZXh0IiwibWVzc2FnZXMiLCJzZW5kIiwiZXJyIl0sIm1hcHBpbmdzIjoiOzs7OztrQkFFd0JBLFE7O0FBRnhCOzs7Ozs7QUFFZSxTQUFTQSxRQUFULENBQWtCQyxJQUFsQixFQUF3QkMsSUFBeEIsRUFBOEI7QUFDM0MsTUFBSUMsVUFBVSx3QkFBWSxFQUFDQyxRQUFRQyxRQUFRQyxHQUFSLENBQVlDLFdBQXJCO0FBQ0NDLFlBQVFILFFBQVFDLEdBQVIsQ0FBWUcsY0FEckIsRUFBWixDQUFkO0FBRUEsTUFBSUMsT0FBTztBQUNUQyxVQUFTTixRQUFRQyxHQUFSLENBQVlNLFlBRFo7QUFFVEMsUUFBU1IsUUFBUUMsR0FBUixDQUFZUSxRQUZaO0FBR1RDLGFBQVNkLElBSEE7QUFJVGUsVUFBU2Q7QUFKQSxHQUFYO0FBTUFDLFVBQVFjLFFBQVIsR0FBbUJDLElBQW5CLENBQXdCUixJQUF4QixFQUE4QixVQUFDUyxHQUFELEVBQU1qQixJQUFOLEVBQWUsQ0FBRSxDQUEvQztBQUNEIiwiZmlsZSI6Im1haWwuanMiLCJzb3VyY2VSb290IjoiL2FwcC9saWIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTWFpbGd1biBmcm9tICdtYWlsZ3VuLWpzJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbWFpbHNlbGYoc3ViaiwgYm9keSkge1xuICB2YXIgbWFpbGd1biA9IG5ldyBNYWlsZ3VuKHthcGlLZXk6IHByb2Nlc3MuZW52Lk1BSUxHVU5fS0VZLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9tYWluOiBwcm9jZXNzLmVudi5NQUlMR1VOX0RPTUFJTn0pXG4gIHZhciBkYXRhID0ge1xuICAgIGZyb206ICAgIHByb2Nlc3MuZW52Lk1BSUxHVU5fRlJPTSxcbiAgICB0bzogICAgICBwcm9jZXNzLmVudi5NWV9FTUFJTCxcbiAgICBzdWJqZWN0OiBzdWJqLFxuICAgIHRleHQ6ICAgIGJvZHksXG4gIH1cbiAgbWFpbGd1bi5tZXNzYWdlcygpLnNlbmQoZGF0YSwgKGVyciwgYm9keSkgPT4ge30pXG59Il19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "mail.js"
      ],
      "names": [
        "mailself",
        "subj",
        "body",
        "mailgun",
        "apiKey",
        "process",
        "env",
        "MAILGUN_KEY",
        "domain",
        "MAILGUN_DOMAIN",
        "data",
        "from",
        "MAILGUN_FROM",
        "to",
        "MY_EMAIL",
        "subject",
        "text",
        "messages",
        "send",
        "err"
      ],
      "mappings": ";;;;;kBAEwBA,Q;;AAFxB;;;;;;AAEe,SAASA,QAAT,CAAkBC,IAAlB,EAAwBC,IAAxB,EAA8B;AAC3C,MAAIC,UAAU,wBAAY,EAACC,QAAQC,QAAQC,GAAR,CAAYC,WAArB;AACCC,YAAQH,QAAQC,GAAR,CAAYG,cADrB,EAAZ,CAAd;AAEA,MAAIC,OAAO;AACTC,UAASN,QAAQC,GAAR,CAAYM,YADZ;AAETC,QAASR,QAAQC,GAAR,CAAYQ,QAFZ;AAGTC,aAASd,IAHA;AAITe,UAASd;AAJA,GAAX;AAMAC,UAAQc,QAAR,GAAmBC,IAAnB,CAAwBR,IAAxB,EAA8B,UAACS,GAAD,EAAMjB,IAAN,EAAe,CAAE,CAA/C;AACD",
      "file": "mail.js",
      "sourceRoot": "/app/lib",
      "sourcesContent": [
        "import Mailgun from 'mailgun-js';\n\nexport default function mailself(subj, body) {\n  var mailgun = new Mailgun({apiKey: process.env.MAILGUN_KEY, \n                             domain: process.env.MAILGUN_DOMAIN})\n  var data = {\n    from:    process.env.MAILGUN_FROM,\n    to:      process.env.MY_EMAIL,\n    subject: subj,\n    text:    body,\n  }\n  mailgun.messages().send(data, (err, body) => {})\n}"
      ]
    },
    "mtime": 1507277858534
  }
}