{
  "{\"filename\":\"/app/server.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "data/users.js",
            "imported": [
              "users"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "users",
                "local": "users"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/app/server.js",
      "filenameRelative": "/app/server.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "server.js",
      "sourceFileName": "server.js",
      "sourceRoot": "/app",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "server"
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _users = require('data/users.js');\n\n// --------------------------------- 80chars ---------------------------------->\nvar express = require('express');\nvar Sequelize = require('sequelize');\nvar app = express();\nvar chrono = require('chrono-node'); // Sugar.js parses some things better\nvar Mailgun = require('mailgun-js');\nvar moment = require('moment');\n\n// DATABASE FIELDS:\n//   urtx -- urtext, ie, full original text the user typed to create the promise\n//   user -- who's making the promise\n//   what -- what's being promised\n//   whom -- to whom are you promising\n//   tini -- unixtime that the promise was made\n//   tdue -- unixtime that the promise is due\n//   tmzn -- timezone assumed for parsing the deadline\n//   tfin -- unixtime that the promise was fulfilled\n//   fill -- fraction fulfilled, default 0\n//   void -- true if the promise became unfulfillable or moot\n//   clix -- number of clicks a promise has gotten\n// For example:\n//   urtx = \"bob.promises.to/foo_the_bar/by/noon_tomorrow\"\n//   user = \"bob\"\n//   what = \"foo the bar\"\n//   whom = null\n//   tini = [unixtime of first GET request of the promise's URL]\n//   tdue = [what \"noon tomorrow\" parsed to at time tini]\n//   tmzn = \"America/Los_Angeles\"\n//   tfin = [unixtime that the promise was fulfilled]\n//   fill = 0\n//   void = false\n\n// Other ideas for fields: \n// * information about the client that originally created the promise\n// * whether the promise was created by the actual user (if they were logged in \n//   and were the first to click on it) or by another logged-in user or by \n//   someone not logged in\n// * conf: maybe we create the promise whether or not anyone clicks the button to confirm\n//   it, in which case we store when it's actually been confirmed.\n\n// LATEST SPEC:\n// The \"/by/...\" part is an optional power-user thing, not part of the MVP.\n// Instead, the first time you go to alice.promises.to/foo it gives you the \n// option to choose a deadline, defaulting to now+7days (or to what the \"/by/\" \n// part parsed to, if that's easy, but just make it a suggestion for the user, \n// just like now+7days is if they don't specify a \"/by/\"). \n// For every subsequent GET of alice.promises.to/foo it shows the deadline, with\n// no way to change it.\n\n// IDEAS FOR LATER:\n// Simpler date parsing:\n//   Maybe the date has to be YYYY-MM-DD_HH:MM\n//   Example: bob.promises.to/foo_the_bar/by/2017-09-13_12:00\n// Magic spaces:\n//   Whichever non-alphanumeric character is most common in the urtext, that's \n//   what's assumed to be a space and is replaced with spaces before parsing.\n// Less magical version:\n//   A non-alphanumeric character must follow \"alice.promises.to/\" and that\n//   character is taken as the ersatz space. Eg:\n//   alice.promises.to/_start_her_promises_with_underscores\n// Flexibility on the '/by/' part:\n//   Requiring the string '/by/' to appear in the promise URL means no ambiguity\n//   about where to start parsing the deadline. But the Chrono parsing library \n//   actually does great taking the whole string like \"foo the bar by noon \n//   tomorrow\" and figuring out the time. We could also just take the last\n//   occurrence of \"by\" and parse everything after it as the deadline.\n\napp.use(express.static('public'));\n\nfunction mailself(subj, body) {\n  var mailgun = new Mailgun({ apiKey: process.env.MAILGUN_KEY,\n    domain: process.env.MAILGUN_DOMAIN });\n  var data = {\n    from: process.env.MAILGUN_FROM,\n    to: process.env.MY_EMAIL,\n    subject: subj,\n    text: body\n  };\n  mailgun.messages().send(data, function (err, body) {});\n}\n\n// Take urtext and return a promise data structure\nfunction parseProm(urtx) {\n  var m = urtx.match(/^([^\\.]+)\\.(promises|commits)\\.to\\/(.*)$/);\n  // TODO: handle the case that no user is given, just \"promises.to/foo\"\n  var user = m ? m[1] : '';\n  var domain = m ? m[2] : '';\n  var path = m ? m[3] : '';\n  var what = '';\n  var tdue = Date.now() + 7 * 24 * 60 * 60 * 1000;\n  if (path.length > 0) {\n    var parsedPath = path.match(/^(.*?)(\\/by\\/|$)(.*)$/);\n    what = parsedPath[1]; //.replace(/_/g, ' ')\n    //tdue = parsedPath.length > 1 ? \n    //       chrono.parseDate(parsedPath[3].replace(/_/g, ' ')) * 1 : \n    //       Date.now() + 7*24*60*60*1000\n    //tdue = tdue ? ( ( tdue < Date.now() && Date.now() - tdue < 24*60*60*1000 ) ?\n    //                tdue + 24*60*60*1000 : tdue )\n    //            : Date.now() + 7*24*60*60*1000\n    tdue = parsedPath[3];\n  }\n  // TODO: path is now everything after \".promises.to\" so now parse out the \n  //       \"what\" (thing being promised) and the \"tdue\" (deadline)\n  console.log('parseProm', { user: user, path: path, domain: domain, what: what, tdue: tdue, urtx: urtx });\n  return { user: user, path: path, domain: domain, what: what, tdue: tdue, urtx: urtx, tini: Date.now() };\n}\n\n// Compute the credit you get for being t seconds late\nfunction credit(t) {\n  // see latepenalty.js\n  return 1;\n}\n\n// Initial promise list hardcoded so don't have to worry about blowing db away\nvar promises = [\"alice.promises.to/File_the_TPS_report/by/noon_mon\", \"bob.promises.to/Send_vacation_photos/by/saturday\", \"carol.promises.to/Call_the_dentist/by/12am\", \"dreev.promises.to/show_sergii_this_doing_something_useful/by/3am\", // 9-10, done\n\"dreev.promises.to/show_bee_open_questions/by/10:30pm\", // 9-10, done\n\"braden.promises.to/help_with_javascript/by/5pm\", // 9-11\n\"dreev.promises.to/show_brennan_intro/by/10:50pm\", // 9-11, done\n\"dreev.promises.to/queue_tweet_etc_for_blog_post/by/2pm\", // 9-11, done\n\"dreev.promises.to/order_indian/by/5:30pm\", // 9-12, done\n\"dreev.commits.to/ask_bee_re_sunday_parkways\", // 9-13, done\n\"dreev.commits.to/follow_up_with_everyone_re_guest_blogging\", // 9-13\n\"josh.commits.to/get_realisies_running/by/september_30\", // 9-13\n\"braden.commits.to/outline_bite_counting_post/by/Sunday_11pm\", // 9-13\n\"dreev.commits.to/report_glitch_bug\", // 9-14\n\"dreev.commits.to/googledocify_intern_form/by/12pm\", // 9-14\n\"dreev.promises.to/test_penalty_func/by/saturday_noon\", // 9-14\n\"sergii.promises.to/work_on_points_2_to_4/by/next_monday\", // 9-14\n\"dreev.commits.to/meta_debrief_kim/by/midnight_friday\", // 9-14\n\"dreev.commits.to/ping_mirabai/by/sep_22\", // 9-14\n\"dreev.commits.to/send_ms_gross_email/by/sunday_11am\", // 9-14\n\"dreev.promises.to/ping_oli/by/nov_16\", // 9-15\n\"dreev.promises.to/ping_byorgey/by/dec_20\", // 9-15\n\"dreev.promises.to/labelzero/by/1am\", // 9-15\n\"chris.promises.to/follow_up_on_that_support_thread\", // 9-18\n\"bee.commits.to/new-family-photo-to-yoko/by/tomorrow-night\", // 9-18, done early\n\"bee.commits.to/rest-of-paperwork-to-yoko-before-the-gym-tomorrow\", // 9-18, 2 hours late\n\"dreev.promises.to/debug_capitalization/by/tomorrow\", // 9-18, done 23.4 hours late\n\"bee.commits.to/email-sleep-as-android-for-specifics-about-sleep-length-measurement\", // 9-19\n\"jessica.commits.to/let_bob_know_re_meeting/by/tomorrow_5pm\", // 9-19\n\"samuel.commits.to/finish_ch_23_problem_set/by/today_6_pm\", // 9-19\n\"dreev.promises.to/intern_disc/by/wed\", // 9-19, done early\n\"kim.promises.to/email_argue_summary/by/fri\", // 9-19\n\"dreev.commits.to/clear_bogus_commit_for_nick/by/5_minutes_from_now\", // 9-19, done early\n\"kim.promises.to/reflect_Respond_anxiety_spiral_Assist/by/sat\", // 9-19\n\"dreev.commits.to/schedule-k_tax_thing/by/5pm\", // 9-19, done\n\"dreev.promises.to/set_up_mom_on_wordfeud/by/tomorrow\", // 9-20, done/void\n\"dreev.promises.to/reply_to_use_case_email/by/midnight\", // 9-20, done early\n\"kim.promises.to/consider_all_weekend_social_options/by/fri/10pm\", // 9-20\n\"kim.promises.to/submit_conclusion_email/by/10/16\", // 9-21\n\"kim.promises.to/complete_type_1_essay/by/10/1\", // 9-21\n\"kim.promises.to/inform_eve_plans/by/2\", // 9-21\n\"kim.promises.to/email_cynthia_charlap_tickets/by/9/22\", // 9-21\n\"kim.promises.to/schedule_attorney_meet/by/10/1\", // 9-21\n\"kim.promises.to/john_PAM_photos_ask/by/10/1\", // 9-21\n\"kim.promises.to/Nike_p5_email/by/10/1\", // 9-21\n\"kim.promises.to/intro_martin_marna/by/10/5\", // 9-21\n\"kim.promises.to/sbonomic_jitsjudgelist_doc/by/10/15\", // 9-21\n\"kim.promises.to/consider_all_weekend_social_options/by/fri/10pm\", // 9-21\n\"dreev.commits.to/dedup_the_iwills/by/nov\", // 9-22\n\"byorgey.promises.to/email_cut_property_summary/by/7pm\", // 9-22\n\"dreev.commits.to/copy_editing_pass_on_tao2/by/tmw_2pm\", // 9-22, done\n\"chris.promises.to/open_a_smoothie_shop/by/December\", // 9-25\n\"pierre.promises.to/water_the_office_plant/by/Friday\", // 9-25\n\"dreev.promises.to/hanna_reply/by/tonight\", // 9-26, done\n\"bee.promises.to/read-hannas-emails\", // 9-26\n\"bee.promises.to/reping-one-with-heart\", // 9-26\n\"bee.promises.to/fill-out-metromile-feedback\", // 9-26\n\"bee.promises.to/schedule-planning-with-cantor/by/friday-night\", // 9-26\n\"dreev.promises.to/ask_jana_about_blood_testers/by/dec_1\", // 9-26\n\"dreev.commits.to/take_copyediting_pass_on_micheles_draft/by/saturday\", // 9/27,\n\"stephen.promises.to/decide_upon_late_october_trip/by/saturday\", // 9-27\n\"roy.promises.to/sign_up_for_app\", // 9-27\n\"jennyli.promises.to/water_the_plants/by/sunday\", // 9-27\n\"owen.promises.to/adjust-the-shed/by/tonight_7pm\", // 9-28\n\"cole.promises.to/find_a_rep_for_dining_vendors\"];\n\n// 9-28\n/* \nlet test\n//test = chrono.parseDate(\"foo the bar by sep 15th noon\")\ntest = chrono.parseDate(\"Call_the_dentist by 2017-10-15 12pm\")\nconsole.log(`DEBUG: ${test} (unixtime = ${test.getTime()/1000}`)\nconsole.log(\"DEBUG: \", JSON.stringify(parseProm(promises[2])))\n*/\n\nvar Promise;\n\n// set up a new database using database credentials set in .env\nvar sequelize = new Sequelize('database', process.env.DB_USER, process.env.DB_PASS, {\n  host: '0.0.0.0',\n  dialect: 'sqlite',\n  pool: {\n    max: 5,\n    min: 0,\n    idle: 10000\n  },\n  // Security note: db is saved to `.data/database.sqlite` in local filesystem.\n  // Nothing in `.data` directory gets copied if someone remixes the project.\n  storage: '.data/database.sqlite'\n});\n\n// authenticate with the database\nsequelize.authenticate().then(function (err) {\n  console.log('Connection has been established successfully.');\n  // define a new table 'promises'\n  Promise = sequelize.define('promises', {\n    urtx: { type: Sequelize.STRING }, // urtext, including whole URL\n    user: { type: Sequelize.STRING }, // who's making the promise\n    what: { type: Sequelize.STRING }, // what's being promised\n    //whom: { type: Sequelize.STRING  }, // to whom are you promising\n    tini: { type: Sequelize.INTEGER }, // unixtime that promise was made\n    tdue: { type: Sequelize.STRING } // unixtime that the promise is due\n    //tmzn: { type: Sequelize.STRING  }, // timezone\n    //wtdid: { type: Sequelize.INTEGER }, // unixtime that the promise was fulfilled\n    //fill: { type: Sequelize.FLOAT   }, // fraction fulfilled\n    //void: { type: Sequelize.BOOLEAN }, // whether promise was voided\n    // text:   { type: Sequelize.STRING }, // this was just for testing\n  });\n  //setup()\n}).catch(function (err) {\n  console.log('Unable to connect to the database: ', err);\n});\n\n// populate table with hardcoded promises above\nfunction setup() {\n  Promise.sync({ force: true }) // 'force: true' just drops the table if it exists\n  .then(function () {\n    // and creates a new one!\n    // Add the default promises to the database\n    for (var i = 0; i < promises.length; i++) {\n      Promise.create(parseProm(promises[i]));\n    }\n  });\n}\n\napp.get('/promise/:udp/:urtx', function (req, resp) {\n  var urtx = req.originalUrl.substr(9);\n  Promise.findOne({ where: { urtx: urtx } }).then(function (promise) {\n    console.log('single promise', urtx, promise);\n    // resp.write(promise)\n    resp.json(promise);\n  });\n});\n\napp.get('/', function (req, resp) {\n  resp.sendFile(__dirname + '/public/index.html');\n});\n\napp.get('/promises', function (req, resp) {\n  var dbPromises = {};\n  Promise.findAll({\n    order: sequelize.literal('tini DESC')\n  }).then(function (promises) {\n    console.log('a;; promises', promises);\n    promises.forEach(function (promise) {\n      dbPromises[promise.user] = dbPromises[promise.user] || [];\n      dbPromises[promise.user].push(promise); // adds their info to dbPromises value\n    });\n    resp.send(dbPromises); // sends dbPromises back to the page\n  });\n});\n\napp.get('/promises/:user', function (req, resp) {\n  var dbPromises = [];\n  Promise.findAll({\n    where: {\n      user: req.params.user\n    }\n  }).then(function (promises) {\n    console.log('user promises', promises);\n    promises.forEach(function (promise) {\n      dbPromises.push(promise); // adds their info to dbPromises value\n    });\n    resp.send(dbPromises); // sends dbPromises back to the page\n  });\n});\n\napp.get('/promises/remove/:urtx', function (req, resp) {\n  Promise.findAll({\n    where: {\n      user: req.params.user\n    }\n  });\n});\n\n// creates a new entry in the promises table with the submitted values\napp.post('/promises', function (req, resp) {\n  console.log('promise req', req, resp);\n  Promise.create({ text: req.query.promise });\n  resp.sendStatus(200);\n});\n\napp.get('/reset', function (req, resp) {\n  setup();\n  resp.redirect('/');\n});\n\n// removes all entries from the promises table\napp.get('/clear', function (req, resp) {\n  Promise.destroy({ where: {} });\n  resp.redirect('/');\n});\n\n/*\nLittle picture: Why does this error handling code not run when I surf to \na bad URL like iwill.glitch.me/foo%bar\n\nBigger picture: I'm making an app that needs to process any URL the user may \nthrow at it. I need the server to get the exact URL the way the user sees it in \nthe browser. That's going to be especially tricky for things like '#' characters\nbut right now I'm just trying to figure out the case of arbitrary '%' characters\nthat may not correspond to proper %-encodings.\n\nI'm thinking like a catchall error-handling route that no matter what weird\nencoding or whatever error is thrown I can still have the code here do something\nwith the URL as the user typed it.\n\nFor now we're just dropping all this and having the app give the user an error\nif there are any weird characters in the URL.\n\napp.use(function(req, resp, next) {\n  var err = null\n  try {\n    console.log(\"TRYING\", req.path, req.url)\n    decodeURIComponent(req.path)\n  } catch(e) {\n    err = e\n  }\n  if (err) {\n    console.log(\"CAUGHT ERR:\", err, req.url)\n    return resp.redirect('/')\n  }\n  next();\n\n  //console.log(\"DEBUG USE1:\", req.originalUrl)\n  //resp.redirect('/')\n})\n*/\n\napp.all('*', function (req, resp) {\n  // The server at promises.to passes along the full URL the way the user typed\n  // it, so when the user hits \"bob.promises.to/foo\" the Glitch app is called\n  // with \"iwill.glitch.me/bob.promises.to/foo\" and req.originalUrl is\n  // \"/bob.promises.to/foo\" (originalUrl doesn't include the hostname)\n  var urtx = req.originalUrl.substr(1); // get rid of the initial slash\n  // urtx is now, eg, \"bob.promises.to/foo_the_bar/by/9am\"\n\n  // TODO: don't try to parse a promise if no subdomain, ie, no user given\n  // TODOLATER: how to handle \"bob.promises.to/foo%bar\"\n  // TODOLATER: need to url-decode to handle \"bob.promises.to/foo^bar\"\n  // TODOLATER: handle bob.promises.to/do_item_#2/by/9am\n  //           https://stackoverflow.com/questions/18796421/capture-anchor-links\n\n  console.log(\"DEBUG urtx:\", urtx);\n  // Parse the urtext into user, what, whom, tini, tdue, etc\n  // Check if a promise already exists with matching user+'|'+what\n  // If not, create it\n  // If so, do nothing\n  var p = parseProm(urtx);\n  // TODO: if the url was just alice.promises.to then we want to show alice's\n  // statistics and list of promises and everything\n  if (p.user === 'www' || p.user === '') {\n    // TODO: this is the case of no username, like if someone just went to\n    // \"promises.to\" or tried to fetch \"promises.to/robots.txt\" or whatever\n    resp.sendFile(__dirname + '/public/index.html');\n  } else if (!_users.users.includes(p.user)) {\n    // TODO: tell user \"Sorry, no such user! Get in touch if you want to get in\n    // on our beta!\"\n    resp.sendFile(__dirname + '/public/index.html');\n  } else {\n    Promise.findOne({ where: { urtx: urtx } }).then(function (promise) {\n      if (promise) {\n        console.log('duplicate', urtx);\n        resp.redirect('/promise/' + urtx);\n      } else {\n        Promise.create(p);\n        mailself('PROMISE', urtx);\n      }\n    });\n\n    resp.sendFile(__dirname + '/public/index.html');\n  }\n});\n\nvar listener = app.listen(process.env.PORT, function () {\n  console.log('Promises app is listening on port ' + listener.address().port);\n});\n\n// --------------------------------- 80chars ---------------------------------->\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZlci5qcyJdLCJuYW1lcyI6WyJleHByZXNzIiwicmVxdWlyZSIsIlNlcXVlbGl6ZSIsImFwcCIsImNocm9ubyIsIk1haWxndW4iLCJtb21lbnQiLCJ1c2UiLCJzdGF0aWMiLCJtYWlsc2VsZiIsInN1YmoiLCJib2R5IiwibWFpbGd1biIsImFwaUtleSIsInByb2Nlc3MiLCJlbnYiLCJNQUlMR1VOX0tFWSIsImRvbWFpbiIsIk1BSUxHVU5fRE9NQUlOIiwiZGF0YSIsImZyb20iLCJNQUlMR1VOX0ZST00iLCJ0byIsIk1ZX0VNQUlMIiwic3ViamVjdCIsInRleHQiLCJtZXNzYWdlcyIsInNlbmQiLCJlcnIiLCJwYXJzZVByb20iLCJ1cnR4IiwibSIsIm1hdGNoIiwidXNlciIsInBhdGgiLCJ3aGF0IiwidGR1ZSIsIkRhdGUiLCJub3ciLCJsZW5ndGgiLCJwYXJzZWRQYXRoIiwiY29uc29sZSIsImxvZyIsInRpbmkiLCJjcmVkaXQiLCJ0IiwicHJvbWlzZXMiLCJQcm9taXNlIiwic2VxdWVsaXplIiwiREJfVVNFUiIsIkRCX1BBU1MiLCJob3N0IiwiZGlhbGVjdCIsInBvb2wiLCJtYXgiLCJtaW4iLCJpZGxlIiwic3RvcmFnZSIsImF1dGhlbnRpY2F0ZSIsInRoZW4iLCJkZWZpbmUiLCJ0eXBlIiwiU1RSSU5HIiwiSU5URUdFUiIsImNhdGNoIiwic2V0dXAiLCJzeW5jIiwiZm9yY2UiLCJpIiwiY3JlYXRlIiwiZ2V0IiwicmVxIiwicmVzcCIsIm9yaWdpbmFsVXJsIiwic3Vic3RyIiwiZmluZE9uZSIsIndoZXJlIiwicHJvbWlzZSIsImpzb24iLCJzZW5kRmlsZSIsIl9fZGlybmFtZSIsImRiUHJvbWlzZXMiLCJmaW5kQWxsIiwib3JkZXIiLCJsaXRlcmFsIiwiZm9yRWFjaCIsInB1c2giLCJwYXJhbXMiLCJwb3N0IiwicXVlcnkiLCJzZW5kU3RhdHVzIiwicmVkaXJlY3QiLCJkZXN0cm95IiwiYWxsIiwicCIsImluY2x1ZGVzIiwibGlzdGVuZXIiLCJs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Ijoic2VydmVyLmpzIiwic291cmNlUm9vdCI6Ii9hcHAiLCJzb3VyY2VzQ29udGVudCI6WyIvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gODBjaGFycyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPlxudmFyIGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJylcbnZhciBTZXF1ZWxpemUgPSByZXF1aXJlKCdzZXF1ZWxpemUnKVxudmFyIGFwcCA9IGV4cHJlc3MoKVxudmFyIGNocm9ubyA9IHJlcXVpcmUoJ2Nocm9uby1ub2RlJykgLy8gU3VnYXIuanMgcGFyc2VzIHNvbWUgdGhpbmdzIGJldHRlclxudmFyIE1haWxndW4gPSByZXF1aXJlKCdtYWlsZ3VuLWpzJylcbnZhciBtb21lbnQgPSByZXF1aXJlKCdtb21lbnQnKVxuXG5pbXBvcnQgeyB1c2VycyB9IGZyb20gJ2RhdGEvdXNlcnMuanMnO1xuXG4vLyBEQVRBQkFTRSBGSUVMRFM6XG4vLyAgIHVydHggLS0gdXJ0ZXh0LCBpZSwgZnVsbCBvcmlnaW5hbCB0ZXh0IHRoZSB1c2VyIHR5cGVkIHRvIGNyZWF0ZSB0aGUgcHJvbWlzZVxuLy8gICB1c2VyIC0tIHdobydzIG1ha2luZyB0aGUgcHJvbWlzZVxuLy8gICB3aGF0IC0tIHdoYXQncyBiZWluZyBwcm9taXNlZFxuLy8gICB3aG9tIC0tIHRvIHdob20gYXJlIHlvdSBwcm9taXNpbmdcbi8vICAgdGluaSAtLSB1bml4dGltZSB0aGF0IHRoZSBwcm9taXNlIHdhcyBtYWRlXG4vLyAgIHRkdWUgLS0gdW5peHRpbWUgdGhhdCB0aGUgcHJvbWlzZSBpcyBkdWVcbi8vICAgdG16biAtLSB0aW1lem9uZSBhc3N1bWVkIGZvciBwYXJzaW5nIHRoZSBkZWFkbGluZVxuLy8gICB0ZmluIC0tIHVuaXh0aW1lIHRoYXQgdGhlIHByb21pc2Ugd2FzIGZ1bGZpbGxlZFxuLy8gICBmaWxsIC0tIGZyYWN0aW9uIGZ1bGZpbGxlZCwgZGVmYXVsdCAwXG4vLyAgIHZvaWQgLS0gdHJ1ZSBpZiB0aGUgcHJvbWlzZSBiZWNhbWUgdW5mdWxmaWxsYWJsZSBvciBtb290XG4vLyAgIGNsaXggLS0gbnVtYmVyIG9mIGNsaWNrcyBhIHByb21pc2UgaGFzIGdvdHRlblxuLy8gRm9yIGV4YW1wbGU6XG4vLyAgIHVydHggPSBcImJvYi5wcm9taXNlcy50by9mb29fdGhlX2Jhci9ieS9ub29uX3RvbW9ycm93XCJcbi8vICAgdXNlciA9IFwiYm9iXCJcbi8vICAgd2hhdCA9IFwiZm9vIHRoZSBiYXJcIlxuLy8gICB3aG9tID0gbnVsbFxuLy8gICB0aW5pID0gW3VuaXh0aW1lIG9mIGZpcnN0IEdFVCByZXF1ZXN0IG9mIHRoZSBwcm9taXNlJ3MgVVJMXVxuLy8gICB0ZHVlID0gW3doYXQgXCJub29uIHRvbW9ycm93XCIgcGFyc2VkIHRvIGF0IHRpbWUgdGluaV1cbi8vICAgdG16biA9IFwiQW1lcmljYS9Mb3NfQW5nZWxlc1wiXG4vLyAgIHRmaW4gPSBbdW5peHRpbWUgdGhhdCB0aGUgcHJvbWlzZSB3YXMgZnVsZmlsbGVkXVxuLy8gICBmaWxsID0gMFxuLy8gICB2b2lkID0gZmFsc2VcblxuLy8gT3RoZXIgaWRlYXMgZm9yIGZpZWxkczogXG4vLyAqIGluZm9ybWF0aW9uIGFib3V0IHRoZSBjbGllbnQgdGhhdCBvcmlnaW5hbGx5IGNyZWF0ZWQgdGhlIHByb21pc2Vcbi8vICogd2hldGhlciB0aGUgcHJvbWlzZSB3YXMgY3JlYXRlZCBieSB0aGUgYWN0dWFsIHVzZXIgKGlmIHRoZXkgd2VyZSBsb2dnZWQgaW4gXG4vLyAgIGFuZCB3ZXJlIHRoZSBmaXJzdCB0byBjbGljayBvbiBpdCkgb3IgYnkgYW5vdGhlciBsb2dnZWQtaW4gdXNlciBvciBieSBcbi8vICAgc29tZW9uZSBub3QgbG9nZ2VkIGluXG4vLyAqIGNvbmY6IG1heWJlIHdlIGNyZWF0ZSB0aGUgcHJvbWlzZSB3aGV0aGVyIG9yIG5vdCBhbnlvbmUgY2xpY2tzIHRoZSBidXR0b24gdG8gY29uZmlybVxuLy8gICBpdCwgaW4gd2hpY2ggY2FzZSB3ZSBzdG9yZSB3aGVuIGl0J3MgYWN0dWFsbHkgYmVlbiBjb25maXJtZWQuXG5cbi8vIExBVEVTVCBTUEVDOlxuLy8gVGhlIFwiL2J5Ly4uLlwiIHBhcnQgaXMgYW4gb3B0aW9uYWwgcG93ZXItdXNlciB0aGluZywgbm90IHBhcnQgb2YgdGhlIE1WUC5cbi8vIEluc3RlYWQsIHRoZSBmaXJzdCB0aW1lIHlvdSBnbyB0byBhbGljZS5wcm9taXNlcy50by9mb28gaXQgZ2l2ZXMgeW91IHRoZSBcbi8vIG9wdGlvbiB0byBjaG9vc2UgYSBkZWFkbGluZSwgZGVmYXVsdGluZyB0byBub3crN2RheXMgKG9yIHRvIHdoYXQgdGhlIFwiL2J5L1wiIFxuLy8gcGFydCBwYXJzZWQgdG8sIGlmIHRoYXQncyBlYXN5LCBidXQganVzdCBtYWtlIGl0IGEgc3VnZ2VzdGlvbiBmb3IgdGhlIHVzZXIsIFxuLy8ganVzdCBsaWtlIG5vdys3ZGF5cyBpcyBpZiB0aGV5IGRvbid0IHNwZWNpZnkgYSBcIi9ieS9cIikuIFxuLy8gRm9yIGV2ZXJ5IHN1YnNlcXVlbnQgR0VUIG9mIGFsaWNlLnByb21pc2VzLnRvL2ZvbyBpdCBzaG93cyB0aGUgZGVhZGxpbmUsIHdpdGhcbi8vIG5vIHdheSB0byBjaGFuZ2UgaXQuXG5cbi8vIElERUFTIEZPUiBMQVRFUjpcbi8vIFNpbXBsZXIgZGF0ZSBwYXJzaW5nOlxuLy8gICBNYXliZSB0aGUgZGF0ZSBoYXMgdG8gYmUgWVlZWS1NTS1ERF9ISDpNTVxuLy8gICBFeGFtcGxlOiBib2IucHJvbWlzZXMudG8vZm9vX3RoZV9iYXIvYnkvMjAxNy0wOS0xM18xMjowMFxuLy8gTWFnaWMgc3BhY2VzOlxuLy8gICBXaGljaGV2ZXIgbm9uLWFscGhhbnVtZXJpYyBjaGFyYWN0ZXIgaXMgbW9zdCBjb21tb24gaW4gdGhlIHVydGV4dCwgdGhhdCdzIFxuLy8gICB3aGF0J3MgYXNzdW1lZCB0byBiZSBhIHNwYWNlIGFuZCBpcyByZXBsYWNlZCB3aXRoIHNwYWNlcyBiZWZvcmUgcGFyc2luZy5cbi8vIExlc3MgbWFnaWNhbCB2ZXJzaW9uOlxuLy8gICBBIG5vbi1hbHBoYW51bWVyaWMgY2hhcmFjdGVyIG11c3QgZm9sbG93IFwiYWxpY2UucHJvbWlzZXMudG8vXCIgYW5kIHRoYXRcbi8vICAgY2hhcmFjdGVyIGlzIHRha2VuIGFzIHRoZSBlcnNhdHogc3BhY2UuIEVnOlxuLy8gICBhbGljZS5wcm9taXNlcy50by9fc3RhcnRfaGVyX3Byb21pc2VzX3dpdGhfdW5kZXJzY29yZXNcbi8vIEZsZXhpYmlsaXR5IG9uIHRoZSAnL2J5LycgcGFydDpcbi8vICAgUmVxdWlyaW5nIHRoZSBzdHJpbmcgJy9ieS8nIHRvIGFwcGVhciBpbiB0aGUgcHJvbWlzZSBVUkwgbWVhbnMgbm8gYW1iaWd1aXR5XG4vLyAgIGFib3V0IHdoZXJlIHRvIHN0YXJ0IHBhcnNpbmcgdGhlIGRlYWRsaW5lLiBCdXQgdGhlIENocm9ubyBwYXJzaW5nIGxpYnJhcnkgXG4vLyAgIGFjdHVhbGx5IGRvZXMgZ3JlYXQgdGFraW5nIHRoZSB3aG9sZSBzdHJpbmcgbGlrZSBcImZvbyB0aGUgYmFyIGJ5IG5vb24gXG4vLyAgIHRvbW9ycm93XCIgYW5kIGZpZ3VyaW5nIG91dCB0aGUgdGltZS4gV2UgY291bGQgYWxzbyBqdXN0IHRha2UgdGhlIGxhc3Rcbi8vICAgb2NjdXJyZW5jZSBvZiBcImJ5XCIgYW5kIHBhcnNlIGV2ZXJ5dGhpbmcgYWZ0ZXIgaXQgYXMgdGhlIGRlYWRsaW5lLlxuXG5hcHAudXNlKGV4cHJlc3Muc3RhdGljKCdwdWJsaWMnKSlcblxuZnVuY3Rpb24gbWFpbHNlbGYoc3ViaiwgYm9keSkge1xuICB2YXIgbWFpbGd1biA9IG5ldyBNYWlsZ3VuKHthcGlLZXk6IHByb2Nlc3MuZW52Lk1BSUxHVU5fS0VZLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9tYWluOiBwcm9jZXNzLmVudi5NQUlMR1VOX0RPTUFJTn0pXG4gIHZhciBkYXRhID0ge1xuICAgIGZyb206ICAgIHByb2Nlc3MuZW52Lk1BSUxHVU5fRlJPTSxcbiAgICB0bzogICAgICBwcm9jZXNzLmVudi5NWV9FTUFJTCxcbiAgICBzdWJqZWN0OiBzdWJqLFxuICAgIHRleHQ6ICAgIGJvZHksXG4gIH1cbiAgbWFpbGd1bi5tZXNzYWdlcygpLnNlbmQoZGF0YSwgKGVyciwgYm9keSkgPT4ge30pXG59XG5cbi8vIFRha2UgdXJ0ZXh0IGFuZCByZXR1cm4gYSBwcm9taXNlIGRhdGEgc3RydWN0dXJlXG5mdW5jdGlvbiBwYXJzZVByb20odXJ0eCkge1xuICBsZXQgbSA9IHVydHgubWF0Y2goL14oW15cXC5dKylcXC4ocHJvbWlzZXN8Y29tbWl0cylcXC50b1xcLyguKikkLylcbiAgLy8gVE9ETzogaGFuZGxlIHRoZSBjYXNlIHRoYXQgbm8gdXNlciBpcyBnaXZlbiwganVzdCBcInByb21pc2VzLnRvL2Zvb1wiXG4gIGxldCB1c2VyID0gbSA/IG1bMV0gOiAnJ1xuICBsZXQgZG9tYWluID0gbSA/IG1bMl0gOiAnJ1xuICBsZXQgcGF0aCA9IG0gPyBtWzNdIDogJydcbiAgbGV0IHdoYXQgPSAnJ1xuICBsZXQgdGR1ZSA9IERhdGUubm93KCkgKyA3KjI0KjYwKjYwKjEwMDBcbiAgaWYgKHBhdGgubGVuZ3RoID4gMCkge1xuICAgIGxldCBwYXJzZWRQYXRoID0gcGF0aC5tYXRjaCgvXiguKj8pKFxcL2J5XFwvfCQpKC4qKSQvKVxuICAgIHdoYXQgPSBwYXJzZWRQYXRoWzFdIC8vLnJlcGxhY2UoL18vZywgJyAnKVxuICAgIC8vdGR1ZSA9IHBhcnNlZFBhdGgubGVuZ3RoID4gMSA/IFxuICAgIC8vICAgICAgIGNocm9uby5wYXJzZURhdGUocGFyc2VkUGF0aFszXS5yZXBsYWNlKC9fL2csICcgJykpICogMSA6IFxuICAgIC8vICAgICAgIERhdGUubm93KCkgKyA3KjI0KjYwKjYwKjEwMDBcbiAgICAvL3RkdWUgPSB0ZHVlID8gKCAoIHRkdWUgPCBEYXRlLm5vdygpICYmIERhdGUubm93KCkgLSB0ZHVlIDwgMjQqNjAqNjAqMTAwMCApID9cbiAgICAvLyAgICAgICAgICAgICAgICB0ZHVlICsgMjQqNjAqNjAqMTAwMCA6IHRkdWUgKVxuICAgIC8vICAgICAgICAgICAgOiBEYXRlLm5vdygpICsgNyoyNCo2MCo2MCoxMDAwXG4gICAgdGR1ZSA9IHBhcnNlZFBhdGhbM11cbiAgfVxuICAvLyBUT0RPOiBwYXRoIGlzIG5vdyBldmVyeXRoaW5nIGFmdGVyIFwiLnByb21pc2VzLnRvXCIgc28gbm93IHBhcnNlIG91dCB0aGUgXG4gIC8vICAgICAgIFwid2hhdFwiICh0aGluZyBiZWluZyBwcm9taXNlZCkgYW5kIHRoZSBcInRkdWVcIiAoZGVhZGxpbmUpXG4gIGNvbnNvbGUubG9nKCdwYXJzZVByb20nLCB7IHVzZXIsIHBhdGgsIGRvbWFpbiwgd2hhdCwgdGR1ZSwgdXJ0eCB9KVxuICByZXR1cm4geyB1c2VyLCBwYXRoLCBkb21haW4sIHdoYXQsIHRkdWUsIHVydHgsIHRpbmk6IERhdGUubm93KCkgfVxufVxuXG4vLyBDb21wdXRlIHRoZSBjcmVkaXQgeW91IGdldCBmb3IgYmVpbmcgdCBzZWNvbmRzIGxhdGVcbmZ1bmN0aW9uIGNyZWRpdCh0KSB7XG4gIC8vIHNlZSBsYXRlcGVuYWx0eS5qc1xuICByZXR1cm4gMVxufVxuXG4vLyBJbml0aWFsIHByb21pc2UgbGlzdCBoYXJkY29kZWQgc28gZG9uJ3QgaGF2ZSB0byB3b3JyeSBhYm91dCBibG93aW5nIGRiIGF3YXlcbmxldCBwcm9taXNlcyA9IFtcbiAgXCJhbGljZS5wcm9taXNlcy50by9GaWxlX3RoZV9UUFNfcmVwb3J0L2J5L25vb25fbW9uXCIsXG4gIFwiYm9iLnByb21pc2VzLnRvL1NlbmRfdmFjYXRpb25fcGhvdG9zL2J5L3NhdHVyZGF5XCIsXG4gIFwiY2Fyb2wucHJvbWlzZXMudG8vQ2FsbF90aGVfZGVudGlzdC9ieS8xMmFtXCIsXG4gIFwiZHJlZXYucHJvbWlzZXMudG8vc2hvd19zZXJnaWlfdGhpc19kb2luZ19zb21ldGhpbmdfdXNlZnVsL2J5LzNhbVwiLCAvLyA5LTEwLCBkb25lXG4gIFwiZHJlZXYucHJvbWlzZXMudG8vc2hvd19iZWVfb3Blbl9xdWVzdGlvbnMvYnkvMTA6MzBwbVwiLCAvLyA5LTEwLCBkb25lXG4gIFwiYnJhZGVuLnByb21pc2VzLnRvL2hlbHBfd2l0aF9qYXZhc2NyaXB0L2J5LzVwbVwiLCAvLyA5LTExXG4gIFwiZHJlZXYucHJvbWlzZXMudG8vc2hvd19icmVubmFuX2ludHJvL2J5LzEwOjUwcG1cIiwgLy8gOS0xMSwgZG9uZVxuICBcImRyZWV2LnByb21pc2VzLnRvL3F1ZXVlX3R3ZWV0X2V0Y19mb3JfYmxvZ19wb3N0L2J5LzJwbVwiLCAvLyA5LTExLCBkb25lXG4gIFwiZHJlZXYucHJvbWlzZXMudG8vb3JkZXJfaW5kaWFuL2J5LzU6MzBwbVwiLCAvLyA5LTEyLCBkb25lXG4gIFwiZHJlZXYuY29tbWl0cy50by9hc2tfYmVlX3JlX3N1bmRheV9wYXJrd2F5c1wiLCAvLyA5LTEzLCBkb25lXG4gIFwiZHJlZXYuY29tbWl0cy50by9mb2xsb3dfdXBfd2l0aF9ldmVyeW9uZV9yZV9ndWVzdF9ibG9nZ2luZ1wiLCAvLyA5LTEzXG4gIFwiam9zaC5jb21taXRzLnRvL2dldF9yZWFsaXNpZXNfcnVubmluZy9ieS9zZXB0ZW1iZXJfMzBcIiwgLy8gOS0xM1xuICBcImJyYWRlbi5jb21taXRzLnRvL291dGxpbmVfYml0ZV9jb3VudGluZ19wb3N0L2J5L1N1bmRheV8xMXBtXCIsIC8vIDktMTNcbiAgXCJkcmVldi5jb21taXRzLnRvL3JlcG9ydF9nbGl0Y2hfYnVnXCIsIC8vIDktMTRcbiAgXCJkcmVldi5jb21taXRzLnRvL2dvb2dsZWRvY2lmeV9pbnRlcm5fZm9ybS9ieS8xMnBtXCIsIC8vIDktMTRcbiAgXCJkcmVldi5wcm9taXNlcy50by90ZXN0X3BlbmFsdHlfZnVuYy9ieS9zYXR1cmRheV9ub29uXCIsIC8vIDktMTRcbiAgXCJzZXJnaWkucHJvbWlzZXMudG8vd29ya19vbl9wb2ludHNfMl90b180L2J5L25leHRfbW9uZGF5XCIsIC8vIDktMTRcbiAgXCJkcmVldi5jb21taXRzLnRvL21ldGFfZGVicmllZl9raW0vYnkvbWlkbmlnaHRfZnJpZGF5XCIsIC8vIDktMTRcbiAgXCJkcmVldi5jb21taXRzLnRvL3BpbmdfbWlyYWJhaS9ieS9zZXBfMjJcIiwgLy8gOS0xNFxuICBcImRyZWV2LmNvbW1pdHMudG8vc2VuZF9tc19ncm9zc19lbWFpbC9ieS9zdW5kYXlfMTFhbVwiLCAvLyA5LTE0XG4gIFwiZHJlZXYucHJvbWlzZXMudG8vcGluZ19vbGkvYnkvbm92XzE2XCIsIC8vIDktMTVcbiAgXCJkcmVldi5wcm9taXNlcy50by9waW5nX2J5b3JnZXkvYnkvZGVjXzIwXCIsIC8vIDktMTVcbiAgXCJkcmVldi5wcm9taXNlcy50by9sYWJlbHplcm8vYnkvMWFtXCIsIC8vIDktMTVcbiAgXCJjaHJpcy5wcm9taXNlcy50by9mb2xsb3dfdXBfb25fdGhhdF9zdXBwb3J0X3RocmVhZFwiLCAvLyA5LTE4XG4gIFwiYmVlLmNvbW1pdHMudG8vbmV3LWZhbWlseS1waG90by10by15b2tvL2J5L3RvbW9ycm93LW5pZ2h0XCIsIC8vIDktMTgsIGRvbmUgZWFybHlcbiAgXCJiZWUuY29tbWl0cy50by9yZXN0LW9mLXBhcGVyd29yay10by15b2tvLWJlZm9yZS10aGUtZ3ltLXRvbW9ycm93XCIsIC8vIDktMTgsIDIgaG91cnMgbGF0ZVxuICBcImRyZWV2LnByb21pc2VzLnRvL2RlYnVnX2NhcGl0YWxpemF0aW9uL2J5L3RvbW9ycm93XCIsIC8vIDktMTgsIGRvbmUgMjMuNCBob3VycyBsYXRlXG4gIFwiYmVlLmNvbW1pdHMudG8vZW1haWwtc2xlZXAtYXMtYW5kcm9pZC1mb3Itc3BlY2lmaWNzLWFib3V0LXNsZWVwLWxlbmd0aC1tZWFzdXJlbWVudFwiLCAvLyA5LTE5XG4gIFwiamVzc2ljYS5jb21taXRzLnRvL2xldF9ib2Jfa25vd19yZV9tZWV0aW5nL2J5L3RvbW9ycm93XzVwbVwiLCAvLyA5LTE5XG4gIFwic2FtdWVsLmNvbW1pdHMudG8vZmluaXNoX2NoXzIzX3Byb2JsZW1fc2V0L2J5L3RvZGF5XzZfcG1cIiwgLy8gOS0xOVxuICBcImRyZWV2LnByb21pc2VzLnRvL2ludGVybl9kaXNjL2J5L3dlZFwiLCAvLyA5LTE5LCBkb25lIGVhcmx5XG4gIFwia2ltLnByb21pc2VzLnRvL2VtYWlsX2FyZ3VlX3N1bW1hcnkvYnkvZnJpXCIsIC8vIDktMTlcbiAgXCJkcmVldi5jb21taXRzLnRvL2NsZWFyX2JvZ3VzX2NvbW1pdF9mb3Jfbmljay9ieS81X21pbnV0ZXNfZnJvbV9ub3dcIiwgLy8gOS0xOSwgZG9uZSBlYXJseVxuICBcImtpbS5wcm9taXNlcy50by9yZWZsZWN0X1Jlc3BvbmRfYW54aWV0eV9zcGlyYWxfQXNzaXN0L2J5L3NhdFwiLCAvLyA5LTE5XG4gIFwiZHJlZXYuY29tbWl0cy50by9zY2hlZHVsZS1rX3RheF90aGluZy9ieS81cG1cIiwgLy8gOS0xOSwgZG9uZVxuICBcImRyZWV2LnByb21pc2VzLnRvL3NldF91cF9tb21fb25fd29yZGZldWQvYnkvdG9tb3Jyb3dcIiwgLy8gOS0yMCwgZG9uZS92b2lkXG4gIFwiZHJlZXYucHJvbWlzZXMudG8vcmVwbHlfdG9fdXNlX2Nhc2VfZW1haWwvYnkvbWlkbmlnaHRcIiwgLy8gOS0yMCwgZG9uZSBlYXJseVxuICBcImtpbS5wcm9taXNlcy50by9jb25zaWRlcl9hbGxfd2Vla2VuZF9zb2NpYWxfb3B0aW9ucy9ieS9mcmkvMTBwbVwiLCAvLyA5LTIwXG4gIFwia2ltLnByb21pc2VzLnRvL3N1Ym1pdF9jb25jbHVzaW9uX2VtYWlsL2J5LzEwLzE2XCIsIC8vIDktMjFcbiAgXCJraW0ucHJvbWlzZXMudG8vY29tcGxldGVfdHlwZV8xX2Vzc2F5L2J5LzEwLzFcIiwgLy8gOS0yMVxuICBcImtpbS5wcm9taXNlcy50by9pbmZvcm1fZXZlX3BsYW5zL2J5LzJcIiwgLy8gOS0yMVxuICBcImtpbS5wcm9taXNlcy50by9lbWFpbF9jeW50aGlhX2NoYXJsYXBfdGlja2V0cy9ieS85LzIyXCIsIC8vIDktMjFcbiAgXCJraW0ucHJvbWlzZXMudG8vc2NoZWR1bGVfYXR0b3JuZXlfbWVldC9ieS8xMC8xXCIsIC8vIDktMjFcbiAgXCJraW0ucHJvbWlzZXMudG8vam9obl9QQU1fcGhvdG9zX2Fzay9ieS8xMC8xXCIsIC8vIDktMjFcbiAgXCJraW0ucHJvbWlzZXMudG8vTmlrZV9wNV9lbWFpbC9ieS8xMC8xXCIsIC8vIDktMjFcbiAgXCJraW0ucHJvbWlzZXMudG8vaW50cm9fbWFydGluX21hcm5hL2J5LzEwLzVcIiwgLy8gOS0yMVxuICBcImtpbS5wcm9taXNlcy50by9zYm9ub21pY19qaXRzanVkZ2VsaXN0X2RvYy9ieS8xMC8xNVwiLCAvLyA5LTIxXG4gIFwia2ltLnByb21pc2VzLnRvL2NvbnNpZGVyX2FsbF93ZWVrZW5kX3NvY2lhbF9vcHRpb25zL2J5L2ZyaS8xMHBtXCIsIC8vIDktMjFcbiAgXCJkcmVldi5jb21taXRzLnRvL2RlZHVwX3RoZV9pd2lsbHMvYnkvbm92XCIsIC8vIDktMjJcbiAgXCJieW9yZ2V5LnByb21pc2VzLnRvL2VtYWlsX2N1dF9wcm9wZXJ0eV9zdW1tYXJ5L2J5LzdwbVwiLCAvLyA5LTIyXG4gIFwiZHJlZXYuY29tbWl0cy50by9jb3B5X2VkaXRpbmdfcGFzc19vbl90YW8yL2J5L3Rtd18ycG1cIiwgLy8gOS0yMiwgZG9uZVxuICBcImNocmlzLnByb21pc2VzLnRvL29wZW5fYV9zbW9vdGhpZV9zaG9wL2J5L0RlY2VtYmVyXCIsIC8vIDktMjVcbiAgXCJwaWVycmUucHJvbWlzZXMudG8vd2F0ZXJfdGhlX29mZmljZV9wbGFudC9ieS9GcmlkYXlcIiwgLy8gOS0yNVxuICBcImRyZWV2LnByb21pc2VzLnRvL2hhbm5hX3JlcGx5L2J5L3RvbmlnaHRcIiwgLy8gOS0yNiwgZG9uZVxuICBcImJlZS5wcm9taXNlcy50by9yZWFkLWhhbm5hcy1lbWFpbHNcIiwgLy8gOS0yNlxuICBcImJlZS5wcm9taXNlcy50by9yZXBpbmctb25lLXdpdGgtaGVhcnRcIiwgLy8gOS0yNlxuICBcImJlZS5wcm9taXNlcy50by9maWxsLW91dC1tZXRyb21pbGUtZmVlZGJhY2tcIiwgLy8gOS0yNlxuICBcImJlZS5wcm9taXNlcy50by9zY2hlZHVsZS1wbGFubmluZy13aXRoLWNhbnRvci9ieS9mcmlkYXktbmlnaHRcIiwgLy8gOS0yNlxuICBcImRyZWV2LnByb21pc2VzLnRvL2Fza19qYW5hX2Fib3V0X2Jsb29kX3Rlc3RlcnMvYnkvZGVjXzFcIiwgLy8gOS0yNlxuICBcImRyZWV2LmNvbW1pdHMudG8vdGFrZV9jb3B5ZWRpdGluZ19wYXNzX29uX21pY2hlbGVzX2RyYWZ0L2J5L3NhdHVyZGF5XCIsIC8vIDkvMjcsXG4gIFwic3RlcGhlbi5wcm9taXNlcy50by9kZWNpZGVfdXBvbl9sYXRlX29jdG9iZXJfdHJpcC9ieS9zYXR1cmRheVwiLCAvLyA5LTI3XG4gIFwicm95LnByb21pc2VzLnRvL3NpZ25fdXBfZm9yX2FwcFwiLCAvLyA5LTI3XG4gIFwiamVubnlsaS5wcm9taXNlcy50by93YXRlcl90aGVfcGxhbnRzL2J5L3N1bmRheVwiLCAvLyA5LTI3XG4gIFwib3dlbi5wcm9taXNlcy50by9hZGp1c3QtdGhlLXNoZWQvYnkvdG9uaWdodF83cG1cIiwgLy8gOS0yOFxuICBcImNvbGUucHJvbWlzZXMudG8vZmluZF9hX3JlcF9mb3JfZGluaW5nX3ZlbmRvcnNcIiwgLy8gOS0yOFxuXVxuXG4vKiBcbmxldCB0ZXN0XG4vL3Rlc3QgPSBjaHJvbm8ucGFyc2VEYXRlKFwiZm9vIHRoZSBiYXIgYnkgc2VwIDE1dGggbm9vblwiKVxudGVzdCA9IGNocm9uby5wYXJzZURhdGUoXCJDYWxsX3RoZV9kZW50aXN0IGJ5IDIwMTctMTAtMTUgMTJwbVwiKVxuY29uc29sZS5sb2coYERFQlVHOiAke3Rlc3R9ICh1bml4dGltZSA9ICR7dGVzdC5nZXRUaW1lKCkvMTAwMH1gKVxuY29uc29sZS5sb2coXCJERUJVRzogXCIsIEpTT04uc3RyaW5naWZ5KHBhcnNlUHJvbShwcm9taXNlc1syXSkpKVxuKi9cblxudmFyIFByb21pc2VcblxuLy8gc2V0IHVwIGEgbmV3IGRhdGFiYXNlIHVzaW5nIGRhdGFiYXNlIGNyZWRlbnRpYWxzIHNldCBpbiAuZW52XG52YXIgc2VxdWVsaXplID0gbmV3IFNlcXVlbGl6ZSgnZGF0YWJhc2UnLCBwcm9jZXNzLmVudi5EQl9VU0VSLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc3MuZW52LkRCX1BBU1MsIHtcbiAgaG9zdDogJzAuMC4wLjAnLFxuICBkaWFsZWN0OiAnc3FsaXRlJyxcbiAgcG9vbDoge1xuICAgIG1heDogNSxcbiAgICBtaW46IDAsXG4gICAgaWRsZTogMTAwMDAsXG4gIH0sXG4gIC8vIFNlY3VyaXR5IG5vdGU6IGRiIGlzIHNhdmVkIHRvIGAuZGF0YS9kYXRhYmFzZS5zcWxpdGVgIGluIGxvY2FsIGZpbGVzeXN0ZW0uXG4gIC8vIE5vdGhpbmcgaW4gYC5kYXRhYCBkaXJlY3RvcnkgZ2V0cyBjb3BpZWQgaWYgc29tZW9uZSByZW1peGVzIHRoZSBwcm9qZWN0LlxuICBzdG9yYWdlOiAnLmRhdGEvZGF0YWJhc2Uuc3FsaXRlJ1xufSk7XG5cbi8vIGF1dGhlbnRpY2F0ZSB3aXRoIHRoZSBkYXRhYmFzZVxuc2VxdWVsaXplLmF1dGhlbnRpY2F0ZSgpXG4gIC50aGVuKGZ1bmN0aW9uKGVycikge1xuICAgIGNvbnNvbGUubG9nKCdDb25uZWN0aW9uIGhhcyBiZWVuIGVzdGFibGlzaGVkIHN1Y2Nlc3NmdWxseS4nKVxuICAgIC8vIGRlZmluZSBhIG5ldyB0YWJsZSAncHJvbWlzZXMnXG4gICAgUHJvbWlzZSA9IHNlcXVlbGl6ZS5kZWZpbmUoJ3Byb21pc2VzJywge1xuICAgICAgdXJ0eDogeyB0eXBlOiBTZXF1ZWxpemUuU1RSSU5HICB9LCAvLyB1cnRleHQsIGluY2x1ZGluZyB3aG9sZSBVUkxcbiAgICAgIHVzZXI6IHsgdHlwZTogU2VxdWVsaXplLlNUUklORyAgfSwgLy8gd2hvJ3MgbWFraW5nIHRoZSBwcm9taXNlXG4gICAgICB3aGF0OiB7IHR5cGU6IFNlcXVlbGl6ZS5TVFJJTkcgIH0sIC8vIHdoYXQncyBiZWluZyBwcm9taXNlZFxuICAgICAgLy93aG9tOiB7IHR5cGU6IFNlcXVlbGl6ZS5TVFJJTkcgIH0sIC8vIHRvIHdob20gYXJlIHlvdSBwcm9taXNpbmdcbiAgICAgIHRpbmk6IHsgdHlwZTogU2VxdWVsaXplLklOVEVHRVIgfSwgLy8gdW5peHRpbWUgdGhhdCBwcm9taXNlIHdhcyBtYWRlXG4gICAgICB0ZHVlOiB7IHR5cGU6IFNlcXVlbGl6ZS5TVFJJTkcgfSwgLy8gdW5peHRpbWUgdGhhdCB0aGUgcHJvbWlzZSBpcyBkdWVcbiAgICAgIC8vdG16bjogeyB0eXBlOiBTZXF1ZWxpemUuU1RSSU5HICB9LCAvLyB0aW1lem9uZVxuICAgICAgLy93dGRpZDogeyB0eXBlOiBTZXF1ZWxpemUuSU5URUdFUiB9LCAvLyB1bml4dGltZSB0aGF0IHRoZSBwcm9taXNlIHdhcyBmdWxmaWxsZWRcbiAgICAgIC8vZmlsbDogeyB0eXBlOiBTZXF1ZWxpemUuRkxPQVQgICB9LCAvLyBmcmFjdGlvbiBmdWxmaWxsZWRcbiAgICAgIC8vdm9pZDogeyB0eXBlOiBTZXF1ZWxpemUuQk9PTEVBTiB9LCAvLyB3aGV0aGVyIHByb21pc2Ugd2FzIHZvaWRlZFxuICAgICAgLy8gdGV4dDogICB7IHR5cGU6IFNlcXVlbGl6ZS5TVFJJTkcgfSwgLy8gdGhpcyB3YXMganVzdCBmb3IgdGVzdGluZ1xuICAgIH0pOyAgICBcbiAgICAvL3NldHVwKClcbiAgfSlcbiAgLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICBjb25zb2xlLmxvZygnVW5hYmxlIHRvIGNvbm5lY3QgdG8gdGhlIGRhdGFiYXNlOiAnLCBlcnIpXG4gIH0pXG5cbi8vIHBvcHVsYXRlIHRhYmxlIHdpdGggaGFyZGNvZGVkIHByb21pc2VzIGFib3ZlXG5mdW5jdGlvbiBzZXR1cCgpIHsgXG4gIFByb21pc2Uuc3luYyh7Zm9yY2U6IHRydWV9KSAvLyAnZm9yY2U6IHRydWUnIGp1c3QgZHJvcHMgdGhlIHRhYmxlIGlmIGl0IGV4aXN0c1xuICAgIC50aGVuKGZ1bmN0aW9uKCl7ICAgICAgICAgLy8gYW5kIGNyZWF0ZXMgYSBuZXcgb25lIVxuICAgICAgLy8gQWRkIHRoZSBkZWZhdWx0IHByb21pc2VzIHRvIHRoZSBkYXRhYmFzZVxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9taXNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBQcm9taXNlLmNyZWF0ZShwYXJzZVByb20ocHJvbWlzZXNbaV0pKVxuICAgICAgfVxuICAgIH0pXG59XG5cbmFwcC5nZXQoJy9wcm9taXNlLzp1ZHAvOnVydHgnLCBmdW5jdGlvbihyZXEsIHJlc3ApIHtcbiAgbGV0IHVydHggPSByZXEub3JpZ2luYWxVcmwuc3Vic3RyKDkpXG4gIFByb21pc2UuZmluZE9uZSh7IHdoZXJlOiB7dXJ0eH19KVxuICAgIC50aGVuKGZ1bmN0aW9uKHByb21pc2UpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdzaW5nbGUgcHJvbWlzZScsIHVydHgsIHByb21pc2UpXG4gICAgLy8gcmVzcC53cml0ZShwcm9taXNlKVxuICAgIHJlc3AuanNvbihwcm9taXNlKVxuICB9KVxuXG59KVxuXG5hcHAuZ2V0KCcvJywgKHJlcSwgcmVzcCkgPT4geyBcbiAgcmVzcC5zZW5kRmlsZShfX2Rpcm5hbWUgKyAnL3B1YmxpYy9pbmRleC5odG1sJykgXG59KVxuXG5hcHAuZ2V0KCcvcHJvbWlzZXMnLCBmdW5jdGlvbihyZXEsIHJlc3ApIHtcbiAgdmFyIGRiUHJvbWlzZXMgPSB7fVxuICBQcm9taXNlLmZpbmRBbGwoe1xuICAgIG9yZGVyOiBzZXF1ZWxpemUubGl0ZXJhbCgndGluaSBERVNDJylcbiAgfSkudGhlbihmdW5jdGlvbihwcm9taXNlcykge1xuICAgIGNvbnNvbGUubG9nKCdhOzsgcHJvbWlzZXMnLCBwcm9taXNlcylcbiAgICBwcm9taXNlcy5mb3JFYWNoKGZ1bmN0aW9uKHByb21pc2UpIHtcbiAgICAgIGRiUHJvbWlzZXNbcHJvbWlzZS51c2VyXSA9IGRiUHJvbWlzZXNbcHJvbWlzZS51c2VyXSB8fCBbXVxuICAgICAgZGJQcm9taXNlc1twcm9taXNlLnVzZXJdLnB1c2gocHJvbWlzZSkgLy8gYWRkcyB0aGVpciBpbmZvIHRvIGRiUHJvbWlzZXMgdmFsdWVcbiAgICB9KTtcbiAgICByZXNwLnNlbmQoZGJQcm9taXNlcykgLy8gc2VuZHMgZGJQcm9taXNlcyBiYWNrIHRvIHRoZSBwYWdlXG4gIH0pXG59KVxuXG5hcHAuZ2V0KCcvcHJvbWlzZXMvOnVzZXInLCBmdW5jdGlvbihyZXEsIHJlc3ApIHtcbiAgdmFyIGRiUHJvbWlzZXMgPSBbXTtcbiAgUHJvbWlzZS5maW5kQWxsKHtcbiAgIHdoZXJlOiB7XG4gICAgIHVzZXI6IHJlcS5wYXJhbXMudXNlclxuICAgfSxcbiAgfSkudGhlbihmdW5jdGlvbihwcm9taXNlcykge1xuICAgIGNvbnNvbGUubG9nKCd1c2VyIHByb21pc2VzJywgcHJvbWlzZXMpO1xuICAgIHByb21pc2VzLmZvckVhY2goZnVuY3Rpb24ocHJvbWlzZSkge1xuICAgICAgZGJQcm9taXNlcy5wdXNoKHByb21pc2UpIC8vIGFkZHMgdGhlaXIgaW5mbyB0byBkYlByb21pc2VzIHZhbHVlXG4gICAgfSk7XG4gICAgcmVzcC5zZW5kKGRiUHJvbWlzZXMpIC8vIHNlbmRzIGRiUHJvbWlzZXMgYmFjayB0byB0aGUgcGFnZVxuICB9KVxufSlcblxuYXBwLmdldCgnL3Byb21pc2VzL3JlbW92ZS86dXJ0eCcsIChyZXEsIHJlc3ApID0+IHtcbiAgUHJvbWlzZS5maW5kQWxsKHtcbiAgIHdoZXJlOiB7XG4gICAgIHVzZXI6IHJlcS5wYXJhbXMudXNlclxuICAgfSxcbiAgfSlcbn0pXG5cbi8vIGNyZWF0ZXMgYSBuZXcgZW50cnkgaW4gdGhlIHByb21pc2VzIHRhYmxlIHdpdGggdGhlIHN1Ym1pdHRlZCB2YWx1ZXNcbmFwcC5wb3N0KCcvcHJvbWlzZXMnLCAocmVxLCByZXNwKSA9PiB7XG4gIGNvbnNvbGUubG9nKCdwcm9taXNlIHJlcScsIHJlcSwgcmVzcCk7XG4gIFByb21pc2UuY3JlYXRlKHsgdGV4dDogcmVxLnF1ZXJ5LnByb21pc2UgfSlcbiAgcmVzcC5zZW5kU3RhdHVzKDIwMClcbn0pXG5cbmFwcC5nZXQoJy9yZXNldCcsIChyZXEsIHJlc3ApID0+IHtcbiAgc2V0dXAoKVxuICByZXNwLnJlZGlyZWN0KCcvJylcbn0pXG5cbi8vIHJlbW92ZXMgYWxsIGVudHJpZXMgZnJvbSB0aGUgcHJvbWlzZXMgdGFibGVcbmFwcC5nZXQoJy9jbGVhcicsIChyZXEsIHJlc3ApID0+IHtcbiAgUHJvbWlzZS5kZXN0cm95KHt3aGVyZToge319KVxuICByZXNwLnJlZGlyZWN0KCcvJylcbn0pXG5cbi8qXG5MaXR0bGUgcGljdHVyZTogV2h5IGRvZXMgdGhpcyBlcnJvciBoYW5kbGluZyBjb2RlIG5vdCBydW4gd2hlbiBJIHN1cmYgdG8gXG5hIGJhZCBVUkwgbGlrZSBpd2lsbC5nbGl0Y2gubWUvZm9vJWJhclxuXG5CaWdnZXIgcGljdHVyZTogSSdtIG1ha2luZyBhbiBhcHAgdGhhdCBuZWVkcyB0byBwcm9jZXNzIGFueSBVUkwgdGhlIHVzZXIgbWF5IFxudGhyb3cgYXQgaXQuIEkgbmVlZCB0aGUgc2VydmVyIHRvIGdldCB0aGUgZXhhY3QgVVJMIHRoZSB3YXkgdGhlIHVzZXIgc2VlcyBpdCBpbiBcbnRoZSBicm93c2VyLiBUaGF0J3MgZ29pbmcgdG8gYmUgZXNwZWNpYWxseSB0cmlja3kgZm9yIHRoaW5ncyBsaWtlICcjJyBjaGFyYWN0ZXJzXG5idXQgcmlnaHQgbm93IEknbSBqdXN0IHRyeWluZyB0byBmaWd1cmUgb3V0IHRoZSBjYXNlIG9mIGFyYml0cmFyeSAnJScgY2hhcmFjdGVyc1xudGhhdCBtYXkgbm90IGNvcnJlc3BvbmQgdG8gcHJvcGVyICUtZW5jb2RpbmdzLlxuXG5JJ20gdGhpbmtpbmcgbGlrZSBhIGNhdGNoYWxsIGVycm9yLWhhbmRsaW5nIHJvdXRlIHRoYXQgbm8gbWF0dGVyIHdoYXQgd2VpcmRcbmVuY29kaW5nIG9yIHdoYXRldmVyIGVycm9yIGlzIHRocm93biBJIGNhbiBzdGlsbCBoYXZlIHRoZSBjb2RlIGhlcmUgZG8gc29tZXRoaW5nXG53aXRoIHRoZSBVUkwgYXMgdGhlIHVzZXIgdHlwZWQgaXQuXG5cbkZvciBub3cgd2UncmUganVzdCBkcm9wcGluZyBhbGwgdGhpcyBhbmQgaGF2aW5nIHRoZSBhcHAgZ2l2ZSB0aGUgdXNlciBhbiBlcnJvclxuaWYgdGhlcmUgYXJlIGFueSB3ZWlyZCBjaGFyYWN0ZXJzIGluIHRoZSBVUkwuXG5cbmFwcC51c2UoZnVuY3Rpb24ocmVxLCByZXNwLCBuZXh0KSB7XG4gIHZhciBlcnIgPSBudWxsXG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coXCJUUllJTkdcIiwgcmVxLnBhdGgsIHJlcS51cmwpXG4gICAgZGVjb2RlVVJJQ29tcG9uZW50KHJlcS5wYXRoKVxuICB9IGNhdGNoKGUpIHtcbiAgICBlcnIgPSBlXG4gIH1cbiAgaWYgKGVycikge1xuICAgIGNvbnNvbGUubG9nKFwiQ0FVR0hUIEVSUjpcIiwgZXJyLCByZXEudXJsKVxuICAgIHJldHVybiByZXNwLnJlZGlyZWN0KCcvJylcbiAgfVxuICBuZXh0KCk7XG5cbiAgLy9jb25zb2xlLmxvZyhcIkRFQlVHIFVTRTE6XCIsIHJlcS5vcmlnaW5hbFVybClcbiAgLy9yZXNwLnJlZGlyZWN0KCcvJylcbn0pXG4qL1xuXG5hcHAuYWxsKCcqJywgKHJlcSwgcmVzcCkgPT4ge1xuICAvLyBUaGUgc2VydmVyIGF0IHByb21pc2VzLnRvIHBhc3NlcyBhbG9uZyB0aGUgZnVsbCBVUkwgdGhlIHdheSB0aGUgdXNlciB0eXBlZFxuICAvLyBpdCwgc28gd2hlbiB0aGUgdXNlciBoaXRzIFwiYm9iLnByb21pc2VzLnRvL2Zvb1wiIHRoZSBHbGl0Y2ggYXBwIGlzIGNhbGxlZFxuICAvLyB3aXRoIFwiaXdpbGwuZ2xpdGNoLm1lL2JvYi5wcm9taXNlcy50by9mb29cIiBhbmQgcmVxLm9yaWdpbmFsVXJsIGlzXG4gIC8vIFwiL2JvYi5wcm9taXNlcy50by9mb29cIiAob3JpZ2luYWxVcmwgZG9lc24ndCBpbmNsdWRlIHRoZSBob3N0bmFtZSlcbiAgbGV0IHVydHggPSByZXEub3JpZ2luYWxVcmwuc3Vic3RyKDEpIC8vIGdldCByaWQgb2YgdGhlIGluaXRpYWwgc2xhc2hcbiAgLy8gdXJ0eCBpcyBub3csIGVnLCBcImJvYi5wcm9taXNlcy50by9mb29fdGhlX2Jhci9ieS85YW1cIlxuICBcbiAgLy8gVE9ETzogZG9uJ3QgdHJ5IHRvIHBhcnNlIGEgcHJvbWlzZSBpZiBubyBzdWJkb21haW4sIGllLCBubyB1c2VyIGdpdmVuXG4gIC8vIFRPRE9MQVRFUjogaG93IHRvIGhhbmRsZSBcImJvYi5wcm9taXNlcy50by9mb28lYmFyXCJcbiAgLy8gVE9ET0xBVEVSOiBuZWVkIHRvIHVybC1kZWNvZGUgdG8gaGFuZGxlIFwiYm9iLnByb21pc2VzLnRvL2Zvb15iYXJcIlxuICAvLyBUT0RPTEFURVI6IGhhbmRsZSBib2IucHJvbWlzZXMudG8vZG9faXRlbV8jMi9ieS85YW1cbiAgLy8gICAgICAgICAgIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzE4Nzk2NDIxL2NhcHR1cmUtYW5jaG9yLWxpbmtzXG4gIFxuICBjb25zb2xlLmxvZyhcIkRFQlVHIHVydHg6XCIsIHVydHgpXG4gIC8vIFBhcnNlIHRoZSB1cnRleHQgaW50byB1c2VyLCB3aGF0LCB3aG9tLCB0aW5pLCB0ZHVlLCBldGNcbiAgLy8gQ2hlY2sgaWYgYSBwcm9taXNlIGFscmVhZHkgZXhpc3RzIHdpdGggbWF0Y2hpbmcgdXNlcisnfCcrd2hhdFxuICAvLyBJZiBub3QsIGNyZWF0ZSBpdFxuICAvLyBJZiBzbywgZG8gbm90aGluZ1xuICBsZXQgcCA9IHBhcnNlUHJvbSh1cnR4KVxuICAvLyBUT0RPOiBpZiB0aGUgdXJsIHdhcyBqdXN0IGFsaWNlLnByb21pc2VzLnRvIHRoZW4gd2Ugd2FudCB0byBzaG93IGFsaWNlJ3NcbiAgLy8gc3RhdGlzdGljcyBhbmQgbGlzdCBvZiBwcm9taXNlcyBhbmQgZXZlcnl0aGluZ1xuICBpZiAocC51c2VyID09PSAnd3d3JyB8fCBwLnVzZXIgPT09ICcnKSB7IFxuICAgIC8vIFRPRE86IHRoaXMgaXMgdGhlIGNhc2Ugb2Ygbm8gdXNlcm5hbWUsIGxpa2UgaWYgc29tZW9uZSBqdXN0IHdlbnQgdG9cbiAgICAvLyBcInByb21pc2VzLnRvXCIgb3IgdHJpZWQgdG8gZmV0Y2ggXCJwcm9taXNlcy50by9yb2JvdHMudHh0XCIgb3Igd2hhdGV2ZXJcbiAgICByZXNwLnNlbmRGaWxlKF9fZGlybmFtZSArICcvcHVibGljL2luZGV4Lmh0bWwnKSBcbiAgfSBlbHNlIGlmICghdXNlcnMuaW5jbHVkZXMocC51c2VyKSkge1xuICAgIC8vIFRPRE86IHRlbGwgdXNlciBcIlNvcnJ5LCBubyBzdWNoIHVzZXIhIEdldCBpbiB0b3VjaCBpZiB5b3Ugd2FudCB0byBnZXQgaW5cbiAgICAvLyBvbiBvdXIgYmV0YSFcIlxuICAgIHJlc3Auc2VuZEZpbGUoX19kaXJuYW1lICsgJy9wdWJsaWMvaW5kZXguaHRtbCcpXG4gIH0gZWxzZSB7XG4gICAgUHJvbWlzZS5maW5kT25lKHsgd2hlcmU6IHt1cnR4fSB9KVxuICAgICAgLnRoZW4ocHJvbWlzZSA9PiB7XG4gICAgICAgIGlmIChwcm9taXNlKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ2R1cGxpY2F0ZScsIHVydHgpO1xuICAgICAgICAgIHJlc3AucmVkaXJlY3QoYC9wcm9taXNlLyR7dXJ0eH1gKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBQcm9taXNlLmNyZWF0ZShwKTtcbiAgICAgICAgICBtYWlsc2VsZignUFJPTUlTRScsIHVydHgpO1xuICAgICAgICB9XG4gICAgfSlcbiBcbiAgICByZXNwLnNlbmRGaWxlKF9fZGlybmFtZSArICcvcHVibGljL2luZGV4Lmh0bWwnKSBcbiAgfVxufSlcblxudmFyIGxpc3RlbmVyID0gYXBwLmxpc3Rlbihwcm9jZXNzLmVudi5QT1JULCBmdW5jdGlvbigpIHtcbiAgY29uc29sZS5sb2coJ1Byb21pc2VzIGFwcCBpcyBsaXN0ZW5pbmcgb24gcG9ydCAnICsgbGlzdGVuZXIuYWRkcmVzcygpLnBvcnQpXG59KVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gODBjaGFycyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPlxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "server.js"
      ],
      "names": [
        "express",
        "require",
        "Sequelize",
        "app",
        "chrono",
        "Mailgun",
        "moment",
        "use",
        "static",
        "mailself",
        "subj",
        "body",
        "mailgun",
        "apiKey",
        "process",
        "env",
        "MAILGUN_KEY",
        "domain",
        "MAILGUN_DOMAIN",
        "data",
        "from",
        "MAILGUN_FROM",
        "to",
        "MY_EMAIL",
        "subject",
        "text",
        "messages",
        "send",
        "err",
        "parseProm",
        "urtx",
        "m",
        "match",
        "user",
        "path",
        "what",
        "tdue",
        "Date",
        "now",
        "length",
        "parsedPath",
        "console",
        "log",
        "tini",
        "credit",
        "t",
        "promises",
        "Promise",
        "sequelize",
        "DB_USER",
        "DB_PASS",
        "host",
        "dialect",
        "pool",
        "max",
        "min",
        "idle",
        "storage",
        "authenticate",
        "then",
        "define",
        "type",
        "STRING",
        "INTEGER",
        "catch",
        "setup",
        "sync",
        "force",
        "i",
        "create",
        "get",
        "req",
        "resp",
        "originalUrl",
        "substr",
        "findOne",
        "where",
        "promise",
        "json",
        "sendFile",
        "__dirname",
        "dbPromises",
        "findAll",
        "order",
        "literal",
        "forEach",
        "push",
        "params",
        "post",
        "query",
        "sendStatus",
        "redirect",
        "destroy",
        "all",
        "p",
        "includes",
        "listener",
        "listen",
        "PORT",
        "address",
        "port"
      ],
      "mappings": "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",
      "file": "server.js",
      "sourceRoot": "/app",
      "sourcesContent": [
        "// --------------------------------- 80chars ---------------------------------->\nvar express = require('express')\nvar Sequelize = require('sequelize')\nvar app = express()\nvar chrono = require('chrono-node') // Sugar.js parses some things better\nvar Mailgun = require('mailgun-js')\nvar moment = require('moment')\n\nimport { users } from 'data/users.js';\n\n// DATABASE FIELDS:\n//   urtx -- urtext, ie, full original text the user typed to create the promise\n//   user -- who's making the promise\n//   what -- what's being promised\n//   whom -- to whom are you promising\n//   tini -- unixtime that the promise was made\n//   tdue -- unixtime that the promise is due\n//   tmzn -- timezone assumed for parsing the deadline\n//   tfin -- unixtime that the promise was fulfilled\n//   fill -- fraction fulfilled, default 0\n//   void -- true if the promise became unfulfillable or moot\n//   clix -- number of clicks a promise has gotten\n// For example:\n//   urtx = \"bob.promises.to/foo_the_bar/by/noon_tomorrow\"\n//   user = \"bob\"\n//   what = \"foo the bar\"\n//   whom = null\n//   tini = [unixtime of first GET request of the promise's URL]\n//   tdue = [what \"noon tomorrow\" parsed to at time tini]\n//   tmzn = \"America/Los_Angeles\"\n//   tfin = [unixtime that the promise was fulfilled]\n//   fill = 0\n//   void = false\n\n// Other ideas for fields: \n// * information about the client that originally created the promise\n// * whether the promise was created by the actual user (if they were logged in \n//   and were the first to click on it) or by another logged-in user or by \n//   someone not logged in\n// * conf: maybe we create the promise whether or not anyone clicks the button to confirm\n//   it, in which case we store when it's actually been confirmed.\n\n// LATEST SPEC:\n// The \"/by/...\" part is an optional power-user thing, not part of the MVP.\n// Instead, the first time you go to alice.promises.to/foo it gives you the \n// option to choose a deadline, defaulting to now+7days (or to what the \"/by/\" \n// part parsed to, if that's easy, but just make it a suggestion for the user, \n// just like now+7days is if they don't specify a \"/by/\"). \n// For every subsequent GET of alice.promises.to/foo it shows the deadline, with\n// no way to change it.\n\n// IDEAS FOR LATER:\n// Simpler date parsing:\n//   Maybe the date has to be YYYY-MM-DD_HH:MM\n//   Example: bob.promises.to/foo_the_bar/by/2017-09-13_12:00\n// Magic spaces:\n//   Whichever non-alphanumeric character is most common in the urtext, that's \n//   what's assumed to be a space and is replaced with spaces before parsing.\n// Less magical version:\n//   A non-alphanumeric character must follow \"alice.promises.to/\" and that\n//   character is taken as the ersatz space. Eg:\n//   alice.promises.to/_start_her_promises_with_underscores\n// Flexibility on the '/by/' part:\n//   Requiring the string '/by/' to appear in the promise URL means no ambiguity\n//   about where to start parsing the deadline. But the Chrono parsing library \n//   actually does great taking the whole string like \"foo the bar by noon \n//   tomorrow\" and figuring out the time. We could also just take the last\n//   occurrence of \"by\" and parse everything after it as the deadline.\n\napp.use(express.static('public'))\n\nfunction mailself(subj, body) {\n  var mailgun = new Mailgun({apiKey: process.env.MAILGUN_KEY, \n                             domain: process.env.MAILGUN_DOMAIN})\n  var data = {\n    from:    process.env.MAILGUN_FROM,\n    to:      process.env.MY_EMAIL,\n    subject: subj,\n    text:    body,\n  }\n  mailgun.messages().send(data, (err, body) => {})\n}\n\n// Take urtext and return a promise data structure\nfunction parseProm(urtx) {\n  let m = urtx.match(/^([^\\.]+)\\.(promises|commits)\\.to\\/(.*)$/)\n  // TODO: handle the case that no user is given, just \"promises.to/foo\"\n  let user = m ? m[1] : ''\n  let domain = m ? m[2] : ''\n  let path = m ? m[3] : ''\n  let what = ''\n  let tdue = Date.now() + 7*24*60*60*1000\n  if (path.length > 0) {\n    let parsedPath = path.match(/^(.*?)(\\/by\\/|$)(.*)$/)\n    what = parsedPath[1] //.replace(/_/g, ' ')\n    //tdue = parsedPath.length > 1 ? \n    //       chrono.parseDate(parsedPath[3].replace(/_/g, ' ')) * 1 : \n    //       Date.now() + 7*24*60*60*1000\n    //tdue = tdue ? ( ( tdue < Date.now() && Date.now() - tdue < 24*60*60*1000 ) ?\n    //                tdue + 24*60*60*1000 : tdue )\n    //            : Date.now() + 7*24*60*60*1000\n    tdue = parsedPath[3]\n  }\n  // TODO: path is now everything after \".promises.to\" so now parse out the \n  //       \"what\" (thing being promised) and the \"tdue\" (deadline)\n  console.log('parseProm', { user, path, domain, what, tdue, urtx })\n  return { user, path, domain, what, tdue, urtx, tini: Date.now() }\n}\n\n// Compute the credit you get for being t seconds late\nfunction credit(t) {\n  // see latepenalty.js\n  return 1\n}\n\n// Initial promise list hardcoded so don't have to worry about blowing db away\nlet promises = [\n  \"alice.promises.to/File_the_TPS_report/by/noon_mon\",\n  \"bob.promises.to/Send_vacation_photos/by/saturday\",\n  \"carol.promises.to/Call_the_dentist/by/12am\",\n  \"dreev.promises.to/show_sergii_this_doing_something_useful/by/3am\", // 9-10, done\n  \"dreev.promises.to/show_bee_open_questions/by/10:30pm\", // 9-10, done\n  \"braden.promises.to/help_with_javascript/by/5pm\", // 9-11\n  \"dreev.promises.to/show_brennan_intro/by/10:50pm\", // 9-11, done\n  \"dreev.promises.to/queue_tweet_etc_for_blog_post/by/2pm\", // 9-11, done\n  \"dreev.promises.to/order_indian/by/5:30pm\", // 9-12, done\n  \"dreev.commits.to/ask_bee_re_sunday_parkways\", // 9-13, done\n  \"dreev.commits.to/follow_up_with_everyone_re_guest_blogging\", // 9-13\n  \"josh.commits.to/get_realisies_running/by/september_30\", // 9-13\n  \"braden.commits.to/outline_bite_counting_post/by/Sunday_11pm\", // 9-13\n  \"dreev.commits.to/report_glitch_bug\", // 9-14\n  \"dreev.commits.to/googledocify_intern_form/by/12pm\", // 9-14\n  \"dreev.promises.to/test_penalty_func/by/saturday_noon\", // 9-14\n  \"sergii.promises.to/work_on_points_2_to_4/by/next_monday\", // 9-14\n  \"dreev.commits.to/meta_debrief_kim/by/midnight_friday\", // 9-14\n  \"dreev.commits.to/ping_mirabai/by/sep_22\", // 9-14\n  \"dreev.commits.to/send_ms_gross_email/by/sunday_11am\", // 9-14\n  \"dreev.promises.to/ping_oli/by/nov_16\", // 9-15\n  \"dreev.promises.to/ping_byorgey/by/dec_20\", // 9-15\n  \"dreev.promises.to/labelzero/by/1am\", // 9-15\n  \"chris.promises.to/follow_up_on_that_support_thread\", // 9-18\n  \"bee.commits.to/new-family-photo-to-yoko/by/tomorrow-night\", // 9-18, done early\n  \"bee.commits.to/rest-of-paperwork-to-yoko-before-the-gym-tomorrow\", // 9-18, 2 hours late\n  \"dreev.promises.to/debug_capitalization/by/tomorrow\", // 9-18, done 23.4 hours late\n  \"bee.commits.to/email-sleep-as-android-for-specifics-about-sleep-length-measurement\", // 9-19\n  \"jessica.commits.to/let_bob_know_re_meeting/by/tomorrow_5pm\", // 9-19\n  \"samuel.commits.to/finish_ch_23_problem_set/by/today_6_pm\", // 9-19\n  \"dreev.promises.to/intern_disc/by/wed\", // 9-19, done early\n  \"kim.promises.to/email_argue_summary/by/fri\", // 9-19\n  \"dreev.commits.to/clear_bogus_commit_for_nick/by/5_minutes_from_now\", // 9-19, done early\n  \"kim.promises.to/reflect_Respond_anxiety_spiral_Assist/by/sat\", // 9-19\n  \"dreev.commits.to/schedule-k_tax_thing/by/5pm\", // 9-19, done\n  \"dreev.promises.to/set_up_mom_on_wordfeud/by/tomorrow\", // 9-20, done/void\n  \"dreev.promises.to/reply_to_use_case_email/by/midnight\", // 9-20, done early\n  \"kim.promises.to/consider_all_weekend_social_options/by/fri/10pm\", // 9-20\n  \"kim.promises.to/submit_conclusion_email/by/10/16\", // 9-21\n  \"kim.promises.to/complete_type_1_essay/by/10/1\", // 9-21\n  \"kim.promises.to/inform_eve_plans/by/2\", // 9-21\n  \"kim.promises.to/email_cynthia_charlap_tickets/by/9/22\", // 9-21\n  \"kim.promises.to/schedule_attorney_meet/by/10/1\", // 9-21\n  \"kim.promises.to/john_PAM_photos_ask/by/10/1\", // 9-21\n  \"kim.promises.to/Nike_p5_email/by/10/1\", // 9-21\n  \"kim.promises.to/intro_martin_marna/by/10/5\", // 9-21\n  \"kim.promises.to/sbonomic_jitsjudgelist_doc/by/10/15\", // 9-21\n  \"kim.promises.to/consider_all_weekend_social_options/by/fri/10pm\", // 9-21\n  \"dreev.commits.to/dedup_the_iwills/by/nov\", // 9-22\n  \"byorgey.promises.to/email_cut_property_summary/by/7pm\", // 9-22\n  \"dreev.commits.to/copy_editing_pass_on_tao2/by/tmw_2pm\", // 9-22, done\n  \"chris.promises.to/open_a_smoothie_shop/by/December\", // 9-25\n  \"pierre.promises.to/water_the_office_plant/by/Friday\", // 9-25\n  \"dreev.promises.to/hanna_reply/by/tonight\", // 9-26, done\n  \"bee.promises.to/read-hannas-emails\", // 9-26\n  \"bee.promises.to/reping-one-with-heart\", // 9-26\n  \"bee.promises.to/fill-out-metromile-feedback\", // 9-26\n  \"bee.promises.to/schedule-planning-with-cantor/by/friday-night\", // 9-26\n  \"dreev.promises.to/ask_jana_about_blood_testers/by/dec_1\", // 9-26\n  \"dreev.commits.to/take_copyediting_pass_on_micheles_draft/by/saturday\", // 9/27,\n  \"stephen.promises.to/decide_upon_late_october_trip/by/saturday\", // 9-27\n  \"roy.promises.to/sign_up_for_app\", // 9-27\n  \"jennyli.promises.to/water_the_plants/by/sunday\", // 9-27\n  \"owen.promises.to/adjust-the-shed/by/tonight_7pm\", // 9-28\n  \"cole.promises.to/find_a_rep_for_dining_vendors\", // 9-28\n]\n\n/* \nlet test\n//test = chrono.parseDate(\"foo the bar by sep 15th noon\")\ntest = chrono.parseDate(\"Call_the_dentist by 2017-10-15 12pm\")\nconsole.log(`DEBUG: ${test} (unixtime = ${test.getTime()/1000}`)\nconsole.log(\"DEBUG: \", JSON.stringify(parseProm(promises[2])))\n*/\n\nvar Promise\n\n// set up a new database using database credentials set in .env\nvar sequelize = new Sequelize('database', process.env.DB_USER, \n                                          process.env.DB_PASS, {\n  host: '0.0.0.0',\n  dialect: 'sqlite',\n  pool: {\n    max: 5,\n    min: 0,\n    idle: 10000,\n  },\n  // Security note: db is saved to `.data/database.sqlite` in local filesystem.\n  // Nothing in `.data` directory gets copied if someone remixes the project.\n  storage: '.data/database.sqlite'\n});\n\n// authenticate with the database\nsequelize.authenticate()\n  .then(function(err) {\n    console.log('Connection has been established successfully.')\n    // define a new table 'promises'\n    Promise = sequelize.define('promises', {\n      urtx: { type: Sequelize.STRING  }, // urtext, including whole URL\n      user: { type: Sequelize.STRING  }, // who's making the promise\n      what: { type: Sequelize.STRING  }, // what's being promised\n      //whom: { type: Sequelize.STRING  }, // to whom are you promising\n      tini: { type: Sequelize.INTEGER }, // unixtime that promise was made\n      tdue: { type: Sequelize.STRING }, // unixtime that the promise is due\n      //tmzn: { type: Sequelize.STRING  }, // timezone\n      //wtdid: { type: Sequelize.INTEGER }, // unixtime that the promise was fulfilled\n      //fill: { type: Sequelize.FLOAT   }, // fraction fulfilled\n      //void: { type: Sequelize.BOOLEAN }, // whether promise was voided\n      // text:   { type: Sequelize.STRING }, // this was just for testing\n    });    \n    //setup()\n  })\n  .catch(function (err) {\n    console.log('Unable to connect to the database: ', err)\n  })\n\n// populate table with hardcoded promises above\nfunction setup() { \n  Promise.sync({force: true}) // 'force: true' just drops the table if it exists\n    .then(function(){         // and creates a new one!\n      // Add the default promises to the database\n      for (var i = 0; i < promises.length; i++) {\n        Promise.create(parseProm(promises[i]))\n      }\n    })\n}\n\napp.get('/promise/:udp/:urtx', function(req, resp) {\n  let urtx = req.originalUrl.substr(9)\n  Promise.findOne({ where: {urtx}})\n    .then(function(promise) {\n      console.log('single promise', urtx, promise)\n    // resp.write(promise)\n    resp.json(promise)\n  })\n\n})\n\napp.get('/', (req, resp) => { \n  resp.sendFile(__dirname + '/public/index.html') \n})\n\napp.get('/promises', function(req, resp) {\n  var dbPromises = {}\n  Promise.findAll({\n    order: sequelize.literal('tini DESC')\n  }).then(function(promises) {\n    console.log('a;; promises', promises)\n    promises.forEach(function(promise) {\n      dbPromises[promise.user] = dbPromises[promise.user] || []\n      dbPromises[promise.user].push(promise) // adds their info to dbPromises value\n    });\n    resp.send(dbPromises) // sends dbPromises back to the page\n  })\n})\n\napp.get('/promises/:user', function(req, resp) {\n  var dbPromises = [];\n  Promise.findAll({\n   where: {\n     user: req.params.user\n   },\n  }).then(function(promises) {\n    console.log('user promises', promises);\n    promises.forEach(function(promise) {\n      dbPromises.push(promise) // adds their info to dbPromises value\n    });\n    resp.send(dbPromises) // sends dbPromises back to the page\n  })\n})\n\napp.get('/promises/remove/:urtx', (req, resp) => {\n  Promise.findAll({\n   where: {\n     user: req.params.user\n   },\n  })\n})\n\n// creates a new entry in the promises table with the submitted values\napp.post('/promises', (req, resp) => {\n  console.log('promise req', req, resp);\n  Promise.create({ text: req.query.promise })\n  resp.sendStatus(200)\n})\n\napp.get('/reset', (req, resp) => {\n  setup()\n  resp.redirect('/')\n})\n\n// removes all entries from the promises table\napp.get('/clear', (req, resp) => {\n  Promise.destroy({where: {}})\n  resp.redirect('/')\n})\n\n/*\nLittle picture: Why does this error handling code not run when I surf to \na bad URL like iwill.glitch.me/foo%bar\n\nBigger picture: I'm making an app that needs to process any URL the user may \nthrow at it. I need the server to get the exact URL the way the user sees it in \nthe browser. That's going to be especially tricky for things like '#' characters\nbut right now I'm just trying to figure out the case of arbitrary '%' characters\nthat may not correspond to proper %-encodings.\n\nI'm thinking like a catchall error-handling route that no matter what weird\nencoding or whatever error is thrown I can still have the code here do something\nwith the URL as the user typed it.\n\nFor now we're just dropping all this and having the app give the user an error\nif there are any weird characters in the URL.\n\napp.use(function(req, resp, next) {\n  var err = null\n  try {\n    console.log(\"TRYING\", req.path, req.url)\n    decodeURIComponent(req.path)\n  } catch(e) {\n    err = e\n  }\n  if (err) {\n    console.log(\"CAUGHT ERR:\", err, req.url)\n    return resp.redirect('/')\n  }\n  next();\n\n  //console.log(\"DEBUG USE1:\", req.originalUrl)\n  //resp.redirect('/')\n})\n*/\n\napp.all('*', (req, resp) => {\n  // The server at promises.to passes along the full URL the way the user typed\n  // it, so when the user hits \"bob.promises.to/foo\" the Glitch app is called\n  // with \"iwill.glitch.me/bob.promises.to/foo\" and req.originalUrl is\n  // \"/bob.promises.to/foo\" (originalUrl doesn't include the hostname)\n  let urtx = req.originalUrl.substr(1) // get rid of the initial slash\n  // urtx is now, eg, \"bob.promises.to/foo_the_bar/by/9am\"\n  \n  // TODO: don't try to parse a promise if no subdomain, ie, no user given\n  // TODOLATER: how to handle \"bob.promises.to/foo%bar\"\n  // TODOLATER: need to url-decode to handle \"bob.promises.to/foo^bar\"\n  // TODOLATER: handle bob.promises.to/do_item_#2/by/9am\n  //           https://stackoverflow.com/questions/18796421/capture-anchor-links\n  \n  console.log(\"DEBUG urtx:\", urtx)\n  // Parse the urtext into user, what, whom, tini, tdue, etc\n  // Check if a promise already exists with matching user+'|'+what\n  // If not, create it\n  // If so, do nothing\n  let p = parseProm(urtx)\n  // TODO: if the url was just alice.promises.to then we want to show alice's\n  // statistics and list of promises and everything\n  if (p.user === 'www' || p.user === '') { \n    // TODO: this is the case of no username, like if someone just went to\n    // \"promises.to\" or tried to fetch \"promises.to/robots.txt\" or whatever\n    resp.sendFile(__dirname + '/public/index.html') \n  } else if (!users.includes(p.user)) {\n    // TODO: tell user \"Sorry, no such user! Get in touch if you want to get in\n    // on our beta!\"\n    resp.sendFile(__dirname + '/public/index.html')\n  } else {\n    Promise.findOne({ where: {urtx} })\n      .then(promise => {\n        if (promise) {\n          console.log('duplicate', urtx);\n          resp.redirect(`/promise/${urtx}`);\n        } else {\n          Promise.create(p);\n          mailself('PROMISE', urtx);\n        }\n    })\n \n    resp.sendFile(__dirname + '/public/index.html') \n  }\n})\n\nvar listener = app.listen(process.env.PORT, function() {\n  console.log('Promises app is listening on port ' + listener.address().port)\n})\n\n// --------------------------------- 80chars ---------------------------------->\n"
      ]
    },
    "mtime": 1506656465129
  },
  "{\"filename\":\"/app/app.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "express",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "express"
              }
            ]
          },
          {
            "source": "express-handlebars",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "expressHandlebars"
              }
            ]
          },
          {
            "source": "chrono-node",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "chrono"
              }
            ]
          },
          {
            "source": "moment",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "moment"
              }
            ]
          },
          {
            "source": "node-sass-middleware",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "sassMiddleware"
              }
            ]
          },
          {
            "source": "./models/promise.js",
            "imported": [
              "Promise",
              "sequelize"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "Promise",
                "local": "Promise"
              },
              {
                "kind": "named",
                "imported": "sequelize",
                "local": "sequelize"
              }
            ]
          },
          {
            "source": "./data/seed.js",
            "imported": [
              "users",
              "promises"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "users",
                "local": "users"
              },
              {
                "kind": "named",
                "imported": "promises",
                "local": "promises"
              }
            ]
          },
          {
            "source": "./lib/latepenalty.js",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "computeCredit"
              }
            ]
          },
          {
            "source": "./lib/parse.js",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "parsePromise"
              }
            ]
          },
          {
            "source": "./lib/middleware.js",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "handlePromiseRequest"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/app/app.js",
      "filenameRelative": "/app/app.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "app.js",
      "sourceFileName": "app.js",
      "sourceRoot": "/app",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "app"
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _express = require('express');\n\nvar _express2 = _interopRequireDefault(_express);\n\nvar _expressHandlebars = require('express-handlebars');\n\nvar _expressHandlebars2 = _interopRequireDefault(_expressHandlebars);\n\nvar _chronoNode = require('chrono-node');\n\nvar _chronoNode2 = _interopRequireDefault(_chronoNode);\n\nvar _moment = require('moment');\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _nodeSassMiddleware = require('node-sass-middleware');\n\nvar _nodeSassMiddleware2 = _interopRequireDefault(_nodeSassMiddleware);\n\nvar _promise = require('./models/promise.js');\n\nvar _seed = require('./data/seed.js');\n\nvar _latepenalty = require('./lib/latepenalty.js');\n\nvar _latepenalty2 = _interopRequireDefault(_latepenalty);\n\nvar _parse = require('./lib/parse.js');\n\nvar _parse2 = _interopRequireDefault(_parse);\n\nvar _middleware = require('./lib/middleware.js');\n\nvar _middleware2 = _interopRequireDefault(_middleware);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// --------------------------------- 80chars ---------------------------------->\n\nvar app = (0, _express2.default)(); // Sugar.js parses some things better\n\n\napp.use((0, _nodeSassMiddleware2.default)({\n  src: __dirname + '/public',\n  dest: '/tmp',\n  debug: true,\n  force: true\n  //outputStyle: 'compressed',\n}));\n\napp.use(_express2.default.static('public'));\napp.use(_express2.default.static('tmp'));\n\napp.engine('handlebars', (0, _expressHandlebars2.default)({ defaultLayout: 'main' }));\napp.set('view engine', 'handlebars');\n\napp.listen(process.env.PORT);\n\n// LATEST SPEC:\n// The \"/by/...\" part is an optional power-user thing, not part of the MVP.\n// Instead, the first time you go to alice.promises.to/foo it gives you the \n// option to choose a deadline, defaulting to now+7days (or to what the \"/by/\" \n// part parsed to, if that's easy, but just make it a suggestion for the user, \n// just like now+7days is if they don't specify a \"/by/\"). \n// For every subsequent GET of alice.promises.to/foo it shows the deadline, with\n// no way to change it.\n\n// IDEAS FOR LATER:\n// Simpler date parsing:\n//   Maybe the date has to be YYYY-MM-DD_HH:MM\n//   Example: bob.promises.to/foo_the_bar/by/2017-09-13_12:00\n// Magic spaces:\n//   Whichever non-alphanumeric character is most common in the urtext, that's \n//   what's assumed to be a space and is replaced with spaces before parsing.\n// Less magical version:\n//   A non-alphanumeric character must follow \"alice.promises.to/\" and that\n//   character is taken as the ersatz space. Eg:\n//   alice.promises.to/_start_her_promises_with_underscores\n// Flexibility on the '/by/' part:\n//   Requiring the string '/by/' to appear in the promise URL means no ambiguity\n//   about where to start parsing the deadline. But the Chrono parsing library \n//   actually does great taking the whole string like \"foo the bar by noon \n//   tomorrow\" and figuring out the time. We could also just take the last\n//   occurrence of \"by\" and parse everything after it as the deadline.\n\n\n// Routes\n\napp.get('/', function (req, resp) {\n  resp.render('home');\n});\n\napp.get('/sign-up', function (req, resp) {\n  resp.render('signup');\n});\n\napp.get('/:user.promises.to/:promise/by/:date', _middleware2.default);\n\n// TODO: if the url was just alice.promises.to then we want to show alice's\n// statistics and list of promises and everything\napp.get('/:user.promises.to', function (req, resp) {});\n\n// Actions\n\n// TODO implement a 'delete' route?\n// app.get('/promises/remove/:urtx', (req, resp) => {\n//   Promise.findAll({\n//    where: {\n//      user: req.params.user\n//    },\n//   })\n// })\n\n\n// Endpoints\n\napp.get('/promise/:udp/:urtx', function (req, resp) {\n  var urtx = req.originalUrl.substr(9);\n  _promise.Promise.findOne({ where: { urtx: urtx } }).then(function (promise) {\n    console.log('single promise', urtx, promise);\n    // resp.write(promise)\n    resp.json(promise);\n  });\n});\n\napp.get('/promises', function (req, resp) {\n  var dbPromises = {};\n  _promise.Promise.findAll({\n    order: _promise.sequelize.literal('tini DESC')\n  }).then(function (promises) {\n    // console.log('all promises', promises)\n    promises.forEach(function (promise) {\n      // create nested array of promises by user\n      dbPromises[promise.user] = dbPromises[promise.user] || [];\n      dbPromises[promise.user].push(promise);\n    });\n    resp.json(dbPromises);\n  });\n});\n\napp.get('/promises/:user', function (req, resp) {\n  var dbPromises = [];\n  _promise.Promise.findAll({\n    where: {\n      user: req.params.user\n    }\n  }).then(function (promises) {\n    // console.log('user promises', promises);\n    promises.forEach(function (promise) {\n      dbPromises.push(promise);\n    });\n    resp.json(dbPromises);\n  });\n});\n\n// Utils\n\napp.get('/reset', function (req, resp) {\n  setup();\n  resp.redirect('/');\n});\n\n// removes all entries from the promises table\napp.get('/clear', function (req, resp) {\n  _promise.Promise.destroy({ where: {} });\n  resp.redirect('/');\n});\n\n// utility to populate table with hardcoded promises above\nfunction setup() {\n  _promise.Promise.sync({ force: true }) // 'force: true' just drops the table if it exists\n  .then(function () {\n    // and creates a new one!\n    // Add the default promises to the database\n    for (var i = 0; i < _seed.promises.length; i++) {\n      _promise.Promise.create((0, _parse2.default)(_seed.promises[i]));\n    }\n  });\n}\n\n/* \nlet test\n//test = chrono.parseDate(\"foo the bar by sep 15th noon\")\ntest = chrono.parseDate(\"Call_the_dentist by 2017-10-15 12pm\")\nconsole.log(`DEBUG: ${test} (unixtime = ${test.getTime()/1000}`)\nconsole.log(\"DEBUG: \", JSON.stringify(parsePromise(promises[2])))\n*/\n\n// --------------------------------- 80chars ---------------------------------->\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJhcHAiLCJ1c2UiLCJzcmMiLCJfX2Rpcm5hbWUiLCJkZXN0IiwiZGVidWciLCJmb3JjZSIsInN0YXRpYyIsImVuZ2luZSIsImRlZmF1bHRMYXlvdXQiLCJzZXQiLCJsaXN0ZW4iLCJwcm9jZXNzIiwiZW52IiwiUE9SVCIsImdldCIsInJlcSIsInJlc3AiLCJyZW5kZXIiLCJ1cnR4Iiwib3JpZ2luYWxVcmwiLCJzdWJzdHIiLCJmaW5kT25lIiwid2hlcmUiLCJ0aGVuIiwicHJvbWlzZSIsImNvbnNvbGUiLCJsb2ciLCJqc29uIiwiZGJQcm9taXNlcyIsImZpbmRBbGwiLCJvcmRlciIsImxpdGVyYWwiLCJwcm9taXNlcyIsImZvckVhY2giLCJ1c2VyIiwicHVzaCIsInBhcmFtcyIsInNldHVwIiwicmVkaXJlY3QiLCJkZXN0cm95Iiwic3luYyIsImkiLCJsZW5ndGgiLCJjcmVhdGUiXSwibWFwcGluZ3MiOiI7O0FBRUE7Ozs7QUFDQTs7OztBQUVBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUVBOztBQUVBOztBQUVBOzs7O0FBQ0E7Ozs7QUFFQTs7Ozs7O0FBaEJBOztBQWtCQSxJQUFJQSxNQUFNLHdCQUFWLEMsQ0Fia0M7OztBQWVsQ0EsSUFBSUMsR0FBSixDQUFRLGtDQUFlO0FBQ3JCQyxPQUFLQyxZQUFZLFNBREk7QUFFckJDLFFBQU0sTUFGZTtBQUdyQkMsU0FBTyxJQUhjO0FBSXJCQyxTQUFPO0FBQ1A7QUFMcUIsQ0FBZixDQUFSOztBQVFBTixJQUFJQyxHQUFKLENBQVEsa0JBQVFNLE1BQVIsQ0FBZSxRQUFmLENBQVI7QUFDQVAsSUFBSUMsR0FBSixDQUFRLGtCQUFRTSxNQUFSLENBQWUsS0FBZixDQUFSOztBQUVBUCxJQUFJUSxNQUFKLENBQVcsWUFBWCxFQUF5QixpQ0FBa0IsRUFBQ0MsZUFBZSxNQUFoQixFQUFsQixDQUF6QjtBQUNBVCxJQUFJVSxHQUFKLENBQVEsYUFBUixFQUF1QixZQUF2Qjs7QUFFQVYsSUFBSVcs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QUFSLENBQWdCLEVBQUNqQixPQUFPLEVBQVIsRUFBaEI7QUFDQU4sT0FBS3NCLFFBQUwsQ0FBYyxHQUFkO0FBQ0QsQ0FIRDs7QUFLQTtBQUNBLFNBQVNELEtBQVQsR0FBaUI7QUFDZixtQkFBUUcsSUFBUixDQUFhLEVBQUNuQyxPQUFPLElBQVIsRUFBYixFQUE0QjtBQUE1QixHQUNHa0IsSUFESCxDQUNRLFlBQVU7QUFBVTtBQUN4QjtBQUNBLFNBQUssSUFBSWtCLElBQUksQ0FBYixFQUFnQkEsSUFBSSxlQUFTQyxNQUE3QixFQUFxQ0QsR0FBckMsRUFBMEM7QUFDeEMsdUJBQVFFLE1BQVIsQ0FBZSxxQkFBYSxlQUFTRixDQUFULENBQWIsQ0FBZjtBQUNEO0FBQ0YsR0FOSDtBQU9EOztBQUVEOzs7Ozs7OztBQVFBIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZVJvb3QiOiIvYXBwIiwic291cmNlc0NvbnRlbnQiOlsiLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIDgwY2hhcnMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT5cblxuaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgZXhwcmVzc0hhbmRsZWJhcnMgZnJvbSAnZXhwcmVzcy1oYW5kbGViYXJzJztcblxuaW1wb3J0IGNocm9ubyBmcm9tICdjaHJvbm8tbm9kZSc7IC8vIFN1Z2FyLmpzIHBhcnNlcyBzb21lIHRoaW5ncyBiZXR0ZXJcbmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JztcbmltcG9ydCBzYXNzTWlkZGxld2FyZSBmcm9tICdub2RlLXNhc3MtbWlkZGxld2FyZSc7XG5cbmltcG9ydCB7IFByb21pc2UsIHNlcXVlbGl6ZSB9IGZyb20gJy4vbW9kZWxzL3Byb21pc2UuanMnO1xuXG5pbXBvcnQgeyB1c2VycywgcHJvbWlzZXMgfSBmcm9tICcuL2RhdGEvc2VlZC5qcyc7XG5cbmltcG9ydCBjb21wdXRlQ3JlZGl0IGZyb20gJy4vbGliL2xhdGVwZW5hbHR5LmpzJztcbmltcG9ydCBwYXJzZVByb21pc2UgZnJvbSAnLi9saWIvcGFyc2UuanMnO1xuXG5pbXBvcnQgaGFuZGxlUHJvbWlzZVJlcXVlc3QgZnJvbSAnLi9saWIvbWlkZGxld2FyZS5qcyc7XG5cbnZhciBhcHAgPSBleHByZXNzKCk7XG5cbmFwcC51c2Uoc2Fzc01pZGRsZXdhcmUoe1xuICBzcmM6IF9fZGlybmFtZSArICcvcHVibGljJyxcbiAgZGVzdDogJy90bXAnLFxuICBkZWJ1ZzogdHJ1ZSxcbiAgZm9yY2U6IHRydWUsXG4gIC8vb3V0cHV0U3R5bGU6ICdjb21wcmVzc2VkJyxcbn0pKTtcblxuYXBwLnVzZShleHByZXNzLnN0YXRpYygncHVibGljJykpO1xuYXBwLnVzZShleHByZXNzLnN0YXRpYygndG1wJykpO1xuXG5hcHAuZW5naW5lKCdoYW5kbGViYXJzJywgZXhwcmVzc0hhbmRsZWJhcnMoe2RlZmF1bHRMYXlvdXQ6ICdtYWluJ30pKTtcbmFwcC5zZXQoJ3ZpZXcgZW5naW5lJywgJ2hhbmRsZWJhcnMnKTtcblxuYXBwLmxpc3Rlbihwcm9jZXNzLmVudi5QT1JUKTtcblxuXG4vLyBMQVRFU1QgU1BFQzpcbi8vIFRoZSBcIi9ieS8uLi5cIiBwYXJ0IGlzIGFuIG9wdGlvbmFsIHBvd2VyLXVzZXIgdGhpbmcsIG5vdCBwYXJ0IG9mIHRoZSBNVlAuXG4vLyBJbnN0ZWFkLCB0aGUgZmlyc3QgdGltZSB5b3UgZ28gdG8gYWxpY2UucHJvbWlzZXMudG8vZm9vIGl0IGdpdmVzIHlvdSB0aGUgXG4vLyBvcHRpb24gdG8gY2hvb3NlIGEgZGVhZGxpbmUsIGRlZmF1bHRpbmcgdG8gbm93KzdkYXlzIChvciB0byB3aGF0IHRoZSBcIi9ieS9cIiBcbi8vIHBhcnQgcGFyc2VkIHRvLCBpZiB0aGF0J3MgZWFzeSwgYnV0IGp1c3QgbWFrZSBpdCBhIHN1Z2dlc3Rpb24gZm9yIHRoZSB1c2VyLCBcbi8vIGp1c3QgbGlrZSBub3crN2RheXMgaXMgaWYgdGhleSBkb24ndCBzcGVjaWZ5IGEgXCIvYnkvXCIpLiBcbi8vIEZvciBldmVyeSBzdWJzZXF1ZW50IEdFVCBvZiBhbGljZS5wcm9taXNlcy50by9mb28gaXQgc2hvd3MgdGhlIGRlYWRsaW5lLCB3aXRoXG4vLyBubyB3YXkgdG8gY2hhbmdlIGl0LlxuXG4vLyBJREVBUyBGT1IgTEFURVI6XG4vLyBTaW1wbGVyIGRhdGUgcGFyc2luZzpcbi8vICAgTWF5YmUgdGhlIGRhdGUgaGFzIHRvIGJlIFlZWVktTU0tRERfSEg6TU1cbi8vICAgRXhhbXBsZTogYm9iLnByb21pc2VzLnRvL2Zvb190aGVfYmFyL2J5LzIwMTctMDktMTNfMTI6MDBcbi8vIE1hZ2ljIHNwYWNlczpcbi8vICAgV2hpY2hldmVyIG5vbi1hbHBoYW51bWVyaWMgY2hhcmFjdGVyIGlzIG1vc3QgY29tbW9uIGluIHRoZSB1cnRleHQsIHRoYXQncyBcbi8vICAgd2hhdCdzIGFzc3VtZWQgdG8gYmUgYSBzcGFjZSBhbmQgaXMgcmVwbGFjZWQgd2l0aCBzcGFjZXMgYmVmb3JlIHBhcnNpbmcuXG4vLyBMZXNzIG1hZ2ljYWwgdmVyc2lvbjpcbi8vICAgQSBub24tYWxwaGFudW1lcmljIGNoYXJhY3RlciBtdXN0IGZvbGxvdyBcImFsaWNlLnByb21pc2VzLnRvL1wiIGFuZCB0aGF0XG4vLyAgIGNoYXJhY3RlciBpcyB0YWtlbiBhcyB0aGUgZXJzYXR6IHNwYWNlLiBFZzpcbi8vICAgYWxpY2UucHJvbWlzZXMudG8vX3N0YXJ0X2hlcl9wcm9taXNlc193aXRoX3VuZGVyc2NvcmVzXG4vLyBGbGV4aWJpbGl0eSBvbiB0aGUgJy9ieS8nIHBhcnQ6XG4vLyAgIFJlcXVpcmluZyB0aGUgc3RyaW5nICcvYnkvJyB0byBhcHBlYXIgaW4gdGhlIHByb21pc2UgVVJMIG1lYW5zIG5vIGFtYmlndWl0eVxuLy8gICBhYm91dCB3aGVyZSB0byBzdGFydCBwYXJzaW5nIHRoZSBkZWFkbGluZS4gQnV0IHRoZSBDaHJvbm8gcGFyc2luZyBsaWJyYXJ5IFxuLy8gICBhY3R1YWxseSBkb2VzIGdyZWF0IHRha2luZyB0aGUgd2hvbGUgc3RyaW5nIGxpa2UgXCJmb28gdGhlIGJhciBieSBub29uIFxuLy8gICB0b21vcnJvd1wiIGFuZCBmaWd1cmluZyBvdXQgdGhlIHRpbWUuIFdlIGNvdWxkIGFsc28ganVzdCB0YWtlIHRoZSBsYXN0XG4vLyAgIG9jY3VycmVuY2Ugb2YgXCJieVwiIGFuZCBwYXJzZSBldmVyeXRoaW5nIGFmdGVyIGl0IGFzIHRoZSBkZWFkbGluZS5cblxuXG4vLyBSb3V0ZXNcblxuYXBwLmdldCgnLycsIChyZXEsIHJlc3ApID0+IHsgXG4gIHJlc3AucmVuZGVyKCdob21lJyk7XG59KVxuXG5hcHAuZ2V0KCcvc2lnbi11cCcsIChyZXEsIHJlc3ApID0+IHtcbiAgcmVzcC5yZW5kZXIoJ3NpZ251cCcpO1xufSlcblxuYXBwLmdldCgnLzp1c2VyLnByb21pc2VzLnRvLzpwcm9taXNlL2J5LzpkYXRlJywgaGFuZGxlUHJvbWlzZVJlcXVlc3QpO1xuXG4vLyBUT0RPOiBpZiB0aGUgdXJsIHdhcyBqdXN0IGFsaWNlLnByb21pc2VzLnRvIHRoZW4gd2Ugd2FudCB0byBzaG93IGFsaWNlJ3Ncbi8vIHN0YXRpc3RpY3MgYW5kIGxpc3Qgb2YgcHJvbWlzZXMgYW5kIGV2ZXJ5dGhpbmdcbmFwcC5nZXQoJy86dXNlci5wcm9taXNlcy50bycsIGZ1bmN0aW9uKHJlcSwgcmVzcCkge30pO1xuXG5cbi8vIEFjdGlvbnNcblxuLy8gVE9ETyBpbXBsZW1lbnQgYSAnZGVsZXRlJyByb3V0ZT9cbi8vIGFwcC5nZXQoJy9wcm9taXNlcy9yZW1vdmUvOnVydHgnLCAocmVxLCByZXNwKSA9PiB7XG4vLyAgIFByb21pc2UuZmluZEFsbCh7XG4vLyAgICB3aGVyZToge1xuLy8gICAgICB1c2VyOiByZXEucGFyYW1zLnVzZXJcbi8vICAgIH0sXG4vLyAgIH0pXG4vLyB9KVxuXG5cbi8vIEVuZHBvaW50c1xuXG5hcHAuZ2V0KCcvcHJvbWlzZS86dWRwLzp1cnR4JywgZnVuY3Rpb24ocmVxLCByZXNwKSB7XG4gIGxldCB1cnR4ID0gcmVxLm9yaWdpbmFsVXJsLnN1YnN0cig5KVxuICBQcm9taXNlLmZpbmRPbmUoeyB3aGVyZToge3VydHh9fSlcbiAgICAudGhlbihmdW5jdGlvbihwcm9taXNlKSB7XG4gICAgICBjb25zb2xlLmxvZygnc2luZ2xlIHByb21pc2UnLCB1cnR4LCBwcm9taXNlKVxuICAgIC8vIHJlc3Aud3JpdGUocHJvbWlzZSlcbiAgICByZXNwLmpzb24ocHJvbWlzZSlcbiAgfSlcblxufSlcblxuYXBwLmdldCgnL3Byb21pc2VzJywgZnVuY3Rpb24ocmVxLCByZXNwKSB7XG4gIHZhciBkYlByb21pc2VzID0ge31cbiAgUHJvbWlzZS5maW5kQWxsKHtcbiAgICBvcmRlcjogc2VxdWVsaXplLmxpdGVyYWwoJ3RpbmkgREVTQycpXG4gIH0pLnRoZW4oZnVuY3Rpb24ocHJvbWlzZXMpIHtcbiAgICAvLyBjb25zb2xlLmxvZygnYWxsIHByb21pc2VzJywgcHJvbWlzZXMpXG4gICAgcHJvbWlzZXMuZm9yRWFjaChmdW5jdGlvbihwcm9taXNlKSB7IC8vIGNyZWF0ZSBuZXN0ZWQgYXJyYXkgb2YgcHJvbWlzZXMgYnkgdXNlclxuICAgICAgZGJQcm9taXNlc1twcm9taXNlLnVzZXJdID0gZGJQcm9taXNlc1twcm9taXNlLnVzZXJdIHx8IFtdXG4gICAgICBkYlByb21pc2VzW3Byb21pc2UudXNlcl0ucHVzaChwcm9taXNlKVxuICAgIH0pO1xuICAgIHJlc3AuanNvbihkYlByb21pc2VzKTtcbiAgfSlcbn0pXG5cbmFwcC5nZXQoJy9wcm9taXNlcy86dXNlcicsIGZ1bmN0aW9uKHJlcSwgcmVzcCkge1xuICB2YXIgZGJQcm9taXNlcyA9IFtdO1xuICBQcm9taXNlLmZpbmRBbGwoe1xuICAgd2hlcmU6IHtcbiAgICAgdXNlcjogcmVxLnBhcmFtcy51c2VyXG4gICB9LFxuICB9KS50aGVuKGZ1bmN0aW9uKHByb21pc2VzKSB7XG4gICAgLy8gY29uc29sZS5sb2coJ3VzZXIgcHJvbWlzZXMnLCBwcm9taXNlcyk7XG4gICAgcHJvbWlzZXMuZm9yRWFjaChmdW5jdGlvbihwcm9taXNlKSB7XG4gICAgICBkYlByb21pc2VzLnB1c2gocHJvbWlzZSk7XG4gICAgfSk7XG4gICAgcmVzcC5qc29uKGRiUHJvbWlzZXMpO1xuICB9KVxufSlcblxuXG4vLyBVdGlsc1xuXG5hcHAuZ2V0KCcvcmVzZXQnLCAocmVxLCByZXNwKSA9PiB7XG4gIHNldHVwKClcbiAgcmVzcC5yZWRpcmVjdCgnLycpXG59KVxuXG4vLyByZW1vdmVzIGFsbCBlbnRyaWVzIGZyb20gdGhlIHByb21pc2VzIHRhYmxlXG5hcHAuZ2V0KCcvY2xlYXInLCAocmVxLCByZXNwKSA9PiB7XG4gIFByb21pc2UuZGVzdHJveSh7d2hlcmU6IHt9fSlcbiAgcmVzcC5yZWRpcmVjdCgnLycpXG59KVxuXG4vLyB1dGlsaXR5IHRvIHBvcHVsYXRlIHRhYmxlIHdpdGggaGFyZGNvZGVkIHByb21pc2VzIGFib3ZlXG5mdW5jdGlvbiBzZXR1cCgpIHsgXG4gIFByb21pc2Uuc3luYyh7Zm9yY2U6IHRydWV9KSAvLyAnZm9yY2U6IHRydWUnIGp1c3QgZHJvcHMgdGhlIHRhYmxlIGlmIGl0IGV4aXN0c1xuICAgIC50aGVuKGZ1bmN0aW9uKCl7ICAgICAgICAgLy8gYW5kIGNyZWF0ZXMgYSBuZXcgb25lIVxuICAgICAgLy8gQWRkIHRoZSBkZWZhdWx0IHByb21pc2VzIHRvIHRoZSBkYXRhYmFzZVxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9taXNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBQcm9taXNlLmNyZWF0ZShwYXJzZVByb21pc2UocHJvbWlzZXNbaV0pKVxuICAgICAgfVxuICAgIH0pXG59XG5cbi8qIFxubGV0IHRlc3Rcbi8vdGVzdCA9IGNocm9uby5wYXJzZURhdGUoXCJmb28gdGhlIGJhciBieSBzZXAgMTV0aCBub29uXCIpXG50ZXN0ID0gY2hyb25vLnBhcnNlRGF0ZShcIkNhbGxfdGhlX2RlbnRpc3QgYnkgMjAxNy0xMC0xNSAxMnBtXCIpXG5jb25zb2xlLmxvZyhgREVCVUc6ICR7dGVzdH0gKHVuaXh0aW1lID0gJHt0ZXN0LmdldFRpbWUoKS8xMDAwfWApXG5jb25zb2xlLmxvZyhcIkRFQlVHOiBcIiwgSlNPTi5zdHJpbmdpZnkocGFyc2VQcm9taXNlKHByb21pc2VzWzJdKSkpXG4qL1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gODBjaGFycyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPlxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "app.js"
      ],
      "names": [
        "app",
        "use",
        "src",
        "__dirname",
        "dest",
        "debug",
        "force",
        "static",
        "engine",
        "defaultLayout",
        "set",
        "listen",
        "process",
        "env",
        "PORT",
        "get",
        "req",
        "resp",
        "render",
        "urtx",
        "originalUrl",
        "substr",
        "findOne",
        "where",
        "then",
        "promise",
        "console",
        "log",
        "json",
        "dbPromises",
        "findAll",
        "order",
        "literal",
        "promises",
        "forEach",
        "user",
        "push",
        "params",
        "setup",
        "redirect",
        "destroy",
        "sync",
        "i",
        "length",
        "create"
      ],
      "mappings": "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",
      "file": "app.js",
      "sourceRoot": "/app",
      "sourcesContent": [
        "// --------------------------------- 80chars ---------------------------------->\n\nimport express from 'express';\nimport expressHandlebars from 'express-handlebars';\n\nimport chrono from 'chrono-node'; // Sugar.js parses some things better\nimport moment from 'moment';\nimport sassMiddleware from 'node-sass-middleware';\n\nimport { Promise, sequelize } from './models/promise.js';\n\nimport { users, promises } from './data/seed.js';\n\nimport computeCredit from './lib/latepenalty.js';\nimport parsePromise from './lib/parse.js';\n\nimport handlePromiseRequest from './lib/middleware.js';\n\nvar app = express();\n\napp.use(sassMiddleware({\n  src: __dirname + '/public',\n  dest: '/tmp',\n  debug: true,\n  force: true,\n  //outputStyle: 'compressed',\n}));\n\napp.use(express.static('public'));\napp.use(express.static('tmp'));\n\napp.engine('handlebars', expressHandlebars({defaultLayout: 'main'}));\napp.set('view engine', 'handlebars');\n\napp.listen(process.env.PORT);\n\n\n// LATEST SPEC:\n// The \"/by/...\" part is an optional power-user thing, not part of the MVP.\n// Instead, the first time you go to alice.promises.to/foo it gives you the \n// option to choose a deadline, defaulting to now+7days (or to what the \"/by/\" \n// part parsed to, if that's easy, but just make it a suggestion for the user, \n// just like now+7days is if they don't specify a \"/by/\"). \n// For every subsequent GET of alice.promises.to/foo it shows the deadline, with\n// no way to change it.\n\n// IDEAS FOR LATER:\n// Simpler date parsing:\n//   Maybe the date has to be YYYY-MM-DD_HH:MM\n//   Example: bob.promises.to/foo_the_bar/by/2017-09-13_12:00\n// Magic spaces:\n//   Whichever non-alphanumeric character is most common in the urtext, that's \n//   what's assumed to be a space and is replaced with spaces before parsing.\n// Less magical version:\n//   A non-alphanumeric character must follow \"alice.promises.to/\" and that\n//   character is taken as the ersatz space. Eg:\n//   alice.promises.to/_start_her_promises_with_underscores\n// Flexibility on the '/by/' part:\n//   Requiring the string '/by/' to appear in the promise URL means no ambiguity\n//   about where to start parsing the deadline. But the Chrono parsing library \n//   actually does great taking the whole string like \"foo the bar by noon \n//   tomorrow\" and figuring out the time. We could also just take the last\n//   occurrence of \"by\" and parse everything after it as the deadline.\n\n\n// Routes\n\napp.get('/', (req, resp) => { \n  resp.render('home');\n})\n\napp.get('/sign-up', (req, resp) => {\n  resp.render('signup');\n})\n\napp.get('/:user.promises.to/:promise/by/:date', handlePromiseRequest);\n\n// TODO: if the url was just alice.promises.to then we want to show alice's\n// statistics and list of promises and everything\napp.get('/:user.promises.to', function(req, resp) {});\n\n\n// Actions\n\n// TODO implement a 'delete' route?\n// app.get('/promises/remove/:urtx', (req, resp) => {\n//   Promise.findAll({\n//    where: {\n//      user: req.params.user\n//    },\n//   })\n// })\n\n\n// Endpoints\n\napp.get('/promise/:udp/:urtx', function(req, resp) {\n  let urtx = req.originalUrl.substr(9)\n  Promise.findOne({ where: {urtx}})\n    .then(function(promise) {\n      console.log('single promise', urtx, promise)\n    // resp.write(promise)\n    resp.json(promise)\n  })\n\n})\n\napp.get('/promises', function(req, resp) {\n  var dbPromises = {}\n  Promise.findAll({\n    order: sequelize.literal('tini DESC')\n  }).then(function(promises) {\n    // console.log('all promises', promises)\n    promises.forEach(function(promise) { // create nested array of promises by user\n      dbPromises[promise.user] = dbPromises[promise.user] || []\n      dbPromises[promise.user].push(promise)\n    });\n    resp.json(dbPromises);\n  })\n})\n\napp.get('/promises/:user', function(req, resp) {\n  var dbPromises = [];\n  Promise.findAll({\n   where: {\n     user: req.params.user\n   },\n  }).then(function(promises) {\n    // console.log('user promises', promises);\n    promises.forEach(function(promise) {\n      dbPromises.push(promise);\n    });\n    resp.json(dbPromises);\n  })\n})\n\n\n// Utils\n\napp.get('/reset', (req, resp) => {\n  setup()\n  resp.redirect('/')\n})\n\n// removes all entries from the promises table\napp.get('/clear', (req, resp) => {\n  Promise.destroy({where: {}})\n  resp.redirect('/')\n})\n\n// utility to populate table with hardcoded promises above\nfunction setup() { \n  Promise.sync({force: true}) // 'force: true' just drops the table if it exists\n    .then(function(){         // and creates a new one!\n      // Add the default promises to the database\n      for (var i = 0; i < promises.length; i++) {\n        Promise.create(parsePromise(promises[i]))\n      }\n    })\n}\n\n/* \nlet test\n//test = chrono.parseDate(\"foo the bar by sep 15th noon\")\ntest = chrono.parseDate(\"Call_the_dentist by 2017-10-15 12pm\")\nconsole.log(`DEBUG: ${test} (unixtime = ${test.getTime()/1000}`)\nconsole.log(\"DEBUG: \", JSON.stringify(parsePromise(promises[2])))\n*/\n\n// --------------------------------- 80chars ---------------------------------->\n"
      ]
    },
    "mtime": 1506669738624
  },
  "{\"filename\":\"/app/data/users.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/data\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "users"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "users",
              "exported": "users"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/data/users.js",
      "filenameRelative": "/app/data/users.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "users.js",
      "sourceFileName": "users.js",
      "sourceRoot": "/app/data",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/data",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "users"
    },
    "ignored": false,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar users = exports.users = [\n/* testing */\n\"alice\", \"bob\", \"carol\",\n/* initial co-conspirators */\n\"dreev\", \"sergii\", \"kim\", \"bee\", \"braden\",\n/* daily beemail */\n\"byorgey\", \"nick\", \"josh\", \"dehowell\", \"caillu\", \"mbork\", \"roy\", \"jennyli\", \"owen\",\n/* weekly beemail */\n\"samuel\", \"cole\", \"jessica\", \"steven\",\n/* contributors */\n\"chris\", \"stephen\",\n/* invitees */\n\"pierre\"];\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzZXJzLmpzIl0sIm5hbWVzIjpbInVzZXJzIl0sIm1hcHBpbmdzIjoiOzs7OztBQUFPLElBQU1BLHdCQUFRO0FBQ25CO0FBQ0EsT0FGbUIsRUFFVixLQUZVLEVBRUgsT0FGRztBQUduQjtBQUNBLE9BSm1CLEVBSVYsUUFKVSxFQUlBLEtBSkEsRUFJTyxLQUpQLEVBSWMsUUFKZDtBQUtuQjtBQUNBLFNBTm1CLEVBTVIsTUFOUSxFQU1BLE1BTkEsRUFNUSxVQU5SLEVBTW9CLFFBTnBCLEVBTThCLE9BTjlCLEVBTXVDLEtBTnZDLEVBTThDLFNBTjlDLEVBT25CLE1BUG1CO0FBUW5CO0FBQ0EsUUFUbUIsRUFTVCxNQVRTLEVBU0QsU0FUQyxFQVNVLFFBVFY7QUFVbkI7QUFDQSxPQVhtQixFQVdWLFNBWFU7QUFZbkI7QUFDQSxRQWJtQixDQUFkIiwiZmlsZSI6InVzZXJzLmpzIiwic291cmNlUm9vdCI6Ii9hcHAvZGF0YSIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCB1c2VycyA9IFsgXG4gIC8qIHRlc3RpbmcgKi8gXG4gIFwiYWxpY2VcIiwgXCJib2JcIiwgXCJjYXJvbFwiLFxuICAvKiBpbml0aWFsIGNvLWNvbnNwaXJhdG9ycyAqLyBcbiAgXCJkcmVldlwiLCBcInNlcmdpaVwiLCBcImtpbVwiLCBcImJlZVwiLCBcImJyYWRlblwiLCBcbiAgLyogZGFpbHkgYmVlbWFpbCAqLyBcbiAgXCJieW9yZ2V5XCIsIFwibmlja1wiLCBcImpvc2hcIiwgXCJkZWhvd2VsbFwiLCBcImNhaWxsdVwiLCBcIm1ib3JrXCIsIFwicm95XCIsIFwiamVubnlsaVwiLCBcbiAgXCJvd2VuXCIsXG4gIC8qIHdlZWtseSBiZWVtYWlsICovIFxuICBcInNhbXVlbFwiLCBcImNvbGVcIiwgXCJqZXNzaWNhXCIsIFwic3RldmVuXCIsXG4gIC8qIGNvbnRyaWJ1dG9ycyAqLyBcbiAgXCJjaHJpc1wiLCBcInN0ZXBoZW5cIixcbiAgLyogaW52aXRlZXMgKi8gXG4gIFwicGllcnJlXCIsXG5dIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "users.js"
      ],
      "names": [
        "users"
      ],
      "mappings": ";;;;;AAAO,IAAMA,wBAAQ;AACnB;AACA,OAFmB,EAEV,KAFU,EAEH,OAFG;AAGnB;AACA,OAJmB,EAIV,QAJU,EAIA,KAJA,EAIO,KAJP,EAIc,QAJd;AAKnB;AACA,SANmB,EAMR,MANQ,EAMA,MANA,EAMQ,UANR,EAMoB,QANpB,EAM8B,OAN9B,EAMuC,KANvC,EAM8C,SAN9C,EAOnB,MAPmB;AAQnB;AACA,QATmB,EAST,MATS,EASD,SATC,EASU,QATV;AAUnB;AACA,OAXmB,EAWV,SAXU;AAYnB;AACA,QAbmB,CAAd",
      "file": "users.js",
      "sourceRoot": "/app/data",
      "sourcesContent": [
        "export const users = [ \n  /* testing */ \n  \"alice\", \"bob\", \"carol\",\n  /* initial co-conspirators */ \n  \"dreev\", \"sergii\", \"kim\", \"bee\", \"braden\", \n  /* daily beemail */ \n  \"byorgey\", \"nick\", \"josh\", \"dehowell\", \"caillu\", \"mbork\", \"roy\", \"jennyli\", \n  \"owen\",\n  /* weekly beemail */ \n  \"samuel\", \"cole\", \"jessica\", \"steven\",\n  /* contributors */ \n  \"chris\", \"stephen\",\n  /* invitees */ \n  \"pierre\",\n]"
      ]
    },
    "mtime": 1506656108490
  },
  "{\"filename\":\"/app/data/promises.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/data\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/app/data/promises.js",
      "filenameRelative": "/app/data/promises.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "promises.js",
      "sourceFileName": "promises.js",
      "sourceRoot": "/app/data",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/data",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "promises"
    },
    "ignored": false,
    "code": "\"use strict\";\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJwcm9taXNlcy5qcyIsInNvdXJjZVJvb3QiOiIvYXBwL2RhdGEiLCJzb3VyY2VzQ29udGVudCI6W119",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [],
      "names": [],
      "mappings": "",
      "file": "promises.js",
      "sourceRoot": "/app/data",
      "sourcesContent": []
    },
    "mtime": 1506659206926
  },
  "{\"filename\":\"/app/data/seed.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/data\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "users",
            "promises"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "users",
              "exported": "users"
            },
            {
              "kind": "local",
              "local": "promises",
              "exported": "promises"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/data/seed.js",
      "filenameRelative": "/app/data/seed.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "seed.js",
      "sourceFileName": "seed.js",
      "sourceRoot": "/app/data",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/data",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "seed"
    },
    "ignored": false,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar users = exports.users = [\n/* testing */\n\"alice\", \"bob\", \"carol\",\n/* initial co-conspirators */\n\"dreev\", \"sergii\", \"kim\", \"bee\", \"braden\",\n/* daily beemail */\n\"byorgey\", \"nick\", \"josh\", \"dehowell\", \"caillu\", \"mbork\", \"roy\", \"jennyli\", \"owen\",\n/* weekly beemail */\n\"samuel\", \"cole\", \"jessica\", \"steven\",\n/* contributors */\n\"chris\", \"stephen\",\n/* invitees */\n\"pierre\"];\n\n// Initial promise list hardcoded so don't have to worry about blowing db away\nvar promises = exports.promises = [\"alice.promises.to/File_the_TPS_report/by/noon_mon\", \"bob.promises.to/Send_vacation_photos/by/saturday\", \"carol.promises.to/Call_the_dentist/by/12am\", \"dreev.promises.to/show_sergii_this_doing_something_useful/by/3am\", // 9-10, done\n\"dreev.promises.to/show_bee_open_questions/by/10:30pm\", // 9-10, done\n\"braden.promises.to/help_with_javascript/by/5pm\", // 9-11\n\"dreev.promises.to/show_brennan_intro/by/10:50pm\", // 9-11, done\n\"dreev.promises.to/queue_tweet_etc_for_blog_post/by/2pm\", // 9-11, done\n\"dreev.promises.to/order_indian/by/5:30pm\", // 9-12, done\n\"dreev.commits.to/ask_bee_re_sunday_parkways\", // 9-13, done\n\"dreev.commits.to/follow_up_with_everyone_re_guest_blogging\", // 9-13\n\"josh.commits.to/get_realisies_running/by/september_30\", // 9-13\n\"braden.commits.to/outline_bite_counting_post/by/Sunday_11pm\", // 9-13\n\"dreev.commits.to/report_glitch_bug\", // 9-14\n\"dreev.commits.to/googledocify_intern_form/by/12pm\", // 9-14\n\"dreev.promises.to/test_penalty_func/by/saturday_noon\", // 9-14\n\"sergii.promises.to/work_on_points_2_to_4/by/next_monday\", // 9-14\n\"dreev.commits.to/meta_debrief_kim/by/midnight_friday\", // 9-14\n\"dreev.commits.to/ping_mirabai/by/sep_22\", // 9-14\n\"dreev.commits.to/send_ms_gross_email/by/sunday_11am\", // 9-14\n\"dreev.promises.to/ping_oli/by/nov_16\", // 9-15\n\"dreev.promises.to/ping_byorgey/by/dec_20\", // 9-15\n\"dreev.promises.to/labelzero/by/1am\", // 9-15\n\"chris.promises.to/follow_up_on_that_support_thread\", // 9-18\n\"bee.commits.to/new-family-photo-to-yoko/by/tomorrow-night\", // 9-18, done early\n\"bee.commits.to/rest-of-paperwork-to-yoko-before-the-gym-tomorrow\", // 9-18, 2 hours late\n\"dreev.promises.to/debug_capitalization/by/tomorrow\", // 9-18, done 23.4 hours late\n\"bee.commits.to/email-sleep-as-android-for-specifics-about-sleep-length-measurement\", // 9-19\n\"jessica.commits.to/let_bob_know_re_meeting/by/tomorrow_5pm\", // 9-19\n\"samuel.commits.to/finish_ch_23_problem_set/by/today_6_pm\", // 9-19\n\"dreev.promises.to/intern_disc/by/wed\", // 9-19, done early\n\"kim.promises.to/email_argue_summary/by/fri\", // 9-19\n\"dreev.commits.to/clear_bogus_commit_for_nick/by/5_minutes_from_now\", // 9-19, done early\n\"kim.promises.to/reflect_Respond_anxiety_spiral_Assist/by/sat\", // 9-19\n\"dreev.commits.to/schedule-k_tax_thing/by/5pm\", // 9-19, done\n\"dreev.promises.to/set_up_mom_on_wordfeud/by/tomorrow\", // 9-20, done/void\n\"dreev.promises.to/reply_to_use_case_email/by/midnight\", // 9-20, done early\n\"kim.promises.to/consider_all_weekend_social_options/by/fri/10pm\", // 9-20\n\"kim.promises.to/submit_conclusion_email/by/10/16\", // 9-21\n\"kim.promises.to/complete_type_1_essay/by/10/1\", // 9-21\n\"kim.promises.to/inform_eve_plans/by/2\", // 9-21\n\"kim.promises.to/email_cynthia_charlap_tickets/by/9/22\", // 9-21\n\"kim.promises.to/schedule_attorney_meet/by/10/1\", // 9-21\n\"kim.promises.to/john_PAM_photos_ask/by/10/1\", // 9-21\n\"kim.promises.to/Nike_p5_email/by/10/1\", // 9-21\n\"kim.promises.to/intro_martin_marna/by/10/5\", // 9-21\n\"kim.promises.to/sbonomic_jitsjudgelist_doc/by/10/15\", // 9-21\n\"kim.promises.to/consider_all_weekend_social_options/by/fri/10pm\", // 9-21\n\"dreev.commits.to/dedup_the_iwills/by/nov\", // 9-22\n\"byorgey.promises.to/email_cut_property_summary/by/7pm\", // 9-22\n\"dreev.commits.to/copy_editing_pass_on_tao2/by/tmw_2pm\", // 9-22, done\n\"chris.promises.to/open_a_smoothie_shop/by/December\", // 9-25\n\"pierre.promises.to/water_the_office_plant/by/Friday\", // 9-25\n\"dreev.promises.to/hanna_reply/by/tonight\", // 9-26, done\n\"bee.promises.to/read-hannas-emails\", // 9-26\n\"bee.promises.to/reping-one-with-heart\", // 9-26\n\"bee.promises.to/fill-out-metromile-feedback\", // 9-26\n\"bee.promises.to/schedule-planning-with-cantor/by/friday-night\", // 9-26\n\"dreev.promises.to/ask_jana_about_blood_testers/by/dec_1\", // 9-26\n\"dreev.commits.to/take_copyediting_pass_on_micheles_draft/by/saturday\", // 9/27,\n\"stephen.promises.to/decide_upon_late_october_trip/by/saturday\", // 9-27\n\"roy.promises.to/sign_up_for_app\", // 9-27\n\"jennyli.promises.to/water_the_plants/by/sunday\", // 9-27\n\"owen.promises.to/adjust-the-shed/by/tonight_7pm\", // 9-28\n\"cole.promises.to/find_a_rep_for_dining_vendors\", // 9-28\n\"chris.promises.to/learn-more-about-glitch/by/monday\"];\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlZWQuanMiXSwibmFtZXMiOlsidXNlcnMiLCJwcm9taXNlcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBTyxJQUFNQSx3QkFBUTtBQUNuQjtBQUNBLE9BRm1CLEVBRVYsS0FGVSxFQUVILE9BRkc7QUFHbkI7QUFDQSxPQUptQixFQUlWLFFBSlUsRUFJQSxLQUpBLEVBSU8sS0FKUCxFQUljLFFBSmQ7QUFLbkI7QUFDQSxTQU5tQixFQU1SLE1BTlEsRUFNQSxNQU5BLEVBTVEsVUFOUixFQU1vQixRQU5wQixFQU04QixPQU45QixFQU11QyxLQU52QyxFQU04QyxTQU45QyxFQU9uQixNQVBtQjtBQVFuQjtBQUNBLFFBVG1CLEVBU1QsTUFUUyxFQVNELFNBVEMsRUFTVSxRQVRWO0FBVW5CO0FBQ0EsT0FYbUIsRUFXVixTQVhVO0FBWW5CO0FBQ0EsUUFibUIsQ0FBZDs7QUFnQlA7QUFDTyxJQUFNQyw4QkFBVyxDQUN0QixtREFEc0IsRUFFdEIsa0RBRnNCLEVBR3RCLDRDQUhzQixFQUl0QixrRUFKc0IsRUFJOEM7QUFDcEUsc0RBTHNCLEVBS2tDO0FBQ3hELGdEQU5zQixFQU00QjtBQUNsRCxpREFQc0IsRUFPNkI7QUFDbkQsd0RBUnNCLEVBUW9DO0FBQzFELDBDQVRzQixFQVNzQjtBQUM1Qyw2Q0FWc0IsRUFVeUI7QUFDL0MsNERBWHNCLEVBV3dDO0FBQzlELHVEQVpzQixFQVltQztBQUN6RCw2REFic0IsRUFheUM7QUFDL0Qsb0NBZHNCLEVBY2dCO0FBQ3RDLG1EQWZzQixFQWUrQjtBQUNyRCxzREFoQnNCLEVBZ0JrQztBQUN4RCx5REFqQnNCLEVBaUJxQztBQUMzRCxzREFsQnNCLEVBa0JrQztBQUN4RCx5Q0FuQnNCLEVBbUJxQjtBQUMzQyxxREFwQnNCLEVBb0JpQztBQUN2RCxzQ0FyQnNCLEVBcUJrQjtBQUN4QywwQ0F0QnNCLEVBc0JzQjtBQUM1QyxvQ0F2QnNCLEVBdUJnQjtBQUN0QyxvREF4QnNCLEVBd0JnQztBQUN0RCwyREF6QnNCLEVBeUJ1QztBQUM3RCxrRUExQnNCLEVBMEI4QztBQUNwRSxvREEzQnNCLEVBMkJnQztBQUN0RCxvRkE1QnNCLEVBNEJnRTtBQUN0Riw0REE3QnNCLEVBNkJ3QztBQUM5RCwwREE5QnNCLEVBOEJzQztBQUM1RCxzQ0EvQnNCLEVBK0JrQjtBQUN4Qyw0Q0FoQ3NCLEVBZ0N3QjtBQUM5QyxvRUFqQ3NCLEVBaUNnRDtBQUN0RSw4REFsQ3NCLEVBa0MwQztBQUNoRSw4Q0FuQ3NCLEVBbUMwQjtBQUNoRCxzREFwQ3NCLEVBb0NrQztBQUN4RCx1REFyQ3NCLEVBcUNtQztBQUN6RCxpRUF0Q3NCLEVBc0M2QztBQUNuRSxrREF2Q3NCLEVBdUM4QjtBQUNwRCwrQ0F4Q3NCLEVBd0MyQjtBQUNqRCx1Q0F6Q3NCLEVBeUNtQjtBQUN6Qyx1REExQ3NCLEVBMENtQztBQUN6RCxnREEzQ3NCLEVBMkM0QjtBQUNsRCw2Q0E1Q3NCLEVBNEN5QjtBQUMvQyx1Q0E3Q3NCLEVBNkNtQjtBQUN6Qyw0Q0E5Q3NCLEVBOEN3QjtBQUM5QyxxREEvQ3NCLEVBK0NpQztBQUN2RCxpRUFoRHNCLEVBZ0Q2QztBQUNuRSwwQ0FqRHNCLEVBaURzQjtBQUM1Qyx1REFsRHNCLEVBa0RtQztBQUN6RCx1REFuRHNCLEVBbURtQztBQUN6RCxvREFwRHNCLEVBb0RnQztBQUN0RCxxREFyRHNCLEVBcURpQztBQUN2RCwwQ0F0RHNCLEVBc0RzQjtBQUM1QyxvQ0F2RHNCLEVBdURnQjtBQUN0Qyx1Q0F4RHNCLEVBd0RtQjtBQUN6Qyw2Q0F6RHNCLEVBeUR5QjtBQUMvQywrREExRHNCLEVBMEQyQztBQUNqRSx5REEzRHNCLEVBMkRxQztBQUMzRCxzRUE1RHNCLEVBNERrRDtBQUN4RSwrREE3RHNCLEVBNkQyQztBQUNqRSxpQ0E5RHNCLEVBOERhO0FBQ25DLGdEQS9Ec0IsRUErRDRCO0FBQ2xELGlEQWhFc0IsRUFnRTZCO0FBQ25ELGdEQWpFc0IsRUFpRTRCO0FBQ2xELHFEQWxFc0IsQ0FBakIiLCJmaWxlIjoic2VlZC5qcyIsInNvdXJjZVJvb3QiOiIvYXBwL2RhdGEiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgdXNlcnMgPSBbIFxuICAvKiB0ZXN0aW5nICovIFxuICBcImFsaWNlXCIsIFwiYm9iXCIsIFwiY2Fyb2xcIixcbiAgLyogaW5pdGlhbCBjby1jb25zcGlyYXRvcnMgKi8gXG4gIFwiZHJlZXZcIiwgXCJzZXJnaWlcIiwgXCJraW1cIiwgXCJiZWVcIiwgXCJicmFkZW5cIiwgXG4gIC8qIGRhaWx5IGJlZW1haWwgKi8gXG4gIFwiYnlvcmdleVwiLCBcIm5pY2tcIiwgXCJqb3NoXCIsIFwiZGVob3dlbGxcIiwgXCJjYWlsbHVcIiwgXCJtYm9ya1wiLCBcInJveVwiLCBcImplbm55bGlcIiwgXG4gIFwib3dlblwiLFxuICAvKiB3ZWVrbHkgYmVlbWFpbCAqLyBcbiAgXCJzYW11ZWxcIiwgXCJjb2xlXCIsIFwiamVzc2ljYVwiLCBcInN0ZXZlblwiLFxuICAvKiBjb250cmlidXRvcnMgKi8gXG4gIFwiY2hyaXNcIiwgXCJzdGVwaGVuXCIsXG4gIC8qIGludml0ZWVzICovIFxuICBcInBpZXJyZVwiLFxuXVxuXG4vLyBJbml0aWFsIHByb21pc2UgbGlzdCBoYXJkY29kZWQgc28gZG9uJ3QgaGF2ZSB0byB3b3JyeSBhYm91dCBibG93aW5nIGRiIGF3YXlcbmV4cG9ydCBjb25zdCBwcm9taXNlcyA9IFtcbiAgXCJhbGljZS5wcm9taXNlcy50by9GaWxlX3RoZV9UUFNfcmVwb3J0L2J5L25vb25fbW9uXCIsXG4gIFwiYm9iLnByb21pc2VzLnRvL1NlbmRfdmFjYXRpb25fcGhvdG9zL2J5L3NhdHVyZGF5XCIsXG4gIFwiY2Fyb2wucHJvbWlzZXMudG8vQ2FsbF90aGVfZGVudGlzdC9ieS8xMmFtXCIsXG4gIFwiZHJlZXYucHJvbWlzZXMudG8vc2hvd19zZXJnaWlfdGhpc19kb2luZ19zb21ldGhpbmdfdXNlZnVsL2J5LzNhbVwiLCAvLyA5LTEwLCBkb25lXG4gIFwiZHJlZXYucHJvbWlzZXMudG8vc2hvd19iZWVfb3Blbl9xdWVzdGlvbnMvYnkvMTA6MzBwbVwiLCAvLyA5LTEwLCBkb25lXG4gIFwiYnJhZGVuLnByb21pc2VzLnRvL2hlbHBfd2l0aF9qYXZhc2NyaXB0L2J5LzVwbVwiLCAvLyA5LTExXG4gIFwiZHJlZXYucHJvbWlzZXMudG8vc2hvd19icmVubmFuX2ludHJvL2J5LzEwOjUwcG1cIiwgLy8gOS0xMSwgZG9uZVxuICBcImRyZWV2LnByb21pc2VzLnRvL3F1ZXVlX3R3ZWV0X2V0Y19mb3JfYmxvZ19wb3N0L2J5LzJwbVwiLCAvLyA5LTExLCBkb25lXG4gIFwiZHJlZXYucHJvbWlzZXMudG8vb3JkZXJfaW5kaWFuL2J5LzU6MzBwbVwiLCAvLyA5LTEyLCBkb25lXG4gIFwiZHJlZXYuY29tbWl0cy50by9hc2tfYmVlX3JlX3N1bmRheV9wYXJrd2F5c1wiLCAvLyA5LTEzLCBkb25lXG4gIFwiZHJlZXYuY29tbWl0cy50by9mb2xsb3dfdXBfd2l0aF9ldmVyeW9uZV9yZV9ndWVzdF9ibG9nZ2luZ1wiLCAvLyA5LTEzXG4gIFwiam9zaC5jb21taXRzLnRvL2dldF9yZWFsaXNpZXNfcnVubmluZy9ieS9zZXB0ZW1iZXJfMzBcIiwgLy8gOS0xM1xuICBcImJyYWRlbi5jb21taXRzLnRvL291dGxpbmVfYml0ZV9jb3VudGluZ19wb3N0L2J5L1N1bmRheV8xMXBtXCIsIC8vIDktMTNcbiAgXCJkcmVldi5jb21taXRzLnRvL3JlcG9ydF9nbGl0Y2hfYnVnXCIsIC8vIDktMTRcbiAgXCJkcmVldi5jb21taXRzLnRvL2dvb2dsZWRvY2lmeV9pbnRlcm5fZm9ybS9ieS8xMnBtXCIsIC8vIDktMTRcbiAgXCJkcmVldi5wcm9taXNlcy50by90ZXN0X3BlbmFsdHlfZnVuYy9ieS9zYXR1cmRheV9ub29uXCIsIC8vIDktMTRcbiAgXCJzZXJnaWkucHJvbWlzZXMudG8vd29ya19vbl9wb2ludHNfMl90b180L2J5L25leHRfbW9uZGF5XCIsIC8vIDktMTRcbiAgXCJkcmVldi5jb21taXRzLnRvL21ldGFfZGVicmllZl9raW0vYnkvbWlkbmlnaHRfZnJpZGF5XCIsIC8vIDktMTRcbiAgXCJkcmVldi5jb21taXRzLnRvL3BpbmdfbWlyYWJhaS9ieS9zZXBfMjJcIiwgLy8gOS0xNFxuICBcImRyZWV2LmNvbW1pdHMudG8vc2VuZF9tc19ncm9zc19lbWFpbC9ieS9zdW5kYXlfMTFhbVwiLCAvLyA5LTE0XG4gIFwiZHJlZXYucHJvbWlzZXMudG8vcGluZ19vbGkvYnkvbm92XzE2XCIsIC8vIDktMTVcbiAgXCJkcmVldi5wcm9taXNlcy50by9waW5nX2J5b3JnZXkvYnkvZGVjXzIwXCIsIC8vIDktMTVcbiAgXCJkcmVldi5wcm9taXNlcy50by9sYWJlbHplcm8vYnkvMWFtXCIsIC8vIDktMTVcbiAgXCJjaHJpcy5wcm9taXNlcy50by9mb2xsb3dfdXBfb25fdGhhdF9zdXBwb3J0X3RocmVhZFwiLCAvLyA5LTE4XG4gIFwiYmVlLmNvbW1pdHMudG8vbmV3LWZhbWlseS1waG90by10by15b2tvL2J5L3RvbW9ycm93LW5pZ2h0XCIsIC8vIDktMTgsIGRvbmUgZWFybHlcbiAgXCJiZWUuY29tbWl0cy50by9yZXN0LW9mLXBhcGVyd29yay10by15b2tvLWJlZm9yZS10aGUtZ3ltLXRvbW9ycm93XCIsIC8vIDktMTgsIDIgaG91cnMgbGF0ZVxuICBcImRyZWV2LnByb21pc2VzLnRvL2RlYnVnX2NhcGl0YWxpemF0aW9uL2J5L3RvbW9ycm93XCIsIC8vIDktMTgsIGRvbmUgMjMuNCBob3VycyBsYXRlXG4gIFwiYmVlLmNvbW1pdHMudG8vZW1haWwtc2xlZXAtYXMtYW5kcm9pZC1mb3Itc3BlY2lmaWNzLWFib3V0LXNsZWVwLWxlbmd0aC1tZWFzdXJlbWVudFwiLCAvLyA5LTE5XG4gIFwiamVzc2ljYS5jb21taXRzLnRvL2xldF9ib2Jfa25vd19yZV9tZWV0aW5nL2J5L3RvbW9ycm93XzVwbVwiLCAvLyA5LTE5XG4gIFwic2FtdWVsLmNvbW1pdHMudG8vZmluaXNoX2NoXzIzX3Byb2JsZW1fc2V0L2J5L3RvZGF5XzZfcG1cIiwgLy8gOS0xOVxuICBcImRyZWV2LnByb21pc2VzLnRvL2ludGVybl9kaXNjL2J5L3dlZFwiLCAvLyA5LTE5LCBkb25lIGVhcmx5XG4gIFwia2ltLnByb21pc2VzLnRvL2VtYWlsX2FyZ3VlX3N1bW1hcnkvYnkvZnJpXCIsIC8vIDktMTlcbiAgXCJkcmVldi5jb21taXRzLnRvL2NsZWFyX2JvZ3VzX2NvbW1pdF9mb3Jfbmljay9ieS81X21pbnV0ZXNfZnJvbV9ub3dcIiwgLy8gOS0xOSwgZG9uZSBlYXJseVxuICBcImtpbS5wcm9taXNlcy50by9yZWZsZWN0X1Jlc3BvbmRfYW54aWV0eV9zcGlyYWxfQXNzaXN0L2J5L3NhdFwiLCAvLyA5LTE5XG4gIFwiZHJlZXYuY29tbWl0cy50by9zY2hlZHVsZS1rX3RheF90aGluZy9ieS81cG1cIiwgLy8gOS0xOSwgZG9uZVxuICBcImRyZWV2LnByb21pc2VzLnRvL3NldF91cF9tb21fb25fd29yZGZldWQvYnkvdG9tb3Jyb3dcIiwgLy8gOS0yMCwgZG9uZS92b2lkXG4gIFwiZHJlZXYucHJvbWlzZXMudG8vcmVwbHlfdG9fdXNlX2Nhc2VfZW1haWwvYnkvbWlkbmlnaHRcIiwgLy8gOS0yMCwgZG9uZSBlYXJseVxuICBcImtpbS5wcm9taXNlcy50by9jb25zaWRlcl9hbGxfd2Vla2VuZF9zb2NpYWxfb3B0aW9ucy9ieS9mcmkvMTBwbVwiLCAvLyA5LTIwXG4gIFwia2ltLnByb21pc2VzLnRvL3N1Ym1pdF9jb25jbHVzaW9uX2VtYWlsL2J5LzEwLzE2XCIsIC8vIDktMjFcbiAgXCJraW0ucHJvbWlzZXMudG8vY29tcGxldGVfdHlwZV8xX2Vzc2F5L2J5LzEwLzFcIiwgLy8gOS0yMVxuICBcImtpbS5wcm9taXNlcy50by9pbmZvcm1fZXZlX3BsYW5zL2J5LzJcIiwgLy8gOS0yMVxuICBcImtpbS5wcm9taXNlcy50by9lbWFpbF9jeW50aGlhX2NoYXJsYXBfdGlja2V0cy9ieS85LzIyXCIsIC8vIDktMjFcbiAgXCJraW0ucHJvbWlzZXMudG8vc2NoZWR1bGVfYXR0b3JuZXlfbWVldC9ieS8xMC8xXCIsIC8vIDktMjFcbiAgXCJraW0ucHJvbWlzZXMudG8vam9obl9QQU1fcGhvdG9zX2Fzay9ieS8xMC8xXCIsIC8vIDktMjFcbiAgXCJraW0ucHJvbWlzZXMudG8vTmlrZV9wNV9lbWFpbC9ieS8xMC8xXCIsIC8vIDktMjFcbiAgXCJraW0ucHJvbWlzZXMudG8vaW50cm9fbWFydGluX21hcm5hL2J5LzEwLzVcIiwgLy8gOS0yMVxuICBcImtpbS5wcm9taXNlcy50by9zYm9ub21pY19qaXRzanVkZ2VsaXN0X2RvYy9ieS8xMC8xNVwiLCAvLyA5LTIxXG4gIFwia2ltLnByb21pc2VzLnRvL2NvbnNpZGVyX2FsbF93ZWVrZW5kX3NvY2lhbF9vcHRpb25zL2J5L2ZyaS8xMHBtXCIsIC8vIDktMjFcbiAgXCJkcmVldi5jb21taXRzLnRvL2RlZHVwX3RoZV9pd2lsbHMvYnkvbm92XCIsIC8vIDktMjJcbiAgXCJieW9yZ2V5LnByb21pc2VzLnRvL2VtYWlsX2N1dF9wcm9wZXJ0eV9zdW1tYXJ5L2J5LzdwbVwiLCAvLyA5LTIyXG4gIFwiZHJlZXYuY29tbWl0cy50by9jb3B5X2VkaXRpbmdfcGFzc19vbl90YW8yL2J5L3Rtd18ycG1cIiwgLy8gOS0yMiwgZG9uZVxuICBcImNocmlzLnByb21pc2VzLnRvL29wZW5fYV9zbW9vdGhpZV9zaG9wL2J5L0RlY2VtYmVyXCIsIC8vIDktMjVcbiAgXCJwaWVycmUucHJvbWlzZXMudG8vd2F0ZXJfdGhlX29mZmljZV9wbGFudC9ieS9GcmlkYXlcIiwgLy8gOS0yNVxuICBcImRyZWV2LnByb21pc2VzLnRvL2hhbm5hX3JlcGx5L2J5L3RvbmlnaHRcIiwgLy8gOS0yNiwgZG9uZVxuICBcImJlZS5wcm9taXNlcy50by9yZWFkLWhhbm5hcy1lbWFpbHNcIiwgLy8gOS0yNlxuICBcImJlZS5wcm9taXNlcy50by9yZXBpbmctb25lLXdpdGgtaGVhcnRcIiwgLy8gOS0yNlxuICBcImJlZS5wcm9taXNlcy50by9maWxsLW91dC1tZXRyb21pbGUtZmVlZGJhY2tcIiwgLy8gOS0yNlxuICBcImJlZS5wcm9taXNlcy50by9zY2hlZHVsZS1wbGFubmluZy13aXRoLWNhbnRvci9ieS9mcmlkYXktbmlnaHRcIiwgLy8gOS0yNlxuICBcImRyZWV2LnByb21pc2VzLnRvL2Fza19qYW5hX2Fib3V0X2Jsb29kX3Rlc3RlcnMvYnkvZGVjXzFcIiwgLy8gOS0yNlxuICBcImRyZWV2LmNvbW1pdHMudG8vdGFrZV9jb3B5ZWRpdGluZ19wYXNzX29uX21pY2hlbGVzX2RyYWZ0L2J5L3NhdHVyZGF5XCIsIC8vIDkvMjcsXG4gIFwic3RlcGhlbi5wcm9taXNlcy50by9kZWNpZGVfdXBvbl9sYXRlX29jdG9iZXJfdHJpcC9ieS9zYXR1cmRheVwiLCAvLyA5LTI3XG4gIFwicm95LnByb21pc2VzLnRvL3NpZ25fdXBfZm9yX2FwcFwiLCAvLyA5LTI3XG4gIFwiamVubnlsaS5wcm9taXNlcy50by93YXRlcl90aGVfcGxhbnRzL2J5L3N1bmRheVwiLCAvLyA5LTI3XG4gIFwib3dlbi5wcm9taXNlcy50by9hZGp1c3QtdGhlLXNoZWQvYnkvdG9uaWdodF83cG1cIiwgLy8gOS0yOFxuICBcImNvbGUucHJvbWlzZXMudG8vZmluZF9hX3JlcF9mb3JfZGluaW5nX3ZlbmRvcnNcIiwgLy8gOS0yOFxuICBcImNocmlzLnByb21pc2VzLnRvL2xlYXJuLW1vcmUtYWJvdXQtZ2xpdGNoL2J5L21vbmRheVwiLCAvLyA5LTI4XG5dXG5cbi8vIFRPRE86IHR1cm4gdGhvc2UgaW50byBhIGxpc3Qgb2YganNvbiBvYmplY3RzICJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "seed.js"
      ],
      "names": [
        "users",
        "promises"
      ],
      "mappings": ";;;;;AAAO,IAAMA,wBAAQ;AACnB;AACA,OAFmB,EAEV,KAFU,EAEH,OAFG;AAGnB;AACA,OAJmB,EAIV,QAJU,EAIA,KAJA,EAIO,KAJP,EAIc,QAJd;AAKnB;AACA,SANmB,EAMR,MANQ,EAMA,MANA,EAMQ,UANR,EAMoB,QANpB,EAM8B,OAN9B,EAMuC,KANvC,EAM8C,SAN9C,EAOnB,MAPmB;AAQnB;AACA,QATmB,EAST,MATS,EASD,SATC,EASU,QATV;AAUnB;AACA,OAXmB,EAWV,SAXU;AAYnB;AACA,QAbmB,CAAd;;AAgBP;AACO,IAAMC,8BAAW,CACtB,mDADsB,EAEtB,kDAFsB,EAGtB,4CAHsB,EAItB,kEAJsB,EAI8C;AACpE,sDALsB,EAKkC;AACxD,gDANsB,EAM4B;AAClD,iDAPsB,EAO6B;AACnD,wDARsB,EAQoC;AAC1D,0CATsB,EASsB;AAC5C,6CAVsB,EAUyB;AAC/C,4DAXsB,EAWwC;AAC9D,uDAZsB,EAYmC;AACzD,6DAbsB,EAayC;AAC/D,oCAdsB,EAcgB;AACtC,mDAfsB,EAe+B;AACrD,sDAhBsB,EAgBkC;AACxD,yDAjBsB,EAiBqC;AAC3D,sDAlBsB,EAkBkC;AACxD,yCAnBsB,EAmBqB;AAC3C,qDApBsB,EAoBiC;AACvD,sCArBsB,EAqBkB;AACxC,0CAtBsB,EAsBsB;AAC5C,oCAvBsB,EAuBgB;AACtC,oDAxBsB,EAwBgC;AACtD,2DAzBsB,EAyBuC;AAC7D,kEA1BsB,EA0B8C;AACpE,oDA3BsB,EA2BgC;AACtD,oFA5BsB,EA4BgE;AACtF,4DA7BsB,EA6BwC;AAC9D,0DA9BsB,EA8BsC;AAC5D,sCA/BsB,EA+BkB;AACxC,4CAhCsB,EAgCwB;AAC9C,oEAjCsB,EAiCgD;AACtE,8DAlCsB,EAkC0C;AAChE,8CAnCsB,EAmC0B;AAChD,sDApCsB,EAoCkC;AACxD,uDArCsB,EAqCmC;AACzD,iEAtCsB,EAsC6C;AACnE,kDAvCsB,EAuC8B;AACpD,+CAxCsB,EAwC2B;AACjD,uCAzCsB,EAyCmB;AACzC,uDA1CsB,EA0CmC;AACzD,gDA3CsB,EA2C4B;AAClD,6CA5CsB,EA4CyB;AAC/C,uCA7CsB,EA6CmB;AACzC,4CA9CsB,EA8CwB;AAC9C,qDA/CsB,EA+CiC;AACvD,iEAhDsB,EAgD6C;AACnE,0CAjDsB,EAiDsB;AAC5C,uDAlDsB,EAkDmC;AACzD,uDAnDsB,EAmDmC;AACzD,oDApDsB,EAoDgC;AACtD,qDArDsB,EAqDiC;AACvD,0CAtDsB,EAsDsB;AAC5C,oCAvDsB,EAuDgB;AACtC,uCAxDsB,EAwDmB;AACzC,6CAzDsB,EAyDyB;AAC/C,+DA1DsB,EA0D2C;AACjE,yDA3DsB,EA2DqC;AAC3D,sEA5DsB,EA4DkD;AACxE,+DA7DsB,EA6D2C;AACjE,iCA9DsB,EA8Da;AACnC,gDA/DsB,EA+D4B;AAClD,iDAhEsB,EAgE6B;AACnD,gDAjEsB,EAiE4B;AAClD,qDAlEsB,CAAjB",
      "file": "seed.js",
      "sourceRoot": "/app/data",
      "sourcesContent": [
        "export const users = [ \n  /* testing */ \n  \"alice\", \"bob\", \"carol\",\n  /* initial co-conspirators */ \n  \"dreev\", \"sergii\", \"kim\", \"bee\", \"braden\", \n  /* daily beemail */ \n  \"byorgey\", \"nick\", \"josh\", \"dehowell\", \"caillu\", \"mbork\", \"roy\", \"jennyli\", \n  \"owen\",\n  /* weekly beemail */ \n  \"samuel\", \"cole\", \"jessica\", \"steven\",\n  /* contributors */ \n  \"chris\", \"stephen\",\n  /* invitees */ \n  \"pierre\",\n]\n\n// Initial promise list hardcoded so don't have to worry about blowing db away\nexport const promises = [\n  \"alice.promises.to/File_the_TPS_report/by/noon_mon\",\n  \"bob.promises.to/Send_vacation_photos/by/saturday\",\n  \"carol.promises.to/Call_the_dentist/by/12am\",\n  \"dreev.promises.to/show_sergii_this_doing_something_useful/by/3am\", // 9-10, done\n  \"dreev.promises.to/show_bee_open_questions/by/10:30pm\", // 9-10, done\n  \"braden.promises.to/help_with_javascript/by/5pm\", // 9-11\n  \"dreev.promises.to/show_brennan_intro/by/10:50pm\", // 9-11, done\n  \"dreev.promises.to/queue_tweet_etc_for_blog_post/by/2pm\", // 9-11, done\n  \"dreev.promises.to/order_indian/by/5:30pm\", // 9-12, done\n  \"dreev.commits.to/ask_bee_re_sunday_parkways\", // 9-13, done\n  \"dreev.commits.to/follow_up_with_everyone_re_guest_blogging\", // 9-13\n  \"josh.commits.to/get_realisies_running/by/september_30\", // 9-13\n  \"braden.commits.to/outline_bite_counting_post/by/Sunday_11pm\", // 9-13\n  \"dreev.commits.to/report_glitch_bug\", // 9-14\n  \"dreev.commits.to/googledocify_intern_form/by/12pm\", // 9-14\n  \"dreev.promises.to/test_penalty_func/by/saturday_noon\", // 9-14\n  \"sergii.promises.to/work_on_points_2_to_4/by/next_monday\", // 9-14\n  \"dreev.commits.to/meta_debrief_kim/by/midnight_friday\", // 9-14\n  \"dreev.commits.to/ping_mirabai/by/sep_22\", // 9-14\n  \"dreev.commits.to/send_ms_gross_email/by/sunday_11am\", // 9-14\n  \"dreev.promises.to/ping_oli/by/nov_16\", // 9-15\n  \"dreev.promises.to/ping_byorgey/by/dec_20\", // 9-15\n  \"dreev.promises.to/labelzero/by/1am\", // 9-15\n  \"chris.promises.to/follow_up_on_that_support_thread\", // 9-18\n  \"bee.commits.to/new-family-photo-to-yoko/by/tomorrow-night\", // 9-18, done early\n  \"bee.commits.to/rest-of-paperwork-to-yoko-before-the-gym-tomorrow\", // 9-18, 2 hours late\n  \"dreev.promises.to/debug_capitalization/by/tomorrow\", // 9-18, done 23.4 hours late\n  \"bee.commits.to/email-sleep-as-android-for-specifics-about-sleep-length-measurement\", // 9-19\n  \"jessica.commits.to/let_bob_know_re_meeting/by/tomorrow_5pm\", // 9-19\n  \"samuel.commits.to/finish_ch_23_problem_set/by/today_6_pm\", // 9-19\n  \"dreev.promises.to/intern_disc/by/wed\", // 9-19, done early\n  \"kim.promises.to/email_argue_summary/by/fri\", // 9-19\n  \"dreev.commits.to/clear_bogus_commit_for_nick/by/5_minutes_from_now\", // 9-19, done early\n  \"kim.promises.to/reflect_Respond_anxiety_spiral_Assist/by/sat\", // 9-19\n  \"dreev.commits.to/schedule-k_tax_thing/by/5pm\", // 9-19, done\n  \"dreev.promises.to/set_up_mom_on_wordfeud/by/tomorrow\", // 9-20, done/void\n  \"dreev.promises.to/reply_to_use_case_email/by/midnight\", // 9-20, done early\n  \"kim.promises.to/consider_all_weekend_social_options/by/fri/10pm\", // 9-20\n  \"kim.promises.to/submit_conclusion_email/by/10/16\", // 9-21\n  \"kim.promises.to/complete_type_1_essay/by/10/1\", // 9-21\n  \"kim.promises.to/inform_eve_plans/by/2\", // 9-21\n  \"kim.promises.to/email_cynthia_charlap_tickets/by/9/22\", // 9-21\n  \"kim.promises.to/schedule_attorney_meet/by/10/1\", // 9-21\n  \"kim.promises.to/john_PAM_photos_ask/by/10/1\", // 9-21\n  \"kim.promises.to/Nike_p5_email/by/10/1\", // 9-21\n  \"kim.promises.to/intro_martin_marna/by/10/5\", // 9-21\n  \"kim.promises.to/sbonomic_jitsjudgelist_doc/by/10/15\", // 9-21\n  \"kim.promises.to/consider_all_weekend_social_options/by/fri/10pm\", // 9-21\n  \"dreev.commits.to/dedup_the_iwills/by/nov\", // 9-22\n  \"byorgey.promises.to/email_cut_property_summary/by/7pm\", // 9-22\n  \"dreev.commits.to/copy_editing_pass_on_tao2/by/tmw_2pm\", // 9-22, done\n  \"chris.promises.to/open_a_smoothie_shop/by/December\", // 9-25\n  \"pierre.promises.to/water_the_office_plant/by/Friday\", // 9-25\n  \"dreev.promises.to/hanna_reply/by/tonight\", // 9-26, done\n  \"bee.promises.to/read-hannas-emails\", // 9-26\n  \"bee.promises.to/reping-one-with-heart\", // 9-26\n  \"bee.promises.to/fill-out-metromile-feedback\", // 9-26\n  \"bee.promises.to/schedule-planning-with-cantor/by/friday-night\", // 9-26\n  \"dreev.promises.to/ask_jana_about_blood_testers/by/dec_1\", // 9-26\n  \"dreev.commits.to/take_copyediting_pass_on_micheles_draft/by/saturday\", // 9/27,\n  \"stephen.promises.to/decide_upon_late_october_trip/by/saturday\", // 9-27\n  \"roy.promises.to/sign_up_for_app\", // 9-27\n  \"jennyli.promises.to/water_the_plants/by/sunday\", // 9-27\n  \"owen.promises.to/adjust-the-shed/by/tonight_7pm\", // 9-28\n  \"cole.promises.to/find_a_rep_for_dining_vendors\", // 9-28\n  \"chris.promises.to/learn-more-about-glitch/by/monday\", // 9-28\n]\n\n// TODO: turn those into a list of json objects "
      ]
    },
    "mtime": 1506659224809
  },
  "{\"filename\":\"/app/lib/latepenalty.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/lib\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "credit",
            "t"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "credit",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "t",
              "exported": "default"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/lib/latepenalty.js",
      "filenameRelative": "/app/lib/latepenalty.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "latepenalty.js",
      "sourceFileName": "latepenalty.js",
      "sourceRoot": "/app/lib",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/lib",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "latepenalty"
    },
    "ignored": false,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = credit;\n// --------------------------------- 80chars ---------------------------------->\n\n/* The main function here is credit(t) which computes the fraction of full \ncredit you get for being t seconds late. It's roughly a continuous version of\nthe following:\n  credit(t) = 1    if t<60s  # seconds late (no or almost no penalty)\n  credit(t) = .999 if t<1h   # minutes late (baaaasically counts)\n  credit(t) = .99  if t<1d   # hours late   (no big deal, almost fully counts)\n  credit(t) = .9   if t<1w   # days late    (main thing is it's done)\n  credit(t) = .5   if t<1mo  # weeks late   (half counts if this late)\n  credit(t) = .1   if t<1y   # months late  (mostly doesn't count)\n  credit(t) = .01  if t<10y  # years late   (better late than never, barely)\n  credit(t) = 0    otherwise # decades late (zero or essentially zero credit)\n*/\n\nvar SIH = 3600; // seconds in hour\nvar SID = 86400; // seconds in day\nvar SIW = SID * 7; // seconds in week\nvar DIY = 365.25; // days in year\nvar SIM = SID * DIY / 12; // seconds in month\nvar SIY = SID * DIY; // seconds in year\n\n// Linearly interpolate to return u when x=a and v when x=b (NOT CURRENTLY USED)\nfunction lscale(x, a, b, u, v) {\n  return (b * u - a * v + (v - u) * x) / (b - a);\n}\n\n// Exponentially interpolate to return u when x=a and v when x=b\nfunction escale(x, a, b, u, v) {\n  return u * Math.pow(u / v, a / (b - a)) * Math.exp(Math.log(v / u) / (b - a) * x);\n}\n\n// Do an h-interpolation to return u when x=a and v when x=b. \n// Special cases: h=-1 is linear, h=0 is exponential, h=1 is hyperbolic.\nfunction hscale(h, x, a, b, u, v) {\n  if (h === 0) {\n    return escale(x, a, b, u, v);\n  }\n  var r = (Math.pow(v / u, -h) - 1) / h / (a - b);\n  return u * Math.pow(1 - h * r * (x - a), -1 / h);\n}\n\n// Compute the credit you get for being t seconds late\nfunction credit(t) {\n  var h = 8;\n  if (t <= 0) {\n    return 1;\n  } // maybe <=59s late should still be 1 (no penalty)?\n  else if (t < SIH) {\n      return hscale(h, t, 0, SIH, 1, .999);\n    } else if (t < SID) {\n      return hscale(h, t, SIH, SID, .999, .99);\n    } else if (t < SIW) {\n      return hscale(h, t, SID, SIW, .99, .9);\n    } else if (t < SIM) {\n      return hscale(h, t, SIW, SIM, .9, .5);\n    } else if (t < SIY) {\n      return hscale(h, t, SIM, SIY, .5, .1);\n    } else {\n      return hscale(h, t, SIY, 10 * SIY, .1, .01);\n    }\n}\n\n/* \nAn alternative simple late penalty function I've used before in another context \nis 1-(t/(86400*7))^4 which gives you a couple days of very little penalty and\nthen your credit plummets till you get 0 credit for being more than a week late.\n*/\n\n// --------------------------------- 80chars ---------------------------------->\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxhdGVwZW5hbHR5LmpzIl0sIm5hbWVzIjpbImNyZWRpdCIsIlNJSCIsIlNJRCIsIlNJVyIsIkRJWSIsIlNJTSIsIlNJWSIsImxzY2FsZSIsIngiLCJhIiwiYiIsInUiLCJ2IiwiZXNjYWxlIiwiTWF0aCIsInBvdyIsImV4cCIsImxvZyIsImhzY2FsZSIsImgiLCJyIiwidCJdLCJtYXBwaW5ncyI6Ijs7Ozs7a0JBdUN3QkEsTTtBQXZDeEI7O0FBRUE7Ozs7Ozs7Ozs7Ozs7QUFhQSxJQUFNQyxNQUFNLElBQVosQyxDQUF3QjtBQUN4QixJQUFNQyxNQUFNLEtBQVosQyxDQUF3QjtBQUN4QixJQUFNQyxNQUFNRCxNQUFJLENBQWhCLEMsQ0FBd0I7QUFDeEIsSUFBTUUsTUFBTSxNQUFaLEMsQ0FBd0I7QUFDeEIsSUFBTUMsTUFBTUgsTUFBSUUsR0FBSixHQUFRLEVBQXBCLEMsQ0FBd0I7QUFDeEIsSUFBTUUsTUFBTUosTUFBSUUsR0FBaEIsQyxDQUF3Qjs7QUFFeEI7QUFDQSxTQUFTRyxNQUFULENBQWdCQyxDQUFoQixFQUFtQkMsQ0FBbkIsRUFBc0JDLENBQXRCLEVBQXlCQyxDQUF6QixFQUE0QkMsQ0FBNUIsRUFBK0I7QUFBRSxTQUFPLENBQUNGLElBQUVDLENBQUYsR0FBTUYsSUFBRUcsQ0FBUixHQUFZLENBQUNBLElBQUVELENBQUgsSUFBTUgsQ0FBbkIsS0FBdUJFLElBQUVELENBQXpCLENBQVA7QUFBb0M7O0FBRXJFO0FBQ0EsU0FBU0ksTUFBVCxDQUFnQkwsQ0FBaEIsRUFBbUJDLENBQW5CLEVBQXNCQyxDQUF0QixFQUF5QkMsQ0FBekIsRUFBNEJDLENBQTVCLEVBQStCO0FBQzdCLFNBQU9ELElBQUVHLEtBQUtDLEdBQUwsQ0FBU0osSUFBRUMsQ0FBWCxFQUFjSCxLQUFHQyxJQUFFRCxDQUFMLENBQWQsQ0FBRixHQUF5QkssS0FBS0UsR0FBTCxDQUFTRixLQUFLRyxHQUFMLENBQVNMLElBQUVELENBQVgsS0FBZUQsSUFBRUQsQ0FBakIsSUFBb0JELENBQTdCLENBQWhDO0FBQ0Q7O0FBRUQ7QUFDQTtBQUNBLFNBQVNVLE1BQVQsQ0FBZ0JDLENBQWhCLEVBQW1CWCxDQUFuQixFQUFzQkMsQ0FBdEIsRUFBeUJDLENBQXpCLEVBQTRCQyxDQUE1QixFQUErQkMsQ0FBL0IsRUFBa0M7QUFDaEMsTUFBSU8sTUFBTSxDQUFWLEVBQWE7QUFBRSxXQUFPTixPQUFPTCxDQUFQLEVBQVVDLENBQVYsRUFBYUMsQ0FBYixFQUFnQkMsQ0FBaEIsRUFBbUJDLENBQW5CLENBQVA7QUFBOEI7QUFDN0MsTUFBSVEsSUFBSSxDQUFDTixLQUFLQyxHQUFMLENBQVNILElBQUVELENBQVgsRUFBYyxDQUFDUSxDQUFmLElBQWtCLENBQW5CLElBQXNCQSxDQUF0QixJQUF5QlYsSUFBRUMsQ0FBM0IsQ0FBUjtBQUNBLFNBQU9DLElBQUVHLEtBQUtDLEdBQUwsQ0FBUyxJQUFFSSxJQUFFQyxDQUFGLElBQUtaLElBQUlDLENBQVQsQ0FBWCxFQUF3QixDQUFDLENBQUQsR0FBR1UsQ0FBM0IsQ0FBVDtBQUNEOztBQUVEO0FBQ2UsU0FBU25CLE1BQVQsQ0FBZ0JxQixDQUFoQixFQUFtQjtBQUNoQyxNQUFJRixJQUFJLENBQVI7QUFDQSxNQUFJRSxLQUFLLENBQVQsRUFBWTtBQUFFLFdBQU8sQ0FBUDtBQUFVLEdBQXhCLENBQXlCO0FBQXpCLE9BQ0ssSUFBSUEsSUFBSXBCLEdBQVIsRUFBYTtBQUFFLGFBQU9pQixPQUFPQyxDQUFQLEVBQVVFLENBQVYsRUFBYSxDQUFiLEVBQWtCcEIsR0FBbEIsRUFBMEIsQ0FBMUIsRUFBZ0MsSUFBaEMsQ0FBUDtBQUE4QyxLQUE3RCxNQUNBLElBQUlvQixJQUFJbkIsR0FBUixFQUFhO0FBQUUsYUFBT2dCLE9BQU9DLENBQVAsRUFBVUUsQ0FBVixFQUFhcEIsR0FBYixFQUFrQkMsR0FBbEIsRUFBMEIsSUFBMUIsRUFBZ0MsR0FBaEMsQ0FBUDtBQUE4QyxLQUE3RCxNQUNBLElBQUltQixJQUFJbEIsR0FBUixFQUFhO0FBQUUsYUFBT2UsT0FBT0MsQ0FBUCxFQUFVRSxDQUFWLEVBQWFuQixHQUFiLEVBQWtCQyxHQUFsQixFQUEwQixHQUExQixFQUFnQyxFQUFoQyxDQUFQO0FBQThDLEtBQTdELE1BQ0EsSUFBSWtCLElBQUloQixHQUFSLEVBQWE7QUFBRSxhQUFPYSxPQUFPQyxDQUFQLEVBQVVFLENBQVYsRUFBYWxCLEdBQWIsRUFBa0JFLEdBQWxCLEVBQTBCLEVBQTFCLEVBQWdDLEVBQWhDLENBQVA7QUFBOEMsS0FBN0QsTUFDQSxJQUFJZ0IsSUFBSWYsR0FBUixFQUFhO0FBQUUsYUFBT1ksT0FBT0MsQ0FBUCxFQUFVRSxDQUFWLEVBQWFoQixHQUFiLEVBQWtCQyxHQUFsQixFQUEwQixFQUExQixFQUFnQyxFQUFoQyxDQUFQO0FBQThDLEtBQTdELE1BQ2E7QUFBRSxhQUFPWSxPQUFPQyxDQUFQLEVBQVVFLENBQVYsRUFBYWYsR0FBYixFQUFrQixLQUFHQSxHQUFyQixFQUEwQixFQUExQixFQUFnQyxHQUFoQyxDQUFQO0FBQThDO0FBQ25FOztBQUVEOzs7Ozs7QUFNQSIsImZpbGUiOiJsYXRlcGVuYWx0eS5qcyIsInNvdXJjZVJvb3QiOiIvYXBwL2xpYiIsInNvdXJjZXNDb250ZW50IjpbIi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSA4MGNoYXJzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+XG5cbi8qIFRoZSBtYWluIGZ1bmN0aW9uIGhlcmUgaXMgY3JlZGl0KHQpIHdoaWNoIGNvbXB1dGVzIHRoZSBmcmFjdGlvbiBvZiBmdWxsIFxuY3JlZGl0IHlvdSBnZXQgZm9yIGJlaW5nIHQgc2Vjb25kcyBsYXRlLiBJdCdzIHJvdWdobHkgYSBjb250aW51b3VzIHZlcnNpb24gb2ZcbnRoZSBmb2xsb3dpbmc6XG4gIGNyZWRpdCh0KSA9IDEgICAgaWYgdDw2MHMgICMgc2Vjb25kcyBsYXRlIChubyBvciBhbG1vc3Qgbm8gcGVuYWx0eSlcbiAgY3JlZGl0KHQpID0gLjk5OSBpZiB0PDFoICAgIyBtaW51dGVzIGxhdGUgKGJhYWFhc2ljYWxseSBjb3VudHMpXG4gIGNyZWRpdCh0KSA9IC45OSAgaWYgdDwxZCAgICMgaG91cnMgbGF0ZSAgIChubyBiaWcgZGVhbCwgYWxtb3N0IGZ1bGx5IGNvdW50cylcbiAgY3JlZGl0KHQpID0gLjkgICBpZiB0PDF3ICAgIyBkYXlzIGxhdGUgICAgKG1haW4gdGhpbmcgaXMgaXQncyBkb25lKVxuICBjcmVkaXQodCkgPSAuNSAgIGlmIHQ8MW1vICAjIHdlZWtzIGxhdGUgICAoaGFsZiBjb3VudHMgaWYgdGhpcyBsYXRlKVxuICBjcmVkaXQodCkgPSAuMSAgIGlmIHQ8MXkgICAjIG1vbnRocyBsYXRlICAobW9zdGx5IGRvZXNuJ3QgY291bnQpXG4gIGNyZWRpdCh0KSA9IC4wMSAgaWYgdDwxMHkgICMgeWVhcnMgbGF0ZSAgIChiZXR0ZXIgbGF0ZSB0aGFuIG5ldmVyLCBiYXJlbHkpXG4gIGNyZWRpdCh0KSA9IDAgICAgb3RoZXJ3aXNlICMgZGVjYWRlcyBsYXRlICh6ZXJvIG9yIGVzc2VudGlhbGx5IHplcm8gY3JlZGl0KVxuKi9cblxuY29uc3QgU0lIID0gMzYwMCAgICAgICAgLy8gc2Vjb25kcyBpbiBob3VyXG5jb25zdCBTSUQgPSA4NjQwMCAgICAgICAvLyBzZWNvbmRzIGluIGRheVxuY29uc3QgU0lXID0gU0lEKjcgICAgICAgLy8gc2Vjb25kcyBpbiB3ZWVrXG5jb25zdCBESVkgPSAzNjUuMjUgICAgICAvLyBkYXlzIGluIHllYXJcbmNvbnN0IFNJTSA9IFNJRCpESVkvMTIgIC8vIHNlY29uZHMgaW4gbW9udGhcbmNvbnN0IFNJWSA9IFNJRCpESVkgICAgIC8vIHNlY29uZHMgaW4geWVhclxuXG4vLyBMaW5lYXJseSBpbnRlcnBvbGF0ZSB0byByZXR1cm4gdSB3aGVuIHg9YSBhbmQgdiB3aGVuIHg9YiAoTk9UIENVUlJFTlRMWSBVU0VEKVxuZnVuY3Rpb24gbHNjYWxlKHgsIGEsIGIsIHUsIHYpIHsgcmV0dXJuIChiKnUgLSBhKnYgKyAodi11KSp4KS8oYi1hKSB9XG5cbi8vIEV4cG9uZW50aWFsbHkgaW50ZXJwb2xhdGUgdG8gcmV0dXJuIHUgd2hlbiB4PWEgYW5kIHYgd2hlbiB4PWJcbmZ1bmN0aW9uIGVzY2FsZSh4LCBhLCBiLCB1LCB2KSB7XG4gIHJldHVybiB1Kk1hdGgucG93KHUvdiwgYS8oYi1hKSkqTWF0aC5leHAoTWF0aC5sb2codi91KS8oYi1hKSp4KVxufVxuXG4vLyBEbyBhbiBoLWludGVycG9sYXRpb24gdG8gcmV0dXJuIHUgd2hlbiB4PWEgYW5kIHYgd2hlbiB4PWIuIFxuLy8gU3BlY2lhbCBjYXNlczogaD0tMSBpcyBsaW5lYXIsIGg9MCBpcyBleHBvbmVudGlhbCwgaD0xIGlzIGh5cGVyYm9saWMuXG5mdW5jdGlvbiBoc2NhbGUoaCwgeCwgYSwgYiwgdSwgdikge1xuICBpZiAoaCA9PT0gMCkgeyByZXR1cm4gZXNjYWxlKHgsIGEsIGIsIHUsIHYpIH1cbiAgbGV0IHIgPSAoTWF0aC5wb3codi91LCAtaCktMSkvaC8oYS1iKVxuICByZXR1cm4gdSpNYXRoLnBvdygxLWgqciooeCAtIGEpLCAtMS9oKVxufVxuXG4vLyBDb21wdXRlIHRoZSBjcmVkaXQgeW91IGdldCBmb3IgYmVpbmcgdCBzZWNvbmRzIGxhdGVcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNyZWRpdCh0KSB7XG4gIGxldCBoID0gOFxuICBpZiAodCA8PSAwKSB7IHJldHVybiAxIH0gLy8gbWF5YmUgPD01OXMgbGF0ZSBzaG91bGQgc3RpbGwgYmUgMSAobm8gcGVuYWx0eSk/XG4gIGVsc2UgaWYgKHQgPCBTSUgpIHsgcmV0dXJuIGhzY2FsZShoLCB0LCAwLCAgIFNJSCwgICAgMSwgICAgLjk5OSkgfVxuICBlbHNlIGlmICh0IDwgU0lEKSB7IHJldHVybiBoc2NhbGUoaCwgdCwgU0lILCBTSUQsICAgIC45OTksIC45OSkgIH1cbiAgZWxzZSBpZiAodCA8IFNJVykgeyByZXR1cm4gaHNjYWxlKGgsIHQsIFNJRCwgU0lXLCAgICAuOTksICAuOSkgICB9XG4gIGVsc2UgaWYgKHQgPCBTSU0pIHsgcmV0dXJuIGhzY2FsZShoLCB0LCBTSVcsIFNJTSwgICAgLjksICAgLjUpICAgfVxuICBlbHNlIGlmICh0IDwgU0lZKSB7IHJldHVybiBoc2NhbGUoaCwgdCwgU0lNLCBTSVksICAgIC41LCAgIC4xKSAgIH1cbiAgZWxzZSAgICAgICAgICAgICAgeyByZXR1cm4gaHNjYWxlKGgsIHQsIFNJWSwgMTAqU0lZLCAuMSwgICAuMDEpICB9XG59XG5cbi8qIFxuQW4gYWx0ZXJuYXRpdmUgc2ltcGxlIGxhdGUgcGVuYWx0eSBmdW5jdGlvbiBJJ3ZlIHVzZWQgYmVmb3JlIGluIGFub3RoZXIgY29udGV4dCBcbmlzIDEtKHQvKDg2NDAwKjcpKV40IHdoaWNoIGdpdmVzIHlvdSBhIGNvdXBsZSBkYXlzIG9mIHZlcnkgbGl0dGxlIHBlbmFsdHkgYW5kXG50aGVuIHlvdXIgY3JlZGl0IHBsdW1tZXRzIHRpbGwgeW91IGdldCAwIGNyZWRpdCBmb3IgYmVpbmcgbW9yZSB0aGFuIGEgd2VlayBsYXRlLlxuKi9cblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIDgwY2hhcnMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT5cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "latepenalty.js"
      ],
      "names": [
        "credit",
        "SIH",
        "SID",
        "SIW",
        "DIY",
        "SIM",
        "SIY",
        "lscale",
        "x",
        "a",
        "b",
        "u",
        "v",
        "escale",
        "Math",
        "pow",
        "exp",
        "log",
        "hscale",
        "h",
        "r",
        "t"
      ],
      "mappings": "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",
      "file": "latepenalty.js",
      "sourceRoot": "/app/lib",
      "sourcesContent": [
        "// --------------------------------- 80chars ---------------------------------->\n\n/* The main function here is credit(t) which computes the fraction of full \ncredit you get for being t seconds late. It's roughly a continuous version of\nthe following:\n  credit(t) = 1    if t<60s  # seconds late (no or almost no penalty)\n  credit(t) = .999 if t<1h   # minutes late (baaaasically counts)\n  credit(t) = .99  if t<1d   # hours late   (no big deal, almost fully counts)\n  credit(t) = .9   if t<1w   # days late    (main thing is it's done)\n  credit(t) = .5   if t<1mo  # weeks late   (half counts if this late)\n  credit(t) = .1   if t<1y   # months late  (mostly doesn't count)\n  credit(t) = .01  if t<10y  # years late   (better late than never, barely)\n  credit(t) = 0    otherwise # decades late (zero or essentially zero credit)\n*/\n\nconst SIH = 3600        // seconds in hour\nconst SID = 86400       // seconds in day\nconst SIW = SID*7       // seconds in week\nconst DIY = 365.25      // days in year\nconst SIM = SID*DIY/12  // seconds in month\nconst SIY = SID*DIY     // seconds in year\n\n// Linearly interpolate to return u when x=a and v when x=b (NOT CURRENTLY USED)\nfunction lscale(x, a, b, u, v) { return (b*u - a*v + (v-u)*x)/(b-a) }\n\n// Exponentially interpolate to return u when x=a and v when x=b\nfunction escale(x, a, b, u, v) {\n  return u*Math.pow(u/v, a/(b-a))*Math.exp(Math.log(v/u)/(b-a)*x)\n}\n\n// Do an h-interpolation to return u when x=a and v when x=b. \n// Special cases: h=-1 is linear, h=0 is exponential, h=1 is hyperbolic.\nfunction hscale(h, x, a, b, u, v) {\n  if (h === 0) { return escale(x, a, b, u, v) }\n  let r = (Math.pow(v/u, -h)-1)/h/(a-b)\n  return u*Math.pow(1-h*r*(x - a), -1/h)\n}\n\n// Compute the credit you get for being t seconds late\nexport default function credit(t) {\n  let h = 8\n  if (t <= 0) { return 1 } // maybe <=59s late should still be 1 (no penalty)?\n  else if (t < SIH) { return hscale(h, t, 0,   SIH,    1,    .999) }\n  else if (t < SID) { return hscale(h, t, SIH, SID,    .999, .99)  }\n  else if (t < SIW) { return hscale(h, t, SID, SIW,    .99,  .9)   }\n  else if (t < SIM) { return hscale(h, t, SIW, SIM,    .9,   .5)   }\n  else if (t < SIY) { return hscale(h, t, SIM, SIY,    .5,   .1)   }\n  else              { return hscale(h, t, SIY, 10*SIY, .1,   .01)  }\n}\n\n/* \nAn alternative simple late penalty function I've used before in another context \nis 1-(t/(86400*7))^4 which gives you a couple days of very little penalty and\nthen your credit plummets till you get 0 credit for being more than a week late.\n*/\n\n// --------------------------------- 80chars ---------------------------------->\n"
      ]
    },
    "mtime": 1506659413095
  },
  "{\"filename\":\"/app/lib/parse.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/lib\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "parsePromise",
            "urtx"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "parsePromise",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "urtx",
              "exported": "default"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/lib/parse.js",
      "filenameRelative": "/app/lib/parse.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "parse.js",
      "sourceFileName": "parse.js",
      "sourceRoot": "/app/lib",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/lib",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "parse"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = parsePromise;\n// Take urtext and return a promise data structure\nfunction parsePromise(urtx) {\n  var m = urtx.match(/^([^\\.]+)\\.(promises|commits)\\.to\\/(.*)$/);\n  // TODO: handle the case that no user is given, just \"promises.to/foo\"\n  var user = m ? m[1] : '';\n  var domain = m ? m[2] : '';\n  var path = m ? m[3] : '';\n  var what = '';\n  var tdue = Date.now() + 7 * 24 * 60 * 60 * 1000;\n  if (path.length > 0) {\n    var parsedPath = path.match(/^(.*?)(\\/by\\/|$)(.*)$/);\n    what = parsedPath[1]; //.replace(/_/g, ' ')\n    //tdue = parsedPath.length > 1 ? \n    //       chrono.parseDate(parsedPath[3].replace(/_/g, ' ')) * 1 : \n    //       Date.now() + 7*24*60*60*1000\n    //tdue = tdue ? ( ( tdue < Date.now() && Date.now() - tdue < 24*60*60*1000 ) ?\n    //                tdue + 24*60*60*1000 : tdue )\n    //            : Date.now() + 7*24*60*60*1000\n    tdue = parsedPath[3];\n  }\n  // TODO: path is now everything after \".promises.to\" so now parse out the \n  //       \"what\" (thing being promised) and the \"tdue\" (deadline)\n  console.log('parseProm', { user: user, path: path, domain: domain, what: what, tdue: tdue, urtx: urtx });\n  return { user: user, path: path, domain: domain, what: what, tdue: tdue, urtx: urtx, tini: Date.now() };\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhcnNlLmpzIl0sIm5hbWVzIjpbInBhcnNlUHJvbWlzZSIsInVydHgiLCJtIiwibWF0Y2giLCJ1c2VyIiwiZG9tYWluIiwicGF0aCIsIndoYXQiLCJ0ZHVlIiwiRGF0ZSIsIm5vdyIsImxlbmd0aCIsInBhcnNlZFBhdGgiLCJjb25zb2xlIiwibG9nIiwidGluaSJdLCJtYXBwaW5ncyI6Ijs7Ozs7a0JBQ3dCQSxZO0FBRHhCO0FBQ2UsU0FBU0EsWUFBVCxDQUFzQkMsSUFBdEIsRUFBNEI7QUFDekMsTUFBSUMsSUFBSUQsS0FBS0UsS0FBTCxDQUFXLDBDQUFYLENBQVI7QUFDQTtBQUNBLE1BQUlDLE9BQU9GLElBQUlBLEVBQUUsQ0FBRixDQUFKLEdBQVcsRUFBdEI7QUFDQSxNQUFJRyxTQUFTSCxJQUFJQSxFQUFFLENBQUYsQ0FBSixHQUFXLEVBQXhCO0FBQ0EsTUFBSUksT0FBT0osSUFBSUEsRUFBRSxDQUFGLENBQUosR0FBVyxFQUF0QjtBQUNBLE1BQUlLLE9BQU8sRUFBWDtBQUNBLE1BQUlDLE9BQU9DLEtBQUtDLEdBQUwsS0FBYSxJQUFFLEVBQUYsR0FBSyxFQUFMLEdBQVEsRUFBUixHQUFXLElBQW5DO0FBQ0EsTUFBSUosS0FBS0ssTUFBTCxHQUFjLENBQWxCLEVBQXFCO0FBQ25CLFFBQUlDLGFBQWFOLEtBQUtILEtBQUwsQ0FBVyx1QkFBWCxDQUFqQjtBQUNBSSxXQUFPSyxXQUFXLENBQVgsQ0FBUCxDQUZtQixDQUVFO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBSixXQUFPSSxXQUFXLENBQVgsQ0FBUDtBQUNEO0FBQ0Q7QUFDQTtBQUNBQyxVQUFRQyxHQUFSLENBQVksV0FBWixFQUF5QixFQUFFVixVQUFGLEVBQVFFLFVBQVIsRUFBY0QsY0FBZCxFQUFzQkUsVUFBdEIsRUFBNEJDLFVBQTVCLEVBQWtDUCxVQUFsQyxFQUF6QjtBQUNBLFNBQU8sRUFBRUcsVUFBRixFQUFRRSxVQUFSLEVBQWNELGNBQWQsRUFBc0JFLFVBQXRCLEVBQTRCQyxVQUE1QixFQUFrQ1AsVUFBbEMsRUFBd0NjLE1BQU1OLEtBQUtDLEdBQUwsRUFBOUMsRUFBUDtBQUNEIiwiZmlsZSI6InBhcnNlLmpzIiwic291cmNlUm9vdCI6Ii9hcHAvbGliIiwic291cmNlc0NvbnRlbnQiOlsiLy8gVGFrZSB1cnRleHQgYW5kIHJldHVybiBhIHByb21pc2UgZGF0YSBzdHJ1Y3R1cmVcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHBhcnNlUHJvbWlzZSh1cnR4KSB7XG4gIGxldCBtID0gdXJ0eC5tYXRjaCgvXihbXlxcLl0rKVxcLihwcm9taXNlc3xjb21taXRzKVxcLnRvXFwvKC4qKSQvKVxuICAvLyBUT0RPOiBoYW5kbGUgdGhlIGNhc2UgdGhhdCBubyB1c2VyIGlzIGdpdmVuLCBqdXN0IFwicHJvbWlzZXMudG8vZm9vXCJcbiAgbGV0IHVzZXIgPSBtID8gbVsxXSA6ICcnXG4gIGxldCBkb21haW4gPSBtID8gbVsyXSA6ICcnXG4gIGxldCBwYXRoID0gbSA/IG1bM10gOiAnJ1xuICBsZXQgd2hhdCA9ICcnXG4gIGxldCB0ZHVlID0gRGF0ZS5ub3coKSArIDcqMjQqNjAqNjAqMTAwMFxuICBpZiAocGF0aC5sZW5ndGggPiAwKSB7XG4gICAgbGV0IHBhcnNlZFBhdGggPSBwYXRoLm1hdGNoKC9eKC4qPykoXFwvYnlcXC98JCkoLiopJC8pXG4gICAgd2hhdCA9IHBhcnNlZFBhdGhbMV0gLy8ucmVwbGFjZSgvXy9nLCAnICcpXG4gICAgLy90ZHVlID0gcGFyc2VkUGF0aC5sZW5ndGggPiAxID8gXG4gICAgLy8gICAgICAgY2hyb25vLnBhcnNlRGF0ZShwYXJzZWRQYXRoWzNdLnJlcGxhY2UoL18vZywgJyAnKSkgKiAxIDogXG4gICAgLy8gICAgICAgRGF0ZS5ub3coKSArIDcqMjQqNjAqNjAqMTAwMFxuICAgIC8vdGR1ZSA9IHRkdWUgPyAoICggdGR1ZSA8IERhdGUubm93KCkgJiYgRGF0ZS5ub3coKSAtIHRkdWUgPCAyNCo2MCo2MCoxMDAwICkgP1xuICAgIC8vICAgICAgICAgICAgICAgIHRkdWUgKyAyNCo2MCo2MCoxMDAwIDogdGR1ZSApXG4gICAgLy8gICAgICAgICAgICA6IERhdGUubm93KCkgKyA3KjI0KjYwKjYwKjEwMDBcbiAgICB0ZHVlID0gcGFyc2VkUGF0aFszXVxuICB9XG4gIC8vIFRPRE86IHBhdGggaXMgbm93IGV2ZXJ5dGhpbmcgYWZ0ZXIgXCIucHJvbWlzZXMudG9cIiBzbyBub3cgcGFyc2Ugb3V0IHRoZSBcbiAgLy8gICAgICAgXCJ3aGF0XCIgKHRoaW5nIGJlaW5nIHByb21pc2VkKSBhbmQgdGhlIFwidGR1ZVwiIChkZWFkbGluZSlcbiAgY29uc29sZS5sb2coJ3BhcnNlUHJvbScsIHsgdXNlciwgcGF0aCwgZG9tYWluLCB3aGF0LCB0ZHVlLCB1cnR4IH0pXG4gIHJldHVybiB7IHVzZXIsIHBhdGgsIGRvbWFpbiwgd2hhdCwgdGR1ZSwgdXJ0eCwgdGluaTogRGF0ZS5ub3coKSB9XG59Il19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "parse.js"
      ],
      "names": [
        "parsePromise",
        "urtx",
        "m",
        "match",
        "user",
        "domain",
        "path",
        "what",
        "tdue",
        "Date",
        "now",
        "length",
        "parsedPath",
        "console",
        "log",
        "tini"
      ],
      "mappings": ";;;;;kBACwBA,Y;AADxB;AACe,SAASA,YAAT,CAAsBC,IAAtB,EAA4B;AACzC,MAAIC,IAAID,KAAKE,KAAL,CAAW,0CAAX,CAAR;AACA;AACA,MAAIC,OAAOF,IAAIA,EAAE,CAAF,CAAJ,GAAW,EAAtB;AACA,MAAIG,SAASH,IAAIA,EAAE,CAAF,CAAJ,GAAW,EAAxB;AACA,MAAII,OAAOJ,IAAIA,EAAE,CAAF,CAAJ,GAAW,EAAtB;AACA,MAAIK,OAAO,EAAX;AACA,MAAIC,OAAOC,KAAKC,GAAL,KAAa,IAAE,EAAF,GAAK,EAAL,GAAQ,EAAR,GAAW,IAAnC;AACA,MAAIJ,KAAKK,MAAL,GAAc,CAAlB,EAAqB;AACnB,QAAIC,aAAaN,KAAKH,KAAL,CAAW,uBAAX,CAAjB;AACAI,WAAOK,WAAW,CAAX,CAAP,CAFmB,CAEE;AACrB;AACA;AACA;AACA;AACA;AACA;AACAJ,WAAOI,WAAW,CAAX,CAAP;AACD;AACD;AACA;AACAC,UAAQC,GAAR,CAAY,WAAZ,EAAyB,EAAEV,UAAF,EAAQE,UAAR,EAAcD,cAAd,EAAsBE,UAAtB,EAA4BC,UAA5B,EAAkCP,UAAlC,EAAzB;AACA,SAAO,EAAEG,UAAF,EAAQE,UAAR,EAAcD,cAAd,EAAsBE,UAAtB,EAA4BC,UAA5B,EAAkCP,UAAlC,EAAwCc,MAAMN,KAAKC,GAAL,EAA9C,EAAP;AACD",
      "file": "parse.js",
      "sourceRoot": "/app/lib",
      "sourcesContent": [
        "// Take urtext and return a promise data structure\nexport default function parsePromise(urtx) {\n  let m = urtx.match(/^([^\\.]+)\\.(promises|commits)\\.to\\/(.*)$/)\n  // TODO: handle the case that no user is given, just \"promises.to/foo\"\n  let user = m ? m[1] : ''\n  let domain = m ? m[2] : ''\n  let path = m ? m[3] : ''\n  let what = ''\n  let tdue = Date.now() + 7*24*60*60*1000\n  if (path.length > 0) {\n    let parsedPath = path.match(/^(.*?)(\\/by\\/|$)(.*)$/)\n    what = parsedPath[1] //.replace(/_/g, ' ')\n    //tdue = parsedPath.length > 1 ? \n    //       chrono.parseDate(parsedPath[3].replace(/_/g, ' ')) * 1 : \n    //       Date.now() + 7*24*60*60*1000\n    //tdue = tdue ? ( ( tdue < Date.now() && Date.now() - tdue < 24*60*60*1000 ) ?\n    //                tdue + 24*60*60*1000 : tdue )\n    //            : Date.now() + 7*24*60*60*1000\n    tdue = parsedPath[3]\n  }\n  // TODO: path is now everything after \".promises.to\" so now parse out the \n  //       \"what\" (thing being promised) and the \"tdue\" (deadline)\n  console.log('parseProm', { user, path, domain, what, tdue, urtx })\n  return { user, path, domain, what, tdue, urtx, tini: Date.now() }\n}"
      ]
    },
    "mtime": 1506661378695
  },
  "{\"filename\":\"/app/lib/mail.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/lib\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "mailgun-js",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Mailgun"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "mailself",
            "subj",
            "body"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "mailself",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "subj",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "body",
              "exported": "default"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/lib/mail.js",
      "filenameRelative": "/app/lib/mail.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "mail.js",
      "sourceFileName": "mail.js",
      "sourceRoot": "/app/lib",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/lib",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "mail"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = mailself;\n\nvar _mailgunJs = require('mailgun-js');\n\nvar _mailgunJs2 = _interopRequireDefault(_mailgunJs);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction mailself(subj, body) {\n  var mailgun = new _mailgunJs2.default({ apiKey: process.env.MAILGUN_KEY,\n    domain: process.env.MAILGUN_DOMAIN });\n  var data = {\n    from: process.env.MAILGUN_FROM,\n    to: process.env.MY_EMAIL,\n    subject: subj,\n    text: body\n  };\n  mailgun.messages().send(data, function (err, body) {});\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haWwuanMiXSwibmFtZXMiOlsibWFpbHNlbGYiLCJzdWJqIiwiYm9keSIsIm1haWxndW4iLCJhcGlLZXkiLCJwcm9jZXNzIiwiZW52IiwiTUFJTEdVTl9LRVkiLCJkb21haW4iLCJNQUlMR1VOX0RPTUFJTiIsImRhdGEiLCJmcm9tIiwiTUFJTEdVTl9GUk9NIiwidG8iLCJNWV9FTUFJTCIsInN1YmplY3QiLCJ0ZXh0IiwibWVzc2FnZXMiLCJzZW5kIiwiZXJyIl0sIm1hcHBpbmdzIjoiOzs7OztrQkFFd0JBLFE7O0FBRnhCOzs7Ozs7QUFFZSxTQUFTQSxRQUFULENBQWtCQyxJQUFsQixFQUF3QkMsSUFBeEIsRUFBOEI7QUFDM0MsTUFBSUMsVUFBVSx3QkFBWSxFQUFDQyxRQUFRQyxRQUFRQyxHQUFSLENBQVlDLFdBQXJCO0FBQ0NDLFlBQVFILFFBQVFDLEdBQVIsQ0FBWUcsY0FEckIsRUFBWixDQUFkO0FBRUEsTUFBSUMsT0FBTztBQUNUQyxVQUFTTixRQUFRQyxHQUFSLENBQVlNLFlBRFo7QUFFVEMsUUFBU1IsUUFBUUMsR0FBUixDQUFZUSxRQUZaO0FBR1RDLGFBQVNkLElBSEE7QUFJVGUsVUFBU2Q7QUFKQSxHQUFYO0FBTUFDLFVBQVFjLFFBQVIsR0FBbUJDLElBQW5CLENBQXdCUixJQUF4QixFQUE4QixVQUFDUyxHQUFELEVBQU1qQixJQUFOLEVBQWUsQ0FBRSxDQUEvQztBQUNEIiwiZmlsZSI6Im1haWwuanMiLCJzb3VyY2VSb290IjoiL2FwcC9saWIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTWFpbGd1biBmcm9tICdtYWlsZ3VuLWpzJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbWFpbHNlbGYoc3ViaiwgYm9keSkge1xuICB2YXIgbWFpbGd1biA9IG5ldyBNYWlsZ3VuKHthcGlLZXk6IHByb2Nlc3MuZW52Lk1BSUxHVU5fS0VZLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9tYWluOiBwcm9jZXNzLmVudi5NQUlMR1VOX0RPTUFJTn0pXG4gIHZhciBkYXRhID0ge1xuICAgIGZyb206ICAgIHByb2Nlc3MuZW52Lk1BSUxHVU5fRlJPTSxcbiAgICB0bzogICAgICBwcm9jZXNzLmVudi5NWV9FTUFJTCxcbiAgICBzdWJqZWN0OiBzdWJqLFxuICAgIHRleHQ6ICAgIGJvZHksXG4gIH1cbiAgbWFpbGd1bi5tZXNzYWdlcygpLnNlbmQoZGF0YSwgKGVyciwgYm9keSkgPT4ge30pXG59Il19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "mail.js"
      ],
      "names": [
        "mailself",
        "subj",
        "body",
        "mailgun",
        "apiKey",
        "process",
        "env",
        "MAILGUN_KEY",
        "domain",
        "MAILGUN_DOMAIN",
        "data",
        "from",
        "MAILGUN_FROM",
        "to",
        "MY_EMAIL",
        "subject",
        "text",
        "messages",
        "send",
        "err"
      ],
      "mappings": ";;;;;kBAEwBA,Q;;AAFxB;;;;;;AAEe,SAASA,QAAT,CAAkBC,IAAlB,EAAwBC,IAAxB,EAA8B;AAC3C,MAAIC,UAAU,wBAAY,EAACC,QAAQC,QAAQC,GAAR,CAAYC,WAArB;AACCC,YAAQH,QAAQC,GAAR,CAAYG,cADrB,EAAZ,CAAd;AAEA,MAAIC,OAAO;AACTC,UAASN,QAAQC,GAAR,CAAYM,YADZ;AAETC,QAASR,QAAQC,GAAR,CAAYQ,QAFZ;AAGTC,aAASd,IAHA;AAITe,UAASd;AAJA,GAAX;AAMAC,UAAQc,QAAR,GAAmBC,IAAnB,CAAwBR,IAAxB,EAA8B,UAACS,GAAD,EAAMjB,IAAN,EAAe,CAAE,CAA/C;AACD",
      "file": "mail.js",
      "sourceRoot": "/app/lib",
      "sourcesContent": [
        "import Mailgun from 'mailgun-js';\n\nexport default function mailself(subj, body) {\n  var mailgun = new Mailgun({apiKey: process.env.MAILGUN_KEY, \n                             domain: process.env.MAILGUN_DOMAIN})\n  var data = {\n    from:    process.env.MAILGUN_FROM,\n    to:      process.env.MY_EMAIL,\n    subject: subj,\n    text:    body,\n  }\n  mailgun.messages().send(data, (err, body) => {})\n}"
      ]
    },
    "mtime": 1506661786328
  },
  "{\"filename\":\"/app/models/promise.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/models\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "sequelize",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Sequelize"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "Promise",
            "sequelize"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "Promise",
              "exported": "Promise"
            },
            {
              "kind": "local",
              "local": "sequelize",
              "exported": "sequelize"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/models/promise.js",
      "filenameRelative": "/app/models/promise.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "promise.js",
      "sourceFileName": "promise.js",
      "sourceRoot": "/app/models",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/models",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "promise"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.sequelize = exports.Promise = undefined;\n\nvar _sequelize = require('sequelize');\n\nvar _sequelize2 = _interopRequireDefault(_sequelize);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar sequelize, Promise;\n\n// set up a new database using database credentials set in .env\nexports.sequelize = sequelize = new _sequelize2.default('database', process.env.DB_USER, process.env.DB_PASS, {\n  host: '0.0.0.0',\n  dialect: 'sqlite',\n  pool: {\n    max: 5,\n    min: 0,\n    idle: 10000\n  },\n  // Security note: db is saved to `.data/database.sqlite` in local filesystem.\n  // Nothing in `.data` directory gets copied if someone remixes the project.\n  storage: '.data/database.sqlite'\n});\n\n// authenticate with the database\nsequelize.authenticate().then(function (err) {\n  console.log('Connection has been established successfully.');\n  // define a new table 'promises'\n  exports.Promise = Promise = sequelize.define('promises', {\n    urtx: { type: _sequelize2.default.STRING }, // urtext, including whole URL\n    user: { type: _sequelize2.default.STRING }, // who's making the promise\n    what: { type: _sequelize2.default.STRING }, // what's being promised\n    //whom: { type: Sequelize.STRING  }, // to whom are you promising\n    tini: { type: _sequelize2.default.INTEGER }, // unixtime that promise was made\n    tdue: { type: _sequelize2.default.STRING } // unixtime that the promise is due\n    //tmzn: { type: Sequelize.STRING  }, // timezone\n    //wtdid: { type: Sequelize.INTEGER }, // unixtime that the promise was fulfilled\n    //fill: { type: Sequelize.FLOAT   }, // fraction fulfilled\n    //void: { type: Sequelize.BOOLEAN }, // whether promise was voided\n    // text:   { type: Sequelize.STRING }, // this was just for testing\n  });\n  //setup()\n}).catch(function (err) {\n  console.log('Unable to connect to the database: ', err);\n});\n\nexports.Promise = Promise;\nexports.sequelize = sequelize;\n\n// DATABASE FIELDS:\n//   urtx -- urtext, ie, full original text the user typed to create the promise\n//   user -- who's making the promise\n//   what -- what's being promised\n//   whom -- to whom are you promising\n//   tini -- unixtime that the promise was made\n//   tdue -- unixtime that the promise is due\n//   tmzn -- timezone assumed for parsing the deadline\n//   tfin -- unixtime that the promise was fulfilled\n//   fill -- fraction fulfilled, default 0\n//   void -- true if the promise became unfulfillable or moot\n//   clix -- number of clicks a promise has gotten\n// For example:\n//   urtx = \"bob.promises.to/foo_the_bar/by/noon_tomorrow\"\n//   user = \"bob\"\n//   what = \"foo the bar\"\n//   whom = null\n//   tini = [unixtime of first GET request of the promise's URL]\n//   tdue = [what \"noon tomorrow\" parsed to at time tini]\n//   tmzn = \"America/Los_Angeles\"\n//   tfin = [unixtime that the promise was fulfilled]\n//   fill = 0\n//   void = false\n\n// Other ideas for fields: \n// * information about the client that originally created the promise\n// * whether the promise was created by the actual user (if they were logged in \n//   and were the first to click on it) or by another logged-in user or by \n//   someone not logged in\n// * conf: maybe we create the promise whether or not anyone clicks the button to confirm\n//   it, in which case we store when it's actually been confirmed.\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb21pc2UuanMiXSwibmFtZXMiOlsic2VxdWVsaXplIiwiUHJvbWlzZSIsInByb2Nlc3MiLCJlbnYiLCJEQl9VU0VSIiwiREJfUEFTUyIsImhvc3QiLCJkaWFsZWN0IiwicG9vbCIsIm1heCIsIm1pbiIsImlkbGUiLCJzdG9yYWdlIiwiYXV0aGVudGljYXRlIiwidGhlbiIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJkZWZpbmUiLCJ1cnR4IiwidHlwZSIsIlNUUklORyIsInVzZXIiLCJ3aGF0IiwidGluaSIsIklOVEVHRVIiLCJ0ZHVlIiwiY2F0Y2giXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7Ozs7O0FBRUEsSUFBSUEsU0FBSixFQUFlQyxPQUFmOztBQUVBO0FBQ0EsUUFzQ2tCRCxTQXRDbEIsZUFBWSx3QkFBYyxVQUFkLEVBQTBCRSxRQUFRQyxHQUFSLENBQVlDLE9BQXRDLEVBQzhCRixRQUFRQyxHQUFSLENBQVlFLE9BRDFDLEVBQ21EO0FBQzdEQyxRQUFNLFNBRHVEO0FBRTdEQyxXQUFTLFFBRm9EO0FBRzdEQyxRQUFNO0FBQ0pDLFNBQUssQ0FERDtBQUVKQyxTQUFLLENBRkQ7QUFHSkMsVUFBTTtBQUhGLEdBSHVEO0FBUTdEO0FBQ0E7QUFDQUMsV0FBUztBQVZvRCxDQURuRCxDQUFaOztBQWNBO0FBQ0FaLFVBQVVhLFlBQVYsR0FDR0MsSUFESCxDQUNRLFVBQVNDLEdBQVQsRUFBYztBQUNsQkMsVUFBUUMsR0FBUixDQUFZLCtDQUFaO0FBQ0E7QUFDQSxVQW1CS2hCLE9BbkJMLGFBQVVELFVBQVVrQixNQUFWLENBQWlCLFVBQWpCLEVBQTZCO0FBQ3JDQyxVQUFNLEVBQUVDLE1BQU0sb0JBQVVDLE1BQWxCLEVBRCtCLEVBQ0Y7QUFDbkNDLFVBQU0sRUFBRUYsTUFBTSxvQkFBVUMsTUFBbEIsRUFGK0IsRUFFRjtBQUNuQ0UsVUFBTSxFQUFFSCxNQUFNLG9CQUFVQyxNQUFsQixFQUgrQixFQUdGO0FBQ25DO0FBQ0FHLFVBQU0sRUFBRUosTUFBTSxvQkFBVUssT0FBbEIsRUFMK0IsRUFLRjtBQUNuQ0MsVUFBTSxFQUFFTixNQUFNLG9CQUFVQyxNQUFsQixFQU4rQixDQU1IO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFYcUMsR0FBN0IsQ0FBVjtBQWFBO0FBQ0QsQ0FsQkgsRUFtQkdNLEtBbkJILENBbUJTLFVBQVVaLEdBQVYsRUFBZTtBQUNwQkMsVUFBUUMsR0FBUixDQUFZLHFDQUFaLEVBQW1ERixHQUFuRDtBQUNELENBckJIOztRQXVCU2QsTyxHQUFBQSxPO1FBQVNELFMsR0FBQUEsUzs7QUFFbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJwcm9taXNlLmpzIiwic291cmNlUm9vdCI6Ii9hcHAvbW9kZWxzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFNlcXVlbGl6ZSBmcm9tICdzZXF1ZWxpemUnO1xuXG52YXIgc2VxdWVsaXplLCBQcm9taXNlO1xuXG4vLyBzZXQgdXAgYSBuZXcgZGF0YWJhc2UgdXNpbmcgZGF0YWJhc2UgY3JlZGVudGlhbHMgc2V0IGluIC5lbnZcbnNlcXVlbGl6ZSA9IG5ldyBTZXF1ZWxpemUoJ2RhdGFiYXNlJywgcHJvY2Vzcy5lbnYuREJfVVNFUiwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmVudi5EQl9QQVNTLCB7XG4gIGhvc3Q6ICcwLjAuMC4wJyxcbiAgZGlhbGVjdDogJ3NxbGl0ZScsXG4gIHBvb2w6IHtcbiAgICBtYXg6IDUsXG4gICAgbWluOiAwLFxuICAgIGlkbGU6IDEwMDAwLFxuICB9LFxuICAvLyBTZWN1cml0eSBub3RlOiBkYiBpcyBzYXZlZCB0byBgLmRhdGEvZGF0YWJhc2Uuc3FsaXRlYCBpbiBsb2NhbCBmaWxlc3lzdGVtLlxuICAvLyBOb3RoaW5nIGluIGAuZGF0YWAgZGlyZWN0b3J5IGdldHMgY29waWVkIGlmIHNvbWVvbmUgcmVtaXhlcyB0aGUgcHJvamVjdC5cbiAgc3RvcmFnZTogJy5kYXRhL2RhdGFiYXNlLnNxbGl0ZSdcbn0pO1xuXG4vLyBhdXRoZW50aWNhdGUgd2l0aCB0aGUgZGF0YWJhc2VcbnNlcXVlbGl6ZS5hdXRoZW50aWNhdGUoKVxuICAudGhlbihmdW5jdGlvbihlcnIpIHtcbiAgICBjb25zb2xlLmxvZygnQ29ubmVjdGlvbiBoYXMgYmVlbiBlc3RhYmxpc2hlZCBzdWNjZXNzZnVsbHkuJylcbiAgICAvLyBkZWZpbmUgYSBuZXcgdGFibGUgJ3Byb21pc2VzJ1xuICAgIFByb21pc2UgPSBzZXF1ZWxpemUuZGVmaW5lKCdwcm9taXNlcycsIHtcbiAgICAgIHVydHg6IHsgdHlwZTogU2VxdWVsaXplLlNUUklORyAgfSwgLy8gdXJ0ZXh0LCBpbmNsdWRpbmcgd2hvbGUgVVJMXG4gICAgICB1c2VyOiB7IHR5cGU6IFNlcXVlbGl6ZS5TVFJJTkcgIH0sIC8vIHdobydzIG1ha2luZyB0aGUgcHJvbWlzZVxuICAgICAgd2hhdDogeyB0eXBlOiBTZXF1ZWxpemUuU1RSSU5HICB9LCAvLyB3aGF0J3MgYmVpbmcgcHJvbWlzZWRcbiAgICAgIC8vd2hvbTogeyB0eXBlOiBTZXF1ZWxpemUuU1RSSU5HICB9LCAvLyB0byB3aG9tIGFyZSB5b3UgcHJvbWlzaW5nXG4gICAgICB0aW5pOiB7IHR5cGU6IFNlcXVlbGl6ZS5JTlRFR0VSIH0sIC8vIHVuaXh0aW1lIHRoYXQgcHJvbWlzZSB3YXMgbWFkZVxuICAgICAgdGR1ZTogeyB0eXBlOiBTZXF1ZWxpemUuU1RSSU5HIH0sIC8vIHVuaXh0aW1lIHRoYXQgdGhlIHByb21pc2UgaXMgZHVlXG4gICAgICAvL3Rtem46IHsgdHlwZTogU2VxdWVsaXplLlNUUklORyAgfSwgLy8gdGltZXpvbmVcbiAgICAgIC8vd3RkaWQ6IHsgdHlwZTogU2VxdWVsaXplLklOVEVHRVIgfSwgLy8gdW5peHRpbWUgdGhhdCB0aGUgcHJvbWlzZSB3YXMgZnVsZmlsbGVkXG4gICAgICAvL2ZpbGw6IHsgdHlwZTogU2VxdWVsaXplLkZMT0FUICAgfSwgLy8gZnJhY3Rpb24gZnVsZmlsbGVkXG4gICAgICAvL3ZvaWQ6IHsgdHlwZTogU2VxdWVsaXplLkJPT0xFQU4gfSwgLy8gd2hldGhlciBwcm9taXNlIHdhcyB2b2lkZWRcbiAgICAgIC8vIHRleHQ6ICAgeyB0eXBlOiBTZXF1ZWxpemUuU1RSSU5HIH0sIC8vIHRoaXMgd2FzIGp1c3QgZm9yIHRlc3RpbmdcbiAgICB9KTsgICAgXG4gICAgLy9zZXR1cCgpXG4gIH0pXG4gIC5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgY29uc29sZS5sb2coJ1VuYWJsZSB0byBjb25uZWN0IHRvIHRoZSBkYXRhYmFzZTogJywgZXJyKVxuICB9KVxuXG5leHBvcnQgeyBQcm9taXNlLCBzZXF1ZWxpemUgfTtcblxuLy8gREFUQUJBU0UgRklFTERTOlxuLy8gICB1cnR4IC0tIHVydGV4dCwgaWUsIGZ1bGwgb3JpZ2luYWwgdGV4dCB0aGUgdXNlciB0eXBlZCB0byBjcmVhdGUgdGhlIHByb21pc2Vcbi8vICAgdXNlciAtLSB3aG8ncyBtYWtpbmcgdGhlIHByb21pc2Vcbi8vICAgd2hhdCAtLSB3aGF0J3MgYmVpbmcgcHJvbWlzZWRcbi8vICAgd2hvbSAtLSB0byB3aG9tIGFyZSB5b3UgcHJvbWlzaW5nXG4vLyAgIHRpbmkgLS0gdW5peHRpbWUgdGhhdCB0aGUgcHJvbWlzZSB3YXMgbWFkZVxuLy8gICB0ZHVlIC0tIHVuaXh0aW1lIHRoYXQgdGhlIHByb21pc2UgaXMgZHVlXG4vLyAgIHRtem4gLS0gdGltZXpvbmUgYXNzdW1lZCBmb3IgcGFyc2luZyB0aGUgZGVhZGxpbmVcbi8vICAgdGZpbiAtLSB1bml4dGltZSB0aGF0IHRoZSBwcm9taXNlIHdhcyBmdWxmaWxsZWRcbi8vICAgZmlsbCAtLSBmcmFjdGlvbiBmdWxmaWxsZWQsIGRlZmF1bHQgMFxuLy8gICB2b2lkIC0tIHRydWUgaWYgdGhlIHByb21pc2UgYmVjYW1lIHVuZnVsZmlsbGFibGUgb3IgbW9vdFxuLy8gICBjbGl4IC0tIG51bWJlciBvZiBjbGlja3MgYSBwcm9taXNlIGhhcyBnb3R0ZW5cbi8vIEZvciBleGFtcGxlOlxuLy8gICB1cnR4ID0gXCJib2IucHJvbWlzZXMudG8vZm9vX3RoZV9iYXIvYnkvbm9vbl90b21vcnJvd1wiXG4vLyAgIHVzZXIgPSBcImJvYlwiXG4vLyAgIHdoYXQgPSBcImZvbyB0aGUgYmFyXCJcbi8vICAgd2hvbSA9IG51bGxcbi8vICAgdGluaSA9IFt1bml4dGltZSBvZiBmaXJzdCBHRVQgcmVxdWVzdCBvZiB0aGUgcHJvbWlzZSdzIFVSTF1cbi8vICAgdGR1ZSA9IFt3aGF0IFwibm9vbiB0b21vcnJvd1wiIHBhcnNlZCB0byBhdCB0aW1lIHRpbmldXG4vLyAgIHRtem4gPSBcIkFtZXJpY2EvTG9zX0FuZ2VsZXNcIlxuLy8gICB0ZmluID0gW3VuaXh0aW1lIHRoYXQgdGhlIHByb21pc2Ugd2FzIGZ1bGZpbGxlZF1cbi8vICAgZmlsbCA9IDBcbi8vICAgdm9pZCA9IGZhbHNlXG5cbi8vIE90aGVyIGlkZWFzIGZvciBmaWVsZHM6IFxuLy8gKiBpbmZvcm1hdGlvbiBhYm91dCB0aGUgY2xpZW50IHRoYXQgb3JpZ2luYWxseSBjcmVhdGVkIHRoZSBwcm9taXNlXG4vLyAqIHdoZXRoZXIgdGhlIHByb21pc2Ugd2FzIGNyZWF0ZWQgYnkgdGhlIGFjdHVhbCB1c2VyIChpZiB0aGV5IHdlcmUgbG9nZ2VkIGluIFxuLy8gICBhbmQgd2VyZSB0aGUgZmlyc3QgdG8gY2xpY2sgb24gaXQpIG9yIGJ5IGFub3RoZXIgbG9nZ2VkLWluIHVzZXIgb3IgYnkgXG4vLyAgIHNvbWVvbmUgbm90IGxvZ2dlZCBpblxuLy8gKiBjb25mOiBtYXliZSB3ZSBjcmVhdGUgdGhlIHByb21pc2Ugd2hldGhlciBvciBub3QgYW55b25lIGNsaWNrcyB0aGUgYnV0dG9uIHRvIGNvbmZpcm1cbi8vICAgaXQsIGluIHdoaWNoIGNhc2Ugd2Ugc3RvcmUgd2hlbiBpdCdzIGFjdHVhbGx5IGJlZW4gY29uZmlybWVkLlxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "promise.js"
      ],
      "names": [
        "sequelize",
        "Promise",
        "process",
        "env",
        "DB_USER",
        "DB_PASS",
        "host",
        "dialect",
        "pool",
        "max",
        "min",
        "idle",
        "storage",
        "authenticate",
        "then",
        "err",
        "console",
        "log",
        "define",
        "urtx",
        "type",
        "STRING",
        "user",
        "what",
        "tini",
        "INTEGER",
        "tdue",
        "catch"
      ],
      "mappings": ";;;;;;;AAAA;;;;;;AAEA,IAAIA,SAAJ,EAAeC,OAAf;;AAEA;AACA,QAsCkBD,SAtClB,eAAY,wBAAc,UAAd,EAA0BE,QAAQC,GAAR,CAAYC,OAAtC,EAC8BF,QAAQC,GAAR,CAAYE,OAD1C,EACmD;AAC7DC,QAAM,SADuD;AAE7DC,WAAS,QAFoD;AAG7DC,QAAM;AACJC,SAAK,CADD;AAEJC,SAAK,CAFD;AAGJC,UAAM;AAHF,GAHuD;AAQ7D;AACA;AACAC,WAAS;AAVoD,CADnD,CAAZ;;AAcA;AACAZ,UAAUa,YAAV,GACGC,IADH,CACQ,UAASC,GAAT,EAAc;AAClBC,UAAQC,GAAR,CAAY,+CAAZ;AACA;AACA,UAmBKhB,OAnBL,aAAUD,UAAUkB,MAAV,CAAiB,UAAjB,EAA6B;AACrCC,UAAM,EAAEC,MAAM,oBAAUC,MAAlB,EAD+B,EACF;AACnCC,UAAM,EAAEF,MAAM,oBAAUC,MAAlB,EAF+B,EAEF;AACnCE,UAAM,EAAEH,MAAM,oBAAUC,MAAlB,EAH+B,EAGF;AACnC;AACAG,UAAM,EAAEJ,MAAM,oBAAUK,OAAlB,EAL+B,EAKF;AACnCC,UAAM,EAAEN,MAAM,oBAAUC,MAAlB,EAN+B,CAMH;AAClC;AACA;AACA;AACA;AACA;AAXqC,GAA7B,CAAV;AAaA;AACD,CAlBH,EAmBGM,KAnBH,CAmBS,UAAUZ,GAAV,EAAe;AACpBC,UAAQC,GAAR,CAAY,qCAAZ,EAAmDF,GAAnD;AACD,CArBH;;QAuBSd,O,GAAAA,O;QAASD,S,GAAAA,S;;AAElB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA",
      "file": "promise.js",
      "sourceRoot": "/app/models",
      "sourcesContent": [
        "import Sequelize from 'sequelize';\n\nvar sequelize, Promise;\n\n// set up a new database using database credentials set in .env\nsequelize = new Sequelize('database', process.env.DB_USER, \n                                          process.env.DB_PASS, {\n  host: '0.0.0.0',\n  dialect: 'sqlite',\n  pool: {\n    max: 5,\n    min: 0,\n    idle: 10000,\n  },\n  // Security note: db is saved to `.data/database.sqlite` in local filesystem.\n  // Nothing in `.data` directory gets copied if someone remixes the project.\n  storage: '.data/database.sqlite'\n});\n\n// authenticate with the database\nsequelize.authenticate()\n  .then(function(err) {\n    console.log('Connection has been established successfully.')\n    // define a new table 'promises'\n    Promise = sequelize.define('promises', {\n      urtx: { type: Sequelize.STRING  }, // urtext, including whole URL\n      user: { type: Sequelize.STRING  }, // who's making the promise\n      what: { type: Sequelize.STRING  }, // what's being promised\n      //whom: { type: Sequelize.STRING  }, // to whom are you promising\n      tini: { type: Sequelize.INTEGER }, // unixtime that promise was made\n      tdue: { type: Sequelize.STRING }, // unixtime that the promise is due\n      //tmzn: { type: Sequelize.STRING  }, // timezone\n      //wtdid: { type: Sequelize.INTEGER }, // unixtime that the promise was fulfilled\n      //fill: { type: Sequelize.FLOAT   }, // fraction fulfilled\n      //void: { type: Sequelize.BOOLEAN }, // whether promise was voided\n      // text:   { type: Sequelize.STRING }, // this was just for testing\n    });    \n    //setup()\n  })\n  .catch(function (err) {\n    console.log('Unable to connect to the database: ', err)\n  })\n\nexport { Promise, sequelize };\n\n// DATABASE FIELDS:\n//   urtx -- urtext, ie, full original text the user typed to create the promise\n//   user -- who's making the promise\n//   what -- what's being promised\n//   whom -- to whom are you promising\n//   tini -- unixtime that the promise was made\n//   tdue -- unixtime that the promise is due\n//   tmzn -- timezone assumed for parsing the deadline\n//   tfin -- unixtime that the promise was fulfilled\n//   fill -- fraction fulfilled, default 0\n//   void -- true if the promise became unfulfillable or moot\n//   clix -- number of clicks a promise has gotten\n// For example:\n//   urtx = \"bob.promises.to/foo_the_bar/by/noon_tomorrow\"\n//   user = \"bob\"\n//   what = \"foo the bar\"\n//   whom = null\n//   tini = [unixtime of first GET request of the promise's URL]\n//   tdue = [what \"noon tomorrow\" parsed to at time tini]\n//   tmzn = \"America/Los_Angeles\"\n//   tfin = [unixtime that the promise was fulfilled]\n//   fill = 0\n//   void = false\n\n// Other ideas for fields: \n// * information about the client that originally created the promise\n// * whether the promise was created by the actual user (if they were logged in \n//   and were the first to click on it) or by another logged-in user or by \n//   someone not logged in\n// * conf: maybe we create the promise whether or not anyone clicks the button to confirm\n//   it, in which case we store when it's actually been confirmed.\n"
      ]
    },
    "mtime": 1506667890337
  },
  "{\"filename\":\"/app/lib/middleware.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/lib\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "extends",
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "./mail.js",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "mailself"
              }
            ]
          },
          {
            "source": "./parse.js",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "parsePromise"
              }
            ]
          },
          {
            "source": "../data/seed.js",
            "imported": [
              "users"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "users",
                "local": "users"
              }
            ]
          },
          {
            "source": "../models/promise.js",
            "imported": [
              "Promise"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "Promise",
                "local": "Promise"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "handleRequest",
            "req",
            "resp"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "handleRequest",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "req",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "resp",
              "exported": "default"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/lib/middleware.js",
      "filenameRelative": "/app/lib/middleware.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "middleware.js",
      "sourceFileName": "middleware.js",
      "sourceRoot": "/app/lib",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/lib",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "middleware"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports.default = handleRequest;\n\nvar _mail = require('./mail.js');\n\nvar _mail2 = _interopRequireDefault(_mail);\n\nvar _parse = require('./parse.js');\n\nvar _parse2 = _interopRequireDefault(_parse);\n\nvar _seed = require('../data/seed.js');\n\nvar _promise = require('../models/promise.js');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction handleRequest(req, resp) {\n  // The server at promises.to passes along the full URL the way the user typed\n  // it, so when the user hits \"bob.promises.to/foo\" the Glitch app is called\n  // with \"iwill.glitch.me/bob.promises.to/foo\" and req.originalUrl is\n  // \"/bob.promises.to/foo\" (originalUrl doesn't include the hostname)\n  var urtx = req.originalUrl.substr(1); // get rid of the initial slash\n  // urtx is now, eg, \"bob.promises.to/foo_the_bar/by/9am\"\n\n  // TODO: don't try to parse a promise if no subdomain, ie, no user given\n  // TODOLATER: how to handle \"bob.promises.to/foo%bar\"\n  // TODOLATER: need to url-decode to handle \"bob.promises.to/foo^bar\"\n  // TODOLATER: handle bob.promises.to/do_item_#2/by/9am\n  //           https://stackoverflow.com/questions/18796421/capture-anchor-links\n\n  console.log(\"DEBUG urtx:\", urtx);\n\n  // Parse the urtext into user, what, whom, tini, tdue, etc\n  // Check if a promise already exists with matching user+'|'+what\n  // If not, create it\n  // If so, do nothing\n  var p = (0, _parse2.default)(urtx);\n\n  if (p.user === 'www' || p.user === '') {\n    // this is the case of no username, like if someone just went to\n    // \"promises.to\" or tried to fetch \"promises.to/robots.txt\" or whatever\n    resp.render('home');\n  } else if (!_seed.users.includes(p.user)) {\n    resp.redirect('/sign-up');\n  } else {\n    _promise.Promise.findOne({ where: { urtx: urtx } }).then(function (promise) {\n      var existing = false;\n\n      if (promise) {\n        console.log('duplicate', urtx);\n        existing = true;\n        // resp.redirect(urtx);\n      } else {\n        _promise.Promise.create(p);\n        (0, _mail2.default)('PROMISE', urtx);\n      }\n\n      console.log('promises.to/ request', req.params);\n      resp.render('promise', _extends({}, req.params, {\n        existing: existing\n      }));\n    });\n  }\n}\n\n/*\nLittle picture: Why does this error handling code not run when I surf to \na bad URL like iwill.glitch.me/foo%bar\n\nBigger picture: I'm making an app that needs to process any URL the user may \nthrow at it. I need the server to get the exact URL the way the user sees it in \nthe browser. That's going to be especially tricky for things like '#' characters\nbut right now I'm just trying to figure out the case of arbitrary '%' characters\nthat may not correspond to proper %-encodings.\n\nI'm thinking like a catchall error-handling route that no matter what weird\nencoding or whatever error is thrown I can still have the code here do something\nwith the URL as the user typed it.\n\nFor now we're just dropping all this and having the app give the user an error\nif there are any weird characters in the URL.\n\napp.use(function(req, resp, next) {\n  var err = null\n  try {\n    console.log(\"TRYING\", req.path, req.url)\n    decodeURIComponent(req.path)\n  } catch(e) {\n    err = e\n  }\n  if (err) {\n    console.log(\"CAUGHT ERR:\", err, req.url)\n    return resp.redirect('/')\n  }\n  next();\n\n  //console.log(\"DEBUG USE1:\", req.originalUrl)\n  //resp.redirect('/')\n})\n*/\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1pZGRsZXdhcmUuanMiXSwibmFtZXMiOlsiaGFuZGxlUmVxdWVzdCIsInJlcSIsInJlc3AiLCJ1cnR4Iiwib3JpZ2luYWxVcmwiLCJzdWJzdHIiLCJjb25zb2xlIiwibG9nIiwicCIsInVzZXIiLCJyZW5kZXIiLCJpbmNsdWRlcyIsInJlZGlyZWN0IiwiZmluZE9uZSIsIndoZXJlIiwidGhlbiIsImV4aXN0aW5nIiwicHJvbWlzZSIsImNyZWF0ZSIsInBhcmFtcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7a0JBTXdCQSxhOztBQU54Qjs7OztBQUNBOzs7O0FBQ0E7O0FBRUE7Ozs7QUFFZSxTQUFTQSxhQUFULENBQXVCQyxHQUF2QixFQUE0QkMsSUFBNUIsRUFBa0M7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFJQyxPQUFPRixJQUFJRyxXQUFKLENBQWdCQyxNQUFoQixDQUF1QixDQUF2QixDQUFYLENBTCtDLENBS1Q7QUFDdEM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQUMsVUFBUUMsR0FBUixDQUFZLGFBQVosRUFBMkJKLElBQTNCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSUssSUFBSSxxQkFBYUwsSUFBYixDQUFSOztBQUVBLE1BQUlLLEVBQUVDLElBQUYsS0FBVyxLQUFYLElBQW9CRCxFQUFFQyxJQUFGLEtBQVcsRUFBbkMsRUFBdUM7QUFDckM7QUFDQTtBQUNBUCxTQUFLUSxNQUFMLENBQVksTUFBWjtBQUNELEdBSkQsTUFJTyxJQUFJLENBQUMsWUFBTUMsUUFBTixDQUFlSCxFQUFFQyxJQUFqQixDQUFMLEVBQTZCO0FBQ2xDUCxTQUFLVSxRQUFMLENBQWMsVUFBZDtBQUNELEdBRk0sTUFFQTtBQUNMLHFCQUFRQyxPQUFSLENBQWdCLEVBQUVDLE9BQU8sRUFBQ1gsVUFBRCxFQUFULEVBQWhCLEVBQ0dZLElBREgsQ0FDUSxtQkFBVztBQUNmLFVBQUlDLFdBQVcsS0FBZjs7QUFFQSxVQUFJQyxPQUFKLEVBQWE7QUFDWFgsZ0JBQVFDLEdBQVIsQ0FBWSxXQUFaLEVBQXlCSixJQUF6QjtBQUNBYSxtQkFBVyxJQUFYO0FBQ0E7QUFDRCxPQUpELE1BSU87QUFDTCx5QkFBUUUsTUFBUixDQUFlVixDQUFmO0FBQ0EsNEJBQVMsU0FBVCxFQUFvQkwsSUFBcEI7QUFDRDs7QUFFREcsY0FBUUMsR0FBUixDQUFZLHNCQUFaLEVBQW9DTixJQUFJa0IsTUFBeEM7QUFDQWpCLFdBQUtRLE1BQUwsQ0FBWSxTQUFaLGVBQ0tULElBQUlrQixNQURUO0FBRUVIO0FBRkY7QUFJSCxLQWxCRDtBQW9CRDtBQUNGOztBQUVEIiwiZmlsZSI6Im1pZGRsZXdhcmUuanMiLCJzb3VyY2VSb290IjoiL2FwcC9saWIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbWFpbHNlbGYgZnJvbSAnLi9tYWlsLmpzJztcbmltcG9ydCBwYXJzZVByb21pc2UgZnJvbSAnLi9wYXJzZS5qcyc7XG5pbXBvcnQgeyB1c2VycyB9IGZyb20gJy4uL2RhdGEvc2VlZC5qcyc7XG5cbmltcG9ydCB7IFByb21pc2UgfSBmcm9tICcuLi9tb2RlbHMvcHJvbWlzZS5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGhhbmRsZVJlcXVlc3QocmVxLCByZXNwKSB7XG4gIC8vIFRoZSBzZXJ2ZXIgYXQgcHJvbWlzZXMudG8gcGFzc2VzIGFsb25nIHRoZSBmdWxsIFVSTCB0aGUgd2F5IHRoZSB1c2VyIHR5cGVkXG4gIC8vIGl0LCBzbyB3aGVuIHRoZSB1c2VyIGhpdHMgXCJib2IucHJvbWlzZXMudG8vZm9vXCIgdGhlIEdsaXRjaCBhcHAgaXMgY2FsbGVkXG4gIC8vIHdpdGggXCJpd2lsbC5nbGl0Y2gubWUvYm9iLnByb21pc2VzLnRvL2Zvb1wiIGFuZCByZXEub3JpZ2luYWxVcmwgaXNcbiAgLy8gXCIvYm9iLnByb21pc2VzLnRvL2Zvb1wiIChvcmlnaW5hbFVybCBkb2Vzbid0IGluY2x1ZGUgdGhlIGhvc3RuYW1lKVxuICBsZXQgdXJ0eCA9IHJlcS5vcmlnaW5hbFVybC5zdWJzdHIoMSk7IC8vIGdldCByaWQgb2YgdGhlIGluaXRpYWwgc2xhc2hcbiAgLy8gdXJ0eCBpcyBub3csIGVnLCBcImJvYi5wcm9taXNlcy50by9mb29fdGhlX2Jhci9ieS85YW1cIlxuICBcbiAgLy8gVE9ETzogZG9uJ3QgdHJ5IHRvIHBhcnNlIGEgcHJvbWlzZSBpZiBubyBzdWJkb21haW4sIGllLCBubyB1c2VyIGdpdmVuXG4gIC8vIFRPRE9MQVRFUjogaG93IHRvIGhhbmRsZSBcImJvYi5wcm9taXNlcy50by9mb28lYmFyXCJcbiAgLy8gVE9ET0xBVEVSOiBuZWVkIHRvIHVybC1kZWNvZGUgdG8gaGFuZGxlIFwiYm9iLnByb21pc2VzLnRvL2Zvb15iYXJcIlxuICAvLyBUT0RPTEFURVI6IGhhbmRsZSBib2IucHJvbWlzZXMudG8vZG9faXRlbV8jMi9ieS85YW1cbiAgLy8gICAgICAgICAgIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzE4Nzk2NDIxL2NhcHR1cmUtYW5jaG9yLWxpbmtzXG4gIFxuICBjb25zb2xlLmxvZyhcIkRFQlVHIHVydHg6XCIsIHVydHgpO1xuICBcbiAgLy8gUGFyc2UgdGhlIHVydGV4dCBpbnRvIHVzZXIsIHdoYXQsIHdob20sIHRpbmksIHRkdWUsIGV0Y1xuICAvLyBDaGVjayBpZiBhIHByb21pc2UgYWxyZWFkeSBleGlzdHMgd2l0aCBtYXRjaGluZyB1c2VyKyd8Jyt3aGF0XG4gIC8vIElmIG5vdCwgY3JlYXRlIGl0XG4gIC8vIElmIHNvLCBkbyBub3RoaW5nXG4gIGxldCBwID0gcGFyc2VQcm9taXNlKHVydHgpXG4gIFxuICBpZiAocC51c2VyID09PSAnd3d3JyB8fCBwLnVzZXIgPT09ICcnKSB7IFxuICAgIC8vIHRoaXMgaXMgdGhlIGNhc2Ugb2Ygbm8gdXNlcm5hbWUsIGxpa2UgaWYgc29tZW9uZSBqdXN0IHdlbnQgdG9cbiAgICAvLyBcInByb21pc2VzLnRvXCIgb3IgdHJpZWQgdG8gZmV0Y2ggXCJwcm9taXNlcy50by9yb2JvdHMudHh0XCIgb3Igd2hhdGV2ZXJcbiAgICByZXNwLnJlbmRlcignaG9tZScpO1xuICB9IGVsc2UgaWYgKCF1c2Vycy5pbmNsdWRlcyhwLnVzZXIpKSB7XG4gICAgcmVzcC5yZWRpcmVjdCgnL3NpZ24tdXAnKVxuICB9IGVsc2Uge1xuICAgIFByb21pc2UuZmluZE9uZSh7IHdoZXJlOiB7dXJ0eH0gfSlcbiAgICAgIC50aGVuKHByb21pc2UgPT4ge1xuICAgICAgICBsZXQgZXhpc3RpbmcgPSBmYWxzZTtcbiAgICAgIFxuICAgICAgICBpZiAocHJvbWlzZSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdkdXBsaWNhdGUnLCB1cnR4KTtcbiAgICAgICAgICBleGlzdGluZyA9IHRydWU7XG4gICAgICAgICAgLy8gcmVzcC5yZWRpcmVjdCh1cnR4KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBQcm9taXNlLmNyZWF0ZShwKTtcbiAgICAgICAgICBtYWlsc2VsZignUFJPTUlTRScsIHVydHgpO1xuICAgICAgICB9XG4gICAgICBcbiAgICAgICAgY29uc29sZS5sb2coJ3Byb21pc2VzLnRvLyByZXF1ZXN0JywgcmVxLnBhcmFtcyk7XG4gICAgICAgIHJlc3AucmVuZGVyKCdwcm9taXNlJywge1xuICAgICAgICAgIC4uLnJlcS5wYXJhbXMsXG4gICAgICAgICAgZXhpc3RpbmcsXG4gICAgICAgIH0pO1xuICAgIH0pO1xuIFxuICB9XG59XG5cbi8qXG5MaXR0bGUgcGljdHVyZTogV2h5IGRvZXMgdGhpcyBlcnJvciBoYW5kbGluZyBjb2RlIG5vdCBydW4gd2hlbiBJIHN1cmYgdG8gXG5hIGJhZCBVUkwgbGlrZSBpd2lsbC5nbGl0Y2gubWUvZm9vJWJhclxuXG5CaWdnZXIgcGljdHVyZTogSSdtIG1ha2luZyBhbiBhcHAgdGhhdCBuZWVkcyB0byBwcm9jZXNzIGFueSBVUkwgdGhlIHVzZXIgbWF5IFxudGhyb3cgYXQgaXQuIEkgbmVlZCB0aGUgc2VydmVyIHRvIGdldCB0aGUgZXhhY3QgVVJMIHRoZSB3YXkgdGhlIHVzZXIgc2VlcyBpdCBpbiBcbnRoZSBicm93c2VyLiBUaGF0J3MgZ29pbmcgdG8gYmUgZXNwZWNpYWxseSB0cmlja3kgZm9yIHRoaW5ncyBsaWtlICcjJyBjaGFyYWN0ZXJzXG5idXQgcmlnaHQgbm93IEknbSBqdXN0IHRyeWluZyB0byBmaWd1cmUgb3V0IHRoZSBjYXNlIG9mIGFyYml0cmFyeSAnJScgY2hhcmFjdGVyc1xudGhhdCBtYXkgbm90IGNvcnJlc3BvbmQgdG8gcHJvcGVyICUtZW5jb2RpbmdzLlxuXG5JJ20gdGhpbmtpbmcgbGlrZSBhIGNhdGNoYWxsIGVycm9yLWhhbmRsaW5nIHJvdXRlIHRoYXQgbm8gbWF0dGVyIHdoYXQgd2VpcmRcbmVuY29kaW5nIG9yIHdoYXRldmVyIGVycm9yIGlzIHRocm93biBJIGNhbiBzdGlsbCBoYXZlIHRoZSBjb2RlIGhlcmUgZG8gc29tZXRoaW5nXG53aXRoIHRoZSBVUkwgYXMgdGhlIHVzZXIgdHlwZWQgaXQuXG5cbkZvciBub3cgd2UncmUganVzdCBkcm9wcGluZyBhbGwgdGhpcyBhbmQgaGF2aW5nIHRoZSBhcHAgZ2l2ZSB0aGUgdXNlciBhbiBlcnJvclxuaWYgdGhlcmUgYXJlIGFueSB3ZWlyZCBjaGFyYWN0ZXJzIGluIHRoZSBVUkwuXG5cbmFwcC51c2UoZnVuY3Rpb24ocmVxLCByZXNwLCBuZXh0KSB7XG4gIHZhciBlcnIgPSBudWxsXG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coXCJUUllJTkdcIiwgcmVxLnBhdGgsIHJlcS51cmwpXG4gICAgZGVjb2RlVVJJQ29tcG9uZW50KHJlcS5wYXRoKVxuICB9IGNhdGNoKGUpIHtcbiAgICBlcnIgPSBlXG4gIH1cbiAgaWYgKGVycikge1xuICAgIGNvbnNvbGUubG9nKFwiQ0FVR0hUIEVSUjpcIiwgZXJyLCByZXEudXJsKVxuICAgIHJldHVybiByZXNwLnJlZGlyZWN0KCcvJylcbiAgfVxuICBuZXh0KCk7XG5cbiAgLy9jb25zb2xlLmxvZyhcIkRFQlVHIFVTRTE6XCIsIHJlcS5vcmlnaW5hbFVybClcbiAgLy9yZXNwLnJlZGlyZWN0KCcvJylcbn0pXG4qLyJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "middleware.js"
      ],
      "names": [
        "handleRequest",
        "req",
        "resp",
        "urtx",
        "originalUrl",
        "substr",
        "console",
        "log",
        "p",
        "user",
        "render",
        "includes",
        "redirect",
        "findOne",
        "where",
        "then",
        "existing",
        "promise",
        "create",
        "params"
      ],
      "mappings": ";;;;;;;;kBAMwBA,a;;AANxB;;;;AACA;;;;AACA;;AAEA;;;;AAEe,SAASA,aAAT,CAAuBC,GAAvB,EAA4BC,IAA5B,EAAkC;AAC/C;AACA;AACA;AACA;AACA,MAAIC,OAAOF,IAAIG,WAAJ,CAAgBC,MAAhB,CAAuB,CAAvB,CAAX,CAL+C,CAKT;AACtC;;AAEA;AACA;AACA;AACA;AACA;;AAEAC,UAAQC,GAAR,CAAY,aAAZ,EAA2BJ,IAA3B;;AAEA;AACA;AACA;AACA;AACA,MAAIK,IAAI,qBAAaL,IAAb,CAAR;;AAEA,MAAIK,EAAEC,IAAF,KAAW,KAAX,IAAoBD,EAAEC,IAAF,KAAW,EAAnC,EAAuC;AACrC;AACA;AACAP,SAAKQ,MAAL,CAAY,MAAZ;AACD,GAJD,MAIO,IAAI,CAAC,YAAMC,QAAN,CAAeH,EAAEC,IAAjB,CAAL,EAA6B;AAClCP,SAAKU,QAAL,CAAc,UAAd;AACD,GAFM,MAEA;AACL,qBAAQC,OAAR,CAAgB,EAAEC,OAAO,EAACX,UAAD,EAAT,EAAhB,EACGY,IADH,CACQ,mBAAW;AACf,UAAIC,WAAW,KAAf;;AAEA,UAAIC,OAAJ,EAAa;AACXX,gBAAQC,GAAR,CAAY,WAAZ,EAAyBJ,IAAzB;AACAa,mBAAW,IAAX;AACA;AACD,OAJD,MAIO;AACL,yBAAQE,MAAR,CAAeV,CAAf;AACA,4BAAS,SAAT,EAAoBL,IAApB;AACD;;AAEDG,cAAQC,GAAR,CAAY,sBAAZ,EAAoCN,IAAIkB,MAAxC;AACAjB,WAAKQ,MAAL,CAAY,SAAZ,eACKT,IAAIkB,MADT;AAEEH;AAFF;AAIH,KAlBD;AAoBD;AACF;;AAED",
      "file": "middleware.js",
      "sourceRoot": "/app/lib",
      "sourcesContent": [
        "import mailself from './mail.js';\nimport parsePromise from './parse.js';\nimport { users } from '../data/seed.js';\n\nimport { Promise } from '../models/promise.js';\n\nexport default function handleRequest(req, resp) {\n  // The server at promises.to passes along the full URL the way the user typed\n  // it, so when the user hits \"bob.promises.to/foo\" the Glitch app is called\n  // with \"iwill.glitch.me/bob.promises.to/foo\" and req.originalUrl is\n  // \"/bob.promises.to/foo\" (originalUrl doesn't include the hostname)\n  let urtx = req.originalUrl.substr(1); // get rid of the initial slash\n  // urtx is now, eg, \"bob.promises.to/foo_the_bar/by/9am\"\n  \n  // TODO: don't try to parse a promise if no subdomain, ie, no user given\n  // TODOLATER: how to handle \"bob.promises.to/foo%bar\"\n  // TODOLATER: need to url-decode to handle \"bob.promises.to/foo^bar\"\n  // TODOLATER: handle bob.promises.to/do_item_#2/by/9am\n  //           https://stackoverflow.com/questions/18796421/capture-anchor-links\n  \n  console.log(\"DEBUG urtx:\", urtx);\n  \n  // Parse the urtext into user, what, whom, tini, tdue, etc\n  // Check if a promise already exists with matching user+'|'+what\n  // If not, create it\n  // If so, do nothing\n  let p = parsePromise(urtx)\n  \n  if (p.user === 'www' || p.user === '') { \n    // this is the case of no username, like if someone just went to\n    // \"promises.to\" or tried to fetch \"promises.to/robots.txt\" or whatever\n    resp.render('home');\n  } else if (!users.includes(p.user)) {\n    resp.redirect('/sign-up')\n  } else {\n    Promise.findOne({ where: {urtx} })\n      .then(promise => {\n        let existing = false;\n      \n        if (promise) {\n          console.log('duplicate', urtx);\n          existing = true;\n          // resp.redirect(urtx);\n        } else {\n          Promise.create(p);\n          mailself('PROMISE', urtx);\n        }\n      \n        console.log('promises.to/ request', req.params);\n        resp.render('promise', {\n          ...req.params,\n          existing,\n        });\n    });\n \n  }\n}\n\n/*\nLittle picture: Why does this error handling code not run when I surf to \na bad URL like iwill.glitch.me/foo%bar\n\nBigger picture: I'm making an app that needs to process any URL the user may \nthrow at it. I need the server to get the exact URL the way the user sees it in \nthe browser. That's going to be especially tricky for things like '#' characters\nbut right now I'm just trying to figure out the case of arbitrary '%' characters\nthat may not correspond to proper %-encodings.\n\nI'm thinking like a catchall error-handling route that no matter what weird\nencoding or whatever error is thrown I can still have the code here do something\nwith the URL as the user typed it.\n\nFor now we're just dropping all this and having the app give the user an error\nif there are any weird characters in the URL.\n\napp.use(function(req, resp, next) {\n  var err = null\n  try {\n    console.log(\"TRYING\", req.path, req.url)\n    decodeURIComponent(req.path)\n  } catch(e) {\n    err = e\n  }\n  if (err) {\n    console.log(\"CAUGHT ERR:\", err, req.url)\n    return resp.redirect('/')\n  }\n  next();\n\n  //console.log(\"DEBUG USE1:\", req.originalUrl)\n  //resp.redirect('/')\n})\n*/"
      ]
    },
    "mtime": 1506671613299
  }
}