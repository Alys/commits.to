{
  "{\"filename\":\"/app/app.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "express",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "express"
              }
            ]
          },
          {
            "source": "express-handlebars",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "expressHandlebars"
              }
            ]
          },
          {
            "source": "chrono-node",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "chrono"
              }
            ]
          },
          {
            "source": "moment",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "moment"
              }
            ]
          },
          {
            "source": "node-sass-middleware",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "sassMiddleware"
              }
            ]
          },
          {
            "source": "./models/promise.js",
            "imported": [
              "Promise",
              "sequelize"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "Promise",
                "local": "Promise"
              },
              {
                "kind": "named",
                "imported": "sequelize",
                "local": "sequelize"
              }
            ]
          },
          {
            "source": "./data/seed.js",
            "imported": [
              "users",
              "promises"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "users",
                "local": "users"
              },
              {
                "kind": "named",
                "imported": "promises",
                "local": "promises"
              }
            ]
          },
          {
            "source": "./lib/latepenalty.js",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "computeCredit"
              }
            ]
          },
          {
            "source": "./lib/parse.js",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "parsePromise"
              }
            ]
          },
          {
            "source": "./lib/middleware.js",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "handlePromiseRequest"
              }
            ]
          },
          {
            "source": "./lib/handlebars.js",
            "imported": [],
            "specifiers": []
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/app/app.js",
      "filenameRelative": "/app/app.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "app.js",
      "sourceFileName": "app.js",
      "sourceRoot": "/app",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "app"
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _express = require('express');\n\nvar _express2 = _interopRequireDefault(_express);\n\nvar _expressHandlebars = require('express-handlebars');\n\nvar _expressHandlebars2 = _interopRequireDefault(_expressHandlebars);\n\nvar _chronoNode = require('chrono-node');\n\nvar _chronoNode2 = _interopRequireDefault(_chronoNode);\n\nvar _moment = require('moment');\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _nodeSassMiddleware = require('node-sass-middleware');\n\nvar _nodeSassMiddleware2 = _interopRequireDefault(_nodeSassMiddleware);\n\nvar _promise = require('./models/promise.js');\n\nvar _seed = require('./data/seed.js');\n\nvar _latepenalty = require('./lib/latepenalty.js');\n\nvar _latepenalty2 = _interopRequireDefault(_latepenalty);\n\nvar _parse = require('./lib/parse.js');\n\nvar _parse2 = _interopRequireDefault(_parse);\n\nvar _middleware = require('./lib/middleware.js');\n\nvar _middleware2 = _interopRequireDefault(_middleware);\n\nrequire('./lib/handlebars.js');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Sugar.js parses some things better\nvar app = (0, _express2.default)(); // --------------------------------- 80chars ---------------------------------->\n\napp.use((0, _nodeSassMiddleware2.default)({\n  src: __dirname + '/public',\n  dest: '/tmp',\n  // debug: true,\n  force: true\n  //outputStyle: 'compressed',\n}));\n\napp.use(_express2.default.static('public'));\napp.use(_express2.default.static('tmp'));\n\napp.engine('handlebars', (0, _expressHandlebars2.default)({ defaultLayout: 'main' }));\napp.set('view engine', 'handlebars');\n\napp.listen(process.env.PORT);\n\n// Routes\n\napp.get([// Home\n'/?', '/promises.to/?', '/commits.to/?'], function (req, resp) {\n  _promise.Promise.findAll({\n    order: _promise.sequelize.literal('tini DESC')\n    //limit: 30 show them all for now\n  }).then(function (promises) {\n    resp.render('home', {\n      promises: promises\n    });\n  });\n});\n\napp.get('/sign-up', function (req, resp) {\n  resp.render('signup');\n});\n\n// if a user visits bob.promises.to (or iwill.glitch.me/bob.promises.to) then\n// render the home view, but with only that user's promises\napp.get('/:user.([promises|commits]+\\.to+)', function (req, resp) {\n  var dbPromises = {};\n  _promise.Promise.findAll({\n    where: {\n      user: req.params.user\n    }\n  }).then(function (promises) {\n    resp.render('user', {\n      promises: promises,\n      user: req.params.user\n    });\n  });\n});\n\n// we want any actionable route to be handled by the middleware and for now we \n// probably don't want to let anyone just create promises with domains that \n// don't exist\n\n// FIXME handle domain agnosticism\napp.get('/:user.([promises|commits]+\\.to+)/:promise?/:modifier?/:date*?', _middleware2.default);\n\n// Actions\n\n// FIXME refactor/secure this\napp.get('/promises/remove/:id', function (req, resp) {\n  console.log('remove', req.params);\n  _promise.Promise.destroy({\n    where: {\n      id: req.params.id\n    }\n  }).then(function (deletedRows) {\n    console.log('promise removed', deletedRows);\n    resp.redirect('/');\n  });\n});\n\napp.get('/promises/create/:urtx(*)', function (req, resp) {\n  console.log('create', req.params);\n  _promise.Promise.create((0, _parse2.default)(req.params.urtx)).then(function (deletedRows) {\n    console.log('promise removed', deletedRows);\n    resp.redirect('/' + req.params.urtx);\n  });\n});\n\n// Endpoints\n\napp.get('/promise/:udp/:urtx', function (req, resp) {\n  var urtx = req.originalUrl.substr(9);\n  _promise.Promise.findOne({ where: { urtx: urtx } }).then(function (promise) {\n    console.log('single promise', urtx, promise);\n    // resp.write(promise)\n    resp.json(promise);\n  });\n});\n\napp.get('/promises', function (req, resp) {\n  var dbPromises = {};\n  _promise.Promise.findAll({\n    order: _promise.sequelize.literal('tini DESC')\n  }).then(function (promises) {\n    // console.log('all promises', promises)\n    // create nested array of promises by user:\n    promises.forEach(function (promise) {\n      dbPromises[promise.user] = dbPromises[promise.user] || [];\n      dbPromises[promise.user].push(promise);\n    });\n    resp.json(dbPromises);\n  });\n});\n\napp.get('/promises/:user', function (req, resp) {\n  var dbPromises = {};\n  _promise.Promise.findAll({\n    where: {\n      user: req.params.user\n    }\n  }).then(function (promises) {\n    console.log('user promises', promises);\n    promises.forEach(function (promise) {\n      dbPromises[promise.user] = dbPromises[promise.user] || [];\n      dbPromises[promise.user].push(promise);\n    });\n    resp.json(dbPromises);\n  });\n});\n\n// Utils\n\napp.get('/reset', function (req, resp) {\n  setup();\n  resp.redirect('/');\n});\n\n// removes all entries from the promises table\napp.get('/clear', function (req, resp) {\n  _promise.Promise.destroy({ where: {} });\n  resp.redirect('/');\n});\n\n// utility to populate table with hardcoded promises above\nfunction setup() {\n  _promise.Promise.sync({ force: true }) // 'force: true' just drops the table if it exists\n  .then(function () {\n    // and creates a new one!\n    // Add the default promises to the database\n    for (var i = 0; i < _seed.promises.length; i++) {\n      _promise.Promise.create((0, _parse2.default)(_seed.promises[i]));\n    }\n  });\n}\n\n/*\nLittle picture: Why does this error handling code not run when I surf to \na bad URL like iwill.glitch.me/foo%bar\n\nBigger picture: We're making an app that needs to process any URL the user may \nthrow at it. We need the server to get the exact URL the way the user sees it in\nthe browser. That's going to be especially tricky for things like '#' characters\nbut right now I'm just trying to figure out the case of arbitrary '%' characters\nthat may not correspond to proper %-encodings.\n\nI'm thinking like a catchall error-handling route that no matter what weird\nencoding or whatever error is thrown I can still have the code here do something\nwith the URL as the user typed it.\n\nFor now we're just dropping all this and having the app give the user an error\nif there are any weird characters in the URL.\n\napp.use(function(req, resp, next) {\n  var err = null\n  try {\n    console.log(\"TRYING\", req.path, req.url)\n    decodeURIComponent(req.path)\n  } catch(e) {\n    err = e\n  }\n  if (err) {\n    console.log(\"CAUGHT ERR:\", err, req.url)\n    return resp.redirect('/')\n  }\n  next();\n\n  //console.log(\"DEBUG USE1:\", req.originalUrl)\n  //resp.redirect('/')\n})\n*/\n\n/* \nlet test\n//test = chrono.parseDate(\"foo the bar by sep 15th noon\")\ntest = chrono.parseDate(\"Call_the_dentist by 2017-10-15 12pm\")\nconsole.log(`DEBUG: ${test} (unixtime = ${test.getTime()/1000}`)\nconsole.log(\"DEBUG: \", JSON.stringify(parsePromise(promises[2])))\n*/\n\n// --------------------------------- 80chars ---------------------------------->\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJhcHAiLCJ1c2UiLCJzcmMiLCJfX2Rpcm5hbWUiLCJkZXN0IiwiZm9yY2UiLCJzdGF0aWMiLCJlbmdpbmUiLCJkZWZhdWx0TGF5b3V0Iiwic2V0IiwibGlzdGVuIiwicHJvY2VzcyIsImVudiIsIlBPUlQiLCJnZXQiLCJyZXEiLCJyZXNwIiwiZmluZEFsbCIsIm9yZGVyIiwibGl0ZXJhbCIsInRoZW4iLCJwcm9taXNlcyIsInJlbmRlciIsImRiUHJvbWlzZXMiLCJ3aGVyZSIsInVzZXIiLCJwYXJhbXMiLCJjb25zb2xlIiwibG9nIiwiZGVzdHJveSIsImlkIiwiZGVsZXRlZFJvd3MiLCJyZWRpcmVjdCIsImNyZWF0ZSIsInVydHgiLCJvcmlnaW5hbFVybCIsInN1YnN0ciIsImZpbmRPbmUiLCJwcm9taXNlIiwianNvbiIsImZvckVhY2giLCJwdXNoIiwic2V0dXAiLCJzeW5jIiwiaSIsImxlbmd0aCJdLCJtYXBwaW5ncyI6Ijs7QUFFQTs7OztBQUNBOzs7O0FBRUE7Ozs7QUFDQTs7OztBQUNBOzs7O0FBRUE7O0FBRUE7O0FBRUE7Ozs7QUFDQTs7OztBQUVBOzs7O0FBRUE7Ozs7QUFiaUM7QUFlakMsSUFBSUEsTUFBTSx3QkFBVixDLENBcEJBOztBQXNCQUEsSUFBSUMsR0FBSixDQUFRLGtDQUFlO0FBQ3JCQyxPQUFLQyxZQUFZLFNBREk7QUFFckJDLFFBQU0sTUFGZTtBQUdyQjtBQUNBQyxTQUFPO0FBQ1A7QUFMcUIsQ0FBZixDQUFSOztBQVFBTCxJQUFJQyxHQUFKLENBQVEsa0JBQVFLLE1BQVIsQ0FBZSxRQUFmLENBQVI7QUFDQU4sSUFBSUMsR0FBSixDQUFRLGtCQUFRSyxNQUFSLENBQWUsS0FBZixDQUFSOztBQUVBTixJQUFJTyxNQUFKLENBQVcsWUFBWCxFQUF5QixpQ0FBa0IsRUFBQ0MsZUFBZSxNQUFoQixFQUFsQixDQUF6QjtBQUNBUixJQUFJUyxHQUFKLENBQVEsYUFBUixFQUF1QixZQUF2Qjs7QUFFQVQsSUFB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QjBCO0FBQ0ExQixPQUFLZ0IsUUFBTCxDQUFjLEdBQWQ7QUFDRCxDQUhEOztBQUtBO0FBQ0FoQyxJQUFJYyxHQUFKLENBQVEsUUFBUixFQUFrQixVQUFDQyxHQUFELEVBQU1DLElBQU4sRUFBZTtBQUMvQixtQkFBUWEsT0FBUixDQUFnQixFQUFDTCxPQUFPLEVBQVIsRUFBaEI7QUFDQVIsT0FBS2dCLFFBQUwsQ0FBYyxHQUFkO0FBQ0QsQ0FIRDs7QUFLQTtBQUNBLFNBQVNVLEtBQVQsR0FBaUI7QUFDZixtQkFBUUMsSUFBUixDQUFhLEVBQUN0QyxPQUFPLElBQVIsRUFBYixFQUE0QjtBQUE1QixHQUNHZSxJQURILENBQ1EsWUFBVTtBQUFVO0FBQ3hCO0FBQ0EsU0FBSyxJQUFJd0IsSUFBSSxDQUFiLEVBQWdCQSxJQUFJLGVBQVNDLE1BQTdCLEVBQXFDRCxHQUFyQyxFQUEwQztBQUN4Qyx1QkFBUVgsTUFBUixDQUFlLHFCQUFhLGVBQVNXLENBQVQsQ0FBYixDQUFmO0FBQ0Q7QUFDRixHQU5IO0FBT0Q7O0FBRUQ7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQW9DQTs7Ozs7Ozs7QUFRQSIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VSb290IjoiL2FwcCIsInNvdXJjZXNDb250ZW50IjpbIi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSA4MGNoYXJzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+XG5cbmltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnXG5pbXBvcnQgZXhwcmVzc0hhbmRsZWJhcnMgZnJvbSAnZXhwcmVzcy1oYW5kbGViYXJzJ1xuXG5pbXBvcnQgY2hyb25vIGZyb20gJ2Nocm9uby1ub2RlJyAvLyBTdWdhci5qcyBwYXJzZXMgc29tZSB0aGluZ3MgYmV0dGVyXG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCdcbmltcG9ydCBzYXNzTWlkZGxld2FyZSBmcm9tICdub2RlLXNhc3MtbWlkZGxld2FyZSdcblxuaW1wb3J0IHsgUHJvbWlzZSwgc2VxdWVsaXplIH0gZnJvbSAnLi9tb2RlbHMvcHJvbWlzZS5qcydcblxuaW1wb3J0IHsgdXNlcnMsIHByb21pc2VzIH0gZnJvbSAnLi9kYXRhL3NlZWQuanMnXG5cbmltcG9ydCBjb21wdXRlQ3JlZGl0IGZyb20gJy4vbGliL2xhdGVwZW5hbHR5LmpzJ1xuaW1wb3J0IHBhcnNlUHJvbWlzZSBmcm9tICcuL2xpYi9wYXJzZS5qcydcblxuaW1wb3J0IGhhbmRsZVByb21pc2VSZXF1ZXN0IGZyb20gJy4vbGliL21pZGRsZXdhcmUuanMnXG5cbmltcG9ydCAnLi9saWIvaGFuZGxlYmFycy5qcydcblxubGV0IGFwcCA9IGV4cHJlc3MoKVxuXG5hcHAudXNlKHNhc3NNaWRkbGV3YXJlKHtcbiAgc3JjOiBfX2Rpcm5hbWUgKyAnL3B1YmxpYycsXG4gIGRlc3Q6ICcvdG1wJyxcbiAgLy8gZGVidWc6IHRydWUsXG4gIGZvcmNlOiB0cnVlLFxuICAvL291dHB1dFN0eWxlOiAnY29tcHJlc3NlZCcsXG59KSlcblxuYXBwLnVzZShleHByZXNzLnN0YXRpYygncHVibGljJykpXG5hcHAudXNlKGV4cHJlc3Muc3RhdGljKCd0bXAnKSlcblxuYXBwLmVuZ2luZSgnaGFuZGxlYmFycycsIGV4cHJlc3NIYW5kbGViYXJzKHtkZWZhdWx0TGF5b3V0OiAnbWFpbid9KSlcbmFwcC5zZXQoJ3ZpZXcgZW5naW5lJywgJ2hhbmRsZWJhcnMnKVxuXG5hcHAubGlzdGVuKHByb2Nlc3MuZW52LlBPUlQpXG5cbi8vIFJvdXRlc1xuXG5hcHAuZ2V0KFsgLy8gSG9tZVxuICAnLz8nLFxuICAnL3Byb21pc2VzLnRvLz8nLFxuICAnL2NvbW1pdHMudG8vPydcbl0sIChyZXEsIHJlc3ApID0+IHtcbiAgICBQcm9taXNlLmZpbmRBbGwoe1xuICAgICAgb3JkZXI6IHNlcXVlbGl6ZS5saXRlcmFsKCd0aW5pIERFU0MnKSxcbiAgICAgIC8vbGltaXQ6IDMwIHNob3cgdGhlbSBhbGwgZm9yIG5vd1xuICAgIH0pLnRoZW4oZnVuY3Rpb24ocHJvbWlzZXMpIHtcbiAgICAgIHJlc3AucmVuZGVyKCdob21lJywge1xuICAgICAgICBwcm9taXNlc1xuICAgICAgfSlcbiAgICB9KVxufSlcblxuYXBwLmdldCgnL3NpZ24tdXAnLCAocmVxLCByZXNwKSA9PiB7IHJlc3AucmVuZGVyKCdzaWdudXAnKSB9KVxuXG4vLyBpZiBhIHVzZXIgdmlzaXRzIGJvYi5wcm9taXNlcy50byAob3IgaXdpbGwuZ2xpdGNoLm1lL2JvYi5wcm9taXNlcy50bykgdGhlblxuLy8gcmVuZGVyIHRoZSBob21lIHZpZXcsIGJ1dCB3aXRoIG9ubHkgdGhhdCB1c2VyJ3MgcHJvbWlzZXNcbmFwcC5nZXQoJy86dXNlci4oW3Byb21pc2VzfGNvbW1pdHNdK1xcLnRvKyknLCAocmVxLHJlc3ApID0+IHtcbiAgdmFyIGRiUHJvbWlzZXMgPSB7fVxuICBQcm9taXNlLmZpbmRBbGwoe1xuICAgd2hlcmU6IHtcbiAgICAgdXNlcjogcmVxLnBhcmFtcy51c2VyXG4gICB9LFxuICB9KS50aGVuKGZ1bmN0aW9uKHByb21pc2VzKSB7XG4gICAgcmVzcC5yZW5kZXIoJ3VzZXInLCB7IFxuICAgICAgcHJvbWlzZXMsXG4gICAgICB1c2VyOiByZXEucGFyYW1zLnVzZXJcbiAgICB9KVxuICB9KVxufSlcblxuLy8gd2Ugd2FudCBhbnkgYWN0aW9uYWJsZSByb3V0ZSB0byBiZSBoYW5kbGVkIGJ5IHRoZSBtaWRkbGV3YXJlIGFuZCBmb3Igbm93IHdlIFxuLy8gcHJvYmFibHkgZG9uJ3Qgd2FudCB0byBsZXQgYW55b25lIGp1c3QgY3JlYXRlIHByb21pc2VzIHdpdGggZG9tYWlucyB0aGF0IFxuLy8gZG9uJ3QgZXhpc3RcblxuLy8gRklYTUUgaGFuZGxlIGRvbWFpbiBhZ25vc3RpY2lzbVxuYXBwLmdldCgnLzp1c2VyLihbcHJvbWlzZXN8Y29tbWl0c10rXFwudG8rKS86cHJvbWlzZT8vOm1vZGlmaWVyPy86ZGF0ZSo/JywgXG4gICAgICAgIGhhbmRsZVByb21pc2VSZXF1ZXN0KVxuXG5cbi8vIEFjdGlvbnNcblxuLy8gRklYTUUgcmVmYWN0b3Ivc2VjdXJlIHRoaXNcbmFwcC5nZXQoJy9wcm9taXNlcy9yZW1vdmUvOmlkJywgKHJlcSwgcmVzcCkgPT4ge1xuICBjb25zb2xlLmxvZygncmVtb3ZlJywgcmVxLnBhcmFtcyk7XG4gIFByb21pc2UuZGVzdHJveSh7XG4gICB3aGVyZToge1xuICAgICBpZDogcmVxLnBhcmFtcy5pZFxuICAgfVxuICB9KVxuICAudGhlbihmdW5jdGlvbihkZWxldGVkUm93cyl7XG4gICAgY29uc29sZS5sb2coJ3Byb21pc2UgcmVtb3ZlZCcsIGRlbGV0ZWRSb3dzKTtcbiAgICByZXNwLnJlZGlyZWN0KCcvJylcbiAgfSlcbn0pXG5cbmFwcC5nZXQoJy9wcm9taXNlcy9jcmVhdGUvOnVydHgoKiknLCAocmVxLCByZXNwKSA9PiB7XG4gIGNvbnNvbGUubG9nKCdjcmVhdGUnLCByZXEucGFyYW1zKVxuICBQcm9taXNlLmNyZWF0ZShwYXJzZVByb21pc2UocmVxLnBhcmFtcy51cnR4KSlcbiAgLnRoZW4oZnVuY3Rpb24oZGVsZXRlZFJvd3Mpe1xuICAgIGNvbnNvbGUubG9nKCdwcm9taXNlIHJlbW92ZWQnLCBkZWxldGVkUm93cyk7XG4gICAgcmVzcC5yZWRpcmVjdChgLyR7cmVxLnBhcmFtcy51cnR4fWApO1xuICB9KVxufSlcblxuLy8gRW5kcG9pbnRzXG5cbmFwcC5nZXQoJy9wcm9taXNlLzp1ZHAvOnVydHgnLCBmdW5jdGlvbihyZXEsIHJlc3ApIHtcbiAgbGV0IHVydHggPSByZXEub3JpZ2luYWxVcmwuc3Vic3RyKDkpXG4gIFByb21pc2UuZmluZE9uZSh7IHdoZXJlOiB7dXJ0eH19KVxuICAgIC50aGVuKGZ1bmN0aW9uKHByb21pc2UpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdzaW5nbGUgcHJvbWlzZScsIHVydHgsIHByb21pc2UpXG4gICAgLy8gcmVzcC53cml0ZShwcm9taXNlKVxuICAgIHJlc3AuanNvbihwcm9taXNlKVxuICB9KVxuXG59KVxuXG5hcHAuZ2V0KCcvcHJvbWlzZXMnLCBmdW5jdGlvbihyZXEsIHJlc3ApIHtcbiAgdmFyIGRiUHJvbWlzZXMgPSB7fVxuICBQcm9taXNlLmZpbmRBbGwoe1xuICAgIG9yZGVyOiBzZXF1ZWxpemUubGl0ZXJhbCgndGluaSBERVNDJylcbiAgfSkudGhlbihmdW5jdGlvbihwcm9taXNlcykge1xuICAgIC8vIGNvbnNvbGUubG9nKCdhbGwgcHJvbWlzZXMnLCBwcm9taXNlcylcbiAgICAvLyBjcmVhdGUgbmVzdGVkIGFycmF5IG9mIHByb21pc2VzIGJ5IHVzZXI6XG4gICAgcHJvbWlzZXMuZm9yRWFjaChmdW5jdGlvbihwcm9taXNlKSB7IFxuICAgICAgZGJQcm9taXNlc1twcm9taXNlLnVzZXJdID0gZGJQcm9taXNlc1twcm9taXNlLnVzZXJdIHx8IFtdXG4gICAgICBkYlByb21pc2VzW3Byb21pc2UudXNlcl0ucHVzaChwcm9taXNlKVxuICAgIH0pO1xuICAgIHJlc3AuanNvbihkYlByb21pc2VzKTtcbiAgfSlcbn0pXG5cbmFwcC5nZXQoJy9wcm9taXNlcy86dXNlcicsIGZ1bmN0aW9uKHJlcSwgcmVzcCkge1xuICB2YXIgZGJQcm9taXNlcyA9IHt9O1xuICBQcm9taXNlLmZpbmRBbGwoe1xuICAgd2hlcmU6IHtcbiAgICAgdXNlcjogcmVxLnBhcmFtcy51c2VyXG4gICB9LFxuICB9KS50aGVuKGZ1bmN0aW9uKHByb21pc2VzKSB7XG4gICAgY29uc29sZS5sb2coJ3VzZXIgcHJvbWlzZXMnLCBwcm9taXNlcyk7XG4gICAgcHJvbWlzZXMuZm9yRWFjaChmdW5jdGlvbihwcm9taXNlKSB7XG4gICAgICBkYlByb21pc2VzW3Byb21pc2UudXNlcl0gPSBkYlByb21pc2VzW3Byb21pc2UudXNlcl0gfHwgW11cbiAgICAgIGRiUHJvbWlzZXNbcHJvbWlzZS51c2VyXS5wdXNoKHByb21pc2UpXG4gICAgfSlcbiAgICByZXNwLmpzb24oZGJQcm9taXNlcylcbiAgfSlcbn0pXG5cblxuLy8gVXRpbHNcblxuYXBwLmdldCgnL3Jlc2V0JywgKHJlcSwgcmVzcCkgPT4ge1xuICBzZXR1cCgpXG4gIHJlc3AucmVkaXJlY3QoJy8nKVxufSlcblxuLy8gcmVtb3ZlcyBhbGwgZW50cmllcyBmcm9tIHRoZSBwcm9taXNlcyB0YWJsZVxuYXBwLmdldCgnL2NsZWFyJywgKHJlcSwgcmVzcCkgPT4ge1xuICBQcm9taXNlLmRlc3Ryb3koe3doZXJlOiB7fX0pXG4gIHJlc3AucmVkaXJlY3QoJy8nKVxufSlcblxuLy8gdXRpbGl0eSB0byBwb3B1bGF0ZSB0YWJsZSB3aXRoIGhhcmRjb2RlZCBwcm9taXNlcyBhYm92ZVxuZnVuY3Rpb24gc2V0dXAoKSB7IFxuICBQcm9taXNlLnN5bmMoe2ZvcmNlOiB0cnVlfSkgLy8gJ2ZvcmNlOiB0cnVlJyBqdXN0IGRyb3BzIHRoZSB0YWJsZSBpZiBpdCBleGlzdHNcbiAgICAudGhlbihmdW5jdGlvbigpeyAgICAgICAgIC8vIGFuZCBjcmVhdGVzIGEgbmV3IG9uZSFcbiAgICAgIC8vIEFkZCB0aGUgZGVmYXVsdCBwcm9taXNlcyB0byB0aGUgZGF0YWJhc2VcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvbWlzZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgUHJvbWlzZS5jcmVhdGUocGFyc2VQcm9taXNlKHByb21pc2VzW2ldKSlcbiAgICAgIH1cbiAgICB9KVxufVxuXG4vKlxuTGl0dGxlIHBpY3R1cmU6IFdoeSBkb2VzIHRoaXMgZXJyb3IgaGFuZGxpbmcgY29kZSBub3QgcnVuIHdoZW4gSSBzdXJmIHRvIFxuYSBiYWQgVVJMIGxpa2UgaXdpbGwuZ2xpdGNoLm1lL2ZvbyViYXJcblxuQmlnZ2VyIHBpY3R1cmU6IFdlJ3JlIG1ha2luZyBhbiBhcHAgdGhhdCBuZWVkcyB0byBwcm9jZXNzIGFueSBVUkwgdGhlIHVzZXIgbWF5IFxudGhyb3cgYXQgaXQuIFdlIG5lZWQgdGhlIHNlcnZlciB0byBnZXQgdGhlIGV4YWN0IFVSTCB0aGUgd2F5IHRoZSB1c2VyIHNlZXMgaXQgaW5cbnRoZSBicm93c2VyLiBUaGF0J3MgZ29pbmcgdG8gYmUgZXNwZWNpYWxseSB0cmlja3kgZm9yIHRoaW5ncyBsaWtlICcjJyBjaGFyYWN0ZXJzXG5idXQgcmlnaHQgbm93IEknbSBqdXN0IHRyeWluZyB0byBmaWd1cmUgb3V0IHRoZSBjYXNlIG9mIGFyYml0cmFyeSAnJScgY2hhcmFjdGVyc1xudGhhdCBtYXkgbm90IGNvcnJlc3BvbmQgdG8gcHJvcGVyICUtZW5jb2RpbmdzLlxuXG5JJ20gdGhpbmtpbmcgbGlrZSBhIGNhdGNoYWxsIGVycm9yLWhhbmRsaW5nIHJvdXRlIHRoYXQgbm8gbWF0dGVyIHdoYXQgd2VpcmRcbmVuY29kaW5nIG9yIHdoYXRldmVyIGVycm9yIGlzIHRocm93biBJIGNhbiBzdGlsbCBoYXZlIHRoZSBjb2RlIGhlcmUgZG8gc29tZXRoaW5nXG53aXRoIHRoZSBVUkwgYXMgdGhlIHVzZXIgdHlwZWQgaXQuXG5cbkZvciBub3cgd2UncmUganVzdCBkcm9wcGluZyBhbGwgdGhpcyBhbmQgaGF2aW5nIHRoZSBhcHAgZ2l2ZSB0aGUgdXNlciBhbiBlcnJvclxuaWYgdGhlcmUgYXJlIGFueSB3ZWlyZCBjaGFyYWN0ZXJzIGluIHRoZSBVUkwuXG5cbmFwcC51c2UoZnVuY3Rpb24ocmVxLCByZXNwLCBuZXh0KSB7XG4gIHZhciBlcnIgPSBudWxsXG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coXCJUUllJTkdcIiwgcmVxLnBhdGgsIHJlcS51cmwpXG4gICAgZGVjb2RlVVJJQ29tcG9uZW50KHJlcS5wYXRoKVxuICB9IGNhdGNoKGUpIHtcbiAgICBlcnIgPSBlXG4gIH1cbiAgaWYgKGVycikge1xuICAgIGNvbnNvbGUubG9nKFwiQ0FVR0hUIEVSUjpcIiwgZXJyLCByZXEudXJsKVxuICAgIHJldHVybiByZXNwLnJlZGlyZWN0KCcvJylcbiAgfVxuICBuZXh0KCk7XG5cbiAgLy9jb25zb2xlLmxvZyhcIkRFQlVHIFVTRTE6XCIsIHJlcS5vcmlnaW5hbFVybClcbiAgLy9yZXNwLnJlZGlyZWN0KCcvJylcbn0pXG4qL1xuXG4vKiBcbmxldCB0ZXN0XG4vL3Rlc3QgPSBjaHJvbm8ucGFyc2VEYXRlKFwiZm9vIHRoZSBiYXIgYnkgc2VwIDE1dGggbm9vblwiKVxudGVzdCA9IGNocm9uby5wYXJzZURhdGUoXCJDYWxsX3RoZV9kZW50aXN0IGJ5IDIwMTctMTAtMTUgMTJwbVwiKVxuY29uc29sZS5sb2coYERFQlVHOiAke3Rlc3R9ICh1bml4dGltZSA9ICR7dGVzdC5nZXRUaW1lKCkvMTAwMH1gKVxuY29uc29sZS5sb2coXCJERUJVRzogXCIsIEpTT04uc3RyaW5naWZ5KHBhcnNlUHJvbWlzZShwcm9taXNlc1syXSkpKVxuKi9cblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIDgwY2hhcnMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT5cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "app.js"
      ],
      "names": [
        "app",
        "use",
        "src",
        "__dirname",
        "dest",
        "force",
        "static",
        "engine",
        "defaultLayout",
        "set",
        "listen",
        "process",
        "env",
        "PORT",
        "get",
        "req",
        "resp",
        "findAll",
        "order",
        "literal",
        "then",
        "promises",
        "render",
        "dbPromises",
        "where",
        "user",
        "params",
        "console",
        "log",
        "destroy",
        "id",
        "deletedRows",
        "redirect",
        "create",
        "urtx",
        "originalUrl",
        "substr",
        "findOne",
        "promise",
        "json",
        "forEach",
        "push",
        "setup",
        "sync",
        "i",
        "length"
      ],
      "mappings": "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",
      "file": "app.js",
      "sourceRoot": "/app",
      "sourcesContent": [
        "// --------------------------------- 80chars ---------------------------------->\n\nimport express from 'express'\nimport expressHandlebars from 'express-handlebars'\n\nimport chrono from 'chrono-node' // Sugar.js parses some things better\nimport moment from 'moment'\nimport sassMiddleware from 'node-sass-middleware'\n\nimport { Promise, sequelize } from './models/promise.js'\n\nimport { users, promises } from './data/seed.js'\n\nimport computeCredit from './lib/latepenalty.js'\nimport parsePromise from './lib/parse.js'\n\nimport handlePromiseRequest from './lib/middleware.js'\n\nimport './lib/handlebars.js'\n\nlet app = express()\n\napp.use(sassMiddleware({\n  src: __dirname + '/public',\n  dest: '/tmp',\n  // debug: true,\n  force: true,\n  //outputStyle: 'compressed',\n}))\n\napp.use(express.static('public'))\napp.use(express.static('tmp'))\n\napp.engine('handlebars', expressHandlebars({defaultLayout: 'main'}))\napp.set('view engine', 'handlebars')\n\napp.listen(process.env.PORT)\n\n// Routes\n\napp.get([ // Home\n  '/?',\n  '/promises.to/?',\n  '/commits.to/?'\n], (req, resp) => {\n    Promise.findAll({\n      order: sequelize.literal('tini DESC'),\n      //limit: 30 show them all for now\n    }).then(function(promises) {\n      resp.render('home', {\n        promises\n      })\n    })\n})\n\napp.get('/sign-up', (req, resp) => { resp.render('signup') })\n\n// if a user visits bob.promises.to (or iwill.glitch.me/bob.promises.to) then\n// render the home view, but with only that user's promises\napp.get('/:user.([promises|commits]+\\.to+)', (req,resp) => {\n  var dbPromises = {}\n  Promise.findAll({\n   where: {\n     user: req.params.user\n   },\n  }).then(function(promises) {\n    resp.render('user', { \n      promises,\n      user: req.params.user\n    })\n  })\n})\n\n// we want any actionable route to be handled by the middleware and for now we \n// probably don't want to let anyone just create promises with domains that \n// don't exist\n\n// FIXME handle domain agnosticism\napp.get('/:user.([promises|commits]+\\.to+)/:promise?/:modifier?/:date*?', \n        handlePromiseRequest)\n\n\n// Actions\n\n// FIXME refactor/secure this\napp.get('/promises/remove/:id', (req, resp) => {\n  console.log('remove', req.params);\n  Promise.destroy({\n   where: {\n     id: req.params.id\n   }\n  })\n  .then(function(deletedRows){\n    console.log('promise removed', deletedRows);\n    resp.redirect('/')\n  })\n})\n\napp.get('/promises/create/:urtx(*)', (req, resp) => {\n  console.log('create', req.params)\n  Promise.create(parsePromise(req.params.urtx))\n  .then(function(deletedRows){\n    console.log('promise removed', deletedRows);\n    resp.redirect(`/${req.params.urtx}`);\n  })\n})\n\n// Endpoints\n\napp.get('/promise/:udp/:urtx', function(req, resp) {\n  let urtx = req.originalUrl.substr(9)\n  Promise.findOne({ where: {urtx}})\n    .then(function(promise) {\n      console.log('single promise', urtx, promise)\n    // resp.write(promise)\n    resp.json(promise)\n  })\n\n})\n\napp.get('/promises', function(req, resp) {\n  var dbPromises = {}\n  Promise.findAll({\n    order: sequelize.literal('tini DESC')\n  }).then(function(promises) {\n    // console.log('all promises', promises)\n    // create nested array of promises by user:\n    promises.forEach(function(promise) { \n      dbPromises[promise.user] = dbPromises[promise.user] || []\n      dbPromises[promise.user].push(promise)\n    });\n    resp.json(dbPromises);\n  })\n})\n\napp.get('/promises/:user', function(req, resp) {\n  var dbPromises = {};\n  Promise.findAll({\n   where: {\n     user: req.params.user\n   },\n  }).then(function(promises) {\n    console.log('user promises', promises);\n    promises.forEach(function(promise) {\n      dbPromises[promise.user] = dbPromises[promise.user] || []\n      dbPromises[promise.user].push(promise)\n    })\n    resp.json(dbPromises)\n  })\n})\n\n\n// Utils\n\napp.get('/reset', (req, resp) => {\n  setup()\n  resp.redirect('/')\n})\n\n// removes all entries from the promises table\napp.get('/clear', (req, resp) => {\n  Promise.destroy({where: {}})\n  resp.redirect('/')\n})\n\n// utility to populate table with hardcoded promises above\nfunction setup() { \n  Promise.sync({force: true}) // 'force: true' just drops the table if it exists\n    .then(function(){         // and creates a new one!\n      // Add the default promises to the database\n      for (var i = 0; i < promises.length; i++) {\n        Promise.create(parsePromise(promises[i]))\n      }\n    })\n}\n\n/*\nLittle picture: Why does this error handling code not run when I surf to \na bad URL like iwill.glitch.me/foo%bar\n\nBigger picture: We're making an app that needs to process any URL the user may \nthrow at it. We need the server to get the exact URL the way the user sees it in\nthe browser. That's going to be especially tricky for things like '#' characters\nbut right now I'm just trying to figure out the case of arbitrary '%' characters\nthat may not correspond to proper %-encodings.\n\nI'm thinking like a catchall error-handling route that no matter what weird\nencoding or whatever error is thrown I can still have the code here do something\nwith the URL as the user typed it.\n\nFor now we're just dropping all this and having the app give the user an error\nif there are any weird characters in the URL.\n\napp.use(function(req, resp, next) {\n  var err = null\n  try {\n    console.log(\"TRYING\", req.path, req.url)\n    decodeURIComponent(req.path)\n  } catch(e) {\n    err = e\n  }\n  if (err) {\n    console.log(\"CAUGHT ERR:\", err, req.url)\n    return resp.redirect('/')\n  }\n  next();\n\n  //console.log(\"DEBUG USE1:\", req.originalUrl)\n  //resp.redirect('/')\n})\n*/\n\n/* \nlet test\n//test = chrono.parseDate(\"foo the bar by sep 15th noon\")\ntest = chrono.parseDate(\"Call_the_dentist by 2017-10-15 12pm\")\nconsole.log(`DEBUG: ${test} (unixtime = ${test.getTime()/1000}`)\nconsole.log(\"DEBUG: \", JSON.stringify(parsePromise(promises[2])))\n*/\n\n// --------------------------------- 80chars ---------------------------------->\n"
      ]
    },
    "mtime": 1507512821094
  },
  "{\"filename\":\"/app/models/promise.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/models\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "sequelize",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Sequelize"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "Promise",
            "sequelize"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "Promise",
              "exported": "Promise"
            },
            {
              "kind": "local",
              "local": "sequelize",
              "exported": "sequelize"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/models/promise.js",
      "filenameRelative": "/app/models/promise.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "promise.js",
      "sourceFileName": "promise.js",
      "sourceRoot": "/app/models",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/models",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "promise"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.sequelize = exports.Promise = undefined;\n\nvar _sequelize = require('sequelize');\n\nvar _sequelize2 = _interopRequireDefault(_sequelize);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar sequelize, Promise;\n\n// set up a new database using database credentials set in .env\n// --------------------------------- 80chars ---------------------------------->\nexports.sequelize = sequelize = new _sequelize2.default('database', process.env.DB_USER, process.env.DB_PASS, {\n  host: '0.0.0.0',\n  dialect: 'sqlite',\n  pool: {\n    max: 5,\n    min: 0,\n    idle: 10000\n  },\n  // Security note: db is saved to `.data/database.sqlite` in local filesystem.\n  // Nothing in `.data` directory gets copied if someone remixes the project.\n  storage: '.data/database.sqlite'\n});\n\n// authenticate with the database\nsequelize.authenticate().then(function (err) {\n  console.log('Connection has been established successfully.');\n  // define a new table 'promises'\n  exports.Promise = Promise = sequelize.define('promises', {\n    urtx: { type: _sequelize2.default.STRING }, // urtext, including whole URL\n    user: { type: _sequelize2.default.STRING }, // who's making the promise\n    what: { type: _sequelize2.default.STRING }, // what's being promised\n    //whom: { type: Sequelize.STRING  }, // to whom are you promising\n    tini: { type: _sequelize2.default.INTEGER }, // unixtime that promise was made\n    tdue: { type: _sequelize2.default.STRING },\n    domain: { type: _sequelize2.default.STRING } // request made on\n    //tmzn: { type: Sequelize.STRING  }, // timezone\n    //wtdid: { type: Sequelize.INTEGER }, // unixtime promise was fulfilled\n    //fill: { type: Sequelize.FLOAT   }, // fraction fulfilled\n    //void: { type: Sequelize.BOOLEAN }, // whether promise was voided\n    // text:   { type: Sequelize.STRING }, // this was just for testing\n  });\n  //setup()\n}).catch(function (err) {\n  console.log('Unable to connect to the database: ', err);\n});\n\nexports.Promise = Promise;\nexports.sequelize = sequelize;\n\n// DATABASE FIELDS:\n//   urtx -- urtext, ie, full original text the user typed to create the promise\n//   user -- who's making the promise\n//   what -- what's being promised\n//   whom -- to whom are you promising\n//   tini -- unixtime that the promise was made\n//   tdue -- unixtime that the promise is due\n//   tmzn -- timezone assumed for parsing the deadline\n//   tfin -- unixtime that the promise was fulfilled\n//   fill -- fraction fulfilled, default 0\n//   void -- true if the promise became unfulfillable or moot\n//   clix -- number of clicks a promise has gotten\n//   conf -- true when someone clicks the button to confirm the commitment\n//   audt -- audit trail of http header info for who confirmed it (or username)\n//   text -- optional additional notes or text or context for the promise\n// For example:\n//   urtx = \"bob.promises.to/foo_the_bar/by/noon_tomorrow\"\n//   user = \"bob\"\n//   what = \"foo the bar\"\n//   whom = null\n//   tini = [unixtime of first GET request of the promise's URL]\n//   tdue = [what \"noon tomorrow\" parsed to at time tini]\n//   tmzn = \"America/Los_Angeles\"\n//   tfin = [unixtime that the promise was fulfilled]\n//   fill = 0\n//   void = false\n//   clix = 0\n//   conf = false\n//   audt = \"MacOS/Chrome user in Portland OR\"\n//   text = \"promised in slack discussion about such-and-such\"\n\n// Other ideas for fields: \n// * information about the client that originally created the promise\n// * whether the promise was created by the actual user (if they were logged in \n//   and were the first to click on it) or by another logged-in user or by \n//   someone not logged in\n// * conf: maybe we create the promise whether or not anyone clicks the button \n//   to confirm it, in which case we store when it's actually been confirmed\n// * \n// --------------------------------- 80chars ---------------------------------->\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb21pc2UuanMiXSwibmFtZXMiOlsic2VxdWVsaXplIiwiUHJvbWlzZSIsInByb2Nlc3MiLCJlbnYiLCJEQl9VU0VSIiwiREJfUEFTUyIsImhvc3QiLCJkaWFsZWN0IiwicG9vbCIsIm1heCIsIm1pbiIsImlkbGUiLCJzdG9yYWdlIiwiYXV0aGVudGljYXRlIiwidGhlbiIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJkZWZpbmUiLCJ1cnR4IiwidHlwZSIsIlNUUklORyIsInVzZXIiLCJ3aGF0IiwidGluaSIsIklOVEVHRVIiLCJ0ZHVlIiwiZG9tYWluIiwiY2F0Y2giXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFDQTs7Ozs7O0FBRUEsSUFBSUEsU0FBSixFQUFlQyxPQUFmOztBQUVBO0FBTEE7QUFNQSxRQXVDa0JELFNBdkNsQixlQUFZLHdCQUFjLFVBQWQsRUFBMEJFLFFBQVFDLEdBQVIsQ0FBWUMsT0FBdEMsRUFDMEJGLFFBQVFDLEdBQVIsQ0FBWUUsT0FEdEMsRUFDK0M7QUFDekRDLFFBQU0sU0FEbUQ7QUFFekRDLFdBQVMsUUFGZ0Q7QUFHekRDLFFBQU07QUFDSkMsU0FBSyxDQUREO0FBRUpDLFNBQUssQ0FGRDtBQUdKQyxVQUFNO0FBSEYsR0FIbUQ7QUFRekQ7QUFDQTtBQUNBQyxXQUFTO0FBVmdELENBRC9DLENBQVo7O0FBY0E7QUFDQVosVUFBVWEsWUFBVixHQUNHQyxJQURILENBQ1EsVUFBU0MsR0FBVCxFQUFjO0FBQ2xCQyxVQUFRQyxHQUFSLENBQVksK0NBQVo7QUFDQTtBQUNBLFVBb0JLaEIsT0FwQkwsYUFBVUQsVUFBVWtCLE1BQVYsQ0FBaUIsVUFBakIsRUFBNkI7QUFDckNDLFVBQU0sRUFBRUMsTUFBTSxvQkFBVUMsTUFBbEIsRUFEK0IsRUFDRjtBQUNuQ0MsVUFBTSxFQUFFRixNQUFNLG9CQUFVQyxNQUFsQixFQUYrQixFQUVGO0FBQ25DRSxVQUFNLEVBQUVILE1BQU0sb0JBQVVDLE1BQWxCLEVBSCtCLEVBR0Y7QUFDbkM7QUFDQUcsVUFBTSxFQUFFSixNQUFNLG9CQUFVSyxPQUFsQixFQUwrQixFQUtGO0FBQ25DQyxVQUFNLEVBQUVOLE1BQU0sb0JBQVVDLE1BQWxCLEVBTitCO0FBT3JDTSxZQUFRLEVBQUVQLE1BQU0sb0JBQVVDLE1BQWxCLEVBUDZCLENBT0Y7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVpxQyxHQUE3QixDQUFWO0FBY0E7QUFDRCxDQW5CSCxFQW9CR08sS0FwQkgsQ0FvQlMsVUFBVWIsR0FBVixFQUFlO0FBQ3BCQyxVQUFRQyxHQUFSLENBQVkscUNBQVosRUFBbURGLEdBQW5EO0FBQ0QsQ0F0Qkg7O1FBd0JTZCxPLEdBQUFBLE87UUFBU0QsUyxHQUFBQSxTOztBQUVsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6InByb21pc2UuanMiLCJzb3VyY2VSb290IjoiL2FwcC9tb2RlbHMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gODBjaGFycyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPlxuaW1wb3J0IFNlcXVlbGl6ZSBmcm9tICdzZXF1ZWxpemUnXG5cbnZhciBzZXF1ZWxpemUsIFByb21pc2VcblxuLy8gc2V0IHVwIGEgbmV3IGRhdGFiYXNlIHVzaW5nIGRhdGFiYXNlIGNyZWRlbnRpYWxzIHNldCBpbiAuZW52XG5zZXF1ZWxpemUgPSBuZXcgU2VxdWVsaXplKCdkYXRhYmFzZScsIHByb2Nlc3MuZW52LkRCX1VTRVIsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmVudi5EQl9QQVNTLCB7XG4gIGhvc3Q6ICcwLjAuMC4wJyxcbiAgZGlhbGVjdDogJ3NxbGl0ZScsXG4gIHBvb2w6IHtcbiAgICBtYXg6IDUsXG4gICAgbWluOiAwLFxuICAgIGlkbGU6IDEwMDAwLFxuICB9LFxuICAvLyBTZWN1cml0eSBub3RlOiBkYiBpcyBzYXZlZCB0byBgLmRhdGEvZGF0YWJhc2Uuc3FsaXRlYCBpbiBsb2NhbCBmaWxlc3lzdGVtLlxuICAvLyBOb3RoaW5nIGluIGAuZGF0YWAgZGlyZWN0b3J5IGdldHMgY29waWVkIGlmIHNvbWVvbmUgcmVtaXhlcyB0aGUgcHJvamVjdC5cbiAgc3RvcmFnZTogJy5kYXRhL2RhdGFiYXNlLnNxbGl0ZSdcbn0pO1xuXG4vLyBhdXRoZW50aWNhdGUgd2l0aCB0aGUgZGF0YWJhc2VcbnNlcXVlbGl6ZS5hdXRoZW50aWNhdGUoKVxuICAudGhlbihmdW5jdGlvbihlcnIpIHtcbiAgICBjb25zb2xlLmxvZygnQ29ubmVjdGlvbiBoYXMgYmVlbiBlc3RhYmxpc2hlZCBzdWNjZXNzZnVsbHkuJylcbiAgICAvLyBkZWZpbmUgYSBuZXcgdGFibGUgJ3Byb21pc2VzJ1xuICAgIFByb21pc2UgPSBzZXF1ZWxpemUuZGVmaW5lKCdwcm9taXNlcycsIHtcbiAgICAgIHVydHg6IHsgdHlwZTogU2VxdWVsaXplLlNUUklORyAgfSwgLy8gdXJ0ZXh0LCBpbmNsdWRpbmcgd2hvbGUgVVJMXG4gICAgICB1c2VyOiB7IHR5cGU6IFNlcXVlbGl6ZS5TVFJJTkcgIH0sIC8vIHdobydzIG1ha2luZyB0aGUgcHJvbWlzZVxuICAgICAgd2hhdDogeyB0eXBlOiBTZXF1ZWxpemUuU1RSSU5HICB9LCAvLyB3aGF0J3MgYmVpbmcgcHJvbWlzZWRcbiAgICAgIC8vd2hvbTogeyB0eXBlOiBTZXF1ZWxpemUuU1RSSU5HICB9LCAvLyB0byB3aG9tIGFyZSB5b3UgcHJvbWlzaW5nXG4gICAgICB0aW5pOiB7IHR5cGU6IFNlcXVlbGl6ZS5JTlRFR0VSIH0sIC8vIHVuaXh0aW1lIHRoYXQgcHJvbWlzZSB3YXMgbWFkZVxuICAgICAgdGR1ZTogeyB0eXBlOiBTZXF1ZWxpemUuU1RSSU5HIH0sXG4gICAgICBkb21haW46IHsgdHlwZTogU2VxdWVsaXplLlNUUklORyB9LC8vIHJlcXVlc3QgbWFkZSBvblxuICAgICAgLy90bXpuOiB7IHR5cGU6IFNlcXVlbGl6ZS5TVFJJTkcgIH0sIC8vIHRpbWV6b25lXG4gICAgICAvL3d0ZGlkOiB7IHR5cGU6IFNlcXVlbGl6ZS5JTlRFR0VSIH0sIC8vIHVuaXh0aW1lIHByb21pc2Ugd2FzIGZ1bGZpbGxlZFxuICAgICAgLy9maWxsOiB7IHR5cGU6IFNlcXVlbGl6ZS5GTE9BVCAgIH0sIC8vIGZyYWN0aW9uIGZ1bGZpbGxlZFxuICAgICAgLy92b2lkOiB7IHR5cGU6IFNlcXVlbGl6ZS5CT09MRUFOIH0sIC8vIHdoZXRoZXIgcHJvbWlzZSB3YXMgdm9pZGVkXG4gICAgICAvLyB0ZXh0OiAgIHsgdHlwZTogU2VxdWVsaXplLlNUUklORyB9LCAvLyB0aGlzIHdhcyBqdXN0IGZvciB0ZXN0aW5nXG4gICAgfSlcbiAgICAvL3NldHVwKClcbiAgfSlcbiAgLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICBjb25zb2xlLmxvZygnVW5hYmxlIHRvIGNvbm5lY3QgdG8gdGhlIGRhdGFiYXNlOiAnLCBlcnIpXG4gIH0pXG5cbmV4cG9ydCB7IFByb21pc2UsIHNlcXVlbGl6ZSB9XG5cbi8vIERBVEFCQVNFIEZJRUxEUzpcbi8vICAgdXJ0eCAtLSB1cnRleHQsIGllLCBmdWxsIG9yaWdpbmFsIHRleHQgdGhlIHVzZXIgdHlwZWQgdG8gY3JlYXRlIHRoZSBwcm9taXNlXG4vLyAgIHVzZXIgLS0gd2hvJ3MgbWFraW5nIHRoZSBwcm9taXNlXG4vLyAgIHdoYXQgLS0gd2hhdCdzIGJlaW5nIHByb21pc2VkXG4vLyAgIHdob20gLS0gdG8gd2hvbSBhcmUgeW91IHByb21pc2luZ1xuLy8gICB0aW5pIC0tIHVuaXh0aW1lIHRoYXQgdGhlIHByb21pc2Ugd2FzIG1hZGVcbi8vICAgdGR1ZSAtLSB1bml4dGltZSB0aGF0IHRoZSBwcm9taXNlIGlzIGR1ZVxuLy8gICB0bXpuIC0tIHRpbWV6b25lIGFzc3VtZWQgZm9yIHBhcnNpbmcgdGhlIGRlYWRsaW5lXG4vLyAgIHRmaW4gLS0gdW5peHRpbWUgdGhhdCB0aGUgcHJvbWlzZSB3YXMgZnVsZmlsbGVkXG4vLyAgIGZpbGwgLS0gZnJhY3Rpb24gZnVsZmlsbGVkLCBkZWZhdWx0IDBcbi8vICAgdm9pZCAtLSB0cnVlIGlmIHRoZSBwcm9taXNlIGJlY2FtZSB1bmZ1bGZpbGxhYmxlIG9yIG1vb3Rcbi8vICAgY2xpeCAtLSBudW1iZXIgb2YgY2xpY2tzIGEgcHJvbWlzZSBoYXMgZ290dGVuXG4vLyAgIGNvbmYgLS0gdHJ1ZSB3aGVuIHNvbWVvbmUgY2xpY2tzIHRoZSBidXR0b24gdG8gY29uZmlybSB0aGUgY29tbWl0bWVudFxuLy8gICBhdWR0IC0tIGF1ZGl0IHRyYWlsIG9mIGh0dHAgaGVhZGVyIGluZm8gZm9yIHdobyBjb25maXJtZWQgaXQgKG9yIHVzZXJuYW1lKVxuLy8gICB0ZXh0IC0tIG9wdGlvbmFsIGFkZGl0aW9uYWwgbm90ZXMgb3IgdGV4dCBvciBjb250ZXh0IGZvciB0aGUgcHJvbWlzZVxuLy8gRm9yIGV4YW1wbGU6XG4vLyAgIHVydHggPSBcImJvYi5wcm9taXNlcy50by9mb29fdGhlX2Jhci9ieS9ub29uX3RvbW9ycm93XCJcbi8vICAgdXNlciA9IFwiYm9iXCJcbi8vICAgd2hhdCA9IFwiZm9vIHRoZSBiYXJcIlxuLy8gICB3aG9tID0gbnVsbFxuLy8gICB0aW5pID0gW3VuaXh0aW1lIG9mIGZpcnN0IEdFVCByZXF1ZXN0IG9mIHRoZSBwcm9taXNlJ3MgVVJMXVxuLy8gICB0ZHVlID0gW3doYXQgXCJub29uIHRvbW9ycm93XCIgcGFyc2VkIHRvIGF0IHRpbWUgdGluaV1cbi8vICAgdG16biA9IFwiQW1lcmljYS9Mb3NfQW5nZWxlc1wiXG4vLyAgIHRmaW4gPSBbdW5peHRpbWUgdGhhdCB0aGUgcHJvbWlzZSB3YXMgZnVsZmlsbGVkXVxuLy8gICBmaWxsID0gMFxuLy8gICB2b2lkID0gZmFsc2Vcbi8vICAgY2xpeCA9IDBcbi8vICAgY29uZiA9IGZhbHNlXG4vLyAgIGF1ZHQgPSBcIk1hY09TL0Nocm9tZSB1c2VyIGluIFBvcnRsYW5kIE9SXCJcbi8vICAgdGV4dCA9IFwicHJvbWlzZWQgaW4gc2xhY2sgZGlzY3Vzc2lvbiBhYm91dCBzdWNoLWFuZC1zdWNoXCJcblxuLy8gT3RoZXIgaWRlYXMgZm9yIGZpZWxkczogXG4vLyAqIGluZm9ybWF0aW9uIGFib3V0IHRoZSBjbGllbnQgdGhhdCBvcmlnaW5hbGx5IGNyZWF0ZWQgdGhlIHByb21pc2Vcbi8vICogd2hldGhlciB0aGUgcHJvbWlzZSB3YXMgY3JlYXRlZCBieSB0aGUgYWN0dWFsIHVzZXIgKGlmIHRoZXkgd2VyZSBsb2dnZWQgaW4gXG4vLyAgIGFuZCB3ZXJlIHRoZSBmaXJzdCB0byBjbGljayBvbiBpdCkgb3IgYnkgYW5vdGhlciBsb2dnZWQtaW4gdXNlciBvciBieSBcbi8vICAgc29tZW9uZSBub3QgbG9nZ2VkIGluXG4vLyAqIGNvbmY6IG1heWJlIHdlIGNyZWF0ZSB0aGUgcHJvbWlzZSB3aGV0aGVyIG9yIG5vdCBhbnlvbmUgY2xpY2tzIHRoZSBidXR0b24gXG4vLyAgIHRvIGNvbmZpcm0gaXQsIGluIHdoaWNoIGNhc2Ugd2Ugc3RvcmUgd2hlbiBpdCdzIGFjdHVhbGx5IGJlZW4gY29uZmlybWVkXG4vLyAqIFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIDgwY2hhcnMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT5cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "promise.js"
      ],
      "names": [
        "sequelize",
        "Promise",
        "process",
        "env",
        "DB_USER",
        "DB_PASS",
        "host",
        "dialect",
        "pool",
        "max",
        "min",
        "idle",
        "storage",
        "authenticate",
        "then",
        "err",
        "console",
        "log",
        "define",
        "urtx",
        "type",
        "STRING",
        "user",
        "what",
        "tini",
        "INTEGER",
        "tdue",
        "domain",
        "catch"
      ],
      "mappings": ";;;;;;;AACA;;;;;;AAEA,IAAIA,SAAJ,EAAeC,OAAf;;AAEA;AALA;AAMA,QAuCkBD,SAvClB,eAAY,wBAAc,UAAd,EAA0BE,QAAQC,GAAR,CAAYC,OAAtC,EAC0BF,QAAQC,GAAR,CAAYE,OADtC,EAC+C;AACzDC,QAAM,SADmD;AAEzDC,WAAS,QAFgD;AAGzDC,QAAM;AACJC,SAAK,CADD;AAEJC,SAAK,CAFD;AAGJC,UAAM;AAHF,GAHmD;AAQzD;AACA;AACAC,WAAS;AAVgD,CAD/C,CAAZ;;AAcA;AACAZ,UAAUa,YAAV,GACGC,IADH,CACQ,UAASC,GAAT,EAAc;AAClBC,UAAQC,GAAR,CAAY,+CAAZ;AACA;AACA,UAoBKhB,OApBL,aAAUD,UAAUkB,MAAV,CAAiB,UAAjB,EAA6B;AACrCC,UAAM,EAAEC,MAAM,oBAAUC,MAAlB,EAD+B,EACF;AACnCC,UAAM,EAAEF,MAAM,oBAAUC,MAAlB,EAF+B,EAEF;AACnCE,UAAM,EAAEH,MAAM,oBAAUC,MAAlB,EAH+B,EAGF;AACnC;AACAG,UAAM,EAAEJ,MAAM,oBAAUK,OAAlB,EAL+B,EAKF;AACnCC,UAAM,EAAEN,MAAM,oBAAUC,MAAlB,EAN+B;AAOrCM,YAAQ,EAAEP,MAAM,oBAAUC,MAAlB,EAP6B,CAOF;AACnC;AACA;AACA;AACA;AACA;AAZqC,GAA7B,CAAV;AAcA;AACD,CAnBH,EAoBGO,KApBH,CAoBS,UAAUb,GAAV,EAAe;AACpBC,UAAQC,GAAR,CAAY,qCAAZ,EAAmDF,GAAnD;AACD,CAtBH;;QAwBSd,O,GAAAA,O;QAASD,S,GAAAA,S;;AAElB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA",
      "file": "promise.js",
      "sourceRoot": "/app/models",
      "sourcesContent": [
        "// --------------------------------- 80chars ---------------------------------->\nimport Sequelize from 'sequelize'\n\nvar sequelize, Promise\n\n// set up a new database using database credentials set in .env\nsequelize = new Sequelize('database', process.env.DB_USER, \n                                      process.env.DB_PASS, {\n  host: '0.0.0.0',\n  dialect: 'sqlite',\n  pool: {\n    max: 5,\n    min: 0,\n    idle: 10000,\n  },\n  // Security note: db is saved to `.data/database.sqlite` in local filesystem.\n  // Nothing in `.data` directory gets copied if someone remixes the project.\n  storage: '.data/database.sqlite'\n});\n\n// authenticate with the database\nsequelize.authenticate()\n  .then(function(err) {\n    console.log('Connection has been established successfully.')\n    // define a new table 'promises'\n    Promise = sequelize.define('promises', {\n      urtx: { type: Sequelize.STRING  }, // urtext, including whole URL\n      user: { type: Sequelize.STRING  }, // who's making the promise\n      what: { type: Sequelize.STRING  }, // what's being promised\n      //whom: { type: Sequelize.STRING  }, // to whom are you promising\n      tini: { type: Sequelize.INTEGER }, // unixtime that promise was made\n      tdue: { type: Sequelize.STRING },\n      domain: { type: Sequelize.STRING },// request made on\n      //tmzn: { type: Sequelize.STRING  }, // timezone\n      //wtdid: { type: Sequelize.INTEGER }, // unixtime promise was fulfilled\n      //fill: { type: Sequelize.FLOAT   }, // fraction fulfilled\n      //void: { type: Sequelize.BOOLEAN }, // whether promise was voided\n      // text:   { type: Sequelize.STRING }, // this was just for testing\n    })\n    //setup()\n  })\n  .catch(function (err) {\n    console.log('Unable to connect to the database: ', err)\n  })\n\nexport { Promise, sequelize }\n\n// DATABASE FIELDS:\n//   urtx -- urtext, ie, full original text the user typed to create the promise\n//   user -- who's making the promise\n//   what -- what's being promised\n//   whom -- to whom are you promising\n//   tini -- unixtime that the promise was made\n//   tdue -- unixtime that the promise is due\n//   tmzn -- timezone assumed for parsing the deadline\n//   tfin -- unixtime that the promise was fulfilled\n//   fill -- fraction fulfilled, default 0\n//   void -- true if the promise became unfulfillable or moot\n//   clix -- number of clicks a promise has gotten\n//   conf -- true when someone clicks the button to confirm the commitment\n//   audt -- audit trail of http header info for who confirmed it (or username)\n//   text -- optional additional notes or text or context for the promise\n// For example:\n//   urtx = \"bob.promises.to/foo_the_bar/by/noon_tomorrow\"\n//   user = \"bob\"\n//   what = \"foo the bar\"\n//   whom = null\n//   tini = [unixtime of first GET request of the promise's URL]\n//   tdue = [what \"noon tomorrow\" parsed to at time tini]\n//   tmzn = \"America/Los_Angeles\"\n//   tfin = [unixtime that the promise was fulfilled]\n//   fill = 0\n//   void = false\n//   clix = 0\n//   conf = false\n//   audt = \"MacOS/Chrome user in Portland OR\"\n//   text = \"promised in slack discussion about such-and-such\"\n\n// Other ideas for fields: \n// * information about the client that originally created the promise\n// * whether the promise was created by the actual user (if they were logged in \n//   and were the first to click on it) or by another logged-in user or by \n//   someone not logged in\n// * conf: maybe we create the promise whether or not anyone clicks the button \n//   to confirm it, in which case we store when it's actually been confirmed\n// * \n// --------------------------------- 80chars ---------------------------------->\n"
      ]
    },
    "mtime": 1507514129448
  },
  "{\"filename\":\"/app/data/seed.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/data\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "domain",
            "users",
            "promises"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "domain",
              "exported": "domain"
            },
            {
              "kind": "local",
              "local": "users",
              "exported": "users"
            },
            {
              "kind": "local",
              "local": "promises",
              "exported": "promises"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/data/seed.js",
      "filenameRelative": "/app/data/seed.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "seed.js",
      "sourceFileName": "seed.js",
      "sourceRoot": "/app/data",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/data",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "seed"
    },
    "ignored": false,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n// we're domain agnostic, but we have to have a default\nvar domain = exports.domain = 'commits.to';\n\nvar users = exports.users = [\n/* testing */\n\"alice\", \"bob\", \"carol\",\n/* initial co-conspirators */\n\"dreev\", \"sergii\", \"kim\", \"bee\", \"braden\",\n/* daily beemail */\n\"byorgey\", \"nick\", \"josh\", \"dehowell\", \"caillu\", \"mbork\", \"roy\", \"jennyli\", \"owen\",\n/* weekly beemail */\n\"samuel\", \"cole\", \"jessica\", \"steven\",\n/* contributors */\n\"chris\", \"stephen\",\n/* invitees */\n\"pierre\", \"chelsea\"];\n\n// dreev calls dibs on \"danny\", \"dan\", & \"d\" in case we implement aliases\n// usernames to disallow: \"www\", \"admin\", \n\n// Initial promise list hardcoded so don't have to worry about blowing db away\nvar promises = exports.promises = [\"alice.promises.to/File_the_TPS_report/by/noon_mon\", \"bob.promises.to/Send_vacation_photos/by/saturday\", \"carol.promises.to/Call_the_dentist/by/12am\", \"dreev.promises.to/show_sergii_this_doing_something_useful/by/3am\", // 9-10, done\n\"dreev.promises.to/show_bee_open_questions/by/10:30pm\", // 9-10, done\n\"braden.promises.to/help_with_javascript/by/5pm\", // 9-11\n\"dreev.promises.to/show_brennan_intro/by/10:50pm\", // 9-11, done\n\"dreev.promises.to/queue_tweet_etc_for_blog_post/by/2pm\", // 9-11, done\n\"dreev.promises.to/order_indian/by/5:30pm\", // 9-12, done\n\"dreev.commits.to/ask_bee_re_sunday_parkways\", // 9-13, done\n\"dreev.commits.to/follow_up_with_everyone_re_guest_blogging\", // 9-13\n\"josh.commits.to/get_realisies_running/by/september_30\", // 9-13\n\"braden.commits.to/outline_bite_counting_post/by/Sunday_11pm\", // 9-13\n\"dreev.commits.to/report_glitch_bug\", // 9-14, done\n\"dreev.commits.to/googledocify_intern_form/by/12pm\", // 9-14, done\n\"dreev.promises.to/test_penalty_func/by/saturday_noon\", // 9-14, done\n\"sergii.promises.to/work_on_points_2_to_4/by/next_monday\", // 9-14\n\"dreev.commits.to/meta_debrief_kim/by/midnight_friday\", // 9-14, done\n\"dreev.commits.to/ping_mirabai/by/sep_22\", // 9-14, done\n\"dreev.commits.to/send_ms_gross_email/by/sunday_11am\", // 9-14, done\n\"dreev.promises.to/ping_oli/by/nov_16\", // 9-15\n\"dreev.promises.to/ping_byorgey/by/dec_20\", // 9-15\n\"dreev.promises.to/labelzero/by/1am\", // 9-15, done\n\"chris.promises.to/follow_up_on_that_support_thread\", // 9-18\n\"bee.commits.to/new-family-photo-to-yoko/by/tomorrow-night\", // 9-18, done\n\"bee.commits.to/rest-of-paperwork-to-yoko-before-the-gym-tomorrow\", // 9-18, done 2 hours late\n\"dreev.promises.to/debug_capitalization/by/tomorrow\", // 9-18, done 23.4 hours late\n\"bee.commits.to/email-sleep-as-android-for-specifics-about-sleep-length-measurement\", // 9-19\n\"jessica.commits.to/let_bob_know_re_meeting/by/tomorrow_5pm\", // 9-19\n\"samuel.commits.to/finish_ch_23_problem_set/by/today_6_pm\", // 9-19\n\"dreev.promises.to/intern_disc/by/wed\", // 9-19, done\n\"kim.promises.to/email_argue_summary/by/fri\", // 9-19\n\"dreev.commits.to/clear_bogus_commit_for_nick/by/5_minutes_from_now\", // 9-19, done\n\"kim.promises.to/reflect_Respond_anxiety_spiral_Assist/by/sat\", // 9-19\n\"dreev.commits.to/schedule-k_tax_thing/by/5pm\", // 9-19, done\n\"dreev.promises.to/set_up_mom_on_wordfeud/by/tomorrow\", // 9-20, done/void\n\"dreev.promises.to/reply_to_use_case_email/by/midnight\", // 9-20, done\n\"kim.promises.to/consider_all_weekend_social_options/by/fri/10pm\", // 9-20\n\"kim.promises.to/submit_conclusion_email/by/10/16\", // 9-21\n\"kim.promises.to/complete_type_1_essay/by/10/1\", // 9-21\n\"kim.promises.to/inform_eve_plans/by/2\", // 9-21\n\"kim.promises.to/email_cynthia_charlap_tickets/by/9/22\", // 9-21\n\"kim.promises.to/schedule_attorney_meet/by/10/1\", // 9-21\n\"kim.promises.to/john_PAM_photos_ask/by/10/1\", // 9-21\n\"kim.promises.to/Nike_p5_email/by/10/1\", // 9-21\n\"kim.promises.to/intro_martin_marna/by/10/5\", // 9-21\n\"kim.promises.to/sbonomic_jitsjudgelist_doc/by/10/15\", // 9-21\n\"kim.promises.to/consider_all_weekend_social_options/by/fri/10pm\", // 9-21\n\"dreev.commits.to/dedup_the_iwills/by/nov\", // 9-22\n\"byorgey.promises.to/email_cut_property_summary/by/7pm\", // 9-22\n\"dreev.commits.to/copy_editing_pass_on_tao2/by/tmw_2pm\", // 9-22, done\n\"chris.promises.to/open_a_smoothie_shop/by/December\", // 9-25\n\"pierre.promises.to/water_the_office_plant/by/Friday\", // 9-25\n\"dreev.promises.to/hanna_reply/by/tonight\", // 9-26, done\n\"bee.promises.to/read-hannas-emails\", // 9-26, done\n\"bee.promises.to/reping-one-with-heart\", // 9-26\n\"bee.promises.to/fill-out-metromile-feedback\", // 9-26\n\"bee.promises.to/schedule-planning-with-cantor/by/friday-night\", // 9-26, done\n\"dreev.promises.to/ask_jana_about_blood_testers/by/dec_1\", // 9-26\n\"dreev.commits.to/take_copyediting_pass_on_micheles_draft/by/saturday\", // 9/27, done\n\"stephen.promises.to/decide_upon_late_october_trip/by/saturday\", // 9-27\n\"roy.promises.to/sign_up_for_app\", // 9-27\n\"jennyli.promises.to/water_the_plants/by/sunday\", // 9-27\n\"owen.promises.to/adjust-the-shed/by/tonight_7pm\", // 9-28\n\"cole.promises.to/find_a_rep_for_dining_vendors\", // 9-28\n\"chris.promises.to/learn-more-about-glitch/by/monday\", // 9-28\n\"chris.promises.to/learn-more-about-something-else/by/monday\", // 9-28\n\"dreev.promises.to/add_chelsea_to_commits_to/by/11am\", // 9-29, done\n\"bee.commits.to/put-away-camping-gear-this-weekend\", // 9-29\n\"owen.promises.to/research_and_pseudocode_calendar_integration/by/oct_6\", // 9-29, done\n\"caillu.commits.to/test_trying_out_time/by/2017-09-30_20:42\", // 9-30\n\"dreev.commits.to/let_yall_know_about_monitor/by/next_week\", // 10-02\n\"bee.commits.to/prettying_road_editor\", // 10-04\n\"kim.promises.to/talk_finances_w_D/by/10/30/2017\", // 10-05\n\"dreev.commits.to/give_marcin_status_update/by/oct-5-noon\", // 9-04, done 10.5 hours late\n\"dreev.commits.to/give_james_d_status_update/by/oct-5-noon\", // 9-04, done 10.5 hours late\n\"mbork.promises.to/edit_tutorial_for_students/by/tomorrow_8am\", // 10-06\n\"dreev.commits.to/ping_josh_re_realsies_integration/by/nov_7\"];\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlZWQuanMiXSwibmFtZXMiOlsiZG9tYWluIiwidXNlcnMiLCJwcm9taXNlcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNPLElBQU1BLDBCQUFTLFlBQWY7O0FBRUEsSUFBTUMsd0JBQVE7QUFDbkI7QUFDQSxPQUZtQixFQUVWLEtBRlUsRUFFSCxPQUZHO0FBR25CO0FBQ0EsT0FKbUIsRUFJVixRQUpVLEVBSUEsS0FKQSxFQUlPLEtBSlAsRUFJYyxRQUpkO0FBS25CO0FBQ0EsU0FObUIsRUFNUixNQU5RLEVBTUEsTUFOQSxFQU1RLFVBTlIsRUFNb0IsUUFOcEIsRUFNOEIsT0FOOUIsRUFNdUMsS0FOdkMsRUFNOEMsU0FOOUMsRUFPbkIsTUFQbUI7QUFRbkI7QUFDQSxRQVRtQixFQVNULE1BVFMsRUFTRCxTQVRDLEVBU1UsUUFUVjtBQVVuQjtBQUNBLE9BWG1CLEVBV1YsU0FYVTtBQVluQjtBQUNBLFFBYm1CLEVBYVQsU0FiUyxDQUFkOztBQWdCUDtBQUNBOztBQUVBO0FBQ08sSUFBTUMsOEJBQVcsQ0FDdEIsbURBRHNCLEVBRXRCLGtEQUZzQixFQUd0Qiw0Q0FIc0IsRUFJdEIsa0VBSnNCLEVBSThDO0FBQ3BFLHNEQUxzQixFQUtrQztBQUN4RCxnREFOc0IsRUFNNEI7QUFDbEQsaURBUHNCLEVBTzZCO0FBQ25ELHdEQVJzQixFQVFvQztBQUMxRCwwQ0FUc0IsRUFTc0I7QUFDNUMsNkNBVnNCLEVBVXlCO0FBQy9DLDREQVhzQixFQVd3QztBQUM5RCx1REFac0IsRUFZbUM7QUFDekQsNkRBYnNCLEVBYXlDO0FBQy9ELG9DQWRzQixFQWNnQjtBQUN0QyxtREFmc0IsRUFlK0I7QUFDckQsc0RBaEJzQixFQWdCa0M7QUFDeEQseURBakJzQixFQWlCcUM7QUFDM0Qsc0RBbEJzQixFQWtCa0M7QUFDeEQseUNBbkJzQixFQW1CcUI7QUFDM0MscURBcEJzQixFQW9CaUM7QUFDdkQsc0NBckJzQixFQXFCa0I7QUFDeEMsMENBdEJzQixFQXNCc0I7QUFDNUMsb0NBdkJzQixFQXVCZ0I7QUFDdEMsb0RBeEJzQixFQXdCZ0M7QUFDdEQsMkRBekJzQixFQXlCdUM7QUFDN0Qsa0VBMUJzQixFQTBCOEM7QUFDcEUsb0RBM0JzQixFQTJCZ0M7QUFDdEQsb0ZBNUJzQixFQTRCZ0U7QUFDdEYsNERBN0JzQixFQTZCd0M7QUFDOUQsMERBOUJzQixFQThCc0M7QUFDNUQsc0NBL0JzQixFQStCa0I7QUFDeEMsNENBaENzQixFQWdDd0I7QUFDOUMsb0VBakNzQixFQWlDZ0Q7QUFDdEUsOERBbENzQixFQWtDMEM7QUFDaEUsOENBbkNzQixFQW1DMEI7QUFDaEQsc0RBcENzQixFQW9Da0M7QUFDeEQsdURBckNzQixFQXFDbUM7QUFDekQsaUVBdENzQixFQXNDNkM7QUFDbkUsa0RBdkNzQixFQXVDOEI7QUFDcEQsK0NBeENzQixFQXdDMkI7QUFDakQsdUNBekNzQixFQXlDbUI7QUFDekMsdURBMUNzQixFQTBDbUM7QUFDekQsZ0RBM0NzQixFQTJDNEI7QUFDbEQsNkNBNUNzQixFQTRDeUI7QUFDL0MsdUNBN0NzQixFQTZDbUI7QUFDekMsNENBOUNzQixFQThDd0I7QUFDOUMscURBL0NzQixFQStDaUM7QUFDdkQsaUVBaERzQixFQWdENkM7QUFDbkUsMENBakRzQixFQWlEc0I7QUFDNUMsdURBbERzQixFQWtEbUM7QUFDekQsdURBbkRzQixFQW1EbUM7QUFDekQsb0RBcERzQixFQW9EZ0M7QUFDdEQscURBckRzQixFQXFEaUM7QUFDdkQsMENBdERzQixFQXNEc0I7QUFDNUMsb0NBdkRzQixFQXVEZ0I7QUFDdEMsdUNBeERzQixFQXdEbUI7QUFDekMsNkNBekRzQixFQXlEeUI7QUFDL0MsK0RBMURzQixFQTBEMkM7QUFDakUseURBM0RzQixFQTJEcUM7QUFDM0Qsc0VBNURzQixFQTREa0Q7QUFDeEUsK0RBN0RzQixFQTZEMkM7QUFDakUsaUNBOURzQixFQThEYTtBQUNuQyxnREEvRHNCLEVBK0Q0QjtBQUNsRCxpREFoRXNCLEVBZ0U2QjtBQUNuRCxnREFqRXNCLEVBaUU0QjtBQUNsRCxxREFsRXNCLEVBa0VpQztBQUN2RCw2REFuRXNCLEVBbUV5QztBQUMvRCxxREFwRXNCLEVBb0VpQztBQUN2RCxtREFyRXNCLEVBcUUrQjtBQUNyRCx3RUF0RXNCLEVBc0VvRDtBQUMxRSw0REF2RXNCLEVBdUV3QztBQUM5RCwyREF4RXNCLEVBd0V1QztBQUM3RCxzQ0F6RXNCLEVBeUVrQjtBQUN4QyxpREExRXNCLEVBMEU2QjtBQUNuRCwwREEzRXNCLEVBMkVzQztBQUM1RCwyREE1RXNCLEVBNEV1QztBQUM3RCw4REE3RXNCLEVBNkUwQztBQUNoRSw2REE5RXNCLENBQWpCIiwiZmlsZSI6InNlZWQuanMiLCJzb3VyY2VSb290IjoiL2FwcC9kYXRhIiwic291cmNlc0NvbnRlbnQiOlsiLy8gd2UncmUgZG9tYWluIGFnbm9zdGljLCBidXQgd2UgaGF2ZSB0byBoYXZlIGEgZGVmYXVsdFxuZXhwb3J0IGNvbnN0IGRvbWFpbiA9ICdjb21taXRzLnRvJyA7XG5cbmV4cG9ydCBjb25zdCB1c2VycyA9IFsgXG4gIC8qIHRlc3RpbmcgKi8gXG4gIFwiYWxpY2VcIiwgXCJib2JcIiwgXCJjYXJvbFwiLFxuICAvKiBpbml0aWFsIGNvLWNvbnNwaXJhdG9ycyAqLyBcbiAgXCJkcmVldlwiLCBcInNlcmdpaVwiLCBcImtpbVwiLCBcImJlZVwiLCBcImJyYWRlblwiLCBcbiAgLyogZGFpbHkgYmVlbWFpbCAqLyBcbiAgXCJieW9yZ2V5XCIsIFwibmlja1wiLCBcImpvc2hcIiwgXCJkZWhvd2VsbFwiLCBcImNhaWxsdVwiLCBcIm1ib3JrXCIsIFwicm95XCIsIFwiamVubnlsaVwiLCBcbiAgXCJvd2VuXCIsXG4gIC8qIHdlZWtseSBiZWVtYWlsICovIFxuICBcInNhbXVlbFwiLCBcImNvbGVcIiwgXCJqZXNzaWNhXCIsIFwic3RldmVuXCIsXG4gIC8qIGNvbnRyaWJ1dG9ycyAqLyBcbiAgXCJjaHJpc1wiLCBcInN0ZXBoZW5cIixcbiAgLyogaW52aXRlZXMgKi8gXG4gIFwicGllcnJlXCIsIFwiY2hlbHNlYVwiLCBcbl1cblxuLy8gZHJlZXYgY2FsbHMgZGlicyBvbiBcImRhbm55XCIsIFwiZGFuXCIsICYgXCJkXCIgaW4gY2FzZSB3ZSBpbXBsZW1lbnQgYWxpYXNlc1xuLy8gdXNlcm5hbWVzIHRvIGRpc2FsbG93OiBcInd3d1wiLCBcImFkbWluXCIsIFxuXG4vLyBJbml0aWFsIHByb21pc2UgbGlzdCBoYXJkY29kZWQgc28gZG9uJ3QgaGF2ZSB0byB3b3JyeSBhYm91dCBibG93aW5nIGRiIGF3YXlcbmV4cG9ydCBjb25zdCBwcm9taXNlcyA9IFtcbiAgXCJhbGljZS5wcm9taXNlcy50by9GaWxlX3RoZV9UUFNfcmVwb3J0L2J5L25vb25fbW9uXCIsXG4gIFwiYm9iLnByb21pc2VzLnRvL1NlbmRfdmFjYXRpb25fcGhvdG9zL2J5L3NhdHVyZGF5XCIsXG4gIFwiY2Fyb2wucHJvbWlzZXMudG8vQ2FsbF90aGVfZGVudGlzdC9ieS8xMmFtXCIsXG4gIFwiZHJlZXYucHJvbWlzZXMudG8vc2hvd19zZXJnaWlfdGhpc19kb2luZ19zb21ldGhpbmdfdXNlZnVsL2J5LzNhbVwiLCAvLyA5LTEwLCBkb25lXG4gIFwiZHJlZXYucHJvbWlzZXMudG8vc2hvd19iZWVfb3Blbl9xdWVzdGlvbnMvYnkvMTA6MzBwbVwiLCAvLyA5LTEwLCBkb25lXG4gIFwiYnJhZGVuLnByb21pc2VzLnRvL2hlbHBfd2l0aF9qYXZhc2NyaXB0L2J5LzVwbVwiLCAvLyA5LTExXG4gIFwiZHJlZXYucHJvbWlzZXMudG8vc2hvd19icmVubmFuX2ludHJvL2J5LzEwOjUwcG1cIiwgLy8gOS0xMSwgZG9uZVxuICBcImRyZWV2LnByb21pc2VzLnRvL3F1ZXVlX3R3ZWV0X2V0Y19mb3JfYmxvZ19wb3N0L2J5LzJwbVwiLCAvLyA5LTExLCBkb25lXG4gIFwiZHJlZXYucHJvbWlzZXMudG8vb3JkZXJfaW5kaWFuL2J5LzU6MzBwbVwiLCAvLyA5LTEyLCBkb25lXG4gIFwiZHJlZXYuY29tbWl0cy50by9hc2tfYmVlX3JlX3N1bmRheV9wYXJrd2F5c1wiLCAvLyA5LTEzLCBkb25lXG4gIFwiZHJlZXYuY29tbWl0cy50by9mb2xsb3dfdXBfd2l0aF9ldmVyeW9uZV9yZV9ndWVzdF9ibG9nZ2luZ1wiLCAvLyA5LTEzXG4gIFwiam9zaC5jb21taXRzLnRvL2dldF9yZWFsaXNpZXNfcnVubmluZy9ieS9zZXB0ZW1iZXJfMzBcIiwgLy8gOS0xM1xuICBcImJyYWRlbi5jb21taXRzLnRvL291dGxpbmVfYml0ZV9jb3VudGluZ19wb3N0L2J5L1N1bmRheV8xMXBtXCIsIC8vIDktMTNcbiAgXCJkcmVldi5jb21taXRzLnRvL3JlcG9ydF9nbGl0Y2hfYnVnXCIsIC8vIDktMTQsIGRvbmVcbiAgXCJkcmVldi5jb21taXRzLnRvL2dvb2dsZWRvY2lmeV9pbnRlcm5fZm9ybS9ieS8xMnBtXCIsIC8vIDktMTQsIGRvbmVcbiAgXCJkcmVldi5wcm9taXNlcy50by90ZXN0X3BlbmFsdHlfZnVuYy9ieS9zYXR1cmRheV9ub29uXCIsIC8vIDktMTQsIGRvbmVcbiAgXCJzZXJnaWkucHJvbWlzZXMudG8vd29ya19vbl9wb2ludHNfMl90b180L2J5L25leHRfbW9uZGF5XCIsIC8vIDktMTRcbiAgXCJkcmVldi5jb21taXRzLnRvL21ldGFfZGVicmllZl9raW0vYnkvbWlkbmlnaHRfZnJpZGF5XCIsIC8vIDktMTQsIGRvbmVcbiAgXCJkcmVldi5jb21taXRzLnRvL3BpbmdfbWlyYWJhaS9ieS9zZXBfMjJcIiwgLy8gOS0xNCwgZG9uZVxuICBcImRyZWV2LmNvbW1pdHMudG8vc2VuZF9tc19ncm9zc19lbWFpbC9ieS9zdW5kYXlfMTFhbVwiLCAvLyA5LTE0LCBkb25lXG4gIFwiZHJlZXYucHJvbWlzZXMudG8vcGluZ19vbGkvYnkvbm92XzE2XCIsIC8vIDktMTVcbiAgXCJkcmVldi5wcm9taXNlcy50by9waW5nX2J5b3JnZXkvYnkvZGVjXzIwXCIsIC8vIDktMTVcbiAgXCJkcmVldi5wcm9taXNlcy50by9sYWJlbHplcm8vYnkvMWFtXCIsIC8vIDktMTUsIGRvbmVcbiAgXCJjaHJpcy5wcm9taXNlcy50by9mb2xsb3dfdXBfb25fdGhhdF9zdXBwb3J0X3RocmVhZFwiLCAvLyA5LTE4XG4gIFwiYmVlLmNvbW1pdHMudG8vbmV3LWZhbWlseS1waG90by10by15b2tvL2J5L3RvbW9ycm93LW5pZ2h0XCIsIC8vIDktMTgsIGRvbmVcbiAgXCJiZWUuY29tbWl0cy50by9yZXN0LW9mLXBhcGVyd29yay10by15b2tvLWJlZm9yZS10aGUtZ3ltLXRvbW9ycm93XCIsIC8vIDktMTgsIGRvbmUgMiBob3VycyBsYXRlXG4gIFwiZHJlZXYucHJvbWlzZXMudG8vZGVidWdfY2FwaXRhbGl6YXRpb24vYnkvdG9tb3Jyb3dcIiwgLy8gOS0xOCwgZG9uZSAyMy40IGhvdXJzIGxhdGVcbiAgXCJiZWUuY29tbWl0cy50by9lbWFpbC1zbGVlcC1hcy1hbmRyb2lkLWZvci1zcGVjaWZpY3MtYWJvdXQtc2xlZXAtbGVuZ3RoLW1lYXN1cmVtZW50XCIsIC8vIDktMTlcbiAgXCJqZXNzaWNhLmNvbW1pdHMudG8vbGV0X2JvYl9rbm93X3JlX21lZXRpbmcvYnkvdG9tb3Jyb3dfNXBtXCIsIC8vIDktMTlcbiAgXCJzYW11ZWwuY29tbWl0cy50by9maW5pc2hfY2hfMjNfcHJvYmxlbV9zZXQvYnkvdG9kYXlfNl9wbVwiLCAvLyA5LTE5XG4gIFwiZHJlZXYucHJvbWlzZXMudG8vaW50ZXJuX2Rpc2MvYnkvd2VkXCIsIC8vIDktMTksIGRvbmVcbiAgXCJraW0ucHJvbWlzZXMudG8vZW1haWxfYXJndWVfc3VtbWFyeS9ieS9mcmlcIiwgLy8gOS0xOVxuICBcImRyZWV2LmNvbW1pdHMudG8vY2xlYXJfYm9ndXNfY29tbWl0X2Zvcl9uaWNrL2J5LzVfbWludXRlc19mcm9tX25vd1wiLCAvLyA5LTE5LCBkb25lXG4gIFwia2ltLnByb21pc2VzLnRvL3JlZmxlY3RfUmVzcG9uZF9hbnhpZXR5X3NwaXJhbF9Bc3Npc3QvYnkvc2F0XCIsIC8vIDktMTlcbiAgXCJkcmVldi5jb21taXRzLnRvL3NjaGVkdWxlLWtfdGF4X3RoaW5nL2J5LzVwbVwiLCAvLyA5LTE5LCBkb25lXG4gIFwiZHJlZXYucHJvbWlzZXMudG8vc2V0X3VwX21vbV9vbl93b3JkZmV1ZC9ieS90b21vcnJvd1wiLCAvLyA5LTIwLCBkb25lL3ZvaWRcbiAgXCJkcmVldi5wcm9taXNlcy50by9yZXBseV90b191c2VfY2FzZV9lbWFpbC9ieS9taWRuaWdodFwiLCAvLyA5LTIwLCBkb25lXG4gIFwia2ltLnByb21pc2VzLnRvL2NvbnNpZGVyX2FsbF93ZWVrZW5kX3NvY2lhbF9vcHRpb25zL2J5L2ZyaS8xMHBtXCIsIC8vIDktMjBcbiAgXCJraW0ucHJvbWlzZXMudG8vc3VibWl0X2NvbmNsdXNpb25fZW1haWwvYnkvMTAvMTZcIiwgLy8gOS0yMVxuICBcImtpbS5wcm9taXNlcy50by9jb21wbGV0ZV90eXBlXzFfZXNzYXkvYnkvMTAvMVwiLCAvLyA5LTIxXG4gIFwia2ltLnByb21pc2VzLnRvL2luZm9ybV9ldmVfcGxhbnMvYnkvMlwiLCAvLyA5LTIxXG4gIFwia2ltLnByb21pc2VzLnRvL2VtYWlsX2N5bnRoaWFfY2hhcmxhcF90aWNrZXRzL2J5LzkvMjJcIiwgLy8gOS0yMVxuICBcImtpbS5wcm9taXNlcy50by9zY2hlZHVsZV9hdHRvcm5leV9tZWV0L2J5LzEwLzFcIiwgLy8gOS0yMVxuICBcImtpbS5wcm9taXNlcy50by9qb2huX1BBTV9waG90b3NfYXNrL2J5LzEwLzFcIiwgLy8gOS0yMVxuICBcImtpbS5wcm9taXNlcy50by9OaWtlX3A1X2VtYWlsL2J5LzEwLzFcIiwgLy8gOS0yMVxuICBcImtpbS5wcm9taXNlcy50by9pbnRyb19tYXJ0aW5fbWFybmEvYnkvMTAvNVwiLCAvLyA5LTIxXG4gIFwia2ltLnByb21pc2VzLnRvL3Nib25vbWljX2ppdHNqdWRnZWxpc3RfZG9jL2J5LzEwLzE1XCIsIC8vIDktMjFcbiAgXCJraW0ucHJvbWlzZXMudG8vY29uc2lkZXJfYWxsX3dlZWtlbmRfc29jaWFsX29wdGlvbnMvYnkvZnJpLzEwcG1cIiwgLy8gOS0yMVxuICBcImRyZWV2LmNvbW1pdHMudG8vZGVkdXBfdGhlX2l3aWxscy9ieS9ub3ZcIiwgLy8gOS0yMlxuICBcImJ5b3JnZXkucHJvbWlzZXMudG8vZW1haWxfY3V0X3Byb3BlcnR5X3N1bW1hcnkvYnkvN3BtXCIsIC8vIDktMjJcbiAgXCJkcmVldi5jb21taXRzLnRvL2NvcHlfZWRpdGluZ19wYXNzX29uX3RhbzIvYnkvdG13XzJwbVwiLCAvLyA5LTIyLCBkb25lXG4gIFwiY2hyaXMucHJvbWlzZXMudG8vb3Blbl9hX3Ntb290aGllX3Nob3AvYnkvRGVjZW1iZXJcIiwgLy8gOS0yNVxuICBcInBpZXJyZS5wcm9taXNlcy50by93YXRlcl90aGVfb2ZmaWNlX3BsYW50L2J5L0ZyaWRheVwiLCAvLyA5LTI1XG4gIFwiZHJlZXYucHJvbWlzZXMudG8vaGFubmFfcmVwbHkvYnkvdG9uaWdodFwiLCAvLyA5LTI2LCBkb25lXG4gIFwiYmVlLnByb21pc2VzLnRvL3JlYWQtaGFubmFzLWVtYWlsc1wiLCAvLyA5LTI2LCBkb25lXG4gIFwiYmVlLnByb21pc2VzLnRvL3JlcGluZy1vbmUtd2l0aC1oZWFydFwiLCAvLyA5LTI2XG4gIFwiYmVlLnByb21pc2VzLnRvL2ZpbGwtb3V0LW1ldHJvbWlsZS1mZWVkYmFja1wiLCAvLyA5LTI2XG4gIFwiYmVlLnByb21pc2VzLnRvL3NjaGVkdWxlLXBsYW5uaW5nLXdpdGgtY2FudG9yL2J5L2ZyaWRheS1uaWdodFwiLCAvLyA5LTI2LCBkb25lXG4gIFwiZHJlZXYucHJvbWlzZXMudG8vYXNrX2phbmFfYWJvdXRfYmxvb2RfdGVzdGVycy9ieS9kZWNfMVwiLCAvLyA5LTI2XG4gIFwiZHJlZXYuY29tbWl0cy50by90YWtlX2NvcHllZGl0aW5nX3Bhc3Nfb25fbWljaGVsZXNfZHJhZnQvYnkvc2F0dXJkYXlcIiwgLy8gOS8yNywgZG9uZVxuICBcInN0ZXBoZW4ucHJvbWlzZXMudG8vZGVjaWRlX3Vwb25fbGF0ZV9vY3RvYmVyX3RyaXAvYnkvc2F0dXJkYXlcIiwgLy8gOS0yN1xuICBcInJveS5wcm9taXNlcy50by9zaWduX3VwX2Zvcl9hcHBcIiwgLy8gOS0yN1xuICBcImplbm55bGkucHJvbWlzZXMudG8vd2F0ZXJfdGhlX3BsYW50cy9ieS9zdW5kYXlcIiwgLy8gOS0yN1xuICBcIm93ZW4ucHJvbWlzZXMudG8vYWRqdXN0LXRoZS1zaGVkL2J5L3RvbmlnaHRfN3BtXCIsIC8vIDktMjhcbiAgXCJjb2xlLnByb21pc2VzLnRvL2ZpbmRfYV9yZXBfZm9yX2RpbmluZ192ZW5kb3JzXCIsIC8vIDktMjhcbiAgXCJjaHJpcy5wcm9taXNlcy50by9sZWFybi1tb3JlLWFib3V0LWdsaXRjaC9ieS9tb25kYXlcIiwgLy8gOS0yOFxuICBcImNocmlzLnByb21pc2VzLnRvL2xlYXJuLW1vcmUtYWJvdXQtc29tZXRoaW5nLWVsc2UvYnkvbW9uZGF5XCIsIC8vIDktMjhcbiAgXCJkcmVldi5wcm9taXNlcy50by9hZGRfY2hlbHNlYV90b19jb21taXRzX3RvL2J5LzExYW1cIiwgLy8gOS0yOSwgZG9uZVxuICBcImJlZS5jb21taXRzLnRvL3B1dC1hd2F5LWNhbXBpbmctZ2Vhci10aGlzLXdlZWtlbmRcIiwgLy8gOS0yOVxuICBcIm93ZW4ucHJvbWlzZXMudG8vcmVzZWFyY2hfYW5kX3BzZXVkb2NvZGVfY2FsZW5kYXJfaW50ZWdyYXRpb24vYnkvb2N0XzZcIiwgLy8gOS0yOSwgZG9uZVxuICBcImNhaWxsdS5jb21taXRzLnRvL3Rlc3RfdHJ5aW5nX291dF90aW1lL2J5LzIwMTctMDktMzBfMjA6NDJcIiwgLy8gOS0zMFxuICBcImRyZWV2LmNvbW1pdHMudG8vbGV0X3lhbGxfa25vd19hYm91dF9tb25pdG9yL2J5L25leHRfd2Vla1wiLCAvLyAxMC0wMlxuICBcImJlZS5jb21taXRzLnRvL3ByZXR0eWluZ19yb2FkX2VkaXRvclwiLCAvLyAxMC0wNFxuICBcImtpbS5wcm9taXNlcy50by90YWxrX2ZpbmFuY2VzX3dfRC9ieS8xMC8zMC8yMDE3XCIsIC8vIDEwLTA1XG4gIFwiZHJlZXYuY29tbWl0cy50by9naXZlX21hcmNpbl9zdGF0dXNfdXBkYXRlL2J5L29jdC01LW5vb25cIiwgLy8gOS0wNCwgZG9uZSAxMC41IGhvdXJzIGxhdGVcbiAgXCJkcmVldi5jb21taXRzLnRvL2dpdmVfamFtZXNfZF9zdGF0dXNfdXBkYXRlL2J5L29jdC01LW5vb25cIiwgLy8gOS0wNCwgZG9uZSAxMC41IGhvdXJzIGxhdGVcbiAgXCJtYm9yay5wcm9taXNlcy50by9lZGl0X3R1dG9yaWFsX2Zvcl9zdHVkZW50cy9ieS90b21vcnJvd184YW1cIiwgLy8gMTAtMDZcbiAgXCJkcmVldi5jb21taXRzLnRvL3Bpbmdfam9zaF9yZV9yZWFsc2llc19pbnRlZ3JhdGlvbi9ieS9ub3ZfN1wiLCAvLyAxMC0wNlxuXVxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "seed.js"
      ],
      "names": [
        "domain",
        "users",
        "promises"
      ],
      "mappings": ";;;;;AAAA;AACO,IAAMA,0BAAS,YAAf;;AAEA,IAAMC,wBAAQ;AACnB;AACA,OAFmB,EAEV,KAFU,EAEH,OAFG;AAGnB;AACA,OAJmB,EAIV,QAJU,EAIA,KAJA,EAIO,KAJP,EAIc,QAJd;AAKnB;AACA,SANmB,EAMR,MANQ,EAMA,MANA,EAMQ,UANR,EAMoB,QANpB,EAM8B,OAN9B,EAMuC,KANvC,EAM8C,SAN9C,EAOnB,MAPmB;AAQnB;AACA,QATmB,EAST,MATS,EASD,SATC,EASU,QATV;AAUnB;AACA,OAXmB,EAWV,SAXU;AAYnB;AACA,QAbmB,EAaT,SAbS,CAAd;;AAgBP;AACA;;AAEA;AACO,IAAMC,8BAAW,CACtB,mDADsB,EAEtB,kDAFsB,EAGtB,4CAHsB,EAItB,kEAJsB,EAI8C;AACpE,sDALsB,EAKkC;AACxD,gDANsB,EAM4B;AAClD,iDAPsB,EAO6B;AACnD,wDARsB,EAQoC;AAC1D,0CATsB,EASsB;AAC5C,6CAVsB,EAUyB;AAC/C,4DAXsB,EAWwC;AAC9D,uDAZsB,EAYmC;AACzD,6DAbsB,EAayC;AAC/D,oCAdsB,EAcgB;AACtC,mDAfsB,EAe+B;AACrD,sDAhBsB,EAgBkC;AACxD,yDAjBsB,EAiBqC;AAC3D,sDAlBsB,EAkBkC;AACxD,yCAnBsB,EAmBqB;AAC3C,qDApBsB,EAoBiC;AACvD,sCArBsB,EAqBkB;AACxC,0CAtBsB,EAsBsB;AAC5C,oCAvBsB,EAuBgB;AACtC,oDAxBsB,EAwBgC;AACtD,2DAzBsB,EAyBuC;AAC7D,kEA1BsB,EA0B8C;AACpE,oDA3BsB,EA2BgC;AACtD,oFA5BsB,EA4BgE;AACtF,4DA7BsB,EA6BwC;AAC9D,0DA9BsB,EA8BsC;AAC5D,sCA/BsB,EA+BkB;AACxC,4CAhCsB,EAgCwB;AAC9C,oEAjCsB,EAiCgD;AACtE,8DAlCsB,EAkC0C;AAChE,8CAnCsB,EAmC0B;AAChD,sDApCsB,EAoCkC;AACxD,uDArCsB,EAqCmC;AACzD,iEAtCsB,EAsC6C;AACnE,kDAvCsB,EAuC8B;AACpD,+CAxCsB,EAwC2B;AACjD,uCAzCsB,EAyCmB;AACzC,uDA1CsB,EA0CmC;AACzD,gDA3CsB,EA2C4B;AAClD,6CA5CsB,EA4CyB;AAC/C,uCA7CsB,EA6CmB;AACzC,4CA9CsB,EA8CwB;AAC9C,qDA/CsB,EA+CiC;AACvD,iEAhDsB,EAgD6C;AACnE,0CAjDsB,EAiDsB;AAC5C,uDAlDsB,EAkDmC;AACzD,uDAnDsB,EAmDmC;AACzD,oDApDsB,EAoDgC;AACtD,qDArDsB,EAqDiC;AACvD,0CAtDsB,EAsDsB;AAC5C,oCAvDsB,EAuDgB;AACtC,uCAxDsB,EAwDmB;AACzC,6CAzDsB,EAyDyB;AAC/C,+DA1DsB,EA0D2C;AACjE,yDA3DsB,EA2DqC;AAC3D,sEA5DsB,EA4DkD;AACxE,+DA7DsB,EA6D2C;AACjE,iCA9DsB,EA8Da;AACnC,gDA/DsB,EA+D4B;AAClD,iDAhEsB,EAgE6B;AACnD,gDAjEsB,EAiE4B;AAClD,qDAlEsB,EAkEiC;AACvD,6DAnEsB,EAmEyC;AAC/D,qDApEsB,EAoEiC;AACvD,mDArEsB,EAqE+B;AACrD,wEAtEsB,EAsEoD;AAC1E,4DAvEsB,EAuEwC;AAC9D,2DAxEsB,EAwEuC;AAC7D,sCAzEsB,EAyEkB;AACxC,iDA1EsB,EA0E6B;AACnD,0DA3EsB,EA2EsC;AAC5D,2DA5EsB,EA4EuC;AAC7D,8DA7EsB,EA6E0C;AAChE,6DA9EsB,CAAjB",
      "file": "seed.js",
      "sourceRoot": "/app/data",
      "sourcesContent": [
        "// we're domain agnostic, but we have to have a default\nexport const domain = 'commits.to' ;\n\nexport const users = [ \n  /* testing */ \n  \"alice\", \"bob\", \"carol\",\n  /* initial co-conspirators */ \n  \"dreev\", \"sergii\", \"kim\", \"bee\", \"braden\", \n  /* daily beemail */ \n  \"byorgey\", \"nick\", \"josh\", \"dehowell\", \"caillu\", \"mbork\", \"roy\", \"jennyli\", \n  \"owen\",\n  /* weekly beemail */ \n  \"samuel\", \"cole\", \"jessica\", \"steven\",\n  /* contributors */ \n  \"chris\", \"stephen\",\n  /* invitees */ \n  \"pierre\", \"chelsea\", \n]\n\n// dreev calls dibs on \"danny\", \"dan\", & \"d\" in case we implement aliases\n// usernames to disallow: \"www\", \"admin\", \n\n// Initial promise list hardcoded so don't have to worry about blowing db away\nexport const promises = [\n  \"alice.promises.to/File_the_TPS_report/by/noon_mon\",\n  \"bob.promises.to/Send_vacation_photos/by/saturday\",\n  \"carol.promises.to/Call_the_dentist/by/12am\",\n  \"dreev.promises.to/show_sergii_this_doing_something_useful/by/3am\", // 9-10, done\n  \"dreev.promises.to/show_bee_open_questions/by/10:30pm\", // 9-10, done\n  \"braden.promises.to/help_with_javascript/by/5pm\", // 9-11\n  \"dreev.promises.to/show_brennan_intro/by/10:50pm\", // 9-11, done\n  \"dreev.promises.to/queue_tweet_etc_for_blog_post/by/2pm\", // 9-11, done\n  \"dreev.promises.to/order_indian/by/5:30pm\", // 9-12, done\n  \"dreev.commits.to/ask_bee_re_sunday_parkways\", // 9-13, done\n  \"dreev.commits.to/follow_up_with_everyone_re_guest_blogging\", // 9-13\n  \"josh.commits.to/get_realisies_running/by/september_30\", // 9-13\n  \"braden.commits.to/outline_bite_counting_post/by/Sunday_11pm\", // 9-13\n  \"dreev.commits.to/report_glitch_bug\", // 9-14, done\n  \"dreev.commits.to/googledocify_intern_form/by/12pm\", // 9-14, done\n  \"dreev.promises.to/test_penalty_func/by/saturday_noon\", // 9-14, done\n  \"sergii.promises.to/work_on_points_2_to_4/by/next_monday\", // 9-14\n  \"dreev.commits.to/meta_debrief_kim/by/midnight_friday\", // 9-14, done\n  \"dreev.commits.to/ping_mirabai/by/sep_22\", // 9-14, done\n  \"dreev.commits.to/send_ms_gross_email/by/sunday_11am\", // 9-14, done\n  \"dreev.promises.to/ping_oli/by/nov_16\", // 9-15\n  \"dreev.promises.to/ping_byorgey/by/dec_20\", // 9-15\n  \"dreev.promises.to/labelzero/by/1am\", // 9-15, done\n  \"chris.promises.to/follow_up_on_that_support_thread\", // 9-18\n  \"bee.commits.to/new-family-photo-to-yoko/by/tomorrow-night\", // 9-18, done\n  \"bee.commits.to/rest-of-paperwork-to-yoko-before-the-gym-tomorrow\", // 9-18, done 2 hours late\n  \"dreev.promises.to/debug_capitalization/by/tomorrow\", // 9-18, done 23.4 hours late\n  \"bee.commits.to/email-sleep-as-android-for-specifics-about-sleep-length-measurement\", // 9-19\n  \"jessica.commits.to/let_bob_know_re_meeting/by/tomorrow_5pm\", // 9-19\n  \"samuel.commits.to/finish_ch_23_problem_set/by/today_6_pm\", // 9-19\n  \"dreev.promises.to/intern_disc/by/wed\", // 9-19, done\n  \"kim.promises.to/email_argue_summary/by/fri\", // 9-19\n  \"dreev.commits.to/clear_bogus_commit_for_nick/by/5_minutes_from_now\", // 9-19, done\n  \"kim.promises.to/reflect_Respond_anxiety_spiral_Assist/by/sat\", // 9-19\n  \"dreev.commits.to/schedule-k_tax_thing/by/5pm\", // 9-19, done\n  \"dreev.promises.to/set_up_mom_on_wordfeud/by/tomorrow\", // 9-20, done/void\n  \"dreev.promises.to/reply_to_use_case_email/by/midnight\", // 9-20, done\n  \"kim.promises.to/consider_all_weekend_social_options/by/fri/10pm\", // 9-20\n  \"kim.promises.to/submit_conclusion_email/by/10/16\", // 9-21\n  \"kim.promises.to/complete_type_1_essay/by/10/1\", // 9-21\n  \"kim.promises.to/inform_eve_plans/by/2\", // 9-21\n  \"kim.promises.to/email_cynthia_charlap_tickets/by/9/22\", // 9-21\n  \"kim.promises.to/schedule_attorney_meet/by/10/1\", // 9-21\n  \"kim.promises.to/john_PAM_photos_ask/by/10/1\", // 9-21\n  \"kim.promises.to/Nike_p5_email/by/10/1\", // 9-21\n  \"kim.promises.to/intro_martin_marna/by/10/5\", // 9-21\n  \"kim.promises.to/sbonomic_jitsjudgelist_doc/by/10/15\", // 9-21\n  \"kim.promises.to/consider_all_weekend_social_options/by/fri/10pm\", // 9-21\n  \"dreev.commits.to/dedup_the_iwills/by/nov\", // 9-22\n  \"byorgey.promises.to/email_cut_property_summary/by/7pm\", // 9-22\n  \"dreev.commits.to/copy_editing_pass_on_tao2/by/tmw_2pm\", // 9-22, done\n  \"chris.promises.to/open_a_smoothie_shop/by/December\", // 9-25\n  \"pierre.promises.to/water_the_office_plant/by/Friday\", // 9-25\n  \"dreev.promises.to/hanna_reply/by/tonight\", // 9-26, done\n  \"bee.promises.to/read-hannas-emails\", // 9-26, done\n  \"bee.promises.to/reping-one-with-heart\", // 9-26\n  \"bee.promises.to/fill-out-metromile-feedback\", // 9-26\n  \"bee.promises.to/schedule-planning-with-cantor/by/friday-night\", // 9-26, done\n  \"dreev.promises.to/ask_jana_about_blood_testers/by/dec_1\", // 9-26\n  \"dreev.commits.to/take_copyediting_pass_on_micheles_draft/by/saturday\", // 9/27, done\n  \"stephen.promises.to/decide_upon_late_october_trip/by/saturday\", // 9-27\n  \"roy.promises.to/sign_up_for_app\", // 9-27\n  \"jennyli.promises.to/water_the_plants/by/sunday\", // 9-27\n  \"owen.promises.to/adjust-the-shed/by/tonight_7pm\", // 9-28\n  \"cole.promises.to/find_a_rep_for_dining_vendors\", // 9-28\n  \"chris.promises.to/learn-more-about-glitch/by/monday\", // 9-28\n  \"chris.promises.to/learn-more-about-something-else/by/monday\", // 9-28\n  \"dreev.promises.to/add_chelsea_to_commits_to/by/11am\", // 9-29, done\n  \"bee.commits.to/put-away-camping-gear-this-weekend\", // 9-29\n  \"owen.promises.to/research_and_pseudocode_calendar_integration/by/oct_6\", // 9-29, done\n  \"caillu.commits.to/test_trying_out_time/by/2017-09-30_20:42\", // 9-30\n  \"dreev.commits.to/let_yall_know_about_monitor/by/next_week\", // 10-02\n  \"bee.commits.to/prettying_road_editor\", // 10-04\n  \"kim.promises.to/talk_finances_w_D/by/10/30/2017\", // 10-05\n  \"dreev.commits.to/give_marcin_status_update/by/oct-5-noon\", // 9-04, done 10.5 hours late\n  \"dreev.commits.to/give_james_d_status_update/by/oct-5-noon\", // 9-04, done 10.5 hours late\n  \"mbork.promises.to/edit_tutorial_for_students/by/tomorrow_8am\", // 10-06\n  \"dreev.commits.to/ping_josh_re_realsies_integration/by/nov_7\", // 10-06\n]\n"
      ]
    },
    "mtime": 1507511806465
  },
  "{\"filename\":\"/app/lib/latepenalty.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/lib\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "credit",
            "t"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "credit",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "t",
              "exported": "default"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/lib/latepenalty.js",
      "filenameRelative": "/app/lib/latepenalty.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "latepenalty.js",
      "sourceFileName": "latepenalty.js",
      "sourceRoot": "/app/lib",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/lib",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "latepenalty"
    },
    "ignored": false,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = credit;\n// --------------------------------- 80chars ---------------------------------->\n\n/* The main function here is credit(t) which computes the fraction of full \ncredit you get for being t seconds late. It's roughly a continuous version of\nthe following:\n  credit(t) = 1    if t<60s  # seconds late (no or almost no penalty)\n  credit(t) = .999 if t<1h   # minutes late (baaaasically counts)\n  credit(t) = .99  if t<1d   # hours late   (no big deal, almost fully counts)\n  credit(t) = .9   if t<1w   # days late    (main thing is it's done)\n  credit(t) = .5   if t<1mo  # weeks late   (half counts if this late)\n  credit(t) = .1   if t<1y   # months late  (mostly doesn't count)\n  credit(t) = .01  if t<10y  # years late   (better late than never, barely)\n  credit(t) = 0    otherwise # decades late (zero or essentially zero credit)\n*/\n\nvar SIH = 3600; // seconds in hour\nvar SID = 86400; // seconds in day\nvar SIW = SID * 7; // seconds in week\nvar DIY = 365.25; // days in year\nvar SIM = SID * DIY / 12; // seconds in month\nvar SIY = SID * DIY; // seconds in year\n\n// Linearly interpolate to return u when x=a and v when x=b\n// NOT CURRENTLY USED and in fact is equivalent to hscale with h=-1\nfunction lscale(x, a, b, u, v) {\n  return (b * u - a * v + (v - u) * x) / (b - a);\n}\n\n// Exponentially interpolate to return u when x=a and v when x=b\nfunction escale(x, a, b, u, v) {\n  return u * Math.pow(u / v, a / (b - a)) * Math.exp(Math.log(v / u) / (b - a) * x);\n}\n\n// Do an h-interpolation to return u when x=a and v when x=b. \n// Special cases: h=-1 is linear, h=0 is exponential, h=1 is hyperbolic.\nfunction hscale(h, x, a, b, u, v) {\n  if (h === 0) {\n    return escale(x, a, b, u, v);\n  }\n  var r = (Math.pow(v / u, -h) - 1) / h / (a - b);\n  return u * Math.pow(1 - h * r * (x - a), -1 / h);\n}\n\n// Compute the credit you get for being t seconds late\nfunction credit(t) {\n  if (t <= 0) {\n    return 1;\n  } // not late at all, or early, means full credit\n  else if (t < 60) {\n      return hscale(300000, t, 0, 60, 1, .99999);\n    } else if (t < SIH) {\n      return hscale(3000, t, 60, SIH, .99999, .999);\n    } else if (t < SID) {\n      return hscale(548, t, SIH, SID, .999, .99);\n    } else if (t < SIW) {\n      return hscale(32, t, SID, SIW, .99, .9);\n    } else if (t < SIM) {\n      return hscale(5.4, t, SIW, SIM, .9, .5);\n    } else if (t < SIY) {\n      return hscale(4.2, t, SIM, SIY, .5, .1);\n    } else {\n      return hscale(4, t, SIY, 10 * SIY, .1, .01);\n    }\n}\n\n/* \nAn alternative simple late penalty function I've used before in another context \nis 1-(t/(86400*7))^4 which gives you a couple days of very little penalty and\nthen your credit plummets till you get 0 credit for being more than a week late.\n*/\n\n// --------------------------------- 80chars ---------------------------------->\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxhdGVwZW5hbHR5LmpzIl0sIm5hbWVzIjpbImNyZWRpdCIsIlNJSCIsIlNJRCIsIlNJVyIsIkRJWSIsIlNJTSIsIlNJWSIsImxzY2FsZSIsIngiLCJhIiwiYiIsInUiLCJ2IiwiZXNjYWxlIiwiTWF0aCIsInBvdyIsImV4cCIsImxvZyIsImhzY2FsZSIsImgiLCJyIiwidCJdLCJtYXBwaW5ncyI6Ijs7Ozs7a0JBd0N3QkEsTTtBQXhDeEI7O0FBRUE7Ozs7Ozs7Ozs7Ozs7QUFhQSxJQUFNQyxNQUFNLElBQVosQyxDQUF3QjtBQUN4QixJQUFNQyxNQUFNLEtBQVosQyxDQUF3QjtBQUN4QixJQUFNQyxNQUFNRCxNQUFJLENBQWhCLEMsQ0FBd0I7QUFDeEIsSUFBTUUsTUFBTSxNQUFaLEMsQ0FBd0I7QUFDeEIsSUFBTUMsTUFBTUgsTUFBSUUsR0FBSixHQUFRLEVBQXBCLEMsQ0FBd0I7QUFDeEIsSUFBTUUsTUFBTUosTUFBSUUsR0FBaEIsQyxDQUF3Qjs7QUFFeEI7QUFDQTtBQUNBLFNBQVNHLE1BQVQsQ0FBZ0JDLENBQWhCLEVBQW1CQyxDQUFuQixFQUFzQkMsQ0FBdEIsRUFBeUJDLENBQXpCLEVBQTRCQyxDQUE1QixFQUErQjtBQUFFLFNBQU8sQ0FBQ0YsSUFBRUMsQ0FBRixHQUFNRixJQUFFRyxDQUFSLEdBQVksQ0FBQ0EsSUFBRUQsQ0FBSCxJQUFNSCxDQUFuQixLQUF1QkUsSUFBRUQsQ0FBekIsQ0FBUDtBQUFvQzs7QUFFckU7QUFDQSxTQUFTSSxNQUFULENBQWdCTCxDQUFoQixFQUFtQkMsQ0FBbkIsRUFBc0JDLENBQXRCLEVBQXlCQyxDQUF6QixFQUE0QkMsQ0FBNUIsRUFBK0I7QUFDN0IsU0FBT0QsSUFBRUcsS0FBS0MsR0FBTCxDQUFTSixJQUFFQyxDQUFYLEVBQWNILEtBQUdDLElBQUVELENBQUwsQ0FBZCxDQUFGLEdBQXlCSyxLQUFLRSxHQUFMLENBQVNGLEtBQUtHLEdBQUwsQ0FBU0wsSUFBRUQsQ0FBWCxLQUFlRCxJQUFFRCxDQUFqQixJQUFvQkQsQ0FBN0IsQ0FBaEM7QUFDRDs7QUFFRDtBQUNBO0FBQ0EsU0FBU1UsTUFBVCxDQUFnQkMsQ0FBaEIsRUFBbUJYLENBQW5CLEVBQXNCQyxDQUF0QixFQUF5QkMsQ0FBekIsRUFBNEJDLENBQTVCLEVBQStCQyxDQUEvQixFQUFrQztBQUNoQyxNQUFJTyxNQUFNLENBQVYsRUFBYTtBQUFFLFdBQU9OLE9BQU9MLENBQVAsRUFBVUMsQ0FBVixFQUFhQyxDQUFiLEVBQWdCQyxDQUFoQixFQUFtQkMsQ0FBbkIsQ0FBUDtBQUE4QjtBQUM3QyxNQUFJUSxJQUFJLENBQUNOLEtBQUtDLEdBQUwsQ0FBU0gsSUFBRUQsQ0FBWCxFQUFjLENBQUNRLENBQWYsSUFBa0IsQ0FBbkIsSUFBc0JBLENBQXRCLElBQXlCVixJQUFFQyxDQUEzQixDQUFSO0FBQ0EsU0FBT0MsSUFBRUcsS0FBS0MsR0FBTCxDQUFTLElBQUVJLElBQUVDLENBQUYsSUFBS1osSUFBSUMsQ0FBVCxDQUFYLEVBQXdCLENBQUMsQ0FBRCxHQUFHVSxDQUEzQixDQUFUO0FBQ0Q7O0FBRUQ7QUFDZSxTQUFTbkIsTUFBVCxDQUFnQnFCLENBQWhCLEVBQW1CO0FBQ2hDLE1BQVNBLEtBQUssQ0FBZCxFQUFrQjtBQUFFLFdBQU8sQ0FBUDtBQUFVLEdBQTlCLENBQStCO0FBQS9CLE9BQ0ssSUFBSUEsSUFBSSxFQUFSLEVBQWE7QUFBRSxhQUFPSCxPQUFPLE1BQVAsRUFBZUcsQ0FBZixFQUFrQixDQUFsQixFQUF3QixFQUF4QixFQUErQixDQUEvQixFQUF1QyxNQUF2QyxDQUFQO0FBQXVELEtBQXRFLE1BQ0EsSUFBSUEsSUFBSXBCLEdBQVIsRUFBYTtBQUFFLGFBQU9pQixPQUFPLElBQVAsRUFBZUcsQ0FBZixFQUFrQixFQUFsQixFQUF1QnBCLEdBQXZCLEVBQStCLE1BQS9CLEVBQXVDLElBQXZDLENBQVA7QUFBdUQsS0FBdEUsTUFDQSxJQUFJb0IsSUFBSW5CLEdBQVIsRUFBYTtBQUFFLGFBQU9nQixPQUFPLEdBQVAsRUFBZUcsQ0FBZixFQUFrQnBCLEdBQWxCLEVBQXVCQyxHQUF2QixFQUErQixJQUEvQixFQUF1QyxHQUF2QyxDQUFQO0FBQXVELEtBQXRFLE1BQ0EsSUFBSW1CLElBQUlsQixHQUFSLEVBQWE7QUFBRSxhQUFPZSxPQUFPLEVBQVAsRUFBZUcsQ0FBZixFQUFrQm5CLEdBQWxCLEVBQXVCQyxHQUF2QixFQUErQixHQUEvQixFQUF1QyxFQUF2QyxDQUFQO0FBQXVELEtBQXRFLE1BQ0EsSUFBSWtCLElBQUloQixHQUFSLEVBQWE7QUFBRSxhQUFPYSxPQUFPLEdBQVAsRUFBZUcsQ0FBZixFQUFrQmxCLEdBQWxCLEVBQXVCRSxHQUF2QixFQUErQixFQUEvQixFQUF1QyxFQUF2QyxDQUFQO0FBQXVELEtBQXRFLE1BQ0EsSUFBSWdCLElBQUlmLEdBQVIsRUFBYTtBQUFFLGFBQU9ZLE9BQU8sR0FBUCxFQUFlRyxDQUFmLEVBQWtCaEIsR0FBbEIsRUFBdUJDLEdBQXZCLEVBQStCLEVBQS9CLEVBQXVDLEVBQXZDLENBQVA7QUFBdUQsS0FBdEUsTUFDYTtBQUFFLGFBQU9ZLE9BQU8sQ0FBUCxFQUFlRyxDQUFmLEVBQWtCZixHQUFsQixFQUF1QixLQUFHQSxHQUExQixFQUErQixFQUEvQixFQUF1QyxHQUF2QyxDQUFQO0FBQXVEO0FBQzVFOztBQUVEOzs7Ozs7QUFNQSIsImZpbGUiOiJsYXRlcGVuYWx0eS5qcyIsInNvdXJjZVJvb3QiOiIvYXBwL2xpYiIsInNvdXJjZXNDb250ZW50IjpbIi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSA4MGNoYXJzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+XG5cbi8qIFRoZSBtYWluIGZ1bmN0aW9uIGhlcmUgaXMgY3JlZGl0KHQpIHdoaWNoIGNvbXB1dGVzIHRoZSBmcmFjdGlvbiBvZiBmdWxsIFxuY3JlZGl0IHlvdSBnZXQgZm9yIGJlaW5nIHQgc2Vjb25kcyBsYXRlLiBJdCdzIHJvdWdobHkgYSBjb250aW51b3VzIHZlcnNpb24gb2ZcbnRoZSBmb2xsb3dpbmc6XG4gIGNyZWRpdCh0KSA9IDEgICAgaWYgdDw2MHMgICMgc2Vjb25kcyBsYXRlIChubyBvciBhbG1vc3Qgbm8gcGVuYWx0eSlcbiAgY3JlZGl0KHQpID0gLjk5OSBpZiB0PDFoICAgIyBtaW51dGVzIGxhdGUgKGJhYWFhc2ljYWxseSBjb3VudHMpXG4gIGNyZWRpdCh0KSA9IC45OSAgaWYgdDwxZCAgICMgaG91cnMgbGF0ZSAgIChubyBiaWcgZGVhbCwgYWxtb3N0IGZ1bGx5IGNvdW50cylcbiAgY3JlZGl0KHQpID0gLjkgICBpZiB0PDF3ICAgIyBkYXlzIGxhdGUgICAgKG1haW4gdGhpbmcgaXMgaXQncyBkb25lKVxuICBjcmVkaXQodCkgPSAuNSAgIGlmIHQ8MW1vICAjIHdlZWtzIGxhdGUgICAoaGFsZiBjb3VudHMgaWYgdGhpcyBsYXRlKVxuICBjcmVkaXQodCkgPSAuMSAgIGlmIHQ8MXkgICAjIG1vbnRocyBsYXRlICAobW9zdGx5IGRvZXNuJ3QgY291bnQpXG4gIGNyZWRpdCh0KSA9IC4wMSAgaWYgdDwxMHkgICMgeWVhcnMgbGF0ZSAgIChiZXR0ZXIgbGF0ZSB0aGFuIG5ldmVyLCBiYXJlbHkpXG4gIGNyZWRpdCh0KSA9IDAgICAgb3RoZXJ3aXNlICMgZGVjYWRlcyBsYXRlICh6ZXJvIG9yIGVzc2VudGlhbGx5IHplcm8gY3JlZGl0KVxuKi9cblxuY29uc3QgU0lIID0gMzYwMCAgICAgICAgLy8gc2Vjb25kcyBpbiBob3VyXG5jb25zdCBTSUQgPSA4NjQwMCAgICAgICAvLyBzZWNvbmRzIGluIGRheVxuY29uc3QgU0lXID0gU0lEKjcgICAgICAgLy8gc2Vjb25kcyBpbiB3ZWVrXG5jb25zdCBESVkgPSAzNjUuMjUgICAgICAvLyBkYXlzIGluIHllYXJcbmNvbnN0IFNJTSA9IFNJRCpESVkvMTIgIC8vIHNlY29uZHMgaW4gbW9udGhcbmNvbnN0IFNJWSA9IFNJRCpESVkgICAgIC8vIHNlY29uZHMgaW4geWVhclxuXG4vLyBMaW5lYXJseSBpbnRlcnBvbGF0ZSB0byByZXR1cm4gdSB3aGVuIHg9YSBhbmQgdiB3aGVuIHg9YlxuLy8gTk9UIENVUlJFTlRMWSBVU0VEIGFuZCBpbiBmYWN0IGlzIGVxdWl2YWxlbnQgdG8gaHNjYWxlIHdpdGggaD0tMVxuZnVuY3Rpb24gbHNjYWxlKHgsIGEsIGIsIHUsIHYpIHsgcmV0dXJuIChiKnUgLSBhKnYgKyAodi11KSp4KS8oYi1hKSB9XG5cbi8vIEV4cG9uZW50aWFsbHkgaW50ZXJwb2xhdGUgdG8gcmV0dXJuIHUgd2hlbiB4PWEgYW5kIHYgd2hlbiB4PWJcbmZ1bmN0aW9uIGVzY2FsZSh4LCBhLCBiLCB1LCB2KSB7XG4gIHJldHVybiB1Kk1hdGgucG93KHUvdiwgYS8oYi1hKSkqTWF0aC5leHAoTWF0aC5sb2codi91KS8oYi1hKSp4KVxufVxuXG4vLyBEbyBhbiBoLWludGVycG9sYXRpb24gdG8gcmV0dXJuIHUgd2hlbiB4PWEgYW5kIHYgd2hlbiB4PWIuIFxuLy8gU3BlY2lhbCBjYXNlczogaD0tMSBpcyBsaW5lYXIsIGg9MCBpcyBleHBvbmVudGlhbCwgaD0xIGlzIGh5cGVyYm9saWMuXG5mdW5jdGlvbiBoc2NhbGUoaCwgeCwgYSwgYiwgdSwgdikge1xuICBpZiAoaCA9PT0gMCkgeyByZXR1cm4gZXNjYWxlKHgsIGEsIGIsIHUsIHYpIH1cbiAgbGV0IHIgPSAoTWF0aC5wb3codi91LCAtaCktMSkvaC8oYS1iKVxuICByZXR1cm4gdSpNYXRoLnBvdygxLWgqciooeCAtIGEpLCAtMS9oKVxufVxuXG4vLyBDb21wdXRlIHRoZSBjcmVkaXQgeW91IGdldCBmb3IgYmVpbmcgdCBzZWNvbmRzIGxhdGVcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNyZWRpdCh0KSB7XG4gIGlmICAgICAgKHQgPD0gMCkgIHsgcmV0dXJuIDEgfSAvLyBub3QgbGF0ZSBhdCBhbGwsIG9yIGVhcmx5LCBtZWFucyBmdWxsIGNyZWRpdFxuICBlbHNlIGlmICh0IDwgNjApICB7IHJldHVybiBoc2NhbGUoMzAwMDAwLCB0LCAwLCAgICA2MCwgICAgMSwgICAgICAuOTk5OTkpIH1cbiAgZWxzZSBpZiAodCA8IFNJSCkgeyByZXR1cm4gaHNjYWxlKDMwMDAsICAgdCwgNjAsICBTSUgsICAgIC45OTk5OSwgLjk5OSkgICB9XG4gIGVsc2UgaWYgKHQgPCBTSUQpIHsgcmV0dXJuIGhzY2FsZSg1NDgsICAgIHQsIFNJSCwgU0lELCAgICAuOTk5LCAgIC45OSkgICAgfVxuICBlbHNlIGlmICh0IDwgU0lXKSB7IHJldHVybiBoc2NhbGUoMzIsICAgICB0LCBTSUQsIFNJVywgICAgLjk5LCAgICAuOSkgICAgIH1cbiAgZWxzZSBpZiAodCA8IFNJTSkgeyByZXR1cm4gaHNjYWxlKDUuNCwgICAgdCwgU0lXLCBTSU0sICAgIC45LCAgICAgLjUpICAgICB9XG4gIGVsc2UgaWYgKHQgPCBTSVkpIHsgcmV0dXJuIGhzY2FsZSg0LjIsICAgIHQsIFNJTSwgU0lZLCAgICAuNSwgICAgIC4xKSAgICAgfVxuICBlbHNlICAgICAgICAgICAgICB7IHJldHVybiBoc2NhbGUoNCwgICAgICB0LCBTSVksIDEwKlNJWSwgLjEsICAgICAuMDEpICAgIH1cbn1cblxuLyogXG5BbiBhbHRlcm5hdGl2ZSBzaW1wbGUgbGF0ZSBwZW5hbHR5IGZ1bmN0aW9uIEkndmUgdXNlZCBiZWZvcmUgaW4gYW5vdGhlciBjb250ZXh0IFxuaXMgMS0odC8oODY0MDAqNykpXjQgd2hpY2ggZ2l2ZXMgeW91IGEgY291cGxlIGRheXMgb2YgdmVyeSBsaXR0bGUgcGVuYWx0eSBhbmRcbnRoZW4geW91ciBjcmVkaXQgcGx1bW1ldHMgdGlsbCB5b3UgZ2V0IDAgY3JlZGl0IGZvciBiZWluZyBtb3JlIHRoYW4gYSB3ZWVrIGxhdGUuXG4qL1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gODBjaGFycyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPlxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "latepenalty.js"
      ],
      "names": [
        "credit",
        "SIH",
        "SID",
        "SIW",
        "DIY",
        "SIM",
        "SIY",
        "lscale",
        "x",
        "a",
        "b",
        "u",
        "v",
        "escale",
        "Math",
        "pow",
        "exp",
        "log",
        "hscale",
        "h",
        "r",
        "t"
      ],
      "mappings": ";;;;;kBAwCwBA,M;AAxCxB;;AAEA;;;;;;;;;;;;;AAaA,IAAMC,MAAM,IAAZ,C,CAAwB;AACxB,IAAMC,MAAM,KAAZ,C,CAAwB;AACxB,IAAMC,MAAMD,MAAI,CAAhB,C,CAAwB;AACxB,IAAME,MAAM,MAAZ,C,CAAwB;AACxB,IAAMC,MAAMH,MAAIE,GAAJ,GAAQ,EAApB,C,CAAwB;AACxB,IAAME,MAAMJ,MAAIE,GAAhB,C,CAAwB;;AAExB;AACA;AACA,SAASG,MAAT,CAAgBC,CAAhB,EAAmBC,CAAnB,EAAsBC,CAAtB,EAAyBC,CAAzB,EAA4BC,CAA5B,EAA+B;AAAE,SAAO,CAACF,IAAEC,CAAF,GAAMF,IAAEG,CAAR,GAAY,CAACA,IAAED,CAAH,IAAMH,CAAnB,KAAuBE,IAAED,CAAzB,CAAP;AAAoC;;AAErE;AACA,SAASI,MAAT,CAAgBL,CAAhB,EAAmBC,CAAnB,EAAsBC,CAAtB,EAAyBC,CAAzB,EAA4BC,CAA5B,EAA+B;AAC7B,SAAOD,IAAEG,KAAKC,GAAL,CAASJ,IAAEC,CAAX,EAAcH,KAAGC,IAAED,CAAL,CAAd,CAAF,GAAyBK,KAAKE,GAAL,CAASF,KAAKG,GAAL,CAASL,IAAED,CAAX,KAAeD,IAAED,CAAjB,IAAoBD,CAA7B,CAAhC;AACD;;AAED;AACA;AACA,SAASU,MAAT,CAAgBC,CAAhB,EAAmBX,CAAnB,EAAsBC,CAAtB,EAAyBC,CAAzB,EAA4BC,CAA5B,EAA+BC,CAA/B,EAAkC;AAChC,MAAIO,MAAM,CAAV,EAAa;AAAE,WAAON,OAAOL,CAAP,EAAUC,CAAV,EAAaC,CAAb,EAAgBC,CAAhB,EAAmBC,CAAnB,CAAP;AAA8B;AAC7C,MAAIQ,IAAI,CAACN,KAAKC,GAAL,CAASH,IAAED,CAAX,EAAc,CAACQ,CAAf,IAAkB,CAAnB,IAAsBA,CAAtB,IAAyBV,IAAEC,CAA3B,CAAR;AACA,SAAOC,IAAEG,KAAKC,GAAL,CAAS,IAAEI,IAAEC,CAAF,IAAKZ,IAAIC,CAAT,CAAX,EAAwB,CAAC,CAAD,GAAGU,CAA3B,CAAT;AACD;;AAED;AACe,SAASnB,MAAT,CAAgBqB,CAAhB,EAAmB;AAChC,MAASA,KAAK,CAAd,EAAkB;AAAE,WAAO,CAAP;AAAU,GAA9B,CAA+B;AAA/B,OACK,IAAIA,IAAI,EAAR,EAAa;AAAE,aAAOH,OAAO,MAAP,EAAeG,CAAf,EAAkB,CAAlB,EAAwB,EAAxB,EAA+B,CAA/B,EAAuC,MAAvC,CAAP;AAAuD,KAAtE,MACA,IAAIA,IAAIpB,GAAR,EAAa;AAAE,aAAOiB,OAAO,IAAP,EAAeG,CAAf,EAAkB,EAAlB,EAAuBpB,GAAvB,EAA+B,MAA/B,EAAuC,IAAvC,CAAP;AAAuD,KAAtE,MACA,IAAIoB,IAAInB,GAAR,EAAa;AAAE,aAAOgB,OAAO,GAAP,EAAeG,CAAf,EAAkBpB,GAAlB,EAAuBC,GAAvB,EAA+B,IAA/B,EAAuC,GAAvC,CAAP;AAAuD,KAAtE,MACA,IAAImB,IAAIlB,GAAR,EAAa;AAAE,aAAOe,OAAO,EAAP,EAAeG,CAAf,EAAkBnB,GAAlB,EAAuBC,GAAvB,EAA+B,GAA/B,EAAuC,EAAvC,CAAP;AAAuD,KAAtE,MACA,IAAIkB,IAAIhB,GAAR,EAAa;AAAE,aAAOa,OAAO,GAAP,EAAeG,CAAf,EAAkBlB,GAAlB,EAAuBE,GAAvB,EAA+B,EAA/B,EAAuC,EAAvC,CAAP;AAAuD,KAAtE,MACA,IAAIgB,IAAIf,GAAR,EAAa;AAAE,aAAOY,OAAO,GAAP,EAAeG,CAAf,EAAkBhB,GAAlB,EAAuBC,GAAvB,EAA+B,EAA/B,EAAuC,EAAvC,CAAP;AAAuD,KAAtE,MACa;AAAE,aAAOY,OAAO,CAAP,EAAeG,CAAf,EAAkBf,GAAlB,EAAuB,KAAGA,GAA1B,EAA+B,EAA/B,EAAuC,GAAvC,CAAP;AAAuD;AAC5E;;AAED;;;;;;AAMA",
      "file": "latepenalty.js",
      "sourceRoot": "/app/lib",
      "sourcesContent": [
        "// --------------------------------- 80chars ---------------------------------->\n\n/* The main function here is credit(t) which computes the fraction of full \ncredit you get for being t seconds late. It's roughly a continuous version of\nthe following:\n  credit(t) = 1    if t<60s  # seconds late (no or almost no penalty)\n  credit(t) = .999 if t<1h   # minutes late (baaaasically counts)\n  credit(t) = .99  if t<1d   # hours late   (no big deal, almost fully counts)\n  credit(t) = .9   if t<1w   # days late    (main thing is it's done)\n  credit(t) = .5   if t<1mo  # weeks late   (half counts if this late)\n  credit(t) = .1   if t<1y   # months late  (mostly doesn't count)\n  credit(t) = .01  if t<10y  # years late   (better late than never, barely)\n  credit(t) = 0    otherwise # decades late (zero or essentially zero credit)\n*/\n\nconst SIH = 3600        // seconds in hour\nconst SID = 86400       // seconds in day\nconst SIW = SID*7       // seconds in week\nconst DIY = 365.25      // days in year\nconst SIM = SID*DIY/12  // seconds in month\nconst SIY = SID*DIY     // seconds in year\n\n// Linearly interpolate to return u when x=a and v when x=b\n// NOT CURRENTLY USED and in fact is equivalent to hscale with h=-1\nfunction lscale(x, a, b, u, v) { return (b*u - a*v + (v-u)*x)/(b-a) }\n\n// Exponentially interpolate to return u when x=a and v when x=b\nfunction escale(x, a, b, u, v) {\n  return u*Math.pow(u/v, a/(b-a))*Math.exp(Math.log(v/u)/(b-a)*x)\n}\n\n// Do an h-interpolation to return u when x=a and v when x=b. \n// Special cases: h=-1 is linear, h=0 is exponential, h=1 is hyperbolic.\nfunction hscale(h, x, a, b, u, v) {\n  if (h === 0) { return escale(x, a, b, u, v) }\n  let r = (Math.pow(v/u, -h)-1)/h/(a-b)\n  return u*Math.pow(1-h*r*(x - a), -1/h)\n}\n\n// Compute the credit you get for being t seconds late\nexport default function credit(t) {\n  if      (t <= 0)  { return 1 } // not late at all, or early, means full credit\n  else if (t < 60)  { return hscale(300000, t, 0,    60,    1,      .99999) }\n  else if (t < SIH) { return hscale(3000,   t, 60,  SIH,    .99999, .999)   }\n  else if (t < SID) { return hscale(548,    t, SIH, SID,    .999,   .99)    }\n  else if (t < SIW) { return hscale(32,     t, SID, SIW,    .99,    .9)     }\n  else if (t < SIM) { return hscale(5.4,    t, SIW, SIM,    .9,     .5)     }\n  else if (t < SIY) { return hscale(4.2,    t, SIM, SIY,    .5,     .1)     }\n  else              { return hscale(4,      t, SIY, 10*SIY, .1,     .01)    }\n}\n\n/* \nAn alternative simple late penalty function I've used before in another context \nis 1-(t/(86400*7))^4 which gives you a couple days of very little penalty and\nthen your credit plummets till you get 0 credit for being more than a week late.\n*/\n\n// --------------------------------- 80chars ---------------------------------->\n"
      ]
    },
    "mtime": 1507508619341
  },
  "{\"filename\":\"/app/lib/parse.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/lib\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "chrono-node",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "chrono"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "parseprom",
            "urtx"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "parseprom",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "urtx",
              "exported": "default"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/lib/parse.js",
      "filenameRelative": "/app/lib/parse.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "parse.js",
      "sourceFileName": "parse.js",
      "sourceRoot": "/app/lib",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/lib",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "parse"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = parseprom;\n\nvar _chronoNode = require('chrono-node');\n\nvar _chronoNode2 = _interopRequireDefault(_chronoNode);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Take urtext and return a promise data structure\nfunction parseprom(urtx) {\n  // TODO: we should store a lowerCased version of urtx to use as the ID\n  // to prevent creating 'duplicate' promises with capitalization differences\n  // urtx = urtx.toLowerCase();\n\n  console.log('DEBUG ' + urtx);\n  // Parse urtext into username, domain, and path -- username.commits.to/path\n  // This version assumes no dots in usernames, so bob.really.commits.to would\n  // parse as username \"bob\" and domain \"really.commits.to\":\n  var m = urtx.match(/^([^\\.]+)\\.([^\\.\\/]+\\.[^\\/]+)\\/?(.*)$/);\n  // TODO: handle the case that no user is given, just \"promises.to/foo\"\n  console.log('DEBUG PARSING: ' + JSON.stringify(m));\n  var user = m ? m[1] : '';\n  var domain = m ? m[2] : '';\n  var path = m ? m[3] : '';\n  // following should never happen -- we have a route for the empty promise case\n  if (!path || path === '') {\n    console.log('ERROR: empty promise: ' + urtx);\n  }\n  var what = '';\n  var tdue = Date.now() + 7 * 24 * 60 * 60 * 1000;\n  if (path.length > 0) {\n    var parsedPath = path.match(/^(.*?)(\\/by\\/|$)(.*)$/);\n\n    tdue = parsedPath[3];\n    // tdue = parseDate(parsedPath[3])\n    what = replaceSeparatorWithSpaces(parsedPath[1]);\n\n    //tdue = parsedPath.length > 1 ? \n    //       chrono.parseDate(parsedPath[3].replace(/_/g, ' ')) * 1 : \n    //       Date.now() + 7*24*60*60*1000\n    //tdue = tdue ? ( ( tdue < Date.now() && Date.now() - tdue < 24*60*60*1000 ) ?\n    //                tdue + 24*60*60*1000 : tdue )\n    //            : Date.now() + 7*24*60*60*1000\n  }\n  // TODO: path is now everything after \".promises.to\" so now parse out the \n  //       \"what\" (thing being promised) and the \"tdue\" (deadline)\n  console.log('parseProm', { user: user, path: path, domain: domain, what: what, tdue: tdue, urtx: urtx });\n  return { user: user, path: path, domain: domain, what: what, tdue: tdue, urtx: urtx, tini: Date.now() };\n}\n\nfunction replaceSeparatorWithSpaces(string) {\n  // TODO: (maybe) Escaping characters?\n  var dash_regex = new RegExp('-', 'g');\n  var underscore_regex = new RegExp('_', 'g');\n\n  try {\n    var dashes = string.match(dash_regex).length;\n  } catch (e) {\n    var dashes = 0;\n  }\n  try {\n    var underscores = string.match(underscore_regex).length;\n  } catch (e) {\n    var underscores = 0;\n  }\n\n  if (dashes > underscores) {\n    var separator = dash_regex;\n  } else if (underscores > dashes) {\n    var separator = underscore_regex;\n  } else {\n    return string;\n  }\n\n  return string.replace(separator, ' ');\n}\n\nfunction parseDate(string) {\n  // TODO: user's timezone\n  // TODO: unix time format for db\n  if (string.length) {\n    try {\n      return _chronoNode2.default.parseDate(replaceSeparatorWithSpaces(string));\n    } catch (e) {}\n  }\n  return _chronoNode2.default.parseDate('next week');\n}\n\n// TODO: Evaluate the usefulness of the function below for creating a \"Add to Calendar\" text button under a newly created promise  \n//function buildAddToCalendarHTML(what,tdue) {\n//  var googleCalendarHTML = '<a href=\"http://www.google.com/calendar/event?action=TEMPLATE&text=Your+IWill+Promise+to+';\n//  googleCalendarHTML += what;\n//  googleCalendarHTML += '+is+due';\n//  googleCalendarHTML += '&dates=';\n//  need to convert tdue to YYYYMMDDToHHMMSSZ/YYYYMMDDToHHMMSSZ (in Greenwich Mean Time with end time default to one hour after start time)\n//  var convertedTdue = '';\n//  googleCalendarHTML += convertedTdue;\n//  googleCalendarHTML += '\"';\n//  googleCalendarHTML += ' target=\"_blank\" rel=\"nofollow\"';\n//  googleCalendarHTML += '>Add to my calendar</a>';\n//  return googleCalendarHTML;\n//}\n//Then perhaps use the returned HTML in a partials/button.handlebars file (not created yet) that only shows up upon initial creation of promise\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhcnNlLmpzIl0sIm5hbWVzIjpbInBhcnNlcHJvbSIsInVydHgiLCJjb25zb2xlIiwibG9nIiwibSIsIm1hdGNoIiwiSlNPTiIsInN0cmluZ2lmeSIsInVzZXIiLCJkb21haW4iLCJwYXRoIiwid2hhdCIsInRkdWUiLCJEYXRlIiwibm93IiwibGVuZ3RoIiwicGFyc2VkUGF0aCIsInJlcGxhY2VTZXBhcmF0b3JXaXRoU3BhY2VzIiwidGluaSIsInN0cmluZyIsImRhc2hfcmVnZXgiLCJSZWdFeHAiLCJ1bmRlcnNjb3JlX3JlZ2V4IiwiZGFzaGVzIiwiZSIsInVuZGVyc2NvcmVzIiwic2VwYXJhdG9yIiwicmVwbGFjZSIsInBhcnNlRGF0ZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7a0JBR3dCQSxTOztBQUh4Qjs7Ozs7O0FBRUE7QUFDZSxTQUFTQSxTQUFULENBQW1CQyxJQUFuQixFQUF5QjtBQUN0QztBQUNBO0FBQ0E7O0FBRUFDLFVBQVFDLEdBQVIsWUFBcUJGLElBQXJCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBSUcsSUFBSUgsS0FBS0ksS0FBTCxDQUFXLHVDQUFYLENBQVI7QUFDQTtBQUNBSCxVQUFRQyxHQUFSLHFCQUE4QkcsS0FBS0MsU0FBTCxDQUFlSCxDQUFmLENBQTlCO0FBQ0EsTUFBSUksT0FBU0osSUFBSUEsRUFBRSxDQUFGLENBQUosR0FBVyxFQUF4QjtBQUNBLE1BQUlLLFNBQVNMLElBQUlBLEVBQUUsQ0FBRixDQUFKLEdBQVcsRUFBeEI7QUFDQSxNQUFJTSxPQUFTTixJQUFJQSxFQUFFLENBQUYsQ0FBSixHQUFXLEVBQXhCO0FBQ0E7QUFDQSxNQUFJLENBQUNNLElBQUQsSUFBU0EsU0FBUyxFQUF0QixFQUEwQjtBQUFFUixZQUFRQyxHQUFSLDRCQUFxQ0YsSUFBckM7QUFBOEM7QUFDMUUsTUFBSVUsT0FBTyxFQUFYO0FBQ0EsTUFBSUMsT0FBT0MsS0FBS0MsR0FBTCxLQUFhLElBQUUsRUFBRixHQUFLLEVBQUwsR0FBUSxFQUFSLEdBQVcsSUFBbkM7QUFDQSxNQUFJSixLQUFLSyxNQUFMLEdBQWMsQ0FBbEIsRUFBcUI7QUFDbkIsUUFBSUMsYUFBYU4sS0FBS0wsS0FBTCxDQUFXLHVCQUFYLENBQWpCOztBQUVBTyxXQUFPSSxXQUFXLENBQVgsQ0FBUDtBQUNBO0FBQ0FMLFdBQU9NLDJCQUEyQkQsV0FBVyxDQUFYLENBQTNCLENBQVA7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Q7QUFDRDtBQUNBO0FBQ0FkLFVBQVFDLEdBQVIsQ0FBWSxXQUFaLEVBQXlCLEVBQUVLLFVBQUYsRUFBUUUsVUFBUixFQUFjRCxjQUFkLEVBQXNCRSxVQUF0QixFQUE0QkMsVUFBNUIsRUFBa0NYLFVBQWxDLEVBQXpCO0FBQ0EsU0FBTyxFQUFFTyxVQUFGLEVBQVFFLFVBQVIsRUFBY0QsY0FBZCxFQUFzQkUsVUFBdEIsRUFBNEJDLFVBQTVCLEVBQWtDWCxVQUFsQyxFQUF3Q2lCLE1BQU1MLEtBQUtDLEdBQUwsRUFBOUMsRUFBUDtBQUNEOztBQUVELFNBQVNHLDBCQUFULENBQW9DRSxNQUFwQyxFQUE0QztBQUMxQztBQUNBLE1BQUlDLGFBQWEsSUFBSUMsTUFBSixDQUFXLEdBQVgsRUFBZ0IsR0FBaEIsQ0FBakI7QUFDQSxNQUFJQyxtQkFBbUIsSUFBSUQsTUFBSixDQUFXLEdBQVgsRUFBZ0IsR0FBaEIsQ0FBdkI7O0FBRUEsTUFBSTtBQUNGLFFBQUlFLFNBQVNKLE9BQU9kLEtBQVAsQ0FBYWUsVUFBYixFQUF5QkwsTUFBdEM7QUFDRCxHQUZELENBRUUsT0FBT1MsQ0FBUCxFQUFVO0FBQ1YsUUFBSUQsU0FBUyxDQUFiO0FBQ0Q7QUFDRCxNQUFJO0FBQ0YsUUFBSUUsY0FBY04sT0FBT2QsS0FBUCxDQUFhaUIsZ0JBQWIsRUFBK0JQLE1BQWpEO0FBQ0QsR0FGRCxDQUVFLE9BQU9TLENBQVAsRUFBVTtBQUNWLFFBQUlDLGNBQWMsQ0FBbEI7QUFDRDs7QUFFRCxNQUFJRixTQUFTRSxXQUFiLEVBQTBCO0FBQ3hCLFFBQUlDLFlBQVlOLFVBQWhCO0FBQ0QsR0FGRCxNQUVPLElBQUlLLGNBQWNGLE1BQWxCLEVBQTBCO0FBQy9CLFFBQUlHLFlBQVlKLGdCQUFoQjtBQUNELEdBRk0sTUFFQTtBQUNMLFdBQU9ILE1BQVA7QUFDRDs7QUFFRCxTQUFPQSxPQUFPUSxPQUFQLENBQWVELFNBQWYsRUFBMEIsR0FBMUIsQ0FBUDtBQUNEOztBQUVELFNBQVNFLFNBQVQsQ0FBbUJULE1BQW5CLEVBQTJCO0FBQ3pCO0FBQ0E7QUFDQSxNQUFJQSxPQUFPSixNQUFYLEVBQW1CO0FBQ2pCLFFBQUk7QUFDRixhQUFPLHFCQUFPYSxTQUFQLENBQWlCWCwyQkFBMkJFLE1BQTNCLENBQWpCLENBQVA7QUFDRCxLQUZELENBRUUsT0FBT0ssQ0FBUCxFQUFVLENBQ1g7QUFDRjtBQUNELFNBQU8scUJBQU9JLFNBQVAsQ0FBaUIsV0FBakIsQ0FBUDtBQUNEOztBQUdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJwYXJzZS5qcyIsInNvdXJjZVJvb3QiOiIvYXBwL2xpYiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjaHJvbm8gZnJvbSAnY2hyb25vLW5vZGUnXG5cbi8vIFRha2UgdXJ0ZXh0IGFuZCByZXR1cm4gYSBwcm9taXNlIGRhdGEgc3RydWN0dXJlXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBwYXJzZXByb20odXJ0eCkge1xuICAvLyBUT0RPOiB3ZSBzaG91bGQgc3RvcmUgYSBsb3dlckNhc2VkIHZlcnNpb24gb2YgdXJ0eCB0byB1c2UgYXMgdGhlIElEXG4gIC8vIHRvIHByZXZlbnQgY3JlYXRpbmcgJ2R1cGxpY2F0ZScgcHJvbWlzZXMgd2l0aCBjYXBpdGFsaXphdGlvbiBkaWZmZXJlbmNlc1xuICAvLyB1cnR4ID0gdXJ0eC50b0xvd2VyQ2FzZSgpO1xuICBcbiAgY29uc29sZS5sb2coYERFQlVHICR7dXJ0eH1gKVxuICAvLyBQYXJzZSB1cnRleHQgaW50byB1c2VybmFtZSwgZG9tYWluLCBhbmQgcGF0aCAtLSB1c2VybmFtZS5jb21taXRzLnRvL3BhdGhcbiAgLy8gVGhpcyB2ZXJzaW9uIGFzc3VtZXMgbm8gZG90cyBpbiB1c2VybmFtZXMsIHNvIGJvYi5yZWFsbHkuY29tbWl0cy50byB3b3VsZFxuICAvLyBwYXJzZSBhcyB1c2VybmFtZSBcImJvYlwiIGFuZCBkb21haW4gXCJyZWFsbHkuY29tbWl0cy50b1wiOlxuICBsZXQgbSA9IHVydHgubWF0Y2goL14oW15cXC5dKylcXC4oW15cXC5cXC9dK1xcLlteXFwvXSspXFwvPyguKikkLylcbiAgLy8gVE9ETzogaGFuZGxlIHRoZSBjYXNlIHRoYXQgbm8gdXNlciBpcyBnaXZlbiwganVzdCBcInByb21pc2VzLnRvL2Zvb1wiXG4gIGNvbnNvbGUubG9nKGBERUJVRyBQQVJTSU5HOiAke0pTT04uc3RyaW5naWZ5KG0pfWApXG4gIGxldCB1c2VyICAgPSBtID8gbVsxXSA6ICcnXG4gIGxldCBkb21haW4gPSBtID8gbVsyXSA6ICcnXG4gIGxldCBwYXRoICAgPSBtID8gbVszXSA6ICcnXG4gIC8vIGZvbGxvd2luZyBzaG91bGQgbmV2ZXIgaGFwcGVuIC0tIHdlIGhhdmUgYSByb3V0ZSBmb3IgdGhlIGVtcHR5IHByb21pc2UgY2FzZVxuICBpZiAoIXBhdGggfHwgcGF0aCA9PT0gJycpIHsgY29uc29sZS5sb2coYEVSUk9SOiBlbXB0eSBwcm9taXNlOiAke3VydHh9YCkgfVxuICBsZXQgd2hhdCA9ICcnXG4gIGxldCB0ZHVlID0gRGF0ZS5ub3coKSArIDcqMjQqNjAqNjAqMTAwMFxuICBpZiAocGF0aC5sZW5ndGggPiAwKSB7XG4gICAgbGV0IHBhcnNlZFBhdGggPSBwYXRoLm1hdGNoKC9eKC4qPykoXFwvYnlcXC98JCkoLiopJC8pXG4gICAgXG4gICAgdGR1ZSA9IHBhcnNlZFBhdGhbM11cbiAgICAvLyB0ZHVlID0gcGFyc2VEYXRlKHBhcnNlZFBhdGhbM10pXG4gICAgd2hhdCA9IHJlcGxhY2VTZXBhcmF0b3JXaXRoU3BhY2VzKHBhcnNlZFBhdGhbMV0pXG4gICAgXG4gICAgLy90ZHVlID0gcGFyc2VkUGF0aC5sZW5ndGggPiAxID8gXG4gICAgLy8gICAgICAgY2hyb25vLnBhcnNlRGF0ZShwYXJzZWRQYXRoWzNdLnJlcGxhY2UoL18vZywgJyAnKSkgKiAxIDogXG4gICAgLy8gICAgICAgRGF0ZS5ub3coKSArIDcqMjQqNjAqNjAqMTAwMFxuICAgIC8vdGR1ZSA9IHRkdWUgPyAoICggdGR1ZSA8IERhdGUubm93KCkgJiYgRGF0ZS5ub3coKSAtIHRkdWUgPCAyNCo2MCo2MCoxMDAwICkgP1xuICAgIC8vICAgICAgICAgICAgICAgIHRkdWUgKyAyNCo2MCo2MCoxMDAwIDogdGR1ZSApXG4gICAgLy8gICAgICAgICAgICA6IERhdGUubm93KCkgKyA3KjI0KjYwKjYwKjEwMDBcbiAgfVxuICAvLyBUT0RPOiBwYXRoIGlzIG5vdyBldmVyeXRoaW5nIGFmdGVyIFwiLnByb21pc2VzLnRvXCIgc28gbm93IHBhcnNlIG91dCB0aGUgXG4gIC8vICAgICAgIFwid2hhdFwiICh0aGluZyBiZWluZyBwcm9taXNlZCkgYW5kIHRoZSBcInRkdWVcIiAoZGVhZGxpbmUpXG4gIGNvbnNvbGUubG9nKCdwYXJzZVByb20nLCB7IHVzZXIsIHBhdGgsIGRvbWFpbiwgd2hhdCwgdGR1ZSwgdXJ0eCB9KVxuICByZXR1cm4geyB1c2VyLCBwYXRoLCBkb21haW4sIHdoYXQsIHRkdWUsIHVydHgsIHRpbmk6IERhdGUubm93KCkgfVxufVxuXG5mdW5jdGlvbiByZXBsYWNlU2VwYXJhdG9yV2l0aFNwYWNlcyhzdHJpbmcpIHtcbiAgLy8gVE9ETzogKG1heWJlKSBFc2NhcGluZyBjaGFyYWN0ZXJzP1xuICB2YXIgZGFzaF9yZWdleCA9IG5ldyBSZWdFeHAoJy0nLCAnZycpO1xuICB2YXIgdW5kZXJzY29yZV9yZWdleCA9IG5ldyBSZWdFeHAoJ18nLCAnZycpO1xuICBcbiAgdHJ5IHtcbiAgICB2YXIgZGFzaGVzID0gc3RyaW5nLm1hdGNoKGRhc2hfcmVnZXgpLmxlbmd0aDtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHZhciBkYXNoZXMgPSAwO1xuICB9XG4gIHRyeSB7XG4gICAgdmFyIHVuZGVyc2NvcmVzID0gc3RyaW5nLm1hdGNoKHVuZGVyc2NvcmVfcmVnZXgpLmxlbmd0aDtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHZhciB1bmRlcnNjb3JlcyA9IDA7XG4gIH1cblxuICBpZiAoZGFzaGVzID4gdW5kZXJzY29yZXMpIHtcbiAgICB2YXIgc2VwYXJhdG9yID0gZGFzaF9yZWdleDtcbiAgfSBlbHNlIGlmICh1bmRlcnNjb3JlcyA+IGRhc2hlcykge1xuICAgIHZhciBzZXBhcmF0b3IgPSB1bmRlcnNjb3JlX3JlZ2V4O1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBzdHJpbmc7XG4gIH1cblxuICByZXR1cm4gc3RyaW5nLnJlcGxhY2Uoc2VwYXJhdG9yLCAnICcpO1xufVxuXG5mdW5jdGlvbiBwYXJzZURhdGUoc3RyaW5nKSB7XG4gIC8vIFRPRE86IHVzZXIncyB0aW1lem9uZVxuICAvLyBUT0RPOiB1bml4IHRpbWUgZm9ybWF0IGZvciBkYlxuICBpZiAoc3RyaW5nLmxlbmd0aCkge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gY2hyb25vLnBhcnNlRGF0ZShyZXBsYWNlU2VwYXJhdG9yV2l0aFNwYWNlcyhzdHJpbmcpKVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGNocm9uby5wYXJzZURhdGUoJ25leHQgd2VlaycpXG59XG5cblxuLy8gVE9ETzogRXZhbHVhdGUgdGhlIHVzZWZ1bG5lc3Mgb2YgdGhlIGZ1bmN0aW9uIGJlbG93IGZvciBjcmVhdGluZyBhIFwiQWRkIHRvIENhbGVuZGFyXCIgdGV4dCBidXR0b24gdW5kZXIgYSBuZXdseSBjcmVhdGVkIHByb21pc2UgIFxuLy9mdW5jdGlvbiBidWlsZEFkZFRvQ2FsZW5kYXJIVE1MKHdoYXQsdGR1ZSkge1xuLy8gIHZhciBnb29nbGVDYWxlbmRhckhUTUwgPSAnPGEgaHJlZj1cImh0dHA6Ly93d3cuZ29vZ2xlLmNvbS9jYWxlbmRhci9ldmVudD9hY3Rpb249VEVNUExBVEUmdGV4dD1Zb3VyK0lXaWxsK1Byb21pc2UrdG8rJztcbi8vICBnb29nbGVDYWxlbmRhckhUTUwgKz0gd2hhdDtcbi8vICBnb29nbGVDYWxlbmRhckhUTUwgKz0gJytpcytkdWUnO1xuLy8gIGdvb2dsZUNhbGVuZGFySFRNTCArPSAnJmRhdGVzPSc7XG4vLyAgbmVlZCB0byBjb252ZXJ0IHRkdWUgdG8gWVlZWU1NRERUb0hITU1TU1ovWVlZWU1NRERUb0hITU1TU1ogKGluIEdyZWVud2ljaCBNZWFuIFRpbWUgd2l0aCBlbmQgdGltZSBkZWZhdWx0IHRvIG9uZSBob3VyIGFmdGVyIHN0YXJ0IHRpbWUpXG4vLyAgdmFyIGNvbnZlcnRlZFRkdWUgPSAnJztcbi8vICBnb29nbGVDYWxlbmRhckhUTUwgKz0gY29udmVydGVkVGR1ZTtcbi8vICBnb29nbGVDYWxlbmRhckhUTUwgKz0gJ1wiJztcbi8vICBnb29nbGVDYWxlbmRhckhUTUwgKz0gJyB0YXJnZXQ9XCJfYmxhbmtcIiByZWw9XCJub2ZvbGxvd1wiJztcbi8vICBnb29nbGVDYWxlbmRhckhUTUwgKz0gJz5BZGQgdG8gbXkgY2FsZW5kYXI8L2E+Jztcbi8vICByZXR1cm4gZ29vZ2xlQ2FsZW5kYXJIVE1MO1xuLy99XG4vL1RoZW4gcGVyaGFwcyB1c2UgdGhlIHJldHVybmVkIEhUTUwgaW4gYSBwYXJ0aWFscy9idXR0b24uaGFuZGxlYmFycyBmaWxlIChub3QgY3JlYXRlZCB5ZXQpIHRoYXQgb25seSBzaG93cyB1cCB1cG9uIGluaXRpYWwgY3JlYXRpb24gb2YgcHJvbWlzZSJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "parse.js"
      ],
      "names": [
        "parseprom",
        "urtx",
        "console",
        "log",
        "m",
        "match",
        "JSON",
        "stringify",
        "user",
        "domain",
        "path",
        "what",
        "tdue",
        "Date",
        "now",
        "length",
        "parsedPath",
        "replaceSeparatorWithSpaces",
        "tini",
        "string",
        "dash_regex",
        "RegExp",
        "underscore_regex",
        "dashes",
        "e",
        "underscores",
        "separator",
        "replace",
        "parseDate"
      ],
      "mappings": ";;;;;kBAGwBA,S;;AAHxB;;;;;;AAEA;AACe,SAASA,SAAT,CAAmBC,IAAnB,EAAyB;AACtC;AACA;AACA;;AAEAC,UAAQC,GAAR,YAAqBF,IAArB;AACA;AACA;AACA;AACA,MAAIG,IAAIH,KAAKI,KAAL,CAAW,uCAAX,CAAR;AACA;AACAH,UAAQC,GAAR,qBAA8BG,KAAKC,SAAL,CAAeH,CAAf,CAA9B;AACA,MAAII,OAASJ,IAAIA,EAAE,CAAF,CAAJ,GAAW,EAAxB;AACA,MAAIK,SAASL,IAAIA,EAAE,CAAF,CAAJ,GAAW,EAAxB;AACA,MAAIM,OAASN,IAAIA,EAAE,CAAF,CAAJ,GAAW,EAAxB;AACA;AACA,MAAI,CAACM,IAAD,IAASA,SAAS,EAAtB,EAA0B;AAAER,YAAQC,GAAR,4BAAqCF,IAArC;AAA8C;AAC1E,MAAIU,OAAO,EAAX;AACA,MAAIC,OAAOC,KAAKC,GAAL,KAAa,IAAE,EAAF,GAAK,EAAL,GAAQ,EAAR,GAAW,IAAnC;AACA,MAAIJ,KAAKK,MAAL,GAAc,CAAlB,EAAqB;AACnB,QAAIC,aAAaN,KAAKL,KAAL,CAAW,uBAAX,CAAjB;;AAEAO,WAAOI,WAAW,CAAX,CAAP;AACA;AACAL,WAAOM,2BAA2BD,WAAW,CAAX,CAA3B,CAAP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACD;AACD;AACA;AACAd,UAAQC,GAAR,CAAY,WAAZ,EAAyB,EAAEK,UAAF,EAAQE,UAAR,EAAcD,cAAd,EAAsBE,UAAtB,EAA4BC,UAA5B,EAAkCX,UAAlC,EAAzB;AACA,SAAO,EAAEO,UAAF,EAAQE,UAAR,EAAcD,cAAd,EAAsBE,UAAtB,EAA4BC,UAA5B,EAAkCX,UAAlC,EAAwCiB,MAAML,KAAKC,GAAL,EAA9C,EAAP;AACD;;AAED,SAASG,0BAAT,CAAoCE,MAApC,EAA4C;AAC1C;AACA,MAAIC,aAAa,IAAIC,MAAJ,CAAW,GAAX,EAAgB,GAAhB,CAAjB;AACA,MAAIC,mBAAmB,IAAID,MAAJ,CAAW,GAAX,EAAgB,GAAhB,CAAvB;;AAEA,MAAI;AACF,QAAIE,SAASJ,OAAOd,KAAP,CAAae,UAAb,EAAyBL,MAAtC;AACD,GAFD,CAEE,OAAOS,CAAP,EAAU;AACV,QAAID,SAAS,CAAb;AACD;AACD,MAAI;AACF,QAAIE,cAAcN,OAAOd,KAAP,CAAaiB,gBAAb,EAA+BP,MAAjD;AACD,GAFD,CAEE,OAAOS,CAAP,EAAU;AACV,QAAIC,cAAc,CAAlB;AACD;;AAED,MAAIF,SAASE,WAAb,EAA0B;AACxB,QAAIC,YAAYN,UAAhB;AACD,GAFD,MAEO,IAAIK,cAAcF,MAAlB,EAA0B;AAC/B,QAAIG,YAAYJ,gBAAhB;AACD,GAFM,MAEA;AACL,WAAOH,MAAP;AACD;;AAED,SAAOA,OAAOQ,OAAP,CAAeD,SAAf,EAA0B,GAA1B,CAAP;AACD;;AAED,SAASE,SAAT,CAAmBT,MAAnB,EAA2B;AACzB;AACA;AACA,MAAIA,OAAOJ,MAAX,EAAmB;AACjB,QAAI;AACF,aAAO,qBAAOa,SAAP,CAAiBX,2BAA2BE,MAA3B,CAAjB,CAAP;AACD,KAFD,CAEE,OAAOK,CAAP,EAAU,CACX;AACF;AACD,SAAO,qBAAOI,SAAP,CAAiB,WAAjB,CAAP;AACD;;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA",
      "file": "parse.js",
      "sourceRoot": "/app/lib",
      "sourcesContent": [
        "import chrono from 'chrono-node'\n\n// Take urtext and return a promise data structure\nexport default function parseprom(urtx) {\n  // TODO: we should store a lowerCased version of urtx to use as the ID\n  // to prevent creating 'duplicate' promises with capitalization differences\n  // urtx = urtx.toLowerCase();\n  \n  console.log(`DEBUG ${urtx}`)\n  // Parse urtext into username, domain, and path -- username.commits.to/path\n  // This version assumes no dots in usernames, so bob.really.commits.to would\n  // parse as username \"bob\" and domain \"really.commits.to\":\n  let m = urtx.match(/^([^\\.]+)\\.([^\\.\\/]+\\.[^\\/]+)\\/?(.*)$/)\n  // TODO: handle the case that no user is given, just \"promises.to/foo\"\n  console.log(`DEBUG PARSING: ${JSON.stringify(m)}`)\n  let user   = m ? m[1] : ''\n  let domain = m ? m[2] : ''\n  let path   = m ? m[3] : ''\n  // following should never happen -- we have a route for the empty promise case\n  if (!path || path === '') { console.log(`ERROR: empty promise: ${urtx}`) }\n  let what = ''\n  let tdue = Date.now() + 7*24*60*60*1000\n  if (path.length > 0) {\n    let parsedPath = path.match(/^(.*?)(\\/by\\/|$)(.*)$/)\n    \n    tdue = parsedPath[3]\n    // tdue = parseDate(parsedPath[3])\n    what = replaceSeparatorWithSpaces(parsedPath[1])\n    \n    //tdue = parsedPath.length > 1 ? \n    //       chrono.parseDate(parsedPath[3].replace(/_/g, ' ')) * 1 : \n    //       Date.now() + 7*24*60*60*1000\n    //tdue = tdue ? ( ( tdue < Date.now() && Date.now() - tdue < 24*60*60*1000 ) ?\n    //                tdue + 24*60*60*1000 : tdue )\n    //            : Date.now() + 7*24*60*60*1000\n  }\n  // TODO: path is now everything after \".promises.to\" so now parse out the \n  //       \"what\" (thing being promised) and the \"tdue\" (deadline)\n  console.log('parseProm', { user, path, domain, what, tdue, urtx })\n  return { user, path, domain, what, tdue, urtx, tini: Date.now() }\n}\n\nfunction replaceSeparatorWithSpaces(string) {\n  // TODO: (maybe) Escaping characters?\n  var dash_regex = new RegExp('-', 'g');\n  var underscore_regex = new RegExp('_', 'g');\n  \n  try {\n    var dashes = string.match(dash_regex).length;\n  } catch (e) {\n    var dashes = 0;\n  }\n  try {\n    var underscores = string.match(underscore_regex).length;\n  } catch (e) {\n    var underscores = 0;\n  }\n\n  if (dashes > underscores) {\n    var separator = dash_regex;\n  } else if (underscores > dashes) {\n    var separator = underscore_regex;\n  } else {\n    return string;\n  }\n\n  return string.replace(separator, ' ');\n}\n\nfunction parseDate(string) {\n  // TODO: user's timezone\n  // TODO: unix time format for db\n  if (string.length) {\n    try {\n      return chrono.parseDate(replaceSeparatorWithSpaces(string))\n    } catch (e) {\n    }\n  }\n  return chrono.parseDate('next week')\n}\n\n\n// TODO: Evaluate the usefulness of the function below for creating a \"Add to Calendar\" text button under a newly created promise  \n//function buildAddToCalendarHTML(what,tdue) {\n//  var googleCalendarHTML = '<a href=\"http://www.google.com/calendar/event?action=TEMPLATE&text=Your+IWill+Promise+to+';\n//  googleCalendarHTML += what;\n//  googleCalendarHTML += '+is+due';\n//  googleCalendarHTML += '&dates=';\n//  need to convert tdue to YYYYMMDDToHHMMSSZ/YYYYMMDDToHHMMSSZ (in Greenwich Mean Time with end time default to one hour after start time)\n//  var convertedTdue = '';\n//  googleCalendarHTML += convertedTdue;\n//  googleCalendarHTML += '\"';\n//  googleCalendarHTML += ' target=\"_blank\" rel=\"nofollow\"';\n//  googleCalendarHTML += '>Add to my calendar</a>';\n//  return googleCalendarHTML;\n//}\n//Then perhaps use the returned HTML in a partials/button.handlebars file (not created yet) that only shows up upon initial creation of promise"
      ]
    },
    "mtime": 1507508619357
  },
  "{\"filename\":\"/app/lib/middleware.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/lib\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "./mail.js",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "mailself"
              }
            ]
          },
          {
            "source": "./parse.js",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "parsePromise"
              }
            ]
          },
          {
            "source": "../data/seed.js",
            "imported": [
              "domain",
              "users"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "domain",
                "local": "domain"
              },
              {
                "kind": "named",
                "imported": "users",
                "local": "users"
              }
            ]
          },
          {
            "source": "../models/promise.js",
            "imported": [
              "Promise",
              "sequelize"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "Promise",
                "local": "Promise"
              },
              {
                "kind": "named",
                "imported": "sequelize",
                "local": "sequelize"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "handleRequest",
            "req",
            "resp"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "handleRequest",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "req",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "resp",
              "exported": "default"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/lib/middleware.js",
      "filenameRelative": "/app/lib/middleware.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "middleware.js",
      "sourceFileName": "middleware.js",
      "sourceRoot": "/app/lib",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/lib",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "middleware"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = handleRequest;\n\nvar _mail = require('./mail.js');\n\nvar _mail2 = _interopRequireDefault(_mail);\n\nvar _parse = require('./parse.js');\n\nvar _parse2 = _interopRequireDefault(_parse);\n\nvar _seed = require('../data/seed.js');\n\nvar _promise = require('../models/promise.js');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// --------------------------------- 80chars ---------------------------------->\nfunction handleRequest(req, resp) {\n  // The server at promises.to passes along the full URL the way the user typed\n  // it, so when the user hits \"bob.promises.to/foo\" the Glitch app is called\n  // with \"iwill.glitch.me/bob.promises.to/foo\" and req.originalUrl is\n  // \"/bob.promises.to/foo\" (req.originalUrl doesn't include the hostname which\n  // from the perspective of this Glitch app is \"iwill.glitch.me\")\n  var urtx = req.originalUrl.substr(1); // get rid of the initial slash\n  // urtx is now, eg, \"bob.promises.to/foo_the_bar/by/9am\"\n\n  // TODOLATER: how to handle \"bob.promises.to/foo%bar\"\n  // TODOLATER: need to url-decode to handle \"bob.promises.to/foo^bar\"\n  // TODOLATER: handle bob.promises.to/do_item_#2/by/9am\n  //            https://stackoverflow.com/questions/18796421/capture-anchor-link\n\n  // quick hack to make it so both bob.commits.to and bob.commits.to/ \n  // show the full list of promises:\n  urtx = urtx.replace(/\\/$/, '');\n\n  //console.log('handleRequest', req.params)\n\n  var p = (0, _parse2.default)(urtx); // p is now a hash {user, what, tini, tdue, etc}\n  console.log('DEBUG: PROMISE PARSED: ' + JSON.stringify(p));\n\n  if (p.user === 'www' || p.user === '') {\n    // this is the case of no username, like if someone just went to\n    // \"promises.to\" or tried to fetch \"promises.to/robots.txt\" or whatever\n    resp.redirect('/');\n  } else if (!_seed.users.includes(p.user)) {\n    // don't let people create new subdomains/users on the fly\n    resp.redirect('/sign-up');\n  } else {\n    // Check if a promise already exists with matching user+'|'+what\n    // If not, create it\n    // If so, do nothing\n\n    console.log('valid request', req.params);\n    _promise.Promise.findOne({ where: { urtx: urtx } }).then(function (promise) {\n      if (promise) {\n        console.log('promise exists', urtx, promise.id);\n        resp.render('promise', {\n          promise: promise\n        });\n      } else {\n        console.log('creating promise', urtx);\n        // Promise.create(p)\n        // mailself('PROMISE', urtx)\n        resp.render('promise/create', {\n          promise: p\n        });\n      }\n    });\n  }\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1pZGRsZXdhcmUuanMiXSwibmFtZXMiOlsiaGFuZGxlUmVxdWVzdCIsInJlcSIsInJlc3AiLCJ1cnR4Iiwib3JpZ2luYWxVcmwiLCJzdWJzdHIiLCJyZXBsYWNlIiwicCIsImNvbnNvbGUiLCJsb2ciLCJKU09OIiwic3RyaW5naWZ5IiwidXNlciIsInJlZGlyZWN0IiwiaW5jbHVkZXMiLCJwYXJhbXMiLCJmaW5kT25lIiwid2hlcmUiLCJ0aGVuIiwicHJvbWlzZSIsImlkIiwicmVuZGVyIl0sIm1hcHBpbmdzIjoiOzs7OztrQkFNd0JBLGE7O0FBTHhCOzs7O0FBQ0E7Ozs7QUFDQTs7QUFDQTs7OztBQUpBO0FBTWUsU0FBU0EsYUFBVCxDQUF1QkMsR0FBdkIsRUFBNEJDLElBQTVCLEVBQWtDO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFJQyxPQUFPRixJQUFJRyxXQUFKLENBQWdCQyxNQUFoQixDQUF1QixDQUF2QixDQUFYLENBTitDLENBTVY7QUFDckM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBRixTQUFPQSxLQUFLRyxPQUFMLENBQWEsS0FBYixFQUFvQixFQUFwQixDQUFQOztBQUVBOztBQUVBLE1BQUlDLElBQUkscUJBQWFKLElBQWIsQ0FBUixDQXBCK0MsQ0FvQnBCO0FBQzNCSyxVQUFRQyxHQUFSLDZCQUFzQ0MsS0FBS0MsU0FBTCxDQUFlSixDQUFmLENBQXRDOztBQUdBLE1BQUlBLEVBQUVLLElBQUYsS0FBVyxLQUFYLElBQW9CTCxFQUFFSyxJQUFGLEtBQVcsRUFBbkMsRUFBdUM7QUFDckM7QUFDQTtBQUNBVixTQUFLVyxRQUFMLENBQWMsR0FBZDtBQUNELEdBSkQsTUFJTyxJQUFJLENBQUMsWUFBTUMsUUFBTixDQUFlUCxFQUFFSyxJQUFqQixDQUFMLEVBQTZCO0FBQ2xDO0FBQ0FWLFNBQUtXLFFBQUwsQ0FBYyxVQUFkO0FBQ0QsR0FITSxNQUdBO0FBQ0w7QUFDQTtBQUNBOztBQUVBTCxZQUFRQyxHQUFSLENBQVksZUFBWixFQUE2QlIsSUFBSWMsTUFBakM7QUFDQSxxQkFBUUMsT0FBUixDQUFnQixFQUFFQyxPQUFPLEVBQUNkLFVBQUQsRUFBVCxFQUFoQixFQUNHZSxJQURILENBQ1EsbUJBQVc7QUFDZixVQUFJQyxPQUFKLEVBQWE7QUFDWFgsZ0JBQVFDLEdBQVIsQ0FBWSxnQkFBWixFQUE4Qk4sSUFBOUIsRUFBb0NnQixRQUFRQyxFQUE1QztBQUNBbEIsYUFBS21CLE1BQUwsQ0FBWSxTQUFaLEVBQXVCO0FBQ3JCRjtBQURxQixTQUF2QjtBQUdELE9BTEQsTUFLTztBQUNMWCxnQkFBUUMsR0FBUixDQUFZLGtCQUFaLEVBQWdDTixJQUFoQztBQUNBO0FBQ0E7QUFDQUQsYUFBS21CLE1BQUwsQ0FBWSxnQkFBWixFQUE4QjtBQUM1QkYsbUJBQVNaO0FBRG1CLFNBQTlCO0FBR0Q7QUFDRixLQWZIO0FBZ0JEO0FBQ0YiLCJmaWxlIjoibWlkZGxld2FyZS5qcyIsInNvdXJjZVJvb3QiOiIvYXBwL2xpYiIsInNvdXJjZXNDb250ZW50IjpbIi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSA4MGNoYXJzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+XG5pbXBvcnQgbWFpbHNlbGYgZnJvbSAnLi9tYWlsLmpzJ1xuaW1wb3J0IHBhcnNlUHJvbWlzZSBmcm9tICcuL3BhcnNlLmpzJ1xuaW1wb3J0IHsgZG9tYWluLCB1c2VycyB9IGZyb20gJy4uL2RhdGEvc2VlZC5qcydcbmltcG9ydCB7IFByb21pc2UsIHNlcXVlbGl6ZSB9IGZyb20gJy4uL21vZGVscy9wcm9taXNlLmpzJ1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBoYW5kbGVSZXF1ZXN0KHJlcSwgcmVzcCkge1xuICAvLyBUaGUgc2VydmVyIGF0IHByb21pc2VzLnRvIHBhc3NlcyBhbG9uZyB0aGUgZnVsbCBVUkwgdGhlIHdheSB0aGUgdXNlciB0eXBlZFxuICAvLyBpdCwgc28gd2hlbiB0aGUgdXNlciBoaXRzIFwiYm9iLnByb21pc2VzLnRvL2Zvb1wiIHRoZSBHbGl0Y2ggYXBwIGlzIGNhbGxlZFxuICAvLyB3aXRoIFwiaXdpbGwuZ2xpdGNoLm1lL2JvYi5wcm9taXNlcy50by9mb29cIiBhbmQgcmVxLm9yaWdpbmFsVXJsIGlzXG4gIC8vIFwiL2JvYi5wcm9taXNlcy50by9mb29cIiAocmVxLm9yaWdpbmFsVXJsIGRvZXNuJ3QgaW5jbHVkZSB0aGUgaG9zdG5hbWUgd2hpY2hcbiAgLy8gZnJvbSB0aGUgcGVyc3BlY3RpdmUgb2YgdGhpcyBHbGl0Y2ggYXBwIGlzIFwiaXdpbGwuZ2xpdGNoLm1lXCIpXG4gIGxldCB1cnR4ID0gcmVxLm9yaWdpbmFsVXJsLnN1YnN0cigxKSAvLyBnZXQgcmlkIG9mIHRoZSBpbml0aWFsIHNsYXNoXG4gIC8vIHVydHggaXMgbm93LCBlZywgXCJib2IucHJvbWlzZXMudG8vZm9vX3RoZV9iYXIvYnkvOWFtXCJcbiAgXG4gIC8vIFRPRE9MQVRFUjogaG93IHRvIGhhbmRsZSBcImJvYi5wcm9taXNlcy50by9mb28lYmFyXCJcbiAgLy8gVE9ET0xBVEVSOiBuZWVkIHRvIHVybC1kZWNvZGUgdG8gaGFuZGxlIFwiYm9iLnByb21pc2VzLnRvL2Zvb15iYXJcIlxuICAvLyBUT0RPTEFURVI6IGhhbmRsZSBib2IucHJvbWlzZXMudG8vZG9faXRlbV8jMi9ieS85YW1cbiAgLy8gICAgICAgICAgICBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xODc5NjQyMS9jYXB0dXJlLWFuY2hvci1saW5rXG4gIFxuICAvLyBxdWljayBoYWNrIHRvIG1ha2UgaXQgc28gYm90aCBib2IuY29tbWl0cy50byBhbmQgYm9iLmNvbW1pdHMudG8vIFxuICAvLyBzaG93IHRoZSBmdWxsIGxpc3Qgb2YgcHJvbWlzZXM6XG4gIHVydHggPSB1cnR4LnJlcGxhY2UoL1xcLyQvLCAnJylcbiAgXG4gIC8vY29uc29sZS5sb2coJ2hhbmRsZVJlcXVlc3QnLCByZXEucGFyYW1zKVxuICBcbiAgbGV0IHAgPSBwYXJzZVByb21pc2UodXJ0eCkgLy8gcCBpcyBub3cgYSBoYXNoIHt1c2VyLCB3aGF0LCB0aW5pLCB0ZHVlLCBldGN9XG4gIGNvbnNvbGUubG9nKGBERUJVRzogUFJPTUlTRSBQQVJTRUQ6ICR7SlNPTi5zdHJpbmdpZnkocCl9YClcbiAgXG4gIFxuICBpZiAocC51c2VyID09PSAnd3d3JyB8fCBwLnVzZXIgPT09ICcnKSB7IFxuICAgIC8vIHRoaXMgaXMgdGhlIGNhc2Ugb2Ygbm8gdXNlcm5hbWUsIGxpa2UgaWYgc29tZW9uZSBqdXN0IHdlbnQgdG9cbiAgICAvLyBcInByb21pc2VzLnRvXCIgb3IgdHJpZWQgdG8gZmV0Y2ggXCJwcm9taXNlcy50by9yb2JvdHMudHh0XCIgb3Igd2hhdGV2ZXJcbiAgICByZXNwLnJlZGlyZWN0KCcvJylcbiAgfSBlbHNlIGlmICghdXNlcnMuaW5jbHVkZXMocC51c2VyKSkge1xuICAgIC8vIGRvbid0IGxldCBwZW9wbGUgY3JlYXRlIG5ldyBzdWJkb21haW5zL3VzZXJzIG9uIHRoZSBmbHlcbiAgICByZXNwLnJlZGlyZWN0KCcvc2lnbi11cCcpXG4gIH0gZWxzZSB7XG4gICAgLy8gQ2hlY2sgaWYgYSBwcm9taXNlIGFscmVhZHkgZXhpc3RzIHdpdGggbWF0Y2hpbmcgdXNlcisnfCcrd2hhdFxuICAgIC8vIElmIG5vdCwgY3JlYXRlIGl0XG4gICAgLy8gSWYgc28sIGRvIG5vdGhpbmdcblxuICAgIGNvbnNvbGUubG9nKCd2YWxpZCByZXF1ZXN0JywgcmVxLnBhcmFtcylcbiAgICBQcm9taXNlLmZpbmRPbmUoeyB3aGVyZToge3VydHh9IH0pXG4gICAgICAudGhlbihwcm9taXNlID0+IHtcbiAgICAgICAgaWYgKHByb21pc2UpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygncHJvbWlzZSBleGlzdHMnLCB1cnR4LCBwcm9taXNlLmlkKVxuICAgICAgICAgIHJlc3AucmVuZGVyKCdwcm9taXNlJywge1xuICAgICAgICAgICAgcHJvbWlzZSxcbiAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdjcmVhdGluZyBwcm9taXNlJywgdXJ0eClcbiAgICAgICAgICAvLyBQcm9taXNlLmNyZWF0ZShwKVxuICAgICAgICAgIC8vIG1haWxzZWxmKCdQUk9NSVNFJywgdXJ0eClcbiAgICAgICAgICByZXNwLnJlbmRlcigncHJvbWlzZS9jcmVhdGUnLCB7XG4gICAgICAgICAgICBwcm9taXNlOiBwLFxuICAgICAgICAgIH0pXG4gICAgICAgIH0gICAgIFxuICAgICAgfSlcbiAgfVxufSJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "middleware.js"
      ],
      "names": [
        "handleRequest",
        "req",
        "resp",
        "urtx",
        "originalUrl",
        "substr",
        "replace",
        "p",
        "console",
        "log",
        "JSON",
        "stringify",
        "user",
        "redirect",
        "includes",
        "params",
        "findOne",
        "where",
        "then",
        "promise",
        "id",
        "render"
      ],
      "mappings": ";;;;;kBAMwBA,a;;AALxB;;;;AACA;;;;AACA;;AACA;;;;AAJA;AAMe,SAASA,aAAT,CAAuBC,GAAvB,EAA4BC,IAA5B,EAAkC;AAC/C;AACA;AACA;AACA;AACA;AACA,MAAIC,OAAOF,IAAIG,WAAJ,CAAgBC,MAAhB,CAAuB,CAAvB,CAAX,CAN+C,CAMV;AACrC;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACAF,SAAOA,KAAKG,OAAL,CAAa,KAAb,EAAoB,EAApB,CAAP;;AAEA;;AAEA,MAAIC,IAAI,qBAAaJ,IAAb,CAAR,CApB+C,CAoBpB;AAC3BK,UAAQC,GAAR,6BAAsCC,KAAKC,SAAL,CAAeJ,CAAf,CAAtC;;AAGA,MAAIA,EAAEK,IAAF,KAAW,KAAX,IAAoBL,EAAEK,IAAF,KAAW,EAAnC,EAAuC;AACrC;AACA;AACAV,SAAKW,QAAL,CAAc,GAAd;AACD,GAJD,MAIO,IAAI,CAAC,YAAMC,QAAN,CAAeP,EAAEK,IAAjB,CAAL,EAA6B;AAClC;AACAV,SAAKW,QAAL,CAAc,UAAd;AACD,GAHM,MAGA;AACL;AACA;AACA;;AAEAL,YAAQC,GAAR,CAAY,eAAZ,EAA6BR,IAAIc,MAAjC;AACA,qBAAQC,OAAR,CAAgB,EAAEC,OAAO,EAACd,UAAD,EAAT,EAAhB,EACGe,IADH,CACQ,mBAAW;AACf,UAAIC,OAAJ,EAAa;AACXX,gBAAQC,GAAR,CAAY,gBAAZ,EAA8BN,IAA9B,EAAoCgB,QAAQC,EAA5C;AACAlB,aAAKmB,MAAL,CAAY,SAAZ,EAAuB;AACrBF;AADqB,SAAvB;AAGD,OALD,MAKO;AACLX,gBAAQC,GAAR,CAAY,kBAAZ,EAAgCN,IAAhC;AACA;AACA;AACAD,aAAKmB,MAAL,CAAY,gBAAZ,EAA8B;AAC5BF,mBAASZ;AADmB,SAA9B;AAGD;AACF,KAfH;AAgBD;AACF",
      "file": "middleware.js",
      "sourceRoot": "/app/lib",
      "sourcesContent": [
        "// --------------------------------- 80chars ---------------------------------->\nimport mailself from './mail.js'\nimport parsePromise from './parse.js'\nimport { domain, users } from '../data/seed.js'\nimport { Promise, sequelize } from '../models/promise.js'\n\nexport default function handleRequest(req, resp) {\n  // The server at promises.to passes along the full URL the way the user typed\n  // it, so when the user hits \"bob.promises.to/foo\" the Glitch app is called\n  // with \"iwill.glitch.me/bob.promises.to/foo\" and req.originalUrl is\n  // \"/bob.promises.to/foo\" (req.originalUrl doesn't include the hostname which\n  // from the perspective of this Glitch app is \"iwill.glitch.me\")\n  let urtx = req.originalUrl.substr(1) // get rid of the initial slash\n  // urtx is now, eg, \"bob.promises.to/foo_the_bar/by/9am\"\n  \n  // TODOLATER: how to handle \"bob.promises.to/foo%bar\"\n  // TODOLATER: need to url-decode to handle \"bob.promises.to/foo^bar\"\n  // TODOLATER: handle bob.promises.to/do_item_#2/by/9am\n  //            https://stackoverflow.com/questions/18796421/capture-anchor-link\n  \n  // quick hack to make it so both bob.commits.to and bob.commits.to/ \n  // show the full list of promises:\n  urtx = urtx.replace(/\\/$/, '')\n  \n  //console.log('handleRequest', req.params)\n  \n  let p = parsePromise(urtx) // p is now a hash {user, what, tini, tdue, etc}\n  console.log(`DEBUG: PROMISE PARSED: ${JSON.stringify(p)}`)\n  \n  \n  if (p.user === 'www' || p.user === '') { \n    // this is the case of no username, like if someone just went to\n    // \"promises.to\" or tried to fetch \"promises.to/robots.txt\" or whatever\n    resp.redirect('/')\n  } else if (!users.includes(p.user)) {\n    // don't let people create new subdomains/users on the fly\n    resp.redirect('/sign-up')\n  } else {\n    // Check if a promise already exists with matching user+'|'+what\n    // If not, create it\n    // If so, do nothing\n\n    console.log('valid request', req.params)\n    Promise.findOne({ where: {urtx} })\n      .then(promise => {\n        if (promise) {\n          console.log('promise exists', urtx, promise.id)\n          resp.render('promise', {\n            promise,\n          })\n        } else {\n          console.log('creating promise', urtx)\n          // Promise.create(p)\n          // mailself('PROMISE', urtx)\n          resp.render('promise/create', {\n            promise: p,\n          })\n        }     \n      })\n  }\n}"
      ]
    },
    "mtime": 1507508619353
  },
  "{\"filename\":\"/app/lib/mail.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/lib\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "mailgun-js",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Mailgun"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "mailself",
            "subj",
            "body"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "mailself",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "subj",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "body",
              "exported": "default"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/lib/mail.js",
      "filenameRelative": "/app/lib/mail.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "mail.js",
      "sourceFileName": "mail.js",
      "sourceRoot": "/app/lib",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/lib",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "mail"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = mailself;\n\nvar _mailgunJs = require('mailgun-js');\n\nvar _mailgunJs2 = _interopRequireDefault(_mailgunJs);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction mailself(subj, body) {\n  var mailgun = new _mailgunJs2.default({ apiKey: process.env.MAILGUN_KEY,\n    domain: process.env.MAILGUN_DOMAIN });\n  var data = {\n    from: process.env.MAILGUN_FROM,\n    to: process.env.MY_EMAIL,\n    subject: subj,\n    text: body\n  };\n  mailgun.messages().send(data, function (err, body) {});\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haWwuanMiXSwibmFtZXMiOlsibWFpbHNlbGYiLCJzdWJqIiwiYm9keSIsIm1haWxndW4iLCJhcGlLZXkiLCJwcm9jZXNzIiwiZW52IiwiTUFJTEdVTl9LRVkiLCJkb21haW4iLCJNQUlMR1VOX0RPTUFJTiIsImRhdGEiLCJmcm9tIiwiTUFJTEdVTl9GUk9NIiwidG8iLCJNWV9FTUFJTCIsInN1YmplY3QiLCJ0ZXh0IiwibWVzc2FnZXMiLCJzZW5kIiwiZXJyIl0sIm1hcHBpbmdzIjoiOzs7OztrQkFFd0JBLFE7O0FBRnhCOzs7Ozs7QUFFZSxTQUFTQSxRQUFULENBQWtCQyxJQUFsQixFQUF3QkMsSUFBeEIsRUFBOEI7QUFDM0MsTUFBSUMsVUFBVSx3QkFBWSxFQUFDQyxRQUFRQyxRQUFRQyxHQUFSLENBQVlDLFdBQXJCO0FBQ0NDLFlBQVFILFFBQVFDLEdBQVIsQ0FBWUcsY0FEckIsRUFBWixDQUFkO0FBRUEsTUFBSUMsT0FBTztBQUNUQyxVQUFTTixRQUFRQyxHQUFSLENBQVlNLFlBRFo7QUFFVEMsUUFBU1IsUUFBUUMsR0FBUixDQUFZUSxRQUZaO0FBR1RDLGFBQVNkLElBSEE7QUFJVGUsVUFBU2Q7QUFKQSxHQUFYO0FBTUFDLFVBQVFjLFFBQVIsR0FBbUJDLElBQW5CLENBQXdCUixJQUF4QixFQUE4QixVQUFDUyxHQUFELEVBQU1qQixJQUFOLEVBQWUsQ0FBRSxDQUEvQztBQUNEIiwiZmlsZSI6Im1haWwuanMiLCJzb3VyY2VSb290IjoiL2FwcC9saWIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTWFpbGd1biBmcm9tICdtYWlsZ3VuLWpzJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbWFpbHNlbGYoc3ViaiwgYm9keSkge1xuICB2YXIgbWFpbGd1biA9IG5ldyBNYWlsZ3VuKHthcGlLZXk6IHByb2Nlc3MuZW52Lk1BSUxHVU5fS0VZLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9tYWluOiBwcm9jZXNzLmVudi5NQUlMR1VOX0RPTUFJTn0pXG4gIHZhciBkYXRhID0ge1xuICAgIGZyb206ICAgIHByb2Nlc3MuZW52Lk1BSUxHVU5fRlJPTSxcbiAgICB0bzogICAgICBwcm9jZXNzLmVudi5NWV9FTUFJTCxcbiAgICBzdWJqZWN0OiBzdWJqLFxuICAgIHRleHQ6ICAgIGJvZHksXG4gIH1cbiAgbWFpbGd1bi5tZXNzYWdlcygpLnNlbmQoZGF0YSwgKGVyciwgYm9keSkgPT4ge30pXG59Il19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "mail.js"
      ],
      "names": [
        "mailself",
        "subj",
        "body",
        "mailgun",
        "apiKey",
        "process",
        "env",
        "MAILGUN_KEY",
        "domain",
        "MAILGUN_DOMAIN",
        "data",
        "from",
        "MAILGUN_FROM",
        "to",
        "MY_EMAIL",
        "subject",
        "text",
        "messages",
        "send",
        "err"
      ],
      "mappings": ";;;;;kBAEwBA,Q;;AAFxB;;;;;;AAEe,SAASA,QAAT,CAAkBC,IAAlB,EAAwBC,IAAxB,EAA8B;AAC3C,MAAIC,UAAU,wBAAY,EAACC,QAAQC,QAAQC,GAAR,CAAYC,WAArB;AACCC,YAAQH,QAAQC,GAAR,CAAYG,cADrB,EAAZ,CAAd;AAEA,MAAIC,OAAO;AACTC,UAASN,QAAQC,GAAR,CAAYM,YADZ;AAETC,QAASR,QAAQC,GAAR,CAAYQ,QAFZ;AAGTC,aAASd,IAHA;AAITe,UAASd;AAJA,GAAX;AAMAC,UAAQc,QAAR,GAAmBC,IAAnB,CAAwBR,IAAxB,EAA8B,UAACS,GAAD,EAAMjB,IAAN,EAAe,CAAE,CAA/C;AACD",
      "file": "mail.js",
      "sourceRoot": "/app/lib",
      "sourcesContent": [
        "import Mailgun from 'mailgun-js';\n\nexport default function mailself(subj, body) {\n  var mailgun = new Mailgun({apiKey: process.env.MAILGUN_KEY, \n                             domain: process.env.MAILGUN_DOMAIN})\n  var data = {\n    from:    process.env.MAILGUN_FROM,\n    to:      process.env.MY_EMAIL,\n    subject: subj,\n    text:    body,\n  }\n  mailgun.messages().send(data, (err, body) => {})\n}"
      ]
    },
    "mtime": 1507508619345
  },
  "{\"filename\":\"/app/lib/handlebars.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/lib\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "handlebars",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Handlebars"
              }
            ]
          },
          {
            "source": "../data/seed.js",
            "imported": [
              "domain"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "domain",
                "local": "domain"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/app/lib/handlebars.js",
      "filenameRelative": "/app/lib/handlebars.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "handlebars.js",
      "sourceFileName": "handlebars.js",
      "sourceRoot": "/app/lib",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/lib",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "handlebars"
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _handlebars = require('handlebars');\n\nvar _handlebars2 = _interopRequireDefault(_handlebars);\n\nvar _seed = require('../data/seed.js');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_handlebars2.default.registerHelper('__appDomain', function () {\n  return _seed.domain;\n});\n\n_handlebars2.default.registerHelper('verbifyDomain', function (opts) {\n  var domain = opts.hash && opts.hash.domain;\n  console.log('verbifyDomain', domain);\n  return domain && domain.replace('s.to', ' to');\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImhhbmRsZWJhcnMuanMiXSwibmFtZXMiOlsicmVnaXN0ZXJIZWxwZXIiLCJvcHRzIiwiZG9tYWluIiwiaGFzaCIsImNvbnNvbGUiLCJsb2ciLCJyZXBsYWNlIl0sIm1hcHBpbmdzIjoiOztBQUFBOzs7O0FBQ0E7Ozs7QUFFQSxxQkFBV0EsY0FBWCxDQUEwQixhQUExQixFQUF5QyxZQUFXO0FBQ2xEO0FBQ0QsQ0FGRDs7QUFJQSxxQkFBV0EsY0FBWCxDQUEwQixlQUExQixFQUEyQyxVQUFTQyxJQUFULEVBQWU7QUFDeEQsTUFBTUMsU0FBU0QsS0FBS0UsSUFBTCxJQUFhRixLQUFLRSxJQUFMLENBQVVELE1BQXRDO0FBQ0FFLFVBQVFDLEdBQVIsQ0FBWSxlQUFaLEVBQTZCSCxNQUE3QjtBQUNBLFNBQU9BLFVBQVVBLE9BQU9JLE9BQVAsQ0FBZSxNQUFmLEVBQXVCLEtBQXZCLENBQWpCO0FBQ0QsQ0FKRCIsImZpbGUiOiJoYW5kbGViYXJzLmpzIiwic291cmNlUm9vdCI6Ii9hcHAvbGliIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEhhbmRsZWJhcnMgZnJvbSAnaGFuZGxlYmFycydcbmltcG9ydCB7IGRvbWFpbiB9IGZyb20gJy4uL2RhdGEvc2VlZC5qcydcblxuSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcignX19hcHBEb21haW4nLCBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIGRvbWFpbjtcbn0pO1xuXG5IYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCd2ZXJiaWZ5RG9tYWluJywgZnVuY3Rpb24ob3B0cykge1xuICBjb25zdCBkb21haW4gPSBvcHRzLmhhc2ggJiYgb3B0cy5oYXNoLmRvbWFpbjtcbiAgY29uc29sZS5sb2coJ3ZlcmJpZnlEb21haW4nLCBkb21haW4pO1xuICByZXR1cm4gZG9tYWluICYmIGRvbWFpbi5yZXBsYWNlKCdzLnRvJywgJyB0bycpO1xufSk7Il19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "handlebars.js"
      ],
      "names": [
        "registerHelper",
        "opts",
        "domain",
        "hash",
        "console",
        "log",
        "replace"
      ],
      "mappings": ";;AAAA;;;;AACA;;;;AAEA,qBAAWA,cAAX,CAA0B,aAA1B,EAAyC,YAAW;AAClD;AACD,CAFD;;AAIA,qBAAWA,cAAX,CAA0B,eAA1B,EAA2C,UAASC,IAAT,EAAe;AACxD,MAAMC,SAASD,KAAKE,IAAL,IAAaF,KAAKE,IAAL,CAAUD,MAAtC;AACAE,UAAQC,GAAR,CAAY,eAAZ,EAA6BH,MAA7B;AACA,SAAOA,UAAUA,OAAOI,OAAP,CAAe,MAAf,EAAuB,KAAvB,CAAjB;AACD,CAJD",
      "file": "handlebars.js",
      "sourceRoot": "/app/lib",
      "sourcesContent": [
        "import Handlebars from 'handlebars'\nimport { domain } from '../data/seed.js'\n\nHandlebars.registerHelper('__appDomain', function() {\n  return domain;\n});\n\nHandlebars.registerHelper('verbifyDomain', function(opts) {\n  const domain = opts.hash && opts.hash.domain;\n  console.log('verbifyDomain', domain);\n  return domain && domain.replace('s.to', ' to');\n});"
      ]
    },
    "mtime": 1507514265942
  }
}