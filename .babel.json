{
  "{\"filename\":\"/app/app.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "express",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "express"
              }
            ]
          },
          {
            "source": "express-handlebars",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "expressHandlebars"
              }
            ]
          },
          {
            "source": "handlebars",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Handlebars"
              }
            ]
          },
          {
            "source": "chrono-node",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "chrono"
              }
            ]
          },
          {
            "source": "moment",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "moment"
              }
            ]
          },
          {
            "source": "node-sass-middleware",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "sassMiddleware"
              }
            ]
          },
          {
            "source": "./models/promise.js",
            "imported": [
              "Promise",
              "sequelize"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "Promise",
                "local": "Promise"
              },
              {
                "kind": "named",
                "imported": "sequelize",
                "local": "sequelize"
              }
            ]
          },
          {
            "source": "./data/seed.js",
            "imported": [
              "domain",
              "users",
              "promises"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "domain",
                "local": "domain"
              },
              {
                "kind": "named",
                "imported": "users",
                "local": "users"
              },
              {
                "kind": "named",
                "imported": "promises",
                "local": "promises"
              }
            ]
          },
          {
            "source": "./lib/latepenalty.js",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "computeCredit"
              }
            ]
          },
          {
            "source": "./lib/parse.js",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "parsePromise"
              }
            ]
          },
          {
            "source": "./lib/middleware.js",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "handlePromiseRequest"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      }
    },
    "options": {
      "filename": "/app/app.js",
      "filenameRelative": "/app/app.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "app.js",
      "sourceFileName": "app.js",
      "sourceRoot": "/app",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "app"
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _express = require('express');\n\nvar _express2 = _interopRequireDefault(_express);\n\nvar _expressHandlebars = require('express-handlebars');\n\nvar _expressHandlebars2 = _interopRequireDefault(_expressHandlebars);\n\nvar _handlebars = require('handlebars');\n\nvar _handlebars2 = _interopRequireDefault(_handlebars);\n\nvar _chronoNode = require('chrono-node');\n\nvar _chronoNode2 = _interopRequireDefault(_chronoNode);\n\nvar _moment = require('moment');\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _nodeSassMiddleware = require('node-sass-middleware');\n\nvar _nodeSassMiddleware2 = _interopRequireDefault(_nodeSassMiddleware);\n\nvar _promise = require('./models/promise.js');\n\nvar _seed = require('./data/seed.js');\n\nvar _latepenalty = require('./lib/latepenalty.js');\n\nvar _latepenalty2 = _interopRequireDefault(_latepenalty);\n\nvar _parse = require('./lib/parse.js');\n\nvar _parse2 = _interopRequireDefault(_parse);\n\nvar _middleware = require('./lib/middleware.js');\n\nvar _middleware2 = _interopRequireDefault(_middleware);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar app = (0, _express2.default)(); // Sugar.js parses some things better\n// --------------------------------- 80chars ---------------------------------->\n\n_handlebars2.default.registerHelper('__domain', function () {\n  return _seed.domain;\n});\n\napp.use((0, _nodeSassMiddleware2.default)({\n  src: __dirname + '/public',\n  dest: '/tmp',\n  // debug: true,\n  force: true\n  //outputStyle: 'compressed',\n}));\n\napp.use(_express2.default.static('public'));\napp.use(_express2.default.static('tmp'));\n\napp.engine('handlebars', (0, _expressHandlebars2.default)({ defaultLayout: 'main' }));\napp.set('view engine', 'handlebars');\n\napp.listen(process.env.PORT);\n\n// Routes\n\napp.get([// Home\n'/?', '/promises.to/?', '/commits.to/?'], function (req, resp) {\n  _promise.Promise.findAll({\n    order: _promise.sequelize.literal('tini DESC')\n    //limit: 30 show them all for now\n  }).then(function (promises) {\n    resp.render('home', {\n      domain: _seed.domain,\n      promises: promises\n    });\n  });\n});\n\napp.get('/sign-up', function (req, resp) {\n  resp.render('signup');\n});\n\n// if a user visits bob.promises.to (or iwill.glitch.me/bob.promises.to) then\n// render the home view, but with only that user's promises\napp.get('/:user.([promises|commits]+\\.to+)', function (req, resp) {\n  var dbPromises = {};\n  _promise.Promise.findAll({\n    where: {\n      user: req.params.user\n    }\n  }).then(function (promises) {\n    resp.render('pages/account', {\n      promises: promises,\n      domain: _seed.domain,\n      user: req.params.user\n    });\n  });\n});\n\n// we want any actionable route to be handled by the middleware and for now we \n// probably don't want to let anyone just create promises with domains that \n// don't exist\n// FIXME: we should have a single configurable list of domains\napp.get('/:user.([promises|commits]+\\.to+)/:promise?/:modifier?/:date*?', _middleware2.default);\n\n// Actions\n\n// FIXME refactor/secure this\napp.get('/promises/remove/:id', function (req, resp) {\n  console.log('remove', req.params);\n  _promise.Promise.destroy({\n    where: {\n      id: req.params.id\n    }\n  }).then(function (deletedRows) {\n    console.log('promise removed', deletedRows);\n    resp.redirect('/');\n  });\n});\n\n// Endpoints\n\napp.get('/promise/:udp/:urtx', function (req, resp) {\n  var urtx = req.originalUrl.substr(9);\n  _promise.Promise.findOne({ where: { urtx: urtx } }).then(function (promise) {\n    console.log('single promise', urtx, promise);\n    // resp.write(promise)\n    resp.json(promise);\n  });\n});\n\napp.get('/promises', function (req, resp) {\n  var dbPromises = {};\n  _promise.Promise.findAll({\n    order: _promise.sequelize.literal('tini DESC')\n  }).then(function (promises) {\n    // console.log('all promises', promises)\n    // create nested array of promises by user:\n    promises.forEach(function (promise) {\n      dbPromises[promise.user] = dbPromises[promise.user] || [];\n      dbPromises[promise.user].push(promise);\n    });\n    resp.json(dbPromises);\n  });\n});\n\napp.get('/promises/:user', function (req, resp) {\n  var dbPromises = {};\n  _promise.Promise.findAll({\n    where: {\n      user: req.params.user\n    }\n  }).then(function (promises) {\n    console.log('user promises', promises);\n    promises.forEach(function (promise) {\n      dbPromises[promise.user] = dbPromises[promise.user] || [];\n      dbPromises[promise.user].push(promise);\n    });\n    resp.json(dbPromises);\n  });\n});\n\n// Utils\n\napp.get('/reset', function (req, resp) {\n  setup();\n  resp.redirect('/');\n});\n\n// removes all entries from the promises table\napp.get('/clear', function (req, resp) {\n  _promise.Promise.destroy({ where: {} });\n  resp.redirect('/');\n});\n\n// utility to populate table with hardcoded promises above\nfunction setup() {\n  _promise.Promise.sync({ force: true }) // 'force: true' just drops the table if it exists\n  .then(function () {\n    // and creates a new one!\n    // Add the default promises to the database\n    for (var i = 0; i < _seed.promises.length; i++) {\n      _promise.Promise.create((0, _parse2.default)(_seed.promises[i]));\n    }\n  });\n}\n\n/*\nLittle picture: Why does this error handling code not run when I surf to \na bad URL like iwill.glitch.me/foo%bar\n\nBigger picture: We're making an app that needs to process any URL the user may \nthrow at it. We need the server to get the exact URL the way the user sees it in\nthe browser. That's going to be especially tricky for things like '#' characters\nbut right now I'm just trying to figure out the case of arbitrary '%' characters\nthat may not correspond to proper %-encodings.\n\nI'm thinking like a catchall error-handling route that no matter what weird\nencoding or whatever error is thrown I can still have the code here do something\nwith the URL as the user typed it.\n\nFor now we're just dropping all this and having the app give the user an error\nif there are any weird characters in the URL.\n\napp.use(function(req, resp, next) {\n  var err = null\n  try {\n    console.log(\"TRYING\", req.path, req.url)\n    decodeURIComponent(req.path)\n  } catch(e) {\n    err = e\n  }\n  if (err) {\n    console.log(\"CAUGHT ERR:\", err, req.url)\n    return resp.redirect('/')\n  }\n  next();\n\n  //console.log(\"DEBUG USE1:\", req.originalUrl)\n  //resp.redirect('/')\n})\n*/\n\n/* \nlet test\n//test = chrono.parseDate(\"foo the bar by sep 15th noon\")\ntest = chrono.parseDate(\"Call_the_dentist by 2017-10-15 12pm\")\nconsole.log(`DEBUG: ${test} (unixtime = ${test.getTime()/1000}`)\nconsole.log(\"DEBUG: \", JSON.stringify(parsePromise(promises[2])))\n*/\n\n// --------------------------------- 80chars ---------------------------------->\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyJdLCJuYW1lcyI6WyJhcHAiLCJyZWdpc3RlckhlbHBlciIsInVzZSIsInNyYyIsIl9fZGlybmFtZSIsImRlc3QiLCJmb3JjZSIsInN0YXRpYyIsImVuZ2luZSIsImRlZmF1bHRMYXlvdXQiLCJzZXQiLCJsaXN0ZW4iLCJwcm9jZXNzIiwiZW52IiwiUE9SVCIsImdldCIsInJlcSIsInJlc3AiLCJmaW5kQWxsIiwib3JkZXIiLCJsaXRlcmFsIiwidGhlbiIsInByb21pc2VzIiwicmVuZGVyIiwiZG9tYWluIiwiZGJQcm9taXNlcyIsIndoZXJlIiwidXNlciIsInBhcmFtcyIsImNvbnNvbGUiLCJsb2ciLCJkZXN0cm95IiwiaWQiLCJkZWxldGVkUm93cyIsInJlZGlyZWN0IiwidXJ0eCIsIm9yaWdpbmFsVXJsIiwic3Vic3RyIiwiZmluZE9uZSIsInByb21pc2UiLCJqc29uIiwiZm9yRWFjaCIsInB1c2giLCJzZXR1cCIsInN5bmMiLCJpIiwibGVuZ3RoIiwiY3JlYXRlIl0sIm1hcHBpbmdzIjoiOztBQUVBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUVBOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUVBOztBQUVBOztBQUVBOzs7O0FBQ0E7Ozs7QUFFQTs7Ozs7O0FBRUEsSUFBSUEsTUFBTSx3QkFBVixDLENBYmlDO0FBTmpDOztBQXFCQSxxQkFBV0MsY0FBWCxDQUEwQixVQUExQixFQUFzQyxZQUFXO0FBQy9DO0FBQ0QsQ0FGRDs7QUFJQUQsSUFBSUUsR0FBSixDQUFRLGtDQUFlO0FBQ3JCQyxPQUFLQyxZQUFZLFNBREk7QUFFckJDLFFBQU0sTUFGZTtBQUdyQjtBQUNBQyxTQUFPO0FBQ1A7QUFMcUIsQ0FBZixDQUFSOztBQVFBTixJQUFJRSxHQUFKLENBQVEsa0JBQVFLLE1BQVIsQ0FBZSxRQUFmLENBQVI7QUFDQVAsSUFBSUUsR0FBSixDQUFRLGtCQUFRSyxNQUFSLENBQWUsS0FBZixDQUFSOztBQUVBUCxJQUFJUSxNQUFKLENBQVcsWUFBWCxFQUF5Qixp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Q0EsU0FBU1MsS0FBVCxHQUFpQjtBQUNmLG1CQUFRQyxJQUFSLENBQWEsRUFBQ3RDLE9BQU8sSUFBUixFQUFiLEVBQTRCO0FBQTVCLEdBQ0dlLElBREgsQ0FDUSxZQUFVO0FBQVU7QUFDeEI7QUFDQSxTQUFLLElBQUl3QixJQUFJLENBQWIsRUFBZ0JBLElBQUksZUFBU0MsTUFBN0IsRUFBcUNELEdBQXJDLEVBQTBDO0FBQ3hDLHVCQUFRRSxNQUFSLENBQWUscUJBQWEsZUFBU0YsQ0FBVCxDQUFiLENBQWY7QUFDRDtBQUNGLEdBTkg7QUFPRDs7QUFFRDs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBb0NBOzs7Ozs7OztBQVFBIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZVJvb3QiOiIvYXBwIiwic291cmNlc0NvbnRlbnQiOlsiLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIDgwY2hhcnMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLT5cblxuaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcydcbmltcG9ydCBleHByZXNzSGFuZGxlYmFycyBmcm9tICdleHByZXNzLWhhbmRsZWJhcnMnXG5pbXBvcnQgSGFuZGxlYmFycyBmcm9tICdoYW5kbGViYXJzJ1xuXG5pbXBvcnQgY2hyb25vIGZyb20gJ2Nocm9uby1ub2RlJyAvLyBTdWdhci5qcyBwYXJzZXMgc29tZSB0aGluZ3MgYmV0dGVyXG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCdcbmltcG9ydCBzYXNzTWlkZGxld2FyZSBmcm9tICdub2RlLXNhc3MtbWlkZGxld2FyZSdcblxuaW1wb3J0IHsgUHJvbWlzZSwgc2VxdWVsaXplIH0gZnJvbSAnLi9tb2RlbHMvcHJvbWlzZS5qcydcblxuaW1wb3J0IHsgZG9tYWluLCB1c2VycywgcHJvbWlzZXMgfSBmcm9tICcuL2RhdGEvc2VlZC5qcydcblxuaW1wb3J0IGNvbXB1dGVDcmVkaXQgZnJvbSAnLi9saWIvbGF0ZXBlbmFsdHkuanMnXG5pbXBvcnQgcGFyc2VQcm9taXNlIGZyb20gJy4vbGliL3BhcnNlLmpzJ1xuXG5pbXBvcnQgaGFuZGxlUHJvbWlzZVJlcXVlc3QgZnJvbSAnLi9saWIvbWlkZGxld2FyZS5qcydcblxubGV0IGFwcCA9IGV4cHJlc3MoKVxuXG5IYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdfX2RvbWFpbicsIGZ1bmN0aW9uKCkge1xuICByZXR1cm4gZG9tYWluO1xufSk7XG5cbmFwcC51c2Uoc2Fzc01pZGRsZXdhcmUoe1xuICBzcmM6IF9fZGlybmFtZSArICcvcHVibGljJyxcbiAgZGVzdDogJy90bXAnLFxuICAvLyBkZWJ1ZzogdHJ1ZSxcbiAgZm9yY2U6IHRydWUsXG4gIC8vb3V0cHV0U3R5bGU6ICdjb21wcmVzc2VkJyxcbn0pKVxuXG5hcHAudXNlKGV4cHJlc3Muc3RhdGljKCdwdWJsaWMnKSlcbmFwcC51c2UoZXhwcmVzcy5zdGF0aWMoJ3RtcCcpKVxuXG5hcHAuZW5naW5lKCdoYW5kbGViYXJzJywgZXhwcmVzc0hhbmRsZWJhcnMoe2RlZmF1bHRMYXlvdXQ6ICdtYWluJ30pKVxuYXBwLnNldCgndmlldyBlbmdpbmUnLCAnaGFuZGxlYmFycycpXG5cbmFwcC5saXN0ZW4ocHJvY2Vzcy5lbnYuUE9SVClcblxuLy8gUm91dGVzXG5cbmFwcC5nZXQoWyAvLyBIb21lXG4gICcvPycsXG4gICcvcHJvbWlzZXMudG8vPycsXG4gICcvY29tbWl0cy50by8/J1xuXSwgKHJlcSwgcmVzcCkgPT4ge1xuICAgIFByb21pc2UuZmluZEFsbCh7XG4gICAgICBvcmRlcjogc2VxdWVsaXplLmxpdGVyYWwoJ3RpbmkgREVTQycpLFxuICAgICAgLy9saW1pdDogMzAgc2hvdyB0aGVtIGFsbCBmb3Igbm93XG4gICAgfSkudGhlbihmdW5jdGlvbihwcm9taXNlcykge1xuICAgICAgcmVzcC5yZW5kZXIoJ2hvbWUnLCB7XG4gICAgICAgIGRvbWFpbixcbiAgICAgICAgcHJvbWlzZXNcbiAgICAgIH0pXG4gICAgfSlcbn0pXG5cbmFwcC5nZXQoJy9zaWduLXVwJywgKHJlcSwgcmVzcCkgPT4geyByZXNwLnJlbmRlcignc2lnbnVwJykgfSlcblxuLy8gaWYgYSB1c2VyIHZpc2l0cyBib2IucHJvbWlzZXMudG8gKG9yIGl3aWxsLmdsaXRjaC5tZS9ib2IucHJvbWlzZXMudG8pIHRoZW5cbi8vIHJlbmRlciB0aGUgaG9tZSB2aWV3LCBidXQgd2l0aCBvbmx5IHRoYXQgdXNlcidzIHByb21pc2VzXG5hcHAuZ2V0KCcvOnVzZXIuKFtwcm9taXNlc3xjb21taXRzXStcXC50byspJywgKHJlcSxyZXNwKSA9PiB7XG4gIHZhciBkYlByb21pc2VzID0ge31cbiAgUHJvbWlzZS5maW5kQWxsKHtcbiAgIHdoZXJlOiB7XG4gICAgIHVzZXI6IHJlcS5wYXJhbXMudXNlclxuICAgfSxcbiAgfSkudGhlbihmdW5jdGlvbihwcm9taXNlcykge1xuICAgIHJlc3AucmVuZGVyKCdwYWdlcy9hY2NvdW50JywgeyBcbiAgICAgIHByb21pc2VzLFxuICAgICAgZG9tYWluLFxuICAgICAgdXNlcjogcmVxLnBhcmFtcy51c2VyXG4gICAgfSlcbiAgfSlcbn0pXG5cbi8vIHdlIHdhbnQgYW55IGFjdGlvbmFibGUgcm91dGUgdG8gYmUgaGFuZGxlZCBieSB0aGUgbWlkZGxld2FyZSBhbmQgZm9yIG5vdyB3ZSBcbi8vIHByb2JhYmx5IGRvbid0IHdhbnQgdG8gbGV0IGFueW9uZSBqdXN0IGNyZWF0ZSBwcm9taXNlcyB3aXRoIGRvbWFpbnMgdGhhdCBcbi8vIGRvbid0IGV4aXN0XG4vLyBGSVhNRTogd2Ugc2hvdWxkIGhhdmUgYSBzaW5nbGUgY29uZmlndXJhYmxlIGxpc3Qgb2YgZG9tYWluc1xuYXBwLmdldCgnLzp1c2VyLihbcHJvbWlzZXN8Y29tbWl0c10rXFwudG8rKS86cHJvbWlzZT8vOm1vZGlmaWVyPy86ZGF0ZSo/JywgXG4gICAgICAgIGhhbmRsZVByb21pc2VSZXF1ZXN0KVxuXG5cbi8vIEFjdGlvbnNcblxuLy8gRklYTUUgcmVmYWN0b3Ivc2VjdXJlIHRoaXNcbmFwcC5nZXQoJy9wcm9taXNlcy9yZW1vdmUvOmlkJywgKHJlcSwgcmVzcCkgPT4ge1xuICBjb25zb2xlLmxvZygncmVtb3ZlJywgcmVxLnBhcmFtcyk7XG4gIFByb21pc2UuZGVzdHJveSh7XG4gICB3aGVyZToge1xuICAgICBpZDogcmVxLnBhcmFtcy5pZFxuICAgfVxuICB9KVxuICAudGhlbihmdW5jdGlvbihkZWxldGVkUm93cyl7XG4gICAgY29uc29sZS5sb2coJ3Byb21pc2UgcmVtb3ZlZCcsIGRlbGV0ZWRSb3dzKTtcbiAgICByZXNwLnJlZGlyZWN0KCcvJyk7XG4gIH0pXG59KVxuXG4vLyBFbmRwb2ludHNcblxuYXBwLmdldCgnL3Byb21pc2UvOnVkcC86dXJ0eCcsIGZ1bmN0aW9uKHJlcSwgcmVzcCkge1xuICBsZXQgdXJ0eCA9IHJlcS5vcmlnaW5hbFVybC5zdWJzdHIoOSlcbiAgUHJvbWlzZS5maW5kT25lKHsgd2hlcmU6IHt1cnR4fX0pXG4gICAgLnRoZW4oZnVuY3Rpb24ocHJvbWlzZSkge1xuICAgICAgY29uc29sZS5sb2coJ3NpbmdsZSBwcm9taXNlJywgdXJ0eCwgcHJvbWlzZSlcbiAgICAvLyByZXNwLndyaXRlKHByb21pc2UpXG4gICAgcmVzcC5qc29uKHByb21pc2UpXG4gIH0pXG5cbn0pXG5cbmFwcC5nZXQoJy9wcm9taXNlcycsIGZ1bmN0aW9uKHJlcSwgcmVzcCkge1xuICB2YXIgZGJQcm9taXNlcyA9IHt9XG4gIFByb21pc2UuZmluZEFsbCh7XG4gICAgb3JkZXI6IHNlcXVlbGl6ZS5saXRlcmFsKCd0aW5pIERFU0MnKVxuICB9KS50aGVuKGZ1bmN0aW9uKHByb21pc2VzKSB7XG4gICAgLy8gY29uc29sZS5sb2coJ2FsbCBwcm9taXNlcycsIHByb21pc2VzKVxuICAgIC8vIGNyZWF0ZSBuZXN0ZWQgYXJyYXkgb2YgcHJvbWlzZXMgYnkgdXNlcjpcbiAgICBwcm9taXNlcy5mb3JFYWNoKGZ1bmN0aW9uKHByb21pc2UpIHsgXG4gICAgICBkYlByb21pc2VzW3Byb21pc2UudXNlcl0gPSBkYlByb21pc2VzW3Byb21pc2UudXNlcl0gfHwgW11cbiAgICAgIGRiUHJvbWlzZXNbcHJvbWlzZS51c2VyXS5wdXNoKHByb21pc2UpXG4gICAgfSk7XG4gICAgcmVzcC5qc29uKGRiUHJvbWlzZXMpO1xuICB9KVxufSlcblxuYXBwLmdldCgnL3Byb21pc2VzLzp1c2VyJywgZnVuY3Rpb24ocmVxLCByZXNwKSB7XG4gIHZhciBkYlByb21pc2VzID0ge307XG4gIFByb21pc2UuZmluZEFsbCh7XG4gICB3aGVyZToge1xuICAgICB1c2VyOiByZXEucGFyYW1zLnVzZXJcbiAgIH0sXG4gIH0pLnRoZW4oZnVuY3Rpb24ocHJvbWlzZXMpIHtcbiAgICBjb25zb2xlLmxvZygndXNlciBwcm9taXNlcycsIHByb21pc2VzKTtcbiAgICBwcm9taXNlcy5mb3JFYWNoKGZ1bmN0aW9uKHByb21pc2UpIHtcbiAgICAgIGRiUHJvbWlzZXNbcHJvbWlzZS51c2VyXSA9IGRiUHJvbWlzZXNbcHJvbWlzZS51c2VyXSB8fCBbXVxuICAgICAgZGJQcm9taXNlc1twcm9taXNlLnVzZXJdLnB1c2gocHJvbWlzZSlcbiAgICB9KVxuICAgIHJlc3AuanNvbihkYlByb21pc2VzKVxuICB9KVxufSlcblxuXG4vLyBVdGlsc1xuXG5hcHAuZ2V0KCcvcmVzZXQnLCAocmVxLCByZXNwKSA9PiB7XG4gIHNldHVwKClcbiAgcmVzcC5yZWRpcmVjdCgnLycpXG59KVxuXG4vLyByZW1vdmVzIGFsbCBlbnRyaWVzIGZyb20gdGhlIHByb21pc2VzIHRhYmxlXG5hcHAuZ2V0KCcvY2xlYXInLCAocmVxLCByZXNwKSA9PiB7XG4gIFByb21pc2UuZGVzdHJveSh7d2hlcmU6IHt9fSlcbiAgcmVzcC5yZWRpcmVjdCgnLycpXG59KVxuXG4vLyB1dGlsaXR5IHRvIHBvcHVsYXRlIHRhYmxlIHdpdGggaGFyZGNvZGVkIHByb21pc2VzIGFib3ZlXG5mdW5jdGlvbiBzZXR1cCgpIHsgXG4gIFByb21pc2Uuc3luYyh7Zm9yY2U6IHRydWV9KSAvLyAnZm9yY2U6IHRydWUnIGp1c3QgZHJvcHMgdGhlIHRhYmxlIGlmIGl0IGV4aXN0c1xuICAgIC50aGVuKGZ1bmN0aW9uKCl7ICAgICAgICAgLy8gYW5kIGNyZWF0ZXMgYSBuZXcgb25lIVxuICAgICAgLy8gQWRkIHRoZSBkZWZhdWx0IHByb21pc2VzIHRvIHRoZSBkYXRhYmFzZVxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9taXNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBQcm9taXNlLmNyZWF0ZShwYXJzZVByb21pc2UocHJvbWlzZXNbaV0pKVxuICAgICAgfVxuICAgIH0pXG59XG5cbi8qXG5MaXR0bGUgcGljdHVyZTogV2h5IGRvZXMgdGhpcyBlcnJvciBoYW5kbGluZyBjb2RlIG5vdCBydW4gd2hlbiBJIHN1cmYgdG8gXG5hIGJhZCBVUkwgbGlrZSBpd2lsbC5nbGl0Y2gubWUvZm9vJWJhclxuXG5CaWdnZXIgcGljdHVyZTogV2UncmUgbWFraW5nIGFuIGFwcCB0aGF0IG5lZWRzIHRvIHByb2Nlc3MgYW55IFVSTCB0aGUgdXNlciBtYXkgXG50aHJvdyBhdCBpdC4gV2UgbmVlZCB0aGUgc2VydmVyIHRvIGdldCB0aGUgZXhhY3QgVVJMIHRoZSB3YXkgdGhlIHVzZXIgc2VlcyBpdCBpblxudGhlIGJyb3dzZXIuIFRoYXQncyBnb2luZyB0byBiZSBlc3BlY2lhbGx5IHRyaWNreSBmb3IgdGhpbmdzIGxpa2UgJyMnIGNoYXJhY3RlcnNcbmJ1dCByaWdodCBub3cgSSdtIGp1c3QgdHJ5aW5nIHRvIGZpZ3VyZSBvdXQgdGhlIGNhc2Ugb2YgYXJiaXRyYXJ5ICclJyBjaGFyYWN0ZXJzXG50aGF0IG1heSBub3QgY29ycmVzcG9uZCB0byBwcm9wZXIgJS1lbmNvZGluZ3MuXG5cbkknbSB0aGlua2luZyBsaWtlIGEgY2F0Y2hhbGwgZXJyb3ItaGFuZGxpbmcgcm91dGUgdGhhdCBubyBtYXR0ZXIgd2hhdCB3ZWlyZFxuZW5jb2Rpbmcgb3Igd2hhdGV2ZXIgZXJyb3IgaXMgdGhyb3duIEkgY2FuIHN0aWxsIGhhdmUgdGhlIGNvZGUgaGVyZSBkbyBzb21ldGhpbmdcbndpdGggdGhlIFVSTCBhcyB0aGUgdXNlciB0eXBlZCBpdC5cblxuRm9yIG5vdyB3ZSdyZSBqdXN0IGRyb3BwaW5nIGFsbCB0aGlzIGFuZCBoYXZpbmcgdGhlIGFwcCBnaXZlIHRoZSB1c2VyIGFuIGVycm9yXG5pZiB0aGVyZSBhcmUgYW55IHdlaXJkIGNoYXJhY3RlcnMgaW4gdGhlIFVSTC5cblxuYXBwLnVzZShmdW5jdGlvbihyZXEsIHJlc3AsIG5leHQpIHtcbiAgdmFyIGVyciA9IG51bGxcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZyhcIlRSWUlOR1wiLCByZXEucGF0aCwgcmVxLnVybClcbiAgICBkZWNvZGVVUklDb21wb25lbnQocmVxLnBhdGgpXG4gIH0gY2F0Y2goZSkge1xuICAgIGVyciA9IGVcbiAgfVxuICBpZiAoZXJyKSB7XG4gICAgY29uc29sZS5sb2coXCJDQVVHSFQgRVJSOlwiLCBlcnIsIHJlcS51cmwpXG4gICAgcmV0dXJuIHJlc3AucmVkaXJlY3QoJy8nKVxuICB9XG4gIG5leHQoKTtcblxuICAvL2NvbnNvbGUubG9nKFwiREVCVUcgVVNFMTpcIiwgcmVxLm9yaWdpbmFsVXJsKVxuICAvL3Jlc3AucmVkaXJlY3QoJy8nKVxufSlcbiovXG5cbi8qIFxubGV0IHRlc3Rcbi8vdGVzdCA9IGNocm9uby5wYXJzZURhdGUoXCJmb28gdGhlIGJhciBieSBzZXAgMTV0aCBub29uXCIpXG50ZXN0ID0gY2hyb25vLnBhcnNlRGF0ZShcIkNhbGxfdGhlX2RlbnRpc3QgYnkgMjAxNy0xMC0xNSAxMnBtXCIpXG5jb25zb2xlLmxvZyhgREVCVUc6ICR7dGVzdH0gKHVuaXh0aW1lID0gJHt0ZXN0LmdldFRpbWUoKS8xMDAwfWApXG5jb25zb2xlLmxvZyhcIkRFQlVHOiBcIiwgSlNPTi5zdHJpbmdpZnkocGFyc2VQcm9taXNlKHByb21pc2VzWzJdKSkpXG4qL1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gODBjaGFycyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPlxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "app.js"
      ],
      "names": [
        "app",
        "registerHelper",
        "use",
        "src",
        "__dirname",
        "dest",
        "force",
        "static",
        "engine",
        "defaultLayout",
        "set",
        "listen",
        "process",
        "env",
        "PORT",
        "get",
        "req",
        "resp",
        "findAll",
        "order",
        "literal",
        "then",
        "promises",
        "render",
        "domain",
        "dbPromises",
        "where",
        "user",
        "params",
        "console",
        "log",
        "destroy",
        "id",
        "deletedRows",
        "redirect",
        "urtx",
        "originalUrl",
        "substr",
        "findOne",
        "promise",
        "json",
        "forEach",
        "push",
        "setup",
        "sync",
        "i",
        "length",
        "create"
      ],
      "mappings": "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",
      "file": "app.js",
      "sourceRoot": "/app",
      "sourcesContent": [
        "// --------------------------------- 80chars ---------------------------------->\n\nimport express from 'express'\nimport expressHandlebars from 'express-handlebars'\nimport Handlebars from 'handlebars'\n\nimport chrono from 'chrono-node' // Sugar.js parses some things better\nimport moment from 'moment'\nimport sassMiddleware from 'node-sass-middleware'\n\nimport { Promise, sequelize } from './models/promise.js'\n\nimport { domain, users, promises } from './data/seed.js'\n\nimport computeCredit from './lib/latepenalty.js'\nimport parsePromise from './lib/parse.js'\n\nimport handlePromiseRequest from './lib/middleware.js'\n\nlet app = express()\n\nHandlebars.registerHelper('__domain', function() {\n  return domain;\n});\n\napp.use(sassMiddleware({\n  src: __dirname + '/public',\n  dest: '/tmp',\n  // debug: true,\n  force: true,\n  //outputStyle: 'compressed',\n}))\n\napp.use(express.static('public'))\napp.use(express.static('tmp'))\n\napp.engine('handlebars', expressHandlebars({defaultLayout: 'main'}))\napp.set('view engine', 'handlebars')\n\napp.listen(process.env.PORT)\n\n// Routes\n\napp.get([ // Home\n  '/?',\n  '/promises.to/?',\n  '/commits.to/?'\n], (req, resp) => {\n    Promise.findAll({\n      order: sequelize.literal('tini DESC'),\n      //limit: 30 show them all for now\n    }).then(function(promises) {\n      resp.render('home', {\n        domain,\n        promises\n      })\n    })\n})\n\napp.get('/sign-up', (req, resp) => { resp.render('signup') })\n\n// if a user visits bob.promises.to (or iwill.glitch.me/bob.promises.to) then\n// render the home view, but with only that user's promises\napp.get('/:user.([promises|commits]+\\.to+)', (req,resp) => {\n  var dbPromises = {}\n  Promise.findAll({\n   where: {\n     user: req.params.user\n   },\n  }).then(function(promises) {\n    resp.render('pages/account', { \n      promises,\n      domain,\n      user: req.params.user\n    })\n  })\n})\n\n// we want any actionable route to be handled by the middleware and for now we \n// probably don't want to let anyone just create promises with domains that \n// don't exist\n// FIXME: we should have a single configurable list of domains\napp.get('/:user.([promises|commits]+\\.to+)/:promise?/:modifier?/:date*?', \n        handlePromiseRequest)\n\n\n// Actions\n\n// FIXME refactor/secure this\napp.get('/promises/remove/:id', (req, resp) => {\n  console.log('remove', req.params);\n  Promise.destroy({\n   where: {\n     id: req.params.id\n   }\n  })\n  .then(function(deletedRows){\n    console.log('promise removed', deletedRows);\n    resp.redirect('/');\n  })\n})\n\n// Endpoints\n\napp.get('/promise/:udp/:urtx', function(req, resp) {\n  let urtx = req.originalUrl.substr(9)\n  Promise.findOne({ where: {urtx}})\n    .then(function(promise) {\n      console.log('single promise', urtx, promise)\n    // resp.write(promise)\n    resp.json(promise)\n  })\n\n})\n\napp.get('/promises', function(req, resp) {\n  var dbPromises = {}\n  Promise.findAll({\n    order: sequelize.literal('tini DESC')\n  }).then(function(promises) {\n    // console.log('all promises', promises)\n    // create nested array of promises by user:\n    promises.forEach(function(promise) { \n      dbPromises[promise.user] = dbPromises[promise.user] || []\n      dbPromises[promise.user].push(promise)\n    });\n    resp.json(dbPromises);\n  })\n})\n\napp.get('/promises/:user', function(req, resp) {\n  var dbPromises = {};\n  Promise.findAll({\n   where: {\n     user: req.params.user\n   },\n  }).then(function(promises) {\n    console.log('user promises', promises);\n    promises.forEach(function(promise) {\n      dbPromises[promise.user] = dbPromises[promise.user] || []\n      dbPromises[promise.user].push(promise)\n    })\n    resp.json(dbPromises)\n  })\n})\n\n\n// Utils\n\napp.get('/reset', (req, resp) => {\n  setup()\n  resp.redirect('/')\n})\n\n// removes all entries from the promises table\napp.get('/clear', (req, resp) => {\n  Promise.destroy({where: {}})\n  resp.redirect('/')\n})\n\n// utility to populate table with hardcoded promises above\nfunction setup() { \n  Promise.sync({force: true}) // 'force: true' just drops the table if it exists\n    .then(function(){         // and creates a new one!\n      // Add the default promises to the database\n      for (var i = 0; i < promises.length; i++) {\n        Promise.create(parsePromise(promises[i]))\n      }\n    })\n}\n\n/*\nLittle picture: Why does this error handling code not run when I surf to \na bad URL like iwill.glitch.me/foo%bar\n\nBigger picture: We're making an app that needs to process any URL the user may \nthrow at it. We need the server to get the exact URL the way the user sees it in\nthe browser. That's going to be especially tricky for things like '#' characters\nbut right now I'm just trying to figure out the case of arbitrary '%' characters\nthat may not correspond to proper %-encodings.\n\nI'm thinking like a catchall error-handling route that no matter what weird\nencoding or whatever error is thrown I can still have the code here do something\nwith the URL as the user typed it.\n\nFor now we're just dropping all this and having the app give the user an error\nif there are any weird characters in the URL.\n\napp.use(function(req, resp, next) {\n  var err = null\n  try {\n    console.log(\"TRYING\", req.path, req.url)\n    decodeURIComponent(req.path)\n  } catch(e) {\n    err = e\n  }\n  if (err) {\n    console.log(\"CAUGHT ERR:\", err, req.url)\n    return resp.redirect('/')\n  }\n  next();\n\n  //console.log(\"DEBUG USE1:\", req.originalUrl)\n  //resp.redirect('/')\n})\n*/\n\n/* \nlet test\n//test = chrono.parseDate(\"foo the bar by sep 15th noon\")\ntest = chrono.parseDate(\"Call_the_dentist by 2017-10-15 12pm\")\nconsole.log(`DEBUG: ${test} (unixtime = ${test.getTime()/1000}`)\nconsole.log(\"DEBUG: \", JSON.stringify(parsePromise(promises[2])))\n*/\n\n// --------------------------------- 80chars ---------------------------------->\n"
      ]
    },
    "mtime": 1507445028009
  },
  "{\"filename\":\"/app/models/promise.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/models\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "sequelize",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Sequelize"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "Promise",
            "sequelize"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "Promise",
              "exported": "Promise"
            },
            {
              "kind": "local",
              "local": "sequelize",
              "exported": "sequelize"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/models/promise.js",
      "filenameRelative": "/app/models/promise.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "promise.js",
      "sourceFileName": "promise.js",
      "sourceRoot": "/app/models",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/models",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "promise"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.sequelize = exports.Promise = undefined;\n\nvar _sequelize = require('sequelize');\n\nvar _sequelize2 = _interopRequireDefault(_sequelize);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar sequelize, Promise;\n\n// set up a new database using database credentials set in .env\n// --------------------------------- 80chars ---------------------------------->\nexports.sequelize = sequelize = new _sequelize2.default('database', process.env.DB_USER, process.env.DB_PASS, {\n  host: '0.0.0.0',\n  dialect: 'sqlite',\n  pool: {\n    max: 5,\n    min: 0,\n    idle: 10000\n  },\n  // Security note: db is saved to `.data/database.sqlite` in local filesystem.\n  // Nothing in `.data` directory gets copied if someone remixes the project.\n  storage: '.data/database.sqlite'\n});\n\n// authenticate with the database\nsequelize.authenticate().then(function (err) {\n  console.log('Connection has been established successfully.');\n  // define a new table 'promises'\n  exports.Promise = Promise = sequelize.define('promises', {\n    urtx: { type: _sequelize2.default.STRING }, // urtext, including whole URL\n    user: { type: _sequelize2.default.STRING }, // who's making the promise\n    what: { type: _sequelize2.default.STRING }, // what's being promised\n    //whom: { type: Sequelize.STRING  }, // to whom are you promising\n    tini: { type: _sequelize2.default.INTEGER }, // unixtime that promise was made\n    tdue: { type: _sequelize2.default.STRING } // unixtime that the promise is due\n    //tmzn: { type: Sequelize.STRING  }, // timezone\n    //wtdid: { type: Sequelize.INTEGER }, // unixtime promise was fulfilled\n    //fill: { type: Sequelize.FLOAT   }, // fraction fulfilled\n    //void: { type: Sequelize.BOOLEAN }, // whether promise was voided\n    // text:   { type: Sequelize.STRING }, // this was just for testing\n  });\n  //setup()\n}).catch(function (err) {\n  console.log('Unable to connect to the database: ', err);\n});\n\nexports.Promise = Promise;\nexports.sequelize = sequelize;\n\n// DATABASE FIELDS:\n//   urtx -- urtext, ie, full original text the user typed to create the promise\n//   user -- who's making the promise\n//   what -- what's being promised\n//   whom -- to whom are you promising\n//   tini -- unixtime that the promise was made\n//   tdue -- unixtime that the promise is due\n//   tmzn -- timezone assumed for parsing the deadline\n//   tfin -- unixtime that the promise was fulfilled\n//   fill -- fraction fulfilled, default 0\n//   void -- true if the promise became unfulfillable or moot\n//   clix -- number of clicks a promise has gotten\n//   conf -- true when someone clicks the button to confirm the commitment\n//   audt -- audit trail of http header info for who confirmed it (or username)\n//   text -- optional additional notes or text or context for the promise\n// For example:\n//   urtx = \"bob.promises.to/foo_the_bar/by/noon_tomorrow\"\n//   user = \"bob\"\n//   what = \"foo the bar\"\n//   whom = null\n//   tini = [unixtime of first GET request of the promise's URL]\n//   tdue = [what \"noon tomorrow\" parsed to at time tini]\n//   tmzn = \"America/Los_Angeles\"\n//   tfin = [unixtime that the promise was fulfilled]\n//   fill = 0\n//   void = false\n//   clix = 0\n//   conf = false\n//   audt = \"MacOS/Chrome user in Portland OR\"\n//   text = \"promised in slack discussion about such-and-such\"\n\n// Other ideas for fields: \n// * information about the client that originally created the promise\n// * whether the promise was created by the actual user (if they were logged in \n//   and were the first to click on it) or by another logged-in user or by \n//   someone not logged in\n// * conf: maybe we create the promise whether or not anyone clicks the button \n//   to confirm it, in which case we store when it's actually been confirmed\n// * \n// --------------------------------- 80chars ---------------------------------->\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb21pc2UuanMiXSwibmFtZXMiOlsic2VxdWVsaXplIiwiUHJvbWlzZSIsInByb2Nlc3MiLCJlbnYiLCJEQl9VU0VSIiwiREJfUEFTUyIsImhvc3QiLCJkaWFsZWN0IiwicG9vbCIsIm1heCIsIm1pbiIsImlkbGUiLCJzdG9yYWdlIiwiYXV0aGVudGljYXRlIiwidGhlbiIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJkZWZpbmUiLCJ1cnR4IiwidHlwZSIsIlNUUklORyIsInVzZXIiLCJ3aGF0IiwidGluaSIsIklOVEVHRVIiLCJ0ZHVlIiwiY2F0Y2giXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFDQTs7Ozs7O0FBRUEsSUFBSUEsU0FBSixFQUFlQyxPQUFmOztBQUVBO0FBTEE7QUFNQSxRQXNDa0JELFNBdENsQixlQUFZLHdCQUFjLFVBQWQsRUFBMEJFLFFBQVFDLEdBQVIsQ0FBWUMsT0FBdEMsRUFDMEJGLFFBQVFDLEdBQVIsQ0FBWUUsT0FEdEMsRUFDK0M7QUFDekRDLFFBQU0sU0FEbUQ7QUFFekRDLFdBQVMsUUFGZ0Q7QUFHekRDLFFBQU07QUFDSkMsU0FBSyxDQUREO0FBRUpDLFNBQUssQ0FGRDtBQUdKQyxVQUFNO0FBSEYsR0FIbUQ7QUFRekQ7QUFDQTtBQUNBQyxXQUFTO0FBVmdELENBRC9DLENBQVo7O0FBY0E7QUFDQVosVUFBVWEsWUFBVixHQUNHQyxJQURILENBQ1EsVUFBU0MsR0FBVCxFQUFjO0FBQ2xCQyxVQUFRQyxHQUFSLENBQVksK0NBQVo7QUFDQTtBQUNBLFVBbUJLaEIsT0FuQkwsYUFBVUQsVUFBVWtCLE1BQVYsQ0FBaUIsVUFBakIsRUFBNkI7QUFDckNDLFVBQU0sRUFBRUMsTUFBTSxvQkFBVUMsTUFBbEIsRUFEK0IsRUFDRjtBQUNuQ0MsVUFBTSxFQUFFRixNQUFNLG9CQUFVQyxNQUFsQixFQUYrQixFQUVGO0FBQ25DRSxVQUFNLEVBQUVILE1BQU0sb0JBQVVDLE1BQWxCLEVBSCtCLEVBR0Y7QUFDbkM7QUFDQUcsVUFBTSxFQUFFSixNQUFNLG9CQUFVSyxPQUFsQixFQUwrQixFQUtGO0FBQ25DQyxVQUFNLEVBQUVOLE1BQU0sb0JBQVVDLE1BQWxCLEVBTitCLENBTUg7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVhxQyxHQUE3QixDQUFWO0FBYUE7QUFDRCxDQWxCSCxFQW1CR00sS0FuQkgsQ0FtQlMsVUFBVVosR0FBVixFQUFlO0FBQ3BCQyxVQUFRQyxHQUFSLENBQVkscUNBQVosRUFBbURGLEdBQW5EO0FBQ0QsQ0FyQkg7O1FBdUJTZCxPLEdBQUFBLE87UUFBU0QsUyxHQUFBQSxTOztBQUVsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6InByb21pc2UuanMiLCJzb3VyY2VSb290IjoiL2FwcC9tb2RlbHMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gODBjaGFycyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPlxuaW1wb3J0IFNlcXVlbGl6ZSBmcm9tICdzZXF1ZWxpemUnXG5cbnZhciBzZXF1ZWxpemUsIFByb21pc2VcblxuLy8gc2V0IHVwIGEgbmV3IGRhdGFiYXNlIHVzaW5nIGRhdGFiYXNlIGNyZWRlbnRpYWxzIHNldCBpbiAuZW52XG5zZXF1ZWxpemUgPSBuZXcgU2VxdWVsaXplKCdkYXRhYmFzZScsIHByb2Nlc3MuZW52LkRCX1VTRVIsIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmVudi5EQl9QQVNTLCB7XG4gIGhvc3Q6ICcwLjAuMC4wJyxcbiAgZGlhbGVjdDogJ3NxbGl0ZScsXG4gIHBvb2w6IHtcbiAgICBtYXg6IDUsXG4gICAgbWluOiAwLFxuICAgIGlkbGU6IDEwMDAwLFxuICB9LFxuICAvLyBTZWN1cml0eSBub3RlOiBkYiBpcyBzYXZlZCB0byBgLmRhdGEvZGF0YWJhc2Uuc3FsaXRlYCBpbiBsb2NhbCBmaWxlc3lzdGVtLlxuICAvLyBOb3RoaW5nIGluIGAuZGF0YWAgZGlyZWN0b3J5IGdldHMgY29waWVkIGlmIHNvbWVvbmUgcmVtaXhlcyB0aGUgcHJvamVjdC5cbiAgc3RvcmFnZTogJy5kYXRhL2RhdGFiYXNlLnNxbGl0ZSdcbn0pO1xuXG4vLyBhdXRoZW50aWNhdGUgd2l0aCB0aGUgZGF0YWJhc2VcbnNlcXVlbGl6ZS5hdXRoZW50aWNhdGUoKVxuICAudGhlbihmdW5jdGlvbihlcnIpIHtcbiAgICBjb25zb2xlLmxvZygnQ29ubmVjdGlvbiBoYXMgYmVlbiBlc3RhYmxpc2hlZCBzdWNjZXNzZnVsbHkuJylcbiAgICAvLyBkZWZpbmUgYSBuZXcgdGFibGUgJ3Byb21pc2VzJ1xuICAgIFByb21pc2UgPSBzZXF1ZWxpemUuZGVmaW5lKCdwcm9taXNlcycsIHtcbiAgICAgIHVydHg6IHsgdHlwZTogU2VxdWVsaXplLlNUUklORyAgfSwgLy8gdXJ0ZXh0LCBpbmNsdWRpbmcgd2hvbGUgVVJMXG4gICAgICB1c2VyOiB7IHR5cGU6IFNlcXVlbGl6ZS5TVFJJTkcgIH0sIC8vIHdobydzIG1ha2luZyB0aGUgcHJvbWlzZVxuICAgICAgd2hhdDogeyB0eXBlOiBTZXF1ZWxpemUuU1RSSU5HICB9LCAvLyB3aGF0J3MgYmVpbmcgcHJvbWlzZWRcbiAgICAgIC8vd2hvbTogeyB0eXBlOiBTZXF1ZWxpemUuU1RSSU5HICB9LCAvLyB0byB3aG9tIGFyZSB5b3UgcHJvbWlzaW5nXG4gICAgICB0aW5pOiB7IHR5cGU6IFNlcXVlbGl6ZS5JTlRFR0VSIH0sIC8vIHVuaXh0aW1lIHRoYXQgcHJvbWlzZSB3YXMgbWFkZVxuICAgICAgdGR1ZTogeyB0eXBlOiBTZXF1ZWxpemUuU1RSSU5HIH0sIC8vIHVuaXh0aW1lIHRoYXQgdGhlIHByb21pc2UgaXMgZHVlXG4gICAgICAvL3Rtem46IHsgdHlwZTogU2VxdWVsaXplLlNUUklORyAgfSwgLy8gdGltZXpvbmVcbiAgICAgIC8vd3RkaWQ6IHsgdHlwZTogU2VxdWVsaXplLklOVEVHRVIgfSwgLy8gdW5peHRpbWUgcHJvbWlzZSB3YXMgZnVsZmlsbGVkXG4gICAgICAvL2ZpbGw6IHsgdHlwZTogU2VxdWVsaXplLkZMT0FUICAgfSwgLy8gZnJhY3Rpb24gZnVsZmlsbGVkXG4gICAgICAvL3ZvaWQ6IHsgdHlwZTogU2VxdWVsaXplLkJPT0xFQU4gfSwgLy8gd2hldGhlciBwcm9taXNlIHdhcyB2b2lkZWRcbiAgICAgIC8vIHRleHQ6ICAgeyB0eXBlOiBTZXF1ZWxpemUuU1RSSU5HIH0sIC8vIHRoaXMgd2FzIGp1c3QgZm9yIHRlc3RpbmdcbiAgICB9KVxuICAgIC8vc2V0dXAoKVxuICB9KVxuICAuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgIGNvbnNvbGUubG9nKCdVbmFibGUgdG8gY29ubmVjdCB0byB0aGUgZGF0YWJhc2U6ICcsIGVycilcbiAgfSlcblxuZXhwb3J0IHsgUHJvbWlzZSwgc2VxdWVsaXplIH1cblxuLy8gREFUQUJBU0UgRklFTERTOlxuLy8gICB1cnR4IC0tIHVydGV4dCwgaWUsIGZ1bGwgb3JpZ2luYWwgdGV4dCB0aGUgdXNlciB0eXBlZCB0byBjcmVhdGUgdGhlIHByb21pc2Vcbi8vICAgdXNlciAtLSB3aG8ncyBtYWtpbmcgdGhlIHByb21pc2Vcbi8vICAgd2hhdCAtLSB3aGF0J3MgYmVpbmcgcHJvbWlzZWRcbi8vICAgd2hvbSAtLSB0byB3aG9tIGFyZSB5b3UgcHJvbWlzaW5nXG4vLyAgIHRpbmkgLS0gdW5peHRpbWUgdGhhdCB0aGUgcHJvbWlzZSB3YXMgbWFkZVxuLy8gICB0ZHVlIC0tIHVuaXh0aW1lIHRoYXQgdGhlIHByb21pc2UgaXMgZHVlXG4vLyAgIHRtem4gLS0gdGltZXpvbmUgYXNzdW1lZCBmb3IgcGFyc2luZyB0aGUgZGVhZGxpbmVcbi8vICAgdGZpbiAtLSB1bml4dGltZSB0aGF0IHRoZSBwcm9taXNlIHdhcyBmdWxmaWxsZWRcbi8vICAgZmlsbCAtLSBmcmFjdGlvbiBmdWxmaWxsZWQsIGRlZmF1bHQgMFxuLy8gICB2b2lkIC0tIHRydWUgaWYgdGhlIHByb21pc2UgYmVjYW1lIHVuZnVsZmlsbGFibGUgb3IgbW9vdFxuLy8gICBjbGl4IC0tIG51bWJlciBvZiBjbGlja3MgYSBwcm9taXNlIGhhcyBnb3R0ZW5cbi8vICAgY29uZiAtLSB0cnVlIHdoZW4gc29tZW9uZSBjbGlja3MgdGhlIGJ1dHRvbiB0byBjb25maXJtIHRoZSBjb21taXRtZW50XG4vLyAgIGF1ZHQgLS0gYXVkaXQgdHJhaWwgb2YgaHR0cCBoZWFkZXIgaW5mbyBmb3Igd2hvIGNvbmZpcm1lZCBpdCAob3IgdXNlcm5hbWUpXG4vLyAgIHRleHQgLS0gb3B0aW9uYWwgYWRkaXRpb25hbCBub3RlcyBvciB0ZXh0IG9yIGNvbnRleHQgZm9yIHRoZSBwcm9taXNlXG4vLyBGb3IgZXhhbXBsZTpcbi8vICAgdXJ0eCA9IFwiYm9iLnByb21pc2VzLnRvL2Zvb190aGVfYmFyL2J5L25vb25fdG9tb3Jyb3dcIlxuLy8gICB1c2VyID0gXCJib2JcIlxuLy8gICB3aGF0ID0gXCJmb28gdGhlIGJhclwiXG4vLyAgIHdob20gPSBudWxsXG4vLyAgIHRpbmkgPSBbdW5peHRpbWUgb2YgZmlyc3QgR0VUIHJlcXVlc3Qgb2YgdGhlIHByb21pc2UncyBVUkxdXG4vLyAgIHRkdWUgPSBbd2hhdCBcIm5vb24gdG9tb3Jyb3dcIiBwYXJzZWQgdG8gYXQgdGltZSB0aW5pXVxuLy8gICB0bXpuID0gXCJBbWVyaWNhL0xvc19BbmdlbGVzXCJcbi8vICAgdGZpbiA9IFt1bml4dGltZSB0aGF0IHRoZSBwcm9taXNlIHdhcyBmdWxmaWxsZWRdXG4vLyAgIGZpbGwgPSAwXG4vLyAgIHZvaWQgPSBmYWxzZVxuLy8gICBjbGl4ID0gMFxuLy8gICBjb25mID0gZmFsc2Vcbi8vICAgYXVkdCA9IFwiTWFjT1MvQ2hyb21lIHVzZXIgaW4gUG9ydGxhbmQgT1JcIlxuLy8gICB0ZXh0ID0gXCJwcm9taXNlZCBpbiBzbGFjayBkaXNjdXNzaW9uIGFib3V0IHN1Y2gtYW5kLXN1Y2hcIlxuXG4vLyBPdGhlciBpZGVhcyBmb3IgZmllbGRzOiBcbi8vICogaW5mb3JtYXRpb24gYWJvdXQgdGhlIGNsaWVudCB0aGF0IG9yaWdpbmFsbHkgY3JlYXRlZCB0aGUgcHJvbWlzZVxuLy8gKiB3aGV0aGVyIHRoZSBwcm9taXNlIHdhcyBjcmVhdGVkIGJ5IHRoZSBhY3R1YWwgdXNlciAoaWYgdGhleSB3ZXJlIGxvZ2dlZCBpbiBcbi8vICAgYW5kIHdlcmUgdGhlIGZpcnN0IHRvIGNsaWNrIG9uIGl0KSBvciBieSBhbm90aGVyIGxvZ2dlZC1pbiB1c2VyIG9yIGJ5IFxuLy8gICBzb21lb25lIG5vdCBsb2dnZWQgaW5cbi8vICogY29uZjogbWF5YmUgd2UgY3JlYXRlIHRoZSBwcm9taXNlIHdoZXRoZXIgb3Igbm90IGFueW9uZSBjbGlja3MgdGhlIGJ1dHRvbiBcbi8vICAgdG8gY29uZmlybSBpdCwgaW4gd2hpY2ggY2FzZSB3ZSBzdG9yZSB3aGVuIGl0J3MgYWN0dWFsbHkgYmVlbiBjb25maXJtZWRcbi8vICogXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gODBjaGFycyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPlxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "promise.js"
      ],
      "names": [
        "sequelize",
        "Promise",
        "process",
        "env",
        "DB_USER",
        "DB_PASS",
        "host",
        "dialect",
        "pool",
        "max",
        "min",
        "idle",
        "storage",
        "authenticate",
        "then",
        "err",
        "console",
        "log",
        "define",
        "urtx",
        "type",
        "STRING",
        "user",
        "what",
        "tini",
        "INTEGER",
        "tdue",
        "catch"
      ],
      "mappings": ";;;;;;;AACA;;;;;;AAEA,IAAIA,SAAJ,EAAeC,OAAf;;AAEA;AALA;AAMA,QAsCkBD,SAtClB,eAAY,wBAAc,UAAd,EAA0BE,QAAQC,GAAR,CAAYC,OAAtC,EAC0BF,QAAQC,GAAR,CAAYE,OADtC,EAC+C;AACzDC,QAAM,SADmD;AAEzDC,WAAS,QAFgD;AAGzDC,QAAM;AACJC,SAAK,CADD;AAEJC,SAAK,CAFD;AAGJC,UAAM;AAHF,GAHmD;AAQzD;AACA;AACAC,WAAS;AAVgD,CAD/C,CAAZ;;AAcA;AACAZ,UAAUa,YAAV,GACGC,IADH,CACQ,UAASC,GAAT,EAAc;AAClBC,UAAQC,GAAR,CAAY,+CAAZ;AACA;AACA,UAmBKhB,OAnBL,aAAUD,UAAUkB,MAAV,CAAiB,UAAjB,EAA6B;AACrCC,UAAM,EAAEC,MAAM,oBAAUC,MAAlB,EAD+B,EACF;AACnCC,UAAM,EAAEF,MAAM,oBAAUC,MAAlB,EAF+B,EAEF;AACnCE,UAAM,EAAEH,MAAM,oBAAUC,MAAlB,EAH+B,EAGF;AACnC;AACAG,UAAM,EAAEJ,MAAM,oBAAUK,OAAlB,EAL+B,EAKF;AACnCC,UAAM,EAAEN,MAAM,oBAAUC,MAAlB,EAN+B,CAMH;AAClC;AACA;AACA;AACA;AACA;AAXqC,GAA7B,CAAV;AAaA;AACD,CAlBH,EAmBGM,KAnBH,CAmBS,UAAUZ,GAAV,EAAe;AACpBC,UAAQC,GAAR,CAAY,qCAAZ,EAAmDF,GAAnD;AACD,CArBH;;QAuBSd,O,GAAAA,O;QAASD,S,GAAAA,S;;AAElB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA",
      "file": "promise.js",
      "sourceRoot": "/app/models",
      "sourcesContent": [
        "// --------------------------------- 80chars ---------------------------------->\nimport Sequelize from 'sequelize'\n\nvar sequelize, Promise\n\n// set up a new database using database credentials set in .env\nsequelize = new Sequelize('database', process.env.DB_USER, \n                                      process.env.DB_PASS, {\n  host: '0.0.0.0',\n  dialect: 'sqlite',\n  pool: {\n    max: 5,\n    min: 0,\n    idle: 10000,\n  },\n  // Security note: db is saved to `.data/database.sqlite` in local filesystem.\n  // Nothing in `.data` directory gets copied if someone remixes the project.\n  storage: '.data/database.sqlite'\n});\n\n// authenticate with the database\nsequelize.authenticate()\n  .then(function(err) {\n    console.log('Connection has been established successfully.')\n    // define a new table 'promises'\n    Promise = sequelize.define('promises', {\n      urtx: { type: Sequelize.STRING  }, // urtext, including whole URL\n      user: { type: Sequelize.STRING  }, // who's making the promise\n      what: { type: Sequelize.STRING  }, // what's being promised\n      //whom: { type: Sequelize.STRING  }, // to whom are you promising\n      tini: { type: Sequelize.INTEGER }, // unixtime that promise was made\n      tdue: { type: Sequelize.STRING }, // unixtime that the promise is due\n      //tmzn: { type: Sequelize.STRING  }, // timezone\n      //wtdid: { type: Sequelize.INTEGER }, // unixtime promise was fulfilled\n      //fill: { type: Sequelize.FLOAT   }, // fraction fulfilled\n      //void: { type: Sequelize.BOOLEAN }, // whether promise was voided\n      // text:   { type: Sequelize.STRING }, // this was just for testing\n    })\n    //setup()\n  })\n  .catch(function (err) {\n    console.log('Unable to connect to the database: ', err)\n  })\n\nexport { Promise, sequelize }\n\n// DATABASE FIELDS:\n//   urtx -- urtext, ie, full original text the user typed to create the promise\n//   user -- who's making the promise\n//   what -- what's being promised\n//   whom -- to whom are you promising\n//   tini -- unixtime that the promise was made\n//   tdue -- unixtime that the promise is due\n//   tmzn -- timezone assumed for parsing the deadline\n//   tfin -- unixtime that the promise was fulfilled\n//   fill -- fraction fulfilled, default 0\n//   void -- true if the promise became unfulfillable or moot\n//   clix -- number of clicks a promise has gotten\n//   conf -- true when someone clicks the button to confirm the commitment\n//   audt -- audit trail of http header info for who confirmed it (or username)\n//   text -- optional additional notes or text or context for the promise\n// For example:\n//   urtx = \"bob.promises.to/foo_the_bar/by/noon_tomorrow\"\n//   user = \"bob\"\n//   what = \"foo the bar\"\n//   whom = null\n//   tini = [unixtime of first GET request of the promise's URL]\n//   tdue = [what \"noon tomorrow\" parsed to at time tini]\n//   tmzn = \"America/Los_Angeles\"\n//   tfin = [unixtime that the promise was fulfilled]\n//   fill = 0\n//   void = false\n//   clix = 0\n//   conf = false\n//   audt = \"MacOS/Chrome user in Portland OR\"\n//   text = \"promised in slack discussion about such-and-such\"\n\n// Other ideas for fields: \n// * information about the client that originally created the promise\n// * whether the promise was created by the actual user (if they were logged in \n//   and were the first to click on it) or by another logged-in user or by \n//   someone not logged in\n// * conf: maybe we create the promise whether or not anyone clicks the button \n//   to confirm it, in which case we store when it's actually been confirmed\n// * \n// --------------------------------- 80chars ---------------------------------->\n"
      ]
    },
    "mtime": 1507437054002
  },
  "{\"filename\":\"/app/data/seed.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/data\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "domain",
            "users",
            "promises"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "domain",
              "exported": "domain"
            },
            {
              "kind": "local",
              "local": "users",
              "exported": "users"
            },
            {
              "kind": "local",
              "local": "promises",
              "exported": "promises"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/data/seed.js",
      "filenameRelative": "/app/data/seed.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "seed.js",
      "sourceFileName": "seed.js",
      "sourceRoot": "/app/data",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/data",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "seed"
    },
    "ignored": false,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n// i know we're domain agnostic, but i think it makes sense to\n// have a default, and not hardcode it everywhere\nvar domain = exports.domain = 'commits.to';\n\nvar users = exports.users = [\n/* testing */\n\"alice\", \"bob\", \"carol\",\n/* initial co-conspirators */\n\"dreev\", \"sergii\", \"kim\", \"bee\", \"braden\",\n/* daily beemail */\n\"byorgey\", \"nick\", \"josh\", \"dehowell\", \"caillu\", \"mbork\", \"roy\", \"jennyli\", \"owen\",\n/* weekly beemail */\n\"samuel\", \"cole\", \"jessica\", \"steven\",\n/* contributors */\n\"chris\", \"stephen\",\n/* invitees */\n\"pierre\", \"chelsea\"];\n\n// dreev calls dibs on \"danny\", \"dan\", & \"d\" in case we implement aliases\n// usernames to disallow: \"www\", \"admin\", \n\n// Initial promise list hardcoded so don't have to worry about blowing db away\nvar promises = exports.promises = [\"alice.promises.to/File_the_TPS_report/by/noon_mon\", \"bob.promises.to/Send_vacation_photos/by/saturday\", \"carol.promises.to/Call_the_dentist/by/12am\", \"dreev.promises.to/show_sergii_this_doing_something_useful/by/3am\", // 9-10, done\n\"dreev.promises.to/show_bee_open_questions/by/10:30pm\", // 9-10, done\n\"braden.promises.to/help_with_javascript/by/5pm\", // 9-11\n\"dreev.promises.to/show_brennan_intro/by/10:50pm\", // 9-11, done\n\"dreev.promises.to/queue_tweet_etc_for_blog_post/by/2pm\", // 9-11, done\n\"dreev.promises.to/order_indian/by/5:30pm\", // 9-12, done\n\"dreev.commits.to/ask_bee_re_sunday_parkways\", // 9-13, done\n\"dreev.commits.to/follow_up_with_everyone_re_guest_blogging\", // 9-13\n\"josh.commits.to/get_realisies_running/by/september_30\", // 9-13\n\"braden.commits.to/outline_bite_counting_post/by/Sunday_11pm\", // 9-13\n\"dreev.commits.to/report_glitch_bug\", // 9-14, done\n\"dreev.commits.to/googledocify_intern_form/by/12pm\", // 9-14, done\n\"dreev.promises.to/test_penalty_func/by/saturday_noon\", // 9-14, done\n\"sergii.promises.to/work_on_points_2_to_4/by/next_monday\", // 9-14\n\"dreev.commits.to/meta_debrief_kim/by/midnight_friday\", // 9-14, done\n\"dreev.commits.to/ping_mirabai/by/sep_22\", // 9-14, done\n\"dreev.commits.to/send_ms_gross_email/by/sunday_11am\", // 9-14, done\n\"dreev.promises.to/ping_oli/by/nov_16\", // 9-15\n\"dreev.promises.to/ping_byorgey/by/dec_20\", // 9-15\n\"dreev.promises.to/labelzero/by/1am\", // 9-15, done\n\"chris.promises.to/follow_up_on_that_support_thread\", // 9-18\n\"bee.commits.to/new-family-photo-to-yoko/by/tomorrow-night\", // 9-18, done\n\"bee.commits.to/rest-of-paperwork-to-yoko-before-the-gym-tomorrow\", // 9-18, done 2 hours late\n\"dreev.promises.to/debug_capitalization/by/tomorrow\", // 9-18, done 23.4 hours late\n\"bee.commits.to/email-sleep-as-android-for-specifics-about-sleep-length-measurement\", // 9-19\n\"jessica.commits.to/let_bob_know_re_meeting/by/tomorrow_5pm\", // 9-19\n\"samuel.commits.to/finish_ch_23_problem_set/by/today_6_pm\", // 9-19\n\"dreev.promises.to/intern_disc/by/wed\", // 9-19, done\n\"kim.promises.to/email_argue_summary/by/fri\", // 9-19\n\"dreev.commits.to/clear_bogus_commit_for_nick/by/5_minutes_from_now\", // 9-19, done\n\"kim.promises.to/reflect_Respond_anxiety_spiral_Assist/by/sat\", // 9-19\n\"dreev.commits.to/schedule-k_tax_thing/by/5pm\", // 9-19, done\n\"dreev.promises.to/set_up_mom_on_wordfeud/by/tomorrow\", // 9-20, done/void\n\"dreev.promises.to/reply_to_use_case_email/by/midnight\", // 9-20, done\n\"kim.promises.to/consider_all_weekend_social_options/by/fri/10pm\", // 9-20\n\"kim.promises.to/submit_conclusion_email/by/10/16\", // 9-21\n\"kim.promises.to/complete_type_1_essay/by/10/1\", // 9-21\n\"kim.promises.to/inform_eve_plans/by/2\", // 9-21\n\"kim.promises.to/email_cynthia_charlap_tickets/by/9/22\", // 9-21\n\"kim.promises.to/schedule_attorney_meet/by/10/1\", // 9-21\n\"kim.promises.to/john_PAM_photos_ask/by/10/1\", // 9-21\n\"kim.promises.to/Nike_p5_email/by/10/1\", // 9-21\n\"kim.promises.to/intro_martin_marna/by/10/5\", // 9-21\n\"kim.promises.to/sbonomic_jitsjudgelist_doc/by/10/15\", // 9-21\n\"kim.promises.to/consider_all_weekend_social_options/by/fri/10pm\", // 9-21\n\"dreev.commits.to/dedup_the_iwills/by/nov\", // 9-22\n\"byorgey.promises.to/email_cut_property_summary/by/7pm\", // 9-22\n\"dreev.commits.to/copy_editing_pass_on_tao2/by/tmw_2pm\", // 9-22, done\n\"chris.promises.to/open_a_smoothie_shop/by/December\", // 9-25\n\"pierre.promises.to/water_the_office_plant/by/Friday\", // 9-25\n\"dreev.promises.to/hanna_reply/by/tonight\", // 9-26, done\n\"bee.promises.to/read-hannas-emails\", // 9-26, done\n\"bee.promises.to/reping-one-with-heart\", // 9-26\n\"bee.promises.to/fill-out-metromile-feedback\", // 9-26\n\"bee.promises.to/schedule-planning-with-cantor/by/friday-night\", // 9-26, done\n\"dreev.promises.to/ask_jana_about_blood_testers/by/dec_1\", // 9-26\n\"dreev.commits.to/take_copyediting_pass_on_micheles_draft/by/saturday\", // 9/27, done\n\"stephen.promises.to/decide_upon_late_october_trip/by/saturday\", // 9-27\n\"roy.promises.to/sign_up_for_app\", // 9-27\n\"jennyli.promises.to/water_the_plants/by/sunday\", // 9-27\n\"owen.promises.to/adjust-the-shed/by/tonight_7pm\", // 9-28\n\"cole.promises.to/find_a_rep_for_dining_vendors\", // 9-28\n\"chris.promises.to/learn-more-about-glitch/by/monday\", // 9-28\n\"chris.promises.to/learn-more-about-something-else/by/monday\", // 9-28\n\"dreev.promises.to/add_chelsea_to_commits_to/by/11am\", // 9-29, done\n\"bee.commits.to/put-away-camping-gear-this-weekend\", // 9-29\n\"owen.promises.to/research_and_pseudocode_calendar_integration/by/oct_6\", // 9-29, done\n\"caillu.commits.to/test_trying_out_time/by/2017-09-30_20:42\", // 9-30\n\"dreev.commits.to/let_yall_know_about_monitor/by/next_week\", // 10-02\n\"bee.commits.to/prettying_road_editor\", // 10-04\n\"kim.promises.to/talk_finances_w_D/by/10/30/2017\", // 10-05\n\"dreev.commits.to/give_marcin_status_update/by/oct-5-noon\", // 9-04, done 10.5 hours late\n\"dreev.commits.to/give_james_d_status_update/by/oct-5-noon\", // 9-04, done 10.5 hours late\n\"mbork.promises.to/edit_tutorial_for_students/by/tomorrow_8am\", // 10-06\n\"dreev.commits.to/ping_josh_re_realsies_integration/by/nov_7\"];\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlZWQuanMiXSwibmFtZXMiOlsiZG9tYWluIiwidXNlcnMiLCJwcm9taXNlcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBQTtBQUNBO0FBQ08sSUFBTUEsMEJBQVMsWUFBZjs7QUFFQSxJQUFNQyx3QkFBUTtBQUNuQjtBQUNBLE9BRm1CLEVBRVYsS0FGVSxFQUVILE9BRkc7QUFHbkI7QUFDQSxPQUptQixFQUlWLFFBSlUsRUFJQSxLQUpBLEVBSU8sS0FKUCxFQUljLFFBSmQ7QUFLbkI7QUFDQSxTQU5tQixFQU1SLE1BTlEsRUFNQSxNQU5BLEVBTVEsVUFOUixFQU1vQixRQU5wQixFQU04QixPQU45QixFQU11QyxLQU52QyxFQU04QyxTQU45QyxFQU9uQixNQVBtQjtBQVFuQjtBQUNBLFFBVG1CLEVBU1QsTUFUUyxFQVNELFNBVEMsRUFTVSxRQVRWO0FBVW5CO0FBQ0EsT0FYbUIsRUFXVixTQVhVO0FBWW5CO0FBQ0EsUUFibUIsRUFhVCxTQWJTLENBQWQ7O0FBZ0JQO0FBQ0E7O0FBRUE7QUFDTyxJQUFNQyw4QkFBVyxDQUN0QixtREFEc0IsRUFFdEIsa0RBRnNCLEVBR3RCLDRDQUhzQixFQUl0QixrRUFKc0IsRUFJOEM7QUFDcEUsc0RBTHNCLEVBS2tDO0FBQ3hELGdEQU5zQixFQU00QjtBQUNsRCxpREFQc0IsRUFPNkI7QUFDbkQsd0RBUnNCLEVBUW9DO0FBQzFELDBDQVRzQixFQVNzQjtBQUM1Qyw2Q0FWc0IsRUFVeUI7QUFDL0MsNERBWHNCLEVBV3dDO0FBQzlELHVEQVpzQixFQVltQztBQUN6RCw2REFic0IsRUFheUM7QUFDL0Qsb0NBZHNCLEVBY2dCO0FBQ3RDLG1EQWZzQixFQWUrQjtBQUNyRCxzREFoQnNCLEVBZ0JrQztBQUN4RCx5REFqQnNCLEVBaUJxQztBQUMzRCxzREFsQnNCLEVBa0JrQztBQUN4RCx5Q0FuQnNCLEVBbUJxQjtBQUMzQyxxREFwQnNCLEVBb0JpQztBQUN2RCxzQ0FyQnNCLEVBcUJrQjtBQUN4QywwQ0F0QnNCLEVBc0JzQjtBQUM1QyxvQ0F2QnNCLEVBdUJnQjtBQUN0QyxvREF4QnNCLEVBd0JnQztBQUN0RCwyREF6QnNCLEVBeUJ1QztBQUM3RCxrRUExQnNCLEVBMEI4QztBQUNwRSxvREEzQnNCLEVBMkJnQztBQUN0RCxvRkE1QnNCLEVBNEJnRTtBQUN0Riw0REE3QnNCLEVBNkJ3QztBQUM5RCwwREE5QnNCLEVBOEJzQztBQUM1RCxzQ0EvQnNCLEVBK0JrQjtBQUN4Qyw0Q0FoQ3NCLEVBZ0N3QjtBQUM5QyxvRUFqQ3NCLEVBaUNnRDtBQUN0RSw4REFsQ3NCLEVBa0MwQztBQUNoRSw4Q0FuQ3NCLEVBbUMwQjtBQUNoRCxzREFwQ3NCLEVBb0NrQztBQUN4RCx1REFyQ3NCLEVBcUNtQztBQUN6RCxpRUF0Q3NCLEVBc0M2QztBQUNuRSxrREF2Q3NCLEVBdUM4QjtBQUNwRCwrQ0F4Q3NCLEVBd0MyQjtBQUNqRCx1Q0F6Q3NCLEVBeUNtQjtBQUN6Qyx1REExQ3NCLEVBMENtQztBQUN6RCxnREEzQ3NCLEVBMkM0QjtBQUNsRCw2Q0E1Q3NCLEVBNEN5QjtBQUMvQyx1Q0E3Q3NCLEVBNkNtQjtBQUN6Qyw0Q0E5Q3NCLEVBOEN3QjtBQUM5QyxxREEvQ3NCLEVBK0NpQztBQUN2RCxpRUFoRHNCLEVBZ0Q2QztBQUNuRSwwQ0FqRHNCLEVBaURzQjtBQUM1Qyx1REFsRHNCLEVBa0RtQztBQUN6RCx1REFuRHNCLEVBbURtQztBQUN6RCxvREFwRHNCLEVBb0RnQztBQUN0RCxxREFyRHNCLEVBcURpQztBQUN2RCwwQ0F0RHNCLEVBc0RzQjtBQUM1QyxvQ0F2RHNCLEVBdURnQjtBQUN0Qyx1Q0F4RHNCLEVBd0RtQjtBQUN6Qyw2Q0F6RHNCLEVBeUR5QjtBQUMvQywrREExRHNCLEVBMEQyQztBQUNqRSx5REEzRHNCLEVBMkRxQztBQUMzRCxzRUE1RHNCLEVBNERrRDtBQUN4RSwrREE3RHNCLEVBNkQyQztBQUNqRSxpQ0E5RHNCLEVBOERhO0FBQ25DLGdEQS9Ec0IsRUErRDRCO0FBQ2xELGlEQWhFc0IsRUFnRTZCO0FBQ25ELGdEQWpFc0IsRUFpRTRCO0FBQ2xELHFEQWxFc0IsRUFrRWlDO0FBQ3ZELDZEQW5Fc0IsRUFtRXlDO0FBQy9ELHFEQXBFc0IsRUFvRWlDO0FBQ3ZELG1EQXJFc0IsRUFxRStCO0FBQ3JELHdFQXRFc0IsRUFzRW9EO0FBQzFFLDREQXZFc0IsRUF1RXdDO0FBQzlELDJEQXhFc0IsRUF3RXVDO0FBQzdELHNDQXpFc0IsRUF5RWtCO0FBQ3hDLGlEQTFFc0IsRUEwRTZCO0FBQ25ELDBEQTNFc0IsRUEyRXNDO0FBQzVELDJEQTVFc0IsRUE0RXVDO0FBQzdELDhEQTdFc0IsRUE2RTBDO0FBQ2hFLDZEQTlFc0IsQ0FBakIiLCJmaWxlIjoic2VlZC5qcyIsInNvdXJjZVJvb3QiOiIvYXBwL2RhdGEiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBpIGtub3cgd2UncmUgZG9tYWluIGFnbm9zdGljLCBidXQgaSB0aGluayBpdCBtYWtlcyBzZW5zZSB0b1xuLy8gaGF2ZSBhIGRlZmF1bHQsIGFuZCBub3QgaGFyZGNvZGUgaXQgZXZlcnl3aGVyZVxuZXhwb3J0IGNvbnN0IGRvbWFpbiA9ICdjb21taXRzLnRvJyA7XG5cbmV4cG9ydCBjb25zdCB1c2VycyA9IFsgXG4gIC8qIHRlc3RpbmcgKi8gXG4gIFwiYWxpY2VcIiwgXCJib2JcIiwgXCJjYXJvbFwiLFxuICAvKiBpbml0aWFsIGNvLWNvbnNwaXJhdG9ycyAqLyBcbiAgXCJkcmVldlwiLCBcInNlcmdpaVwiLCBcImtpbVwiLCBcImJlZVwiLCBcImJyYWRlblwiLCBcbiAgLyogZGFpbHkgYmVlbWFpbCAqLyBcbiAgXCJieW9yZ2V5XCIsIFwibmlja1wiLCBcImpvc2hcIiwgXCJkZWhvd2VsbFwiLCBcImNhaWxsdVwiLCBcIm1ib3JrXCIsIFwicm95XCIsIFwiamVubnlsaVwiLCBcbiAgXCJvd2VuXCIsXG4gIC8qIHdlZWtseSBiZWVtYWlsICovIFxuICBcInNhbXVlbFwiLCBcImNvbGVcIiwgXCJqZXNzaWNhXCIsIFwic3RldmVuXCIsXG4gIC8qIGNvbnRyaWJ1dG9ycyAqLyBcbiAgXCJjaHJpc1wiLCBcInN0ZXBoZW5cIixcbiAgLyogaW52aXRlZXMgKi8gXG4gIFwicGllcnJlXCIsIFwiY2hlbHNlYVwiLCBcbl1cblxuLy8gZHJlZXYgY2FsbHMgZGlicyBvbiBcImRhbm55XCIsIFwiZGFuXCIsICYgXCJkXCIgaW4gY2FzZSB3ZSBpbXBsZW1lbnQgYWxpYXNlc1xuLy8gdXNlcm5hbWVzIHRvIGRpc2FsbG93OiBcInd3d1wiLCBcImFkbWluXCIsIFxuXG4vLyBJbml0aWFsIHByb21pc2UgbGlzdCBoYXJkY29kZWQgc28gZG9uJ3QgaGF2ZSB0byB3b3JyeSBhYm91dCBibG93aW5nIGRiIGF3YXlcbmV4cG9ydCBjb25zdCBwcm9taXNlcyA9IFtcbiAgXCJhbGljZS5wcm9taXNlcy50by9GaWxlX3RoZV9UUFNfcmVwb3J0L2J5L25vb25fbW9uXCIsXG4gIFwiYm9iLnByb21pc2VzLnRvL1NlbmRfdmFjYXRpb25fcGhvdG9zL2J5L3NhdHVyZGF5XCIsXG4gIFwiY2Fyb2wucHJvbWlzZXMudG8vQ2FsbF90aGVfZGVudGlzdC9ieS8xMmFtXCIsXG4gIFwiZHJlZXYucHJvbWlzZXMudG8vc2hvd19zZXJnaWlfdGhpc19kb2luZ19zb21ldGhpbmdfdXNlZnVsL2J5LzNhbVwiLCAvLyA5LTEwLCBkb25lXG4gIFwiZHJlZXYucHJvbWlzZXMudG8vc2hvd19iZWVfb3Blbl9xdWVzdGlvbnMvYnkvMTA6MzBwbVwiLCAvLyA5LTEwLCBkb25lXG4gIFwiYnJhZGVuLnByb21pc2VzLnRvL2hlbHBfd2l0aF9qYXZhc2NyaXB0L2J5LzVwbVwiLCAvLyA5LTExXG4gIFwiZHJlZXYucHJvbWlzZXMudG8vc2hvd19icmVubmFuX2ludHJvL2J5LzEwOjUwcG1cIiwgLy8gOS0xMSwgZG9uZVxuICBcImRyZWV2LnByb21pc2VzLnRvL3F1ZXVlX3R3ZWV0X2V0Y19mb3JfYmxvZ19wb3N0L2J5LzJwbVwiLCAvLyA5LTExLCBkb25lXG4gIFwiZHJlZXYucHJvbWlzZXMudG8vb3JkZXJfaW5kaWFuL2J5LzU6MzBwbVwiLCAvLyA5LTEyLCBkb25lXG4gIFwiZHJlZXYuY29tbWl0cy50by9hc2tfYmVlX3JlX3N1bmRheV9wYXJrd2F5c1wiLCAvLyA5LTEzLCBkb25lXG4gIFwiZHJlZXYuY29tbWl0cy50by9mb2xsb3dfdXBfd2l0aF9ldmVyeW9uZV9yZV9ndWVzdF9ibG9nZ2luZ1wiLCAvLyA5LTEzXG4gIFwiam9zaC5jb21taXRzLnRvL2dldF9yZWFsaXNpZXNfcnVubmluZy9ieS9zZXB0ZW1iZXJfMzBcIiwgLy8gOS0xM1xuICBcImJyYWRlbi5jb21taXRzLnRvL291dGxpbmVfYml0ZV9jb3VudGluZ19wb3N0L2J5L1N1bmRheV8xMXBtXCIsIC8vIDktMTNcbiAgXCJkcmVldi5jb21taXRzLnRvL3JlcG9ydF9nbGl0Y2hfYnVnXCIsIC8vIDktMTQsIGRvbmVcbiAgXCJkcmVldi5jb21taXRzLnRvL2dvb2dsZWRvY2lmeV9pbnRlcm5fZm9ybS9ieS8xMnBtXCIsIC8vIDktMTQsIGRvbmVcbiAgXCJkcmVldi5wcm9taXNlcy50by90ZXN0X3BlbmFsdHlfZnVuYy9ieS9zYXR1cmRheV9ub29uXCIsIC8vIDktMTQsIGRvbmVcbiAgXCJzZXJnaWkucHJvbWlzZXMudG8vd29ya19vbl9wb2ludHNfMl90b180L2J5L25leHRfbW9uZGF5XCIsIC8vIDktMTRcbiAgXCJkcmVldi5jb21taXRzLnRvL21ldGFfZGVicmllZl9raW0vYnkvbWlkbmlnaHRfZnJpZGF5XCIsIC8vIDktMTQsIGRvbmVcbiAgXCJkcmVldi5jb21taXRzLnRvL3BpbmdfbWlyYWJhaS9ieS9zZXBfMjJcIiwgLy8gOS0xNCwgZG9uZVxuICBcImRyZWV2LmNvbW1pdHMudG8vc2VuZF9tc19ncm9zc19lbWFpbC9ieS9zdW5kYXlfMTFhbVwiLCAvLyA5LTE0LCBkb25lXG4gIFwiZHJlZXYucHJvbWlzZXMudG8vcGluZ19vbGkvYnkvbm92XzE2XCIsIC8vIDktMTVcbiAgXCJkcmVldi5wcm9taXNlcy50by9waW5nX2J5b3JnZXkvYnkvZGVjXzIwXCIsIC8vIDktMTVcbiAgXCJkcmVldi5wcm9taXNlcy50by9sYWJlbHplcm8vYnkvMWFtXCIsIC8vIDktMTUsIGRvbmVcbiAgXCJjaHJpcy5wcm9taXNlcy50by9mb2xsb3dfdXBfb25fdGhhdF9zdXBwb3J0X3RocmVhZFwiLCAvLyA5LTE4XG4gIFwiYmVlLmNvbW1pdHMudG8vbmV3LWZhbWlseS1waG90by10by15b2tvL2J5L3RvbW9ycm93LW5pZ2h0XCIsIC8vIDktMTgsIGRvbmVcbiAgXCJiZWUuY29tbWl0cy50by9yZXN0LW9mLXBhcGVyd29yay10by15b2tvLWJlZm9yZS10aGUtZ3ltLXRvbW9ycm93XCIsIC8vIDktMTgsIGRvbmUgMiBob3VycyBsYXRlXG4gIFwiZHJlZXYucHJvbWlzZXMudG8vZGVidWdfY2FwaXRhbGl6YXRpb24vYnkvdG9tb3Jyb3dcIiwgLy8gOS0xOCwgZG9uZSAyMy40IGhvdXJzIGxhdGVcbiAgXCJiZWUuY29tbWl0cy50by9lbWFpbC1zbGVlcC1hcy1hbmRyb2lkLWZvci1zcGVjaWZpY3MtYWJvdXQtc2xlZXAtbGVuZ3RoLW1lYXN1cmVtZW50XCIsIC8vIDktMTlcbiAgXCJqZXNzaWNhLmNvbW1pdHMudG8vbGV0X2JvYl9rbm93X3JlX21lZXRpbmcvYnkvdG9tb3Jyb3dfNXBtXCIsIC8vIDktMTlcbiAgXCJzYW11ZWwuY29tbWl0cy50by9maW5pc2hfY2hfMjNfcHJvYmxlbV9zZXQvYnkvdG9kYXlfNl9wbVwiLCAvLyA5LTE5XG4gIFwiZHJlZXYucHJvbWlzZXMudG8vaW50ZXJuX2Rpc2MvYnkvd2VkXCIsIC8vIDktMTksIGRvbmVcbiAgXCJraW0ucHJvbWlzZXMudG8vZW1haWxfYXJndWVfc3VtbWFyeS9ieS9mcmlcIiwgLy8gOS0xOVxuICBcImRyZWV2LmNvbW1pdHMudG8vY2xlYXJfYm9ndXNfY29tbWl0X2Zvcl9uaWNrL2J5LzVfbWludXRlc19mcm9tX25vd1wiLCAvLyA5LTE5LCBkb25lXG4gIFwia2ltLnByb21pc2VzLnRvL3JlZmxlY3RfUmVzcG9uZF9hbnhpZXR5X3NwaXJhbF9Bc3Npc3QvYnkvc2F0XCIsIC8vIDktMTlcbiAgXCJkcmVldi5jb21taXRzLnRvL3NjaGVkdWxlLWtfdGF4X3RoaW5nL2J5LzVwbVwiLCAvLyA5LTE5LCBkb25lXG4gIFwiZHJlZXYucHJvbWlzZXMudG8vc2V0X3VwX21vbV9vbl93b3JkZmV1ZC9ieS90b21vcnJvd1wiLCAvLyA5LTIwLCBkb25lL3ZvaWRcbiAgXCJkcmVldi5wcm9taXNlcy50by9yZXBseV90b191c2VfY2FzZV9lbWFpbC9ieS9taWRuaWdodFwiLCAvLyA5LTIwLCBkb25lXG4gIFwia2ltLnByb21pc2VzLnRvL2NvbnNpZGVyX2FsbF93ZWVrZW5kX3NvY2lhbF9vcHRpb25zL2J5L2ZyaS8xMHBtXCIsIC8vIDktMjBcbiAgXCJraW0ucHJvbWlzZXMudG8vc3VibWl0X2NvbmNsdXNpb25fZW1haWwvYnkvMTAvMTZcIiwgLy8gOS0yMVxuICBcImtpbS5wcm9taXNlcy50by9jb21wbGV0ZV90eXBlXzFfZXNzYXkvYnkvMTAvMVwiLCAvLyA5LTIxXG4gIFwia2ltLnByb21pc2VzLnRvL2luZm9ybV9ldmVfcGxhbnMvYnkvMlwiLCAvLyA5LTIxXG4gIFwia2ltLnByb21pc2VzLnRvL2VtYWlsX2N5bnRoaWFfY2hhcmxhcF90aWNrZXRzL2J5LzkvMjJcIiwgLy8gOS0yMVxuICBcImtpbS5wcm9taXNlcy50by9zY2hlZHVsZV9hdHRvcm5leV9tZWV0L2J5LzEwLzFcIiwgLy8gOS0yMVxuICBcImtpbS5wcm9taXNlcy50by9qb2huX1BBTV9waG90b3NfYXNrL2J5LzEwLzFcIiwgLy8gOS0yMVxuICBcImtpbS5wcm9taXNlcy50by9OaWtlX3A1X2VtYWlsL2J5LzEwLzFcIiwgLy8gOS0yMVxuICBcImtpbS5wcm9taXNlcy50by9pbnRyb19tYXJ0aW5fbWFybmEvYnkvMTAvNVwiLCAvLyA5LTIxXG4gIFwia2ltLnByb21pc2VzLnRvL3Nib25vbWljX2ppdHNqdWRnZWxpc3RfZG9jL2J5LzEwLzE1XCIsIC8vIDktMjFcbiAgXCJraW0ucHJvbWlzZXMudG8vY29uc2lkZXJfYWxsX3dlZWtlbmRfc29jaWFsX29wdGlvbnMvYnkvZnJpLzEwcG1cIiwgLy8gOS0yMVxuICBcImRyZWV2LmNvbW1pdHMudG8vZGVkdXBfdGhlX2l3aWxscy9ieS9ub3ZcIiwgLy8gOS0yMlxuICBcImJ5b3JnZXkucHJvbWlzZXMudG8vZW1haWxfY3V0X3Byb3BlcnR5X3N1bW1hcnkvYnkvN3BtXCIsIC8vIDktMjJcbiAgXCJkcmVldi5jb21taXRzLnRvL2NvcHlfZWRpdGluZ19wYXNzX29uX3RhbzIvYnkvdG13XzJwbVwiLCAvLyA5LTIyLCBkb25lXG4gIFwiY2hyaXMucHJvbWlzZXMudG8vb3Blbl9hX3Ntb290aGllX3Nob3AvYnkvRGVjZW1iZXJcIiwgLy8gOS0yNVxuICBcInBpZXJyZS5wcm9taXNlcy50by93YXRlcl90aGVfb2ZmaWNlX3BsYW50L2J5L0ZyaWRheVwiLCAvLyA5LTI1XG4gIFwiZHJlZXYucHJvbWlzZXMudG8vaGFubmFfcmVwbHkvYnkvdG9uaWdodFwiLCAvLyA5LTI2LCBkb25lXG4gIFwiYmVlLnByb21pc2VzLnRvL3JlYWQtaGFubmFzLWVtYWlsc1wiLCAvLyA5LTI2LCBkb25lXG4gIFwiYmVlLnByb21pc2VzLnRvL3JlcGluZy1vbmUtd2l0aC1oZWFydFwiLCAvLyA5LTI2XG4gIFwiYmVlLnByb21pc2VzLnRvL2ZpbGwtb3V0LW1ldHJvbWlsZS1mZWVkYmFja1wiLCAvLyA5LTI2XG4gIFwiYmVlLnByb21pc2VzLnRvL3NjaGVkdWxlLXBsYW5uaW5nLXdpdGgtY2FudG9yL2J5L2ZyaWRheS1uaWdodFwiLCAvLyA5LTI2LCBkb25lXG4gIFwiZHJlZXYucHJvbWlzZXMudG8vYXNrX2phbmFfYWJvdXRfYmxvb2RfdGVzdGVycy9ieS9kZWNfMVwiLCAvLyA5LTI2XG4gIFwiZHJlZXYuY29tbWl0cy50by90YWtlX2NvcHllZGl0aW5nX3Bhc3Nfb25fbWljaGVsZXNfZHJhZnQvYnkvc2F0dXJkYXlcIiwgLy8gOS8yNywgZG9uZVxuICBcInN0ZXBoZW4ucHJvbWlzZXMudG8vZGVjaWRlX3Vwb25fbGF0ZV9vY3RvYmVyX3RyaXAvYnkvc2F0dXJkYXlcIiwgLy8gOS0yN1xuICBcInJveS5wcm9taXNlcy50by9zaWduX3VwX2Zvcl9hcHBcIiwgLy8gOS0yN1xuICBcImplbm55bGkucHJvbWlzZXMudG8vd2F0ZXJfdGhlX3BsYW50cy9ieS9zdW5kYXlcIiwgLy8gOS0yN1xuICBcIm93ZW4ucHJvbWlzZXMudG8vYWRqdXN0LXRoZS1zaGVkL2J5L3RvbmlnaHRfN3BtXCIsIC8vIDktMjhcbiAgXCJjb2xlLnByb21pc2VzLnRvL2ZpbmRfYV9yZXBfZm9yX2RpbmluZ192ZW5kb3JzXCIsIC8vIDktMjhcbiAgXCJjaHJpcy5wcm9taXNlcy50by9sZWFybi1tb3JlLWFib3V0LWdsaXRjaC9ieS9tb25kYXlcIiwgLy8gOS0yOFxuICBcImNocmlzLnByb21pc2VzLnRvL2xlYXJuLW1vcmUtYWJvdXQtc29tZXRoaW5nLWVsc2UvYnkvbW9uZGF5XCIsIC8vIDktMjhcbiAgXCJkcmVldi5wcm9taXNlcy50by9hZGRfY2hlbHNlYV90b19jb21taXRzX3RvL2J5LzExYW1cIiwgLy8gOS0yOSwgZG9uZVxuICBcImJlZS5jb21taXRzLnRvL3B1dC1hd2F5LWNhbXBpbmctZ2Vhci10aGlzLXdlZWtlbmRcIiwgLy8gOS0yOVxuICBcIm93ZW4ucHJvbWlzZXMudG8vcmVzZWFyY2hfYW5kX3BzZXVkb2NvZGVfY2FsZW5kYXJfaW50ZWdyYXRpb24vYnkvb2N0XzZcIiwgLy8gOS0yOSwgZG9uZVxuICBcImNhaWxsdS5jb21taXRzLnRvL3Rlc3RfdHJ5aW5nX291dF90aW1lL2J5LzIwMTctMDktMzBfMjA6NDJcIiwgLy8gOS0zMFxuICBcImRyZWV2LmNvbW1pdHMudG8vbGV0X3lhbGxfa25vd19hYm91dF9tb25pdG9yL2J5L25leHRfd2Vla1wiLCAvLyAxMC0wMlxuICBcImJlZS5jb21taXRzLnRvL3ByZXR0eWluZ19yb2FkX2VkaXRvclwiLCAvLyAxMC0wNFxuICBcImtpbS5wcm9taXNlcy50by90YWxrX2ZpbmFuY2VzX3dfRC9ieS8xMC8zMC8yMDE3XCIsIC8vIDEwLTA1XG4gIFwiZHJlZXYuY29tbWl0cy50by9naXZlX21hcmNpbl9zdGF0dXNfdXBkYXRlL2J5L29jdC01LW5vb25cIiwgLy8gOS0wNCwgZG9uZSAxMC41IGhvdXJzIGxhdGVcbiAgXCJkcmVldi5jb21taXRzLnRvL2dpdmVfamFtZXNfZF9zdGF0dXNfdXBkYXRlL2J5L29jdC01LW5vb25cIiwgLy8gOS0wNCwgZG9uZSAxMC41IGhvdXJzIGxhdGVcbiAgXCJtYm9yay5wcm9taXNlcy50by9lZGl0X3R1dG9yaWFsX2Zvcl9zdHVkZW50cy9ieS90b21vcnJvd184YW1cIiwgLy8gMTAtMDZcbiAgXCJkcmVldi5jb21taXRzLnRvL3Bpbmdfam9zaF9yZV9yZWFsc2llc19pbnRlZ3JhdGlvbi9ieS9ub3ZfN1wiLCAvLyAxMC0wNlxuXVxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "seed.js"
      ],
      "names": [
        "domain",
        "users",
        "promises"
      ],
      "mappings": ";;;;;AAAA;AACA;AACO,IAAMA,0BAAS,YAAf;;AAEA,IAAMC,wBAAQ;AACnB;AACA,OAFmB,EAEV,KAFU,EAEH,OAFG;AAGnB;AACA,OAJmB,EAIV,QAJU,EAIA,KAJA,EAIO,KAJP,EAIc,QAJd;AAKnB;AACA,SANmB,EAMR,MANQ,EAMA,MANA,EAMQ,UANR,EAMoB,QANpB,EAM8B,OAN9B,EAMuC,KANvC,EAM8C,SAN9C,EAOnB,MAPmB;AAQnB;AACA,QATmB,EAST,MATS,EASD,SATC,EASU,QATV;AAUnB;AACA,OAXmB,EAWV,SAXU;AAYnB;AACA,QAbmB,EAaT,SAbS,CAAd;;AAgBP;AACA;;AAEA;AACO,IAAMC,8BAAW,CACtB,mDADsB,EAEtB,kDAFsB,EAGtB,4CAHsB,EAItB,kEAJsB,EAI8C;AACpE,sDALsB,EAKkC;AACxD,gDANsB,EAM4B;AAClD,iDAPsB,EAO6B;AACnD,wDARsB,EAQoC;AAC1D,0CATsB,EASsB;AAC5C,6CAVsB,EAUyB;AAC/C,4DAXsB,EAWwC;AAC9D,uDAZsB,EAYmC;AACzD,6DAbsB,EAayC;AAC/D,oCAdsB,EAcgB;AACtC,mDAfsB,EAe+B;AACrD,sDAhBsB,EAgBkC;AACxD,yDAjBsB,EAiBqC;AAC3D,sDAlBsB,EAkBkC;AACxD,yCAnBsB,EAmBqB;AAC3C,qDApBsB,EAoBiC;AACvD,sCArBsB,EAqBkB;AACxC,0CAtBsB,EAsBsB;AAC5C,oCAvBsB,EAuBgB;AACtC,oDAxBsB,EAwBgC;AACtD,2DAzBsB,EAyBuC;AAC7D,kEA1BsB,EA0B8C;AACpE,oDA3BsB,EA2BgC;AACtD,oFA5BsB,EA4BgE;AACtF,4DA7BsB,EA6BwC;AAC9D,0DA9BsB,EA8BsC;AAC5D,sCA/BsB,EA+BkB;AACxC,4CAhCsB,EAgCwB;AAC9C,oEAjCsB,EAiCgD;AACtE,8DAlCsB,EAkC0C;AAChE,8CAnCsB,EAmC0B;AAChD,sDApCsB,EAoCkC;AACxD,uDArCsB,EAqCmC;AACzD,iEAtCsB,EAsC6C;AACnE,kDAvCsB,EAuC8B;AACpD,+CAxCsB,EAwC2B;AACjD,uCAzCsB,EAyCmB;AACzC,uDA1CsB,EA0CmC;AACzD,gDA3CsB,EA2C4B;AAClD,6CA5CsB,EA4CyB;AAC/C,uCA7CsB,EA6CmB;AACzC,4CA9CsB,EA8CwB;AAC9C,qDA/CsB,EA+CiC;AACvD,iEAhDsB,EAgD6C;AACnE,0CAjDsB,EAiDsB;AAC5C,uDAlDsB,EAkDmC;AACzD,uDAnDsB,EAmDmC;AACzD,oDApDsB,EAoDgC;AACtD,qDArDsB,EAqDiC;AACvD,0CAtDsB,EAsDsB;AAC5C,oCAvDsB,EAuDgB;AACtC,uCAxDsB,EAwDmB;AACzC,6CAzDsB,EAyDyB;AAC/C,+DA1DsB,EA0D2C;AACjE,yDA3DsB,EA2DqC;AAC3D,sEA5DsB,EA4DkD;AACxE,+DA7DsB,EA6D2C;AACjE,iCA9DsB,EA8Da;AACnC,gDA/DsB,EA+D4B;AAClD,iDAhEsB,EAgE6B;AACnD,gDAjEsB,EAiE4B;AAClD,qDAlEsB,EAkEiC;AACvD,6DAnEsB,EAmEyC;AAC/D,qDApEsB,EAoEiC;AACvD,mDArEsB,EAqE+B;AACrD,wEAtEsB,EAsEoD;AAC1E,4DAvEsB,EAuEwC;AAC9D,2DAxEsB,EAwEuC;AAC7D,sCAzEsB,EAyEkB;AACxC,iDA1EsB,EA0E6B;AACnD,0DA3EsB,EA2EsC;AAC5D,2DA5EsB,EA4EuC;AAC7D,8DA7EsB,EA6E0C;AAChE,6DA9EsB,CAAjB",
      "file": "seed.js",
      "sourceRoot": "/app/data",
      "sourcesContent": [
        "// i know we're domain agnostic, but i think it makes sense to\n// have a default, and not hardcode it everywhere\nexport const domain = 'commits.to' ;\n\nexport const users = [ \n  /* testing */ \n  \"alice\", \"bob\", \"carol\",\n  /* initial co-conspirators */ \n  \"dreev\", \"sergii\", \"kim\", \"bee\", \"braden\", \n  /* daily beemail */ \n  \"byorgey\", \"nick\", \"josh\", \"dehowell\", \"caillu\", \"mbork\", \"roy\", \"jennyli\", \n  \"owen\",\n  /* weekly beemail */ \n  \"samuel\", \"cole\", \"jessica\", \"steven\",\n  /* contributors */ \n  \"chris\", \"stephen\",\n  /* invitees */ \n  \"pierre\", \"chelsea\", \n]\n\n// dreev calls dibs on \"danny\", \"dan\", & \"d\" in case we implement aliases\n// usernames to disallow: \"www\", \"admin\", \n\n// Initial promise list hardcoded so don't have to worry about blowing db away\nexport const promises = [\n  \"alice.promises.to/File_the_TPS_report/by/noon_mon\",\n  \"bob.promises.to/Send_vacation_photos/by/saturday\",\n  \"carol.promises.to/Call_the_dentist/by/12am\",\n  \"dreev.promises.to/show_sergii_this_doing_something_useful/by/3am\", // 9-10, done\n  \"dreev.promises.to/show_bee_open_questions/by/10:30pm\", // 9-10, done\n  \"braden.promises.to/help_with_javascript/by/5pm\", // 9-11\n  \"dreev.promises.to/show_brennan_intro/by/10:50pm\", // 9-11, done\n  \"dreev.promises.to/queue_tweet_etc_for_blog_post/by/2pm\", // 9-11, done\n  \"dreev.promises.to/order_indian/by/5:30pm\", // 9-12, done\n  \"dreev.commits.to/ask_bee_re_sunday_parkways\", // 9-13, done\n  \"dreev.commits.to/follow_up_with_everyone_re_guest_blogging\", // 9-13\n  \"josh.commits.to/get_realisies_running/by/september_30\", // 9-13\n  \"braden.commits.to/outline_bite_counting_post/by/Sunday_11pm\", // 9-13\n  \"dreev.commits.to/report_glitch_bug\", // 9-14, done\n  \"dreev.commits.to/googledocify_intern_form/by/12pm\", // 9-14, done\n  \"dreev.promises.to/test_penalty_func/by/saturday_noon\", // 9-14, done\n  \"sergii.promises.to/work_on_points_2_to_4/by/next_monday\", // 9-14\n  \"dreev.commits.to/meta_debrief_kim/by/midnight_friday\", // 9-14, done\n  \"dreev.commits.to/ping_mirabai/by/sep_22\", // 9-14, done\n  \"dreev.commits.to/send_ms_gross_email/by/sunday_11am\", // 9-14, done\n  \"dreev.promises.to/ping_oli/by/nov_16\", // 9-15\n  \"dreev.promises.to/ping_byorgey/by/dec_20\", // 9-15\n  \"dreev.promises.to/labelzero/by/1am\", // 9-15, done\n  \"chris.promises.to/follow_up_on_that_support_thread\", // 9-18\n  \"bee.commits.to/new-family-photo-to-yoko/by/tomorrow-night\", // 9-18, done\n  \"bee.commits.to/rest-of-paperwork-to-yoko-before-the-gym-tomorrow\", // 9-18, done 2 hours late\n  \"dreev.promises.to/debug_capitalization/by/tomorrow\", // 9-18, done 23.4 hours late\n  \"bee.commits.to/email-sleep-as-android-for-specifics-about-sleep-length-measurement\", // 9-19\n  \"jessica.commits.to/let_bob_know_re_meeting/by/tomorrow_5pm\", // 9-19\n  \"samuel.commits.to/finish_ch_23_problem_set/by/today_6_pm\", // 9-19\n  \"dreev.promises.to/intern_disc/by/wed\", // 9-19, done\n  \"kim.promises.to/email_argue_summary/by/fri\", // 9-19\n  \"dreev.commits.to/clear_bogus_commit_for_nick/by/5_minutes_from_now\", // 9-19, done\n  \"kim.promises.to/reflect_Respond_anxiety_spiral_Assist/by/sat\", // 9-19\n  \"dreev.commits.to/schedule-k_tax_thing/by/5pm\", // 9-19, done\n  \"dreev.promises.to/set_up_mom_on_wordfeud/by/tomorrow\", // 9-20, done/void\n  \"dreev.promises.to/reply_to_use_case_email/by/midnight\", // 9-20, done\n  \"kim.promises.to/consider_all_weekend_social_options/by/fri/10pm\", // 9-20\n  \"kim.promises.to/submit_conclusion_email/by/10/16\", // 9-21\n  \"kim.promises.to/complete_type_1_essay/by/10/1\", // 9-21\n  \"kim.promises.to/inform_eve_plans/by/2\", // 9-21\n  \"kim.promises.to/email_cynthia_charlap_tickets/by/9/22\", // 9-21\n  \"kim.promises.to/schedule_attorney_meet/by/10/1\", // 9-21\n  \"kim.promises.to/john_PAM_photos_ask/by/10/1\", // 9-21\n  \"kim.promises.to/Nike_p5_email/by/10/1\", // 9-21\n  \"kim.promises.to/intro_martin_marna/by/10/5\", // 9-21\n  \"kim.promises.to/sbonomic_jitsjudgelist_doc/by/10/15\", // 9-21\n  \"kim.promises.to/consider_all_weekend_social_options/by/fri/10pm\", // 9-21\n  \"dreev.commits.to/dedup_the_iwills/by/nov\", // 9-22\n  \"byorgey.promises.to/email_cut_property_summary/by/7pm\", // 9-22\n  \"dreev.commits.to/copy_editing_pass_on_tao2/by/tmw_2pm\", // 9-22, done\n  \"chris.promises.to/open_a_smoothie_shop/by/December\", // 9-25\n  \"pierre.promises.to/water_the_office_plant/by/Friday\", // 9-25\n  \"dreev.promises.to/hanna_reply/by/tonight\", // 9-26, done\n  \"bee.promises.to/read-hannas-emails\", // 9-26, done\n  \"bee.promises.to/reping-one-with-heart\", // 9-26\n  \"bee.promises.to/fill-out-metromile-feedback\", // 9-26\n  \"bee.promises.to/schedule-planning-with-cantor/by/friday-night\", // 9-26, done\n  \"dreev.promises.to/ask_jana_about_blood_testers/by/dec_1\", // 9-26\n  \"dreev.commits.to/take_copyediting_pass_on_micheles_draft/by/saturday\", // 9/27, done\n  \"stephen.promises.to/decide_upon_late_october_trip/by/saturday\", // 9-27\n  \"roy.promises.to/sign_up_for_app\", // 9-27\n  \"jennyli.promises.to/water_the_plants/by/sunday\", // 9-27\n  \"owen.promises.to/adjust-the-shed/by/tonight_7pm\", // 9-28\n  \"cole.promises.to/find_a_rep_for_dining_vendors\", // 9-28\n  \"chris.promises.to/learn-more-about-glitch/by/monday\", // 9-28\n  \"chris.promises.to/learn-more-about-something-else/by/monday\", // 9-28\n  \"dreev.promises.to/add_chelsea_to_commits_to/by/11am\", // 9-29, done\n  \"bee.commits.to/put-away-camping-gear-this-weekend\", // 9-29\n  \"owen.promises.to/research_and_pseudocode_calendar_integration/by/oct_6\", // 9-29, done\n  \"caillu.commits.to/test_trying_out_time/by/2017-09-30_20:42\", // 9-30\n  \"dreev.commits.to/let_yall_know_about_monitor/by/next_week\", // 10-02\n  \"bee.commits.to/prettying_road_editor\", // 10-04\n  \"kim.promises.to/talk_finances_w_D/by/10/30/2017\", // 10-05\n  \"dreev.commits.to/give_marcin_status_update/by/oct-5-noon\", // 9-04, done 10.5 hours late\n  \"dreev.commits.to/give_james_d_status_update/by/oct-5-noon\", // 9-04, done 10.5 hours late\n  \"mbork.promises.to/edit_tutorial_for_students/by/tomorrow_8am\", // 10-06\n  \"dreev.commits.to/ping_josh_re_realsies_integration/by/nov_7\", // 10-06\n]\n"
      ]
    },
    "mtime": 1507442909835
  },
  "{\"filename\":\"/app/lib/latepenalty.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/lib\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [],
      "marked": [],
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "credit",
            "t"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "credit",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "t",
              "exported": "default"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/lib/latepenalty.js",
      "filenameRelative": "/app/lib/latepenalty.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "latepenalty.js",
      "sourceFileName": "latepenalty.js",
      "sourceRoot": "/app/lib",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/lib",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "latepenalty"
    },
    "ignored": false,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = credit;\n// --------------------------------- 80chars ---------------------------------->\n\n/* The main function here is credit(t) which computes the fraction of full \ncredit you get for being t seconds late. It's roughly a continuous version of\nthe following:\n  credit(t) = 1    if t<60s  # seconds late (no or almost no penalty)\n  credit(t) = .999 if t<1h   # minutes late (baaaasically counts)\n  credit(t) = .99  if t<1d   # hours late   (no big deal, almost fully counts)\n  credit(t) = .9   if t<1w   # days late    (main thing is it's done)\n  credit(t) = .5   if t<1mo  # weeks late   (half counts if this late)\n  credit(t) = .1   if t<1y   # months late  (mostly doesn't count)\n  credit(t) = .01  if t<10y  # years late   (better late than never, barely)\n  credit(t) = 0    otherwise # decades late (zero or essentially zero credit)\n*/\n\nvar SIH = 3600; // seconds in hour\nvar SID = 86400; // seconds in day\nvar SIW = SID * 7; // seconds in week\nvar DIY = 365.25; // days in year\nvar SIM = SID * DIY / 12; // seconds in month\nvar SIY = SID * DIY; // seconds in year\n\n// Linearly interpolate to return u when x=a and v when x=b\n// NOT CURRENTLY USED and in fact is equivalent to hscale with h=-1\nfunction lscale(x, a, b, u, v) {\n  return (b * u - a * v + (v - u) * x) / (b - a);\n}\n\n// Exponentially interpolate to return u when x=a and v when x=b\nfunction escale(x, a, b, u, v) {\n  return u * Math.pow(u / v, a / (b - a)) * Math.exp(Math.log(v / u) / (b - a) * x);\n}\n\n// Do an h-interpolation to return u when x=a and v when x=b. \n// Special cases: h=-1 is linear, h=0 is exponential, h=1 is hyperbolic.\nfunction hscale(h, x, a, b, u, v) {\n  if (h === 0) {\n    return escale(x, a, b, u, v);\n  }\n  var r = (Math.pow(v / u, -h) - 1) / h / (a - b);\n  return u * Math.pow(1 - h * r * (x - a), -1 / h);\n}\n\n// Compute the credit you get for being t seconds late\nfunction credit(t) {\n  if (t <= 0) {\n    return 1;\n  } // not late at all, or early, means full credit\n  else if (t < 60) {\n      return hscale(300000, t, 0, 60, 1, .99999);\n    } else if (t < SIH) {\n      return hscale(3000, t, 60, SIH, .99999, .999);\n    } else if (t < SID) {\n      return hscale(548, t, SIH, SID, .999, .99);\n    } else if (t < SIW) {\n      return hscale(32, t, SID, SIW, .99, .9);\n    } else if (t < SIM) {\n      return hscale(5.4, t, SIW, SIM, .9, .5);\n    } else if (t < SIY) {\n      return hscale(4.2, t, SIM, SIY, .5, .1);\n    } else {\n      return hscale(4, t, SIY, 10 * SIY, .1, .01);\n    }\n}\n\n/* \nAn alternative simple late penalty function I've used before in another context \nis 1-(t/(86400*7))^4 which gives you a couple days of very little penalty and\nthen your credit plummets till you get 0 credit for being more than a week late.\n*/\n\n// --------------------------------- 80chars ---------------------------------->\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxhdGVwZW5hbHR5LmpzIl0sIm5hbWVzIjpbImNyZWRpdCIsIlNJSCIsIlNJRCIsIlNJVyIsIkRJWSIsIlNJTSIsIlNJWSIsImxzY2FsZSIsIngiLCJhIiwiYiIsInUiLCJ2IiwiZXNjYWxlIiwiTWF0aCIsInBvdyIsImV4cCIsImxvZyIsImhzY2FsZSIsImgiLCJyIiwidCJdLCJtYXBwaW5ncyI6Ijs7Ozs7a0JBd0N3QkEsTTtBQXhDeEI7O0FBRUE7Ozs7Ozs7Ozs7Ozs7QUFhQSxJQUFNQyxNQUFNLElBQVosQyxDQUF3QjtBQUN4QixJQUFNQyxNQUFNLEtBQVosQyxDQUF3QjtBQUN4QixJQUFNQyxNQUFNRCxNQUFJLENBQWhCLEMsQ0FBd0I7QUFDeEIsSUFBTUUsTUFBTSxNQUFaLEMsQ0FBd0I7QUFDeEIsSUFBTUMsTUFBTUgsTUFBSUUsR0FBSixHQUFRLEVBQXBCLEMsQ0FBd0I7QUFDeEIsSUFBTUUsTUFBTUosTUFBSUUsR0FBaEIsQyxDQUF3Qjs7QUFFeEI7QUFDQTtBQUNBLFNBQVNHLE1BQVQsQ0FBZ0JDLENBQWhCLEVBQW1CQyxDQUFuQixFQUFzQkMsQ0FBdEIsRUFBeUJDLENBQXpCLEVBQTRCQyxDQUE1QixFQUErQjtBQUFFLFNBQU8sQ0FBQ0YsSUFBRUMsQ0FBRixHQUFNRixJQUFFRyxDQUFSLEdBQVksQ0FBQ0EsSUFBRUQsQ0FBSCxJQUFNSCxDQUFuQixLQUF1QkUsSUFBRUQsQ0FBekIsQ0FBUDtBQUFvQzs7QUFFckU7QUFDQSxTQUFTSSxNQUFULENBQWdCTCxDQUFoQixFQUFtQkMsQ0FBbkIsRUFBc0JDLENBQXRCLEVBQXlCQyxDQUF6QixFQUE0QkMsQ0FBNUIsRUFBK0I7QUFDN0IsU0FBT0QsSUFBRUcsS0FBS0MsR0FBTCxDQUFTSixJQUFFQyxDQUFYLEVBQWNILEtBQUdDLElBQUVELENBQUwsQ0FBZCxDQUFGLEdBQXlCSyxLQUFLRSxHQUFMLENBQVNGLEtBQUtHLEdBQUwsQ0FBU0wsSUFBRUQsQ0FBWCxLQUFlRCxJQUFFRCxDQUFqQixJQUFvQkQsQ0FBN0IsQ0FBaEM7QUFDRDs7QUFFRDtBQUNBO0FBQ0EsU0FBU1UsTUFBVCxDQUFnQkMsQ0FBaEIsRUFBbUJYLENBQW5CLEVBQXNCQyxDQUF0QixFQUF5QkMsQ0FBekIsRUFBNEJDLENBQTVCLEVBQStCQyxDQUEvQixFQUFrQztBQUNoQyxNQUFJTyxNQUFNLENBQVYsRUFBYTtBQUFFLFdBQU9OLE9BQU9MLENBQVAsRUFBVUMsQ0FBVixFQUFhQyxDQUFiLEVBQWdCQyxDQUFoQixFQUFtQkMsQ0FBbkIsQ0FBUDtBQUE4QjtBQUM3QyxNQUFJUSxJQUFJLENBQUNOLEtBQUtDLEdBQUwsQ0FBU0gsSUFBRUQsQ0FBWCxFQUFjLENBQUNRLENBQWYsSUFBa0IsQ0FBbkIsSUFBc0JBLENBQXRCLElBQXlCVixJQUFFQyxDQUEzQixDQUFSO0FBQ0EsU0FBT0MsSUFBRUcsS0FBS0MsR0FBTCxDQUFTLElBQUVJLElBQUVDLENBQUYsSUFBS1osSUFBSUMsQ0FBVCxDQUFYLEVBQXdCLENBQUMsQ0FBRCxHQUFHVSxDQUEzQixDQUFUO0FBQ0Q7O0FBRUQ7QUFDZSxTQUFTbkIsTUFBVCxDQUFnQnFCLENBQWhCLEVBQW1CO0FBQ2hDLE1BQVNBLEtBQUssQ0FBZCxFQUFrQjtBQUFFLFdBQU8sQ0FBUDtBQUFVLEdBQTlCLENBQStCO0FBQS9CLE9BQ0ssSUFBSUEsSUFBSSxFQUFSLEVBQWE7QUFBRSxhQUFPSCxPQUFPLE1BQVAsRUFBZUcsQ0FBZixFQUFrQixDQUFsQixFQUF3QixFQUF4QixFQUErQixDQUEvQixFQUF1QyxNQUF2QyxDQUFQO0FBQXVELEtBQXRFLE1BQ0EsSUFBSUEsSUFBSXBCLEdBQVIsRUFBYTtBQUFFLGFBQU9pQixPQUFPLElBQVAsRUFBZUcsQ0FBZixFQUFrQixFQUFsQixFQUF1QnBCLEdBQXZCLEVBQStCLE1BQS9CLEVBQXVDLElBQXZDLENBQVA7QUFBdUQsS0FBdEUsTUFDQSxJQUFJb0IsSUFBSW5CLEdBQVIsRUFBYTtBQUFFLGFBQU9nQixPQUFPLEdBQVAsRUFBZUcsQ0FBZixFQUFrQnBCLEdBQWxCLEVBQXVCQyxHQUF2QixFQUErQixJQUEvQixFQUF1QyxHQUF2QyxDQUFQO0FBQXVELEtBQXRFLE1BQ0EsSUFBSW1CLElBQUlsQixHQUFSLEVBQWE7QUFBRSxhQUFPZSxPQUFPLEVBQVAsRUFBZUcsQ0FBZixFQUFrQm5CLEdBQWxCLEVBQXVCQyxHQUF2QixFQUErQixHQUEvQixFQUF1QyxFQUF2QyxDQUFQO0FBQXVELEtBQXRFLE1BQ0EsSUFBSWtCLElBQUloQixHQUFSLEVBQWE7QUFBRSxhQUFPYSxPQUFPLEdBQVAsRUFBZUcsQ0FBZixFQUFrQmxCLEdBQWxCLEVBQXVCRSxHQUF2QixFQUErQixFQUEvQixFQUF1QyxFQUF2QyxDQUFQO0FBQXVELEtBQXRFLE1BQ0EsSUFBSWdCLElBQUlmLEdBQVIsRUFBYTtBQUFFLGFBQU9ZLE9BQU8sR0FBUCxFQUFlRyxDQUFmLEVBQWtCaEIsR0FBbEIsRUFBdUJDLEdBQXZCLEVBQStCLEVBQS9CLEVBQXVDLEVBQXZDLENBQVA7QUFBdUQsS0FBdEUsTUFDYTtBQUFFLGFBQU9ZLE9BQU8sQ0FBUCxFQUFlRyxDQUFmLEVBQWtCZixHQUFsQixFQUF1QixLQUFHQSxHQUExQixFQUErQixFQUEvQixFQUF1QyxHQUF2QyxDQUFQO0FBQXVEO0FBQzVFOztBQUVEOzs7Ozs7QUFNQSIsImZpbGUiOiJsYXRlcGVuYWx0eS5qcyIsInNvdXJjZVJvb3QiOiIvYXBwL2xpYiIsInNvdXJjZXNDb250ZW50IjpbIi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSA4MGNoYXJzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0+XG5cbi8qIFRoZSBtYWluIGZ1bmN0aW9uIGhlcmUgaXMgY3JlZGl0KHQpIHdoaWNoIGNvbXB1dGVzIHRoZSBmcmFjdGlvbiBvZiBmdWxsIFxuY3JlZGl0IHlvdSBnZXQgZm9yIGJlaW5nIHQgc2Vjb25kcyBsYXRlLiBJdCdzIHJvdWdobHkgYSBjb250aW51b3VzIHZlcnNpb24gb2ZcbnRoZSBmb2xsb3dpbmc6XG4gIGNyZWRpdCh0KSA9IDEgICAgaWYgdDw2MHMgICMgc2Vjb25kcyBsYXRlIChubyBvciBhbG1vc3Qgbm8gcGVuYWx0eSlcbiAgY3JlZGl0KHQpID0gLjk5OSBpZiB0PDFoICAgIyBtaW51dGVzIGxhdGUgKGJhYWFhc2ljYWxseSBjb3VudHMpXG4gIGNyZWRpdCh0KSA9IC45OSAgaWYgdDwxZCAgICMgaG91cnMgbGF0ZSAgIChubyBiaWcgZGVhbCwgYWxtb3N0IGZ1bGx5IGNvdW50cylcbiAgY3JlZGl0KHQpID0gLjkgICBpZiB0PDF3ICAgIyBkYXlzIGxhdGUgICAgKG1haW4gdGhpbmcgaXMgaXQncyBkb25lKVxuICBjcmVkaXQodCkgPSAuNSAgIGlmIHQ8MW1vICAjIHdlZWtzIGxhdGUgICAoaGFsZiBjb3VudHMgaWYgdGhpcyBsYXRlKVxuICBjcmVkaXQodCkgPSAuMSAgIGlmIHQ8MXkgICAjIG1vbnRocyBsYXRlICAobW9zdGx5IGRvZXNuJ3QgY291bnQpXG4gIGNyZWRpdCh0KSA9IC4wMSAgaWYgdDwxMHkgICMgeWVhcnMgbGF0ZSAgIChiZXR0ZXIgbGF0ZSB0aGFuIG5ldmVyLCBiYXJlbHkpXG4gIGNyZWRpdCh0KSA9IDAgICAgb3RoZXJ3aXNlICMgZGVjYWRlcyBsYXRlICh6ZXJvIG9yIGVzc2VudGlhbGx5IHplcm8gY3JlZGl0KVxuKi9cblxuY29uc3QgU0lIID0gMzYwMCAgICAgICAgLy8gc2Vjb25kcyBpbiBob3VyXG5jb25zdCBTSUQgPSA4NjQwMCAgICAgICAvLyBzZWNvbmRzIGluIGRheVxuY29uc3QgU0lXID0gU0lEKjcgICAgICAgLy8gc2Vjb25kcyBpbiB3ZWVrXG5jb25zdCBESVkgPSAzNjUuMjUgICAgICAvLyBkYXlzIGluIHllYXJcbmNvbnN0IFNJTSA9IFNJRCpESVkvMTIgIC8vIHNlY29uZHMgaW4gbW9udGhcbmNvbnN0IFNJWSA9IFNJRCpESVkgICAgIC8vIHNlY29uZHMgaW4geWVhclxuXG4vLyBMaW5lYXJseSBpbnRlcnBvbGF0ZSB0byByZXR1cm4gdSB3aGVuIHg9YSBhbmQgdiB3aGVuIHg9YlxuLy8gTk9UIENVUlJFTlRMWSBVU0VEIGFuZCBpbiBmYWN0IGlzIGVxdWl2YWxlbnQgdG8gaHNjYWxlIHdpdGggaD0tMVxuZnVuY3Rpb24gbHNjYWxlKHgsIGEsIGIsIHUsIHYpIHsgcmV0dXJuIChiKnUgLSBhKnYgKyAodi11KSp4KS8oYi1hKSB9XG5cbi8vIEV4cG9uZW50aWFsbHkgaW50ZXJwb2xhdGUgdG8gcmV0dXJuIHUgd2hlbiB4PWEgYW5kIHYgd2hlbiB4PWJcbmZ1bmN0aW9uIGVzY2FsZSh4LCBhLCBiLCB1LCB2KSB7XG4gIHJldHVybiB1Kk1hdGgucG93KHUvdiwgYS8oYi1hKSkqTWF0aC5leHAoTWF0aC5sb2codi91KS8oYi1hKSp4KVxufVxuXG4vLyBEbyBhbiBoLWludGVycG9sYXRpb24gdG8gcmV0dXJuIHUgd2hlbiB4PWEgYW5kIHYgd2hlbiB4PWIuIFxuLy8gU3BlY2lhbCBjYXNlczogaD0tMSBpcyBsaW5lYXIsIGg9MCBpcyBleHBvbmVudGlhbCwgaD0xIGlzIGh5cGVyYm9saWMuXG5mdW5jdGlvbiBoc2NhbGUoaCwgeCwgYSwgYiwgdSwgdikge1xuICBpZiAoaCA9PT0gMCkgeyByZXR1cm4gZXNjYWxlKHgsIGEsIGIsIHUsIHYpIH1cbiAgbGV0IHIgPSAoTWF0aC5wb3codi91LCAtaCktMSkvaC8oYS1iKVxuICByZXR1cm4gdSpNYXRoLnBvdygxLWgqciooeCAtIGEpLCAtMS9oKVxufVxuXG4vLyBDb21wdXRlIHRoZSBjcmVkaXQgeW91IGdldCBmb3IgYmVpbmcgdCBzZWNvbmRzIGxhdGVcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNyZWRpdCh0KSB7XG4gIGlmICAgICAgKHQgPD0gMCkgIHsgcmV0dXJuIDEgfSAvLyBub3QgbGF0ZSBhdCBhbGwsIG9yIGVhcmx5LCBtZWFucyBmdWxsIGNyZWRpdFxuICBlbHNlIGlmICh0IDwgNjApICB7IHJldHVybiBoc2NhbGUoMzAwMDAwLCB0LCAwLCAgICA2MCwgICAgMSwgICAgICAuOTk5OTkpIH1cbiAgZWxzZSBpZiAodCA8IFNJSCkgeyByZXR1cm4gaHNjYWxlKDMwMDAsICAgdCwgNjAsICBTSUgsICAgIC45OTk5OSwgLjk5OSkgICB9XG4gIGVsc2UgaWYgKHQgPCBTSUQpIHsgcmV0dXJuIGhzY2FsZSg1NDgsICAgIHQsIFNJSCwgU0lELCAgICAuOTk5LCAgIC45OSkgICAgfVxuICBlbHNlIGlmICh0IDwgU0lXKSB7IHJldHVybiBoc2NhbGUoMzIsICAgICB0LCBTSUQsIFNJVywgICAgLjk5LCAgICAuOSkgICAgIH1cbiAgZWxzZSBpZiAodCA8IFNJTSkgeyByZXR1cm4gaHNjYWxlKDUuNCwgICAgdCwgU0lXLCBTSU0sICAgIC45LCAgICAgLjUpICAgICB9XG4gIGVsc2UgaWYgKHQgPCBTSVkpIHsgcmV0dXJuIGhzY2FsZSg0LjIsICAgIHQsIFNJTSwgU0lZLCAgICAuNSwgICAgIC4xKSAgICAgfVxuICBlbHNlICAgICAgICAgICAgICB7IHJldHVybiBoc2NhbGUoNCwgICAgICB0LCBTSVksIDEwKlNJWSwgLjEsICAgICAuMDEpICAgIH1cbn1cblxuLyogXG5BbiBhbHRlcm5hdGl2ZSBzaW1wbGUgbGF0ZSBwZW5hbHR5IGZ1bmN0aW9uIEkndmUgdXNlZCBiZWZvcmUgaW4gYW5vdGhlciBjb250ZXh0IFxuaXMgMS0odC8oODY0MDAqNykpXjQgd2hpY2ggZ2l2ZXMgeW91IGEgY291cGxlIGRheXMgb2YgdmVyeSBsaXR0bGUgcGVuYWx0eSBhbmRcbnRoZW4geW91ciBjcmVkaXQgcGx1bW1ldHMgdGlsbCB5b3UgZ2V0IDAgY3JlZGl0IGZvciBiZWluZyBtb3JlIHRoYW4gYSB3ZWVrIGxhdGUuXG4qL1xuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gODBjaGFycyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPlxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "latepenalty.js"
      ],
      "names": [
        "credit",
        "SIH",
        "SID",
        "SIW",
        "DIY",
        "SIM",
        "SIY",
        "lscale",
        "x",
        "a",
        "b",
        "u",
        "v",
        "escale",
        "Math",
        "pow",
        "exp",
        "log",
        "hscale",
        "h",
        "r",
        "t"
      ],
      "mappings": "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",
      "file": "latepenalty.js",
      "sourceRoot": "/app/lib",
      "sourcesContent": [
        "// --------------------------------- 80chars ---------------------------------->\n\n/* The main function here is credit(t) which computes the fraction of full \ncredit you get for being t seconds late. It's roughly a continuous version of\nthe following:\n  credit(t) = 1    if t<60s  # seconds late (no or almost no penalty)\n  credit(t) = .999 if t<1h   # minutes late (baaaasically counts)\n  credit(t) = .99  if t<1d   # hours late   (no big deal, almost fully counts)\n  credit(t) = .9   if t<1w   # days late    (main thing is it's done)\n  credit(t) = .5   if t<1mo  # weeks late   (half counts if this late)\n  credit(t) = .1   if t<1y   # months late  (mostly doesn't count)\n  credit(t) = .01  if t<10y  # years late   (better late than never, barely)\n  credit(t) = 0    otherwise # decades late (zero or essentially zero credit)\n*/\n\nconst SIH = 3600        // seconds in hour\nconst SID = 86400       // seconds in day\nconst SIW = SID*7       // seconds in week\nconst DIY = 365.25      // days in year\nconst SIM = SID*DIY/12  // seconds in month\nconst SIY = SID*DIY     // seconds in year\n\n// Linearly interpolate to return u when x=a and v when x=b\n// NOT CURRENTLY USED and in fact is equivalent to hscale with h=-1\nfunction lscale(x, a, b, u, v) { return (b*u - a*v + (v-u)*x)/(b-a) }\n\n// Exponentially interpolate to return u when x=a and v when x=b\nfunction escale(x, a, b, u, v) {\n  return u*Math.pow(u/v, a/(b-a))*Math.exp(Math.log(v/u)/(b-a)*x)\n}\n\n// Do an h-interpolation to return u when x=a and v when x=b. \n// Special cases: h=-1 is linear, h=0 is exponential, h=1 is hyperbolic.\nfunction hscale(h, x, a, b, u, v) {\n  if (h === 0) { return escale(x, a, b, u, v) }\n  let r = (Math.pow(v/u, -h)-1)/h/(a-b)\n  return u*Math.pow(1-h*r*(x - a), -1/h)\n}\n\n// Compute the credit you get for being t seconds late\nexport default function credit(t) {\n  if      (t <= 0)  { return 1 } // not late at all, or early, means full credit\n  else if (t < 60)  { return hscale(300000, t, 0,    60,    1,      .99999) }\n  else if (t < SIH) { return hscale(3000,   t, 60,  SIH,    .99999, .999)   }\n  else if (t < SID) { return hscale(548,    t, SIH, SID,    .999,   .99)    }\n  else if (t < SIW) { return hscale(32,     t, SID, SIW,    .99,    .9)     }\n  else if (t < SIM) { return hscale(5.4,    t, SIW, SIM,    .9,     .5)     }\n  else if (t < SIY) { return hscale(4.2,    t, SIM, SIY,    .5,     .1)     }\n  else              { return hscale(4,      t, SIY, 10*SIY, .1,     .01)    }\n}\n\n/* \nAn alternative simple late penalty function I've used before in another context \nis 1-(t/(86400*7))^4 which gives you a couple days of very little penalty and\nthen your credit plummets till you get 0 credit for being more than a week late.\n*/\n\n// --------------------------------- 80chars ---------------------------------->\n"
      ]
    },
    "mtime": 1507437053922
  },
  "{\"filename\":\"/app/lib/parse.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/lib\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "chrono-node",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "chrono"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "parseprom",
            "urtx"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "parseprom",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "urtx",
              "exported": "default"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/lib/parse.js",
      "filenameRelative": "/app/lib/parse.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "parse.js",
      "sourceFileName": "parse.js",
      "sourceRoot": "/app/lib",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/lib",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "parse"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = parseprom;\n\nvar _chronoNode = require('chrono-node');\n\nvar _chronoNode2 = _interopRequireDefault(_chronoNode);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Take urtext and return a promise data structure\nfunction parseprom(urtx) {\n  console.log('DEBUG ' + urtx);\n  // Parse urtext into username, domain, and path -- username.commits.to/path\n  // This version assumes no dots in usernames, so bob.really.commits.to would\n  // parse as username \"bob\" and domain \"really.commits.to\":\n  var m = urtx.match(/^([^\\.]+)\\.([^\\.\\/]+\\.[^\\/]+)\\/?(.*)$/);\n  // TODO: handle the case that no user is given, just \"promises.to/foo\"\n  console.log('DEBUG PARSING: ' + JSON.stringify(m));\n  var user = m ? m[1] : '';\n  var domain = m ? m[2] : '';\n  var path = m ? m[3] : '';\n  // following should never happen -- we have a route for the empty promise case\n  if (!path || path === '') {\n    console.log('ERROR: empty promise: ' + urtx);\n  }\n  var what = '';\n  var tdue = Date.now() + 7 * 24 * 60 * 60 * 1000;\n  if (path.length > 0) {\n    var parsedPath = path.match(/^(.*?)(\\/by\\/|$)(.*)$/);\n\n    tdue = parsedPath[3];\n    // tdue = parseDate(parsedPath[3])\n    what = replaceSeparatorWithSpaces(parsedPath[1]);\n\n    //tdue = parsedPath.length > 1 ? \n    //       chrono.parseDate(parsedPath[3].replace(/_/g, ' ')) * 1 : \n    //       Date.now() + 7*24*60*60*1000\n    //tdue = tdue ? ( ( tdue < Date.now() && Date.now() - tdue < 24*60*60*1000 ) ?\n    //                tdue + 24*60*60*1000 : tdue )\n    //            : Date.now() + 7*24*60*60*1000\n  }\n  // TODO: path is now everything after \".promises.to\" so now parse out the \n  //       \"what\" (thing being promised) and the \"tdue\" (deadline)\n  console.log('parseProm', { user: user, path: path, domain: domain, what: what, tdue: tdue, urtx: urtx });\n  return { user: user, path: path, domain: domain, what: what, tdue: tdue, urtx: urtx, tini: Date.now() };\n}\n\nfunction replaceSeparatorWithSpaces(string) {\n  // TODO: (maybe) Escaping characters?\n  var dash_regex = new RegExp('-', 'g');\n  var underscore_regex = new RegExp('_', 'g');\n\n  try {\n    var dashes = string.match(dash_regex).length;\n  } catch (e) {\n    var dashes = 0;\n  }\n  try {\n    var underscores = string.match(underscore_regex).length;\n  } catch (e) {\n    var underscores = 0;\n  }\n\n  if (dashes > underscores) {\n    var separator = dash_regex;\n  } else if (underscores > dashes) {\n    var separator = underscore_regex;\n  } else {\n    return string;\n  }\n\n  return string.replace(separator, ' ');\n}\n\nfunction parseDate(string) {\n  // TODO: user's timezone\n  // TODO: unix time format for db\n  if (string.length) {\n    try {\n      return _chronoNode2.default.parseDate(replaceSeparatorWithSpaces(string));\n    } catch (e) {}\n  }\n  return _chronoNode2.default.parseDate('next week');\n}\n\n// TODO: Evaluate the usefulness of the function below for creating a \"Add to Calendar\" text button under a newly created promise  \n//function buildAddToCalendarHTML(what,tdue) {\n//  var googleCalendarHTML = '<a href=\"http://www.google.com/calendar/event?action=TEMPLATE&text=Your+IWill+Promise+to+';\n//  googleCalendarHTML += what;\n//  googleCalendarHTML += '+is+due';\n//  googleCalendarHTML += '&dates=';\n//  need to convert tdue to YYYYMMDDToHHMMSSZ/YYYYMMDDToHHMMSSZ (in Greenwich Mean Time with end time default to one hour after start time)\n//  var convertedTdue = '';\n//  googleCalendarHTML += convertedTdue;\n//  googleCalendarHTML += '\"';\n//  googleCalendarHTML += ' target=\"_blank\" rel=\"nofollow\"';\n//  googleCalendarHTML += '>Add to my calendar</a>';\n//  return googleCalendarHTML;\n//}\n//Then perhaps use the returned HTML in a partials/button.handlebars file (not created yet) that only shows up upon initial creation of promise\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhcnNlLmpzIl0sIm5hbWVzIjpbInBhcnNlcHJvbSIsInVydHgiLCJjb25zb2xlIiwibG9nIiwibSIsIm1hdGNoIiwiSlNPTiIsInN0cmluZ2lmeSIsInVzZXIiLCJkb21haW4iLCJwYXRoIiwid2hhdCIsInRkdWUiLCJEYXRlIiwibm93IiwibGVuZ3RoIiwicGFyc2VkUGF0aCIsInJlcGxhY2VTZXBhcmF0b3JXaXRoU3BhY2VzIiwidGluaSIsInN0cmluZyIsImRhc2hfcmVnZXgiLCJSZWdFeHAiLCJ1bmRlcnNjb3JlX3JlZ2V4IiwiZGFzaGVzIiwiZSIsInVuZGVyc2NvcmVzIiwic2VwYXJhdG9yIiwicmVwbGFjZSIsInBhcnNlRGF0ZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7a0JBR3dCQSxTOztBQUh4Qjs7Ozs7O0FBRUE7QUFDZSxTQUFTQSxTQUFULENBQW1CQyxJQUFuQixFQUF5QjtBQUN0Q0MsVUFBUUMsR0FBUixZQUFxQkYsSUFBckI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFJRyxJQUFJSCxLQUFLSSxLQUFMLENBQVcsdUNBQVgsQ0FBUjtBQUNBO0FBQ0FILFVBQVFDLEdBQVIscUJBQThCRyxLQUFLQyxTQUFMLENBQWVILENBQWYsQ0FBOUI7QUFDQSxNQUFJSSxPQUFTSixJQUFJQSxFQUFFLENBQUYsQ0FBSixHQUFXLEVBQXhCO0FBQ0EsTUFBSUssU0FBU0wsSUFBSUEsRUFBRSxDQUFGLENBQUosR0FBVyxFQUF4QjtBQUNBLE1BQUlNLE9BQVNOLElBQUlBLEVBQUUsQ0FBRixDQUFKLEdBQVcsRUFBeEI7QUFDQTtBQUNBLE1BQUksQ0FBQ00sSUFBRCxJQUFTQSxTQUFTLEVBQXRCLEVBQTBCO0FBQUVSLFlBQVFDLEdBQVIsNEJBQXFDRixJQUFyQztBQUE4QztBQUMxRSxNQUFJVSxPQUFPLEVBQVg7QUFDQSxNQUFJQyxPQUFPQyxLQUFLQyxHQUFMLEtBQWEsSUFBRSxFQUFGLEdBQUssRUFBTCxHQUFRLEVBQVIsR0FBVyxJQUFuQztBQUNBLE1BQUlKLEtBQUtLLE1BQUwsR0FBYyxDQUFsQixFQUFxQjtBQUNuQixRQUFJQyxhQUFhTixLQUFLTCxLQUFMLENBQVcsdUJBQVgsQ0FBakI7O0FBRUFPLFdBQU9JLFdBQVcsQ0FBWCxDQUFQO0FBQ0E7QUFDQUwsV0FBT00sMkJBQTJCRCxXQUFXLENBQVgsQ0FBM0IsQ0FBUDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDRDtBQUNEO0FBQ0E7QUFDQWQsVUFBUUMsR0FBUixDQUFZLFdBQVosRUFBeUIsRUFBRUssVUFBRixFQUFRRSxVQUFSLEVBQWNELGNBQWQsRUFBc0JFLFVBQXRCLEVBQTRCQyxVQUE1QixFQUFrQ1gsVUFBbEMsRUFBekI7QUFDQSxTQUFPLEVBQUVPLFVBQUYsRUFBUUUsVUFBUixFQUFjRCxjQUFkLEVBQXNCRSxVQUF0QixFQUE0QkMsVUFBNUIsRUFBa0NYLFVBQWxDLEVBQXdDaUIsTUFBTUwsS0FBS0MsR0FBTCxFQUE5QyxFQUFQO0FBQ0Q7O0FBRUQsU0FBU0csMEJBQVQsQ0FBb0NFLE1BQXBDLEVBQTRDO0FBQzFDO0FBQ0EsTUFBSUMsYUFBYSxJQUFJQyxNQUFKLENBQVcsR0FBWCxFQUFnQixHQUFoQixDQUFqQjtBQUNBLE1BQUlDLG1CQUFtQixJQUFJRCxNQUFKLENBQVcsR0FBWCxFQUFnQixHQUFoQixDQUF2Qjs7QUFFQSxNQUFJO0FBQ0YsUUFBSUUsU0FBU0osT0FBT2QsS0FBUCxDQUFhZSxVQUFiLEVBQXlCTCxNQUF0QztBQUNELEdBRkQsQ0FFRSxPQUFPUyxDQUFQLEVBQVU7QUFDVixRQUFJRCxTQUFTLENBQWI7QUFDRDtBQUNELE1BQUk7QUFDRixRQUFJRSxjQUFjTixPQUFPZCxLQUFQLENBQWFpQixnQkFBYixFQUErQlAsTUFBakQ7QUFDRCxHQUZELENBRUUsT0FBT1MsQ0FBUCxFQUFVO0FBQ1YsUUFBSUMsY0FBYyxDQUFsQjtBQUNEOztBQUVELE1BQUlGLFNBQVNFLFdBQWIsRUFBMEI7QUFDeEIsUUFBSUMsWUFBWU4sVUFBaEI7QUFDRCxHQUZELE1BRU8sSUFBSUssY0FBY0YsTUFBbEIsRUFBMEI7QUFDL0IsUUFBSUcsWUFBWUosZ0JBQWhCO0FBQ0QsR0FGTSxNQUVBO0FBQ0wsV0FBT0gsTUFBUDtBQUNEOztBQUVELFNBQU9BLE9BQU9RLE9BQVAsQ0FBZUQsU0FBZixFQUEwQixHQUExQixDQUFQO0FBQ0Q7O0FBRUQsU0FBU0UsU0FBVCxDQUFtQlQsTUFBbkIsRUFBMkI7QUFDekI7QUFDQTtBQUNBLE1BQUlBLE9BQU9KLE1BQVgsRUFBbUI7QUFDakIsUUFBSTtBQUNGLGFBQU8scUJBQU9hLFNBQVAsQ0FBaUJYLDJCQUEyQkUsTUFBM0IsQ0FBakIsQ0FBUDtBQUNELEtBRkQsQ0FFRSxPQUFPSyxDQUFQLEVBQVUsQ0FDWDtBQUNGO0FBQ0QsU0FBTyxxQkFBT0ksU0FBUCxDQUFpQixXQUFqQixDQUFQO0FBQ0Q7O0FBR0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6InBhcnNlLmpzIiwic291cmNlUm9vdCI6Ii9hcHAvbGliIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNocm9ubyBmcm9tICdjaHJvbm8tbm9kZSdcblxuLy8gVGFrZSB1cnRleHQgYW5kIHJldHVybiBhIHByb21pc2UgZGF0YSBzdHJ1Y3R1cmVcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHBhcnNlcHJvbSh1cnR4KSB7XG4gIGNvbnNvbGUubG9nKGBERUJVRyAke3VydHh9YClcbiAgLy8gUGFyc2UgdXJ0ZXh0IGludG8gdXNlcm5hbWUsIGRvbWFpbiwgYW5kIHBhdGggLS0gdXNlcm5hbWUuY29tbWl0cy50by9wYXRoXG4gIC8vIFRoaXMgdmVyc2lvbiBhc3N1bWVzIG5vIGRvdHMgaW4gdXNlcm5hbWVzLCBzbyBib2IucmVhbGx5LmNvbW1pdHMudG8gd291bGRcbiAgLy8gcGFyc2UgYXMgdXNlcm5hbWUgXCJib2JcIiBhbmQgZG9tYWluIFwicmVhbGx5LmNvbW1pdHMudG9cIjpcbiAgbGV0IG0gPSB1cnR4Lm1hdGNoKC9eKFteXFwuXSspXFwuKFteXFwuXFwvXStcXC5bXlxcL10rKVxcLz8oLiopJC8pXG4gIC8vIFRPRE86IGhhbmRsZSB0aGUgY2FzZSB0aGF0IG5vIHVzZXIgaXMgZ2l2ZW4sIGp1c3QgXCJwcm9taXNlcy50by9mb29cIlxuICBjb25zb2xlLmxvZyhgREVCVUcgUEFSU0lORzogJHtKU09OLnN0cmluZ2lmeShtKX1gKVxuICBsZXQgdXNlciAgID0gbSA/IG1bMV0gOiAnJ1xuICBsZXQgZG9tYWluID0gbSA/IG1bMl0gOiAnJ1xuICBsZXQgcGF0aCAgID0gbSA/IG1bM10gOiAnJ1xuICAvLyBmb2xsb3dpbmcgc2hvdWxkIG5ldmVyIGhhcHBlbiAtLSB3ZSBoYXZlIGEgcm91dGUgZm9yIHRoZSBlbXB0eSBwcm9taXNlIGNhc2VcbiAgaWYgKCFwYXRoIHx8IHBhdGggPT09ICcnKSB7IGNvbnNvbGUubG9nKGBFUlJPUjogZW1wdHkgcHJvbWlzZTogJHt1cnR4fWApIH1cbiAgbGV0IHdoYXQgPSAnJ1xuICBsZXQgdGR1ZSA9IERhdGUubm93KCkgKyA3KjI0KjYwKjYwKjEwMDBcbiAgaWYgKHBhdGgubGVuZ3RoID4gMCkge1xuICAgIGxldCBwYXJzZWRQYXRoID0gcGF0aC5tYXRjaCgvXiguKj8pKFxcL2J5XFwvfCQpKC4qKSQvKVxuICAgIFxuICAgIHRkdWUgPSBwYXJzZWRQYXRoWzNdXG4gICAgLy8gdGR1ZSA9IHBhcnNlRGF0ZShwYXJzZWRQYXRoWzNdKVxuICAgIHdoYXQgPSByZXBsYWNlU2VwYXJhdG9yV2l0aFNwYWNlcyhwYXJzZWRQYXRoWzFdKVxuICAgIFxuICAgIC8vdGR1ZSA9IHBhcnNlZFBhdGgubGVuZ3RoID4gMSA/IFxuICAgIC8vICAgICAgIGNocm9uby5wYXJzZURhdGUocGFyc2VkUGF0aFszXS5yZXBsYWNlKC9fL2csICcgJykpICogMSA6IFxuICAgIC8vICAgICAgIERhdGUubm93KCkgKyA3KjI0KjYwKjYwKjEwMDBcbiAgICAvL3RkdWUgPSB0ZHVlID8gKCAoIHRkdWUgPCBEYXRlLm5vdygpICYmIERhdGUubm93KCkgLSB0ZHVlIDwgMjQqNjAqNjAqMTAwMCApID9cbiAgICAvLyAgICAgICAgICAgICAgICB0ZHVlICsgMjQqNjAqNjAqMTAwMCA6IHRkdWUgKVxuICAgIC8vICAgICAgICAgICAgOiBEYXRlLm5vdygpICsgNyoyNCo2MCo2MCoxMDAwXG4gIH1cbiAgLy8gVE9ETzogcGF0aCBpcyBub3cgZXZlcnl0aGluZyBhZnRlciBcIi5wcm9taXNlcy50b1wiIHNvIG5vdyBwYXJzZSBvdXQgdGhlIFxuICAvLyAgICAgICBcIndoYXRcIiAodGhpbmcgYmVpbmcgcHJvbWlzZWQpIGFuZCB0aGUgXCJ0ZHVlXCIgKGRlYWRsaW5lKVxuICBjb25zb2xlLmxvZygncGFyc2VQcm9tJywgeyB1c2VyLCBwYXRoLCBkb21haW4sIHdoYXQsIHRkdWUsIHVydHggfSlcbiAgcmV0dXJuIHsgdXNlciwgcGF0aCwgZG9tYWluLCB3aGF0LCB0ZHVlLCB1cnR4LCB0aW5pOiBEYXRlLm5vdygpIH1cbn1cblxuZnVuY3Rpb24gcmVwbGFjZVNlcGFyYXRvcldpdGhTcGFjZXMoc3RyaW5nKSB7XG4gIC8vIFRPRE86IChtYXliZSkgRXNjYXBpbmcgY2hhcmFjdGVycz9cbiAgdmFyIGRhc2hfcmVnZXggPSBuZXcgUmVnRXhwKCctJywgJ2cnKTtcbiAgdmFyIHVuZGVyc2NvcmVfcmVnZXggPSBuZXcgUmVnRXhwKCdfJywgJ2cnKTtcbiAgXG4gIHRyeSB7XG4gICAgdmFyIGRhc2hlcyA9IHN0cmluZy5tYXRjaChkYXNoX3JlZ2V4KS5sZW5ndGg7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB2YXIgZGFzaGVzID0gMDtcbiAgfVxuICB0cnkge1xuICAgIHZhciB1bmRlcnNjb3JlcyA9IHN0cmluZy5tYXRjaCh1bmRlcnNjb3JlX3JlZ2V4KS5sZW5ndGg7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB2YXIgdW5kZXJzY29yZXMgPSAwO1xuICB9XG5cbiAgaWYgKGRhc2hlcyA+IHVuZGVyc2NvcmVzKSB7XG4gICAgdmFyIHNlcGFyYXRvciA9IGRhc2hfcmVnZXg7XG4gIH0gZWxzZSBpZiAodW5kZXJzY29yZXMgPiBkYXNoZXMpIHtcbiAgICB2YXIgc2VwYXJhdG9yID0gdW5kZXJzY29yZV9yZWdleDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gc3RyaW5nO1xuICB9XG5cbiAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKHNlcGFyYXRvciwgJyAnKTtcbn1cblxuZnVuY3Rpb24gcGFyc2VEYXRlKHN0cmluZykge1xuICAvLyBUT0RPOiB1c2VyJ3MgdGltZXpvbmVcbiAgLy8gVE9ETzogdW5peCB0aW1lIGZvcm1hdCBmb3IgZGJcbiAgaWYgKHN0cmluZy5sZW5ndGgpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGNocm9uby5wYXJzZURhdGUocmVwbGFjZVNlcGFyYXRvcldpdGhTcGFjZXMoc3RyaW5nKSlcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgfVxuICB9XG4gIHJldHVybiBjaHJvbm8ucGFyc2VEYXRlKCduZXh0IHdlZWsnKVxufVxuXG5cbi8vIFRPRE86IEV2YWx1YXRlIHRoZSB1c2VmdWxuZXNzIG9mIHRoZSBmdW5jdGlvbiBiZWxvdyBmb3IgY3JlYXRpbmcgYSBcIkFkZCB0byBDYWxlbmRhclwiIHRleHQgYnV0dG9uIHVuZGVyIGEgbmV3bHkgY3JlYXRlZCBwcm9taXNlICBcbi8vZnVuY3Rpb24gYnVpbGRBZGRUb0NhbGVuZGFySFRNTCh3aGF0LHRkdWUpIHtcbi8vICB2YXIgZ29vZ2xlQ2FsZW5kYXJIVE1MID0gJzxhIGhyZWY9XCJodHRwOi8vd3d3Lmdvb2dsZS5jb20vY2FsZW5kYXIvZXZlbnQ/YWN0aW9uPVRFTVBMQVRFJnRleHQ9WW91citJV2lsbCtQcm9taXNlK3RvKyc7XG4vLyAgZ29vZ2xlQ2FsZW5kYXJIVE1MICs9IHdoYXQ7XG4vLyAgZ29vZ2xlQ2FsZW5kYXJIVE1MICs9ICcraXMrZHVlJztcbi8vICBnb29nbGVDYWxlbmRhckhUTUwgKz0gJyZkYXRlcz0nO1xuLy8gIG5lZWQgdG8gY29udmVydCB0ZHVlIHRvIFlZWVlNTUREVG9ISE1NU1NaL1lZWVlNTUREVG9ISE1NU1NaIChpbiBHcmVlbndpY2ggTWVhbiBUaW1lIHdpdGggZW5kIHRpbWUgZGVmYXVsdCB0byBvbmUgaG91ciBhZnRlciBzdGFydCB0aW1lKVxuLy8gIHZhciBjb252ZXJ0ZWRUZHVlID0gJyc7XG4vLyAgZ29vZ2xlQ2FsZW5kYXJIVE1MICs9IGNvbnZlcnRlZFRkdWU7XG4vLyAgZ29vZ2xlQ2FsZW5kYXJIVE1MICs9ICdcIic7XG4vLyAgZ29vZ2xlQ2FsZW5kYXJIVE1MICs9ICcgdGFyZ2V0PVwiX2JsYW5rXCIgcmVsPVwibm9mb2xsb3dcIic7XG4vLyAgZ29vZ2xlQ2FsZW5kYXJIVE1MICs9ICc+QWRkIHRvIG15IGNhbGVuZGFyPC9hPic7XG4vLyAgcmV0dXJuIGdvb2dsZUNhbGVuZGFySFRNTDtcbi8vfVxuLy9UaGVuIHBlcmhhcHMgdXNlIHRoZSByZXR1cm5lZCBIVE1MIGluIGEgcGFydGlhbHMvYnV0dG9uLmhhbmRsZWJhcnMgZmlsZSAobm90IGNyZWF0ZWQgeWV0KSB0aGF0IG9ubHkgc2hvd3MgdXAgdXBvbiBpbml0aWFsIGNyZWF0aW9uIG9mIHByb21pc2UiXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "parse.js"
      ],
      "names": [
        "parseprom",
        "urtx",
        "console",
        "log",
        "m",
        "match",
        "JSON",
        "stringify",
        "user",
        "domain",
        "path",
        "what",
        "tdue",
        "Date",
        "now",
        "length",
        "parsedPath",
        "replaceSeparatorWithSpaces",
        "tini",
        "string",
        "dash_regex",
        "RegExp",
        "underscore_regex",
        "dashes",
        "e",
        "underscores",
        "separator",
        "replace",
        "parseDate"
      ],
      "mappings": ";;;;;kBAGwBA,S;;AAHxB;;;;;;AAEA;AACe,SAASA,SAAT,CAAmBC,IAAnB,EAAyB;AACtCC,UAAQC,GAAR,YAAqBF,IAArB;AACA;AACA;AACA;AACA,MAAIG,IAAIH,KAAKI,KAAL,CAAW,uCAAX,CAAR;AACA;AACAH,UAAQC,GAAR,qBAA8BG,KAAKC,SAAL,CAAeH,CAAf,CAA9B;AACA,MAAII,OAASJ,IAAIA,EAAE,CAAF,CAAJ,GAAW,EAAxB;AACA,MAAIK,SAASL,IAAIA,EAAE,CAAF,CAAJ,GAAW,EAAxB;AACA,MAAIM,OAASN,IAAIA,EAAE,CAAF,CAAJ,GAAW,EAAxB;AACA;AACA,MAAI,CAACM,IAAD,IAASA,SAAS,EAAtB,EAA0B;AAAER,YAAQC,GAAR,4BAAqCF,IAArC;AAA8C;AAC1E,MAAIU,OAAO,EAAX;AACA,MAAIC,OAAOC,KAAKC,GAAL,KAAa,IAAE,EAAF,GAAK,EAAL,GAAQ,EAAR,GAAW,IAAnC;AACA,MAAIJ,KAAKK,MAAL,GAAc,CAAlB,EAAqB;AACnB,QAAIC,aAAaN,KAAKL,KAAL,CAAW,uBAAX,CAAjB;;AAEAO,WAAOI,WAAW,CAAX,CAAP;AACA;AACAL,WAAOM,2BAA2BD,WAAW,CAAX,CAA3B,CAAP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACD;AACD;AACA;AACAd,UAAQC,GAAR,CAAY,WAAZ,EAAyB,EAAEK,UAAF,EAAQE,UAAR,EAAcD,cAAd,EAAsBE,UAAtB,EAA4BC,UAA5B,EAAkCX,UAAlC,EAAzB;AACA,SAAO,EAAEO,UAAF,EAAQE,UAAR,EAAcD,cAAd,EAAsBE,UAAtB,EAA4BC,UAA5B,EAAkCX,UAAlC,EAAwCiB,MAAML,KAAKC,GAAL,EAA9C,EAAP;AACD;;AAED,SAASG,0BAAT,CAAoCE,MAApC,EAA4C;AAC1C;AACA,MAAIC,aAAa,IAAIC,MAAJ,CAAW,GAAX,EAAgB,GAAhB,CAAjB;AACA,MAAIC,mBAAmB,IAAID,MAAJ,CAAW,GAAX,EAAgB,GAAhB,CAAvB;;AAEA,MAAI;AACF,QAAIE,SAASJ,OAAOd,KAAP,CAAae,UAAb,EAAyBL,MAAtC;AACD,GAFD,CAEE,OAAOS,CAAP,EAAU;AACV,QAAID,SAAS,CAAb;AACD;AACD,MAAI;AACF,QAAIE,cAAcN,OAAOd,KAAP,CAAaiB,gBAAb,EAA+BP,MAAjD;AACD,GAFD,CAEE,OAAOS,CAAP,EAAU;AACV,QAAIC,cAAc,CAAlB;AACD;;AAED,MAAIF,SAASE,WAAb,EAA0B;AACxB,QAAIC,YAAYN,UAAhB;AACD,GAFD,MAEO,IAAIK,cAAcF,MAAlB,EAA0B;AAC/B,QAAIG,YAAYJ,gBAAhB;AACD,GAFM,MAEA;AACL,WAAOH,MAAP;AACD;;AAED,SAAOA,OAAOQ,OAAP,CAAeD,SAAf,EAA0B,GAA1B,CAAP;AACD;;AAED,SAASE,SAAT,CAAmBT,MAAnB,EAA2B;AACzB;AACA;AACA,MAAIA,OAAOJ,MAAX,EAAmB;AACjB,QAAI;AACF,aAAO,qBAAOa,SAAP,CAAiBX,2BAA2BE,MAA3B,CAAjB,CAAP;AACD,KAFD,CAEE,OAAOK,CAAP,EAAU,CACX;AACF;AACD,SAAO,qBAAOI,SAAP,CAAiB,WAAjB,CAAP;AACD;;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA",
      "file": "parse.js",
      "sourceRoot": "/app/lib",
      "sourcesContent": [
        "import chrono from 'chrono-node'\n\n// Take urtext and return a promise data structure\nexport default function parseprom(urtx) {\n  console.log(`DEBUG ${urtx}`)\n  // Parse urtext into username, domain, and path -- username.commits.to/path\n  // This version assumes no dots in usernames, so bob.really.commits.to would\n  // parse as username \"bob\" and domain \"really.commits.to\":\n  let m = urtx.match(/^([^\\.]+)\\.([^\\.\\/]+\\.[^\\/]+)\\/?(.*)$/)\n  // TODO: handle the case that no user is given, just \"promises.to/foo\"\n  console.log(`DEBUG PARSING: ${JSON.stringify(m)}`)\n  let user   = m ? m[1] : ''\n  let domain = m ? m[2] : ''\n  let path   = m ? m[3] : ''\n  // following should never happen -- we have a route for the empty promise case\n  if (!path || path === '') { console.log(`ERROR: empty promise: ${urtx}`) }\n  let what = ''\n  let tdue = Date.now() + 7*24*60*60*1000\n  if (path.length > 0) {\n    let parsedPath = path.match(/^(.*?)(\\/by\\/|$)(.*)$/)\n    \n    tdue = parsedPath[3]\n    // tdue = parseDate(parsedPath[3])\n    what = replaceSeparatorWithSpaces(parsedPath[1])\n    \n    //tdue = parsedPath.length > 1 ? \n    //       chrono.parseDate(parsedPath[3].replace(/_/g, ' ')) * 1 : \n    //       Date.now() + 7*24*60*60*1000\n    //tdue = tdue ? ( ( tdue < Date.now() && Date.now() - tdue < 24*60*60*1000 ) ?\n    //                tdue + 24*60*60*1000 : tdue )\n    //            : Date.now() + 7*24*60*60*1000\n  }\n  // TODO: path is now everything after \".promises.to\" so now parse out the \n  //       \"what\" (thing being promised) and the \"tdue\" (deadline)\n  console.log('parseProm', { user, path, domain, what, tdue, urtx })\n  return { user, path, domain, what, tdue, urtx, tini: Date.now() }\n}\n\nfunction replaceSeparatorWithSpaces(string) {\n  // TODO: (maybe) Escaping characters?\n  var dash_regex = new RegExp('-', 'g');\n  var underscore_regex = new RegExp('_', 'g');\n  \n  try {\n    var dashes = string.match(dash_regex).length;\n  } catch (e) {\n    var dashes = 0;\n  }\n  try {\n    var underscores = string.match(underscore_regex).length;\n  } catch (e) {\n    var underscores = 0;\n  }\n\n  if (dashes > underscores) {\n    var separator = dash_regex;\n  } else if (underscores > dashes) {\n    var separator = underscore_regex;\n  } else {\n    return string;\n  }\n\n  return string.replace(separator, ' ');\n}\n\nfunction parseDate(string) {\n  // TODO: user's timezone\n  // TODO: unix time format for db\n  if (string.length) {\n    try {\n      return chrono.parseDate(replaceSeparatorWithSpaces(string))\n    } catch (e) {\n    }\n  }\n  return chrono.parseDate('next week')\n}\n\n\n// TODO: Evaluate the usefulness of the function below for creating a \"Add to Calendar\" text button under a newly created promise  \n//function buildAddToCalendarHTML(what,tdue) {\n//  var googleCalendarHTML = '<a href=\"http://www.google.com/calendar/event?action=TEMPLATE&text=Your+IWill+Promise+to+';\n//  googleCalendarHTML += what;\n//  googleCalendarHTML += '+is+due';\n//  googleCalendarHTML += '&dates=';\n//  need to convert tdue to YYYYMMDDToHHMMSSZ/YYYYMMDDToHHMMSSZ (in Greenwich Mean Time with end time default to one hour after start time)\n//  var convertedTdue = '';\n//  googleCalendarHTML += convertedTdue;\n//  googleCalendarHTML += '\"';\n//  googleCalendarHTML += ' target=\"_blank\" rel=\"nofollow\"';\n//  googleCalendarHTML += '>Add to my calendar</a>';\n//  return googleCalendarHTML;\n//}\n//Then perhaps use the returned HTML in a partials/button.handlebars file (not created yet) that only shows up upon initial creation of promise"
      ]
    },
    "mtime": 1507437053942
  },
  "{\"filename\":\"/app/lib/middleware.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/lib\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "./mail.js",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "mailself"
              }
            ]
          },
          {
            "source": "./parse.js",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "parsePromise"
              }
            ]
          },
          {
            "source": "../data/seed.js",
            "imported": [
              "domain",
              "users"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "domain",
                "local": "domain"
              },
              {
                "kind": "named",
                "imported": "users",
                "local": "users"
              }
            ]
          },
          {
            "source": "../models/promise.js",
            "imported": [
              "Promise",
              "sequelize"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "Promise",
                "local": "Promise"
              },
              {
                "kind": "named",
                "imported": "sequelize",
                "local": "sequelize"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "handleRequest",
            "req",
            "resp"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "handleRequest",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "req",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "resp",
              "exported": "default"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/lib/middleware.js",
      "filenameRelative": "/app/lib/middleware.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "middleware.js",
      "sourceFileName": "middleware.js",
      "sourceRoot": "/app/lib",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/lib",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "middleware"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = handleRequest;\n\nvar _mail = require('./mail.js');\n\nvar _mail2 = _interopRequireDefault(_mail);\n\nvar _parse = require('./parse.js');\n\nvar _parse2 = _interopRequireDefault(_parse);\n\nvar _seed = require('../data/seed.js');\n\nvar _promise = require('../models/promise.js');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// --------------------------------- 80chars ---------------------------------->\nfunction handleRequest(req, resp) {\n  // The server at promises.to passes along the full URL the way the user typed\n  // it, so when the user hits \"bob.promises.to/foo\" the Glitch app is called\n  // with \"iwill.glitch.me/bob.promises.to/foo\" and req.originalUrl is\n  // \"/bob.promises.to/foo\" (req.originalUrl doesn't include the hostname which\n  // from the perspective of this Glitch app is \"iwill.glitch.me\")\n  var urtx = req.originalUrl.substr(1); // get rid of the initial slash\n  // urtx is now, eg, \"bob.promises.to/foo_the_bar/by/9am\"\n\n  // TODOLATER: how to handle \"bob.promises.to/foo%bar\"\n  // TODOLATER: need to url-decode to handle \"bob.promises.to/foo^bar\"\n  // TODOLATER: handle bob.promises.to/do_item_#2/by/9am\n  //            https://stackoverflow.com/questions/18796421/capture-anchor-link\n\n  // quick hack to make it so both bob.commits.to and bob.commits.to/ \n  // show the full list of promises:\n  urtx = urtx.replace(/\\/$/, '');\n\n  //console.log('handleRequest', req.params);\n\n  var p = (0, _parse2.default)(urtx); // p is now a hash {user, what, tini, tdue, etc}\n  console.log('DEBUG: PROMISE PARSED: ' + JSON.stringify(p));\n\n  if (p.user === 'www' || p.user === '') {\n    // this is the case of no username, like if someone just went to\n    // \"promises.to\" or tried to fetch \"promises.to/robots.txt\" or whatever\n    resp.redirect('/');\n  } else if (!_seed.users.includes(p.user)) {\n    // don't let people create new subdomains/users on the fly\n    resp.redirect('/sign-up');\n  } else {\n    // Check if a promise already exists with matching user+'|'+what\n    // If not, create it\n    // If so, do nothing\n\n    console.log('valid request', req.params);\n    _promise.Promise.findOne({ where: { urtx: urtx } }).then(function (promise) {\n      if (promise) {\n        console.log('duplicate', urtx, promise.id);\n        // resp.redirect(urtx)\n      } else {\n        console.log('creating new', urtx);\n        _promise.Promise.create(p);\n        (0, _mail2.default)('PROMISE', urtx);\n      }\n      console.log('promises.to/ request', req.params);\n\n      resp.render('promise', {\n        promise: promise\n      });\n    });\n  }\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1pZGRsZXdhcmUuanMiXSwibmFtZXMiOlsiaGFuZGxlUmVxdWVzdCIsInJlcSIsInJlc3AiLCJ1cnR4Iiwib3JpZ2luYWxVcmwiLCJzdWJzdHIiLCJyZXBsYWNlIiwicCIsImNvbnNvbGUiLCJsb2ciLCJKU09OIiwic3RyaW5naWZ5IiwidXNlciIsInJlZGlyZWN0IiwiaW5jbHVkZXMiLCJwYXJhbXMiLCJmaW5kT25lIiwid2hlcmUiLCJ0aGVuIiwicHJvbWlzZSIsImlkIiwiY3JlYXRlIiwicmVuZGVyIl0sIm1hcHBpbmdzIjoiOzs7OztrQkFNd0JBLGE7O0FBTHhCOzs7O0FBQ0E7Ozs7QUFDQTs7QUFDQTs7OztBQUpBO0FBTWUsU0FBU0EsYUFBVCxDQUF1QkMsR0FBdkIsRUFBNEJDLElBQTVCLEVBQWtDO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFJQyxPQUFPRixJQUFJRyxXQUFKLENBQWdCQyxNQUFoQixDQUF1QixDQUF2QixDQUFYLENBTitDLENBTVQ7QUFDdEM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBRixTQUFPQSxLQUFLRyxPQUFMLENBQWEsS0FBYixFQUFvQixFQUFwQixDQUFQOztBQUVBOztBQUVBLE1BQUlDLElBQUkscUJBQWFKLElBQWIsQ0FBUixDQXBCK0MsQ0FvQnBCO0FBQzNCSyxVQUFRQyxHQUFSLDZCQUFzQ0MsS0FBS0MsU0FBTCxDQUFlSixDQUFmLENBQXRDOztBQUdBLE1BQUlBLEVBQUVLLElBQUYsS0FBVyxLQUFYLElBQW9CTCxFQUFFSyxJQUFGLEtBQVcsRUFBbkMsRUFBdUM7QUFDckM7QUFDQTtBQUNBVixTQUFLVyxRQUFMLENBQWMsR0FBZDtBQUNELEdBSkQsTUFJTyxJQUFJLENBQUMsWUFBTUMsUUFBTixDQUFlUCxFQUFFSyxJQUFqQixDQUFMLEVBQTZCO0FBQ2xDO0FBQ0FWLFNBQUtXLFFBQUwsQ0FBYyxVQUFkO0FBQ0QsR0FITSxNQUdBO0FBQ0w7QUFDQTtBQUNBOztBQUVBTCxZQUFRQyxHQUFSLENBQVksZUFBWixFQUE2QlIsSUFBSWMsTUFBakM7QUFDQSxxQkFBUUMsT0FBUixDQUFnQixFQUFFQyxPQUFPLEVBQUNkLFVBQUQsRUFBVCxFQUFoQixFQUNHZSxJQURILENBQ1EsbUJBQVc7QUFDZixVQUFJQyxPQUFKLEVBQWE7QUFDWFgsZ0JBQVFDLEdBQVIsQ0FBWSxXQUFaLEVBQXlCTixJQUF6QixFQUErQmdCLFFBQVFDLEVBQXZDO0FBQ0E7QUFDRCxPQUhELE1BR087QUFDTFosZ0JBQVFDLEdBQVIsQ0FBWSxjQUFaLEVBQTRCTixJQUE1QjtBQUNBLHlCQUFRa0IsTUFBUixDQUFlZCxDQUFmO0FBQ0EsNEJBQVMsU0FBVCxFQUFvQkosSUFBcEI7QUFDRDtBQUNESyxjQUFRQyxHQUFSLENBQVksc0JBQVosRUFBb0NSLElBQUljLE1BQXhDOztBQUVGYixXQUFLb0IsTUFBTCxDQUFZLFNBQVosRUFBdUI7QUFDckJIO0FBRHFCLE9BQXZCO0FBR0QsS0FmRDtBQWlCRDtBQUNGIiwiZmlsZSI6Im1pZGRsZXdhcmUuanMiLCJzb3VyY2VSb290IjoiL2FwcC9saWIiLCJzb3VyY2VzQ29udGVudCI6WyIvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gODBjaGFycyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPlxuaW1wb3J0IG1haWxzZWxmIGZyb20gJy4vbWFpbC5qcydcbmltcG9ydCBwYXJzZVByb21pc2UgZnJvbSAnLi9wYXJzZS5qcydcbmltcG9ydCB7IGRvbWFpbiwgdXNlcnMgfSBmcm9tICcuLi9kYXRhL3NlZWQuanMnXG5pbXBvcnQgeyBQcm9taXNlLCBzZXF1ZWxpemUgfSBmcm9tICcuLi9tb2RlbHMvcHJvbWlzZS5qcydcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaGFuZGxlUmVxdWVzdChyZXEsIHJlc3ApIHtcbiAgLy8gVGhlIHNlcnZlciBhdCBwcm9taXNlcy50byBwYXNzZXMgYWxvbmcgdGhlIGZ1bGwgVVJMIHRoZSB3YXkgdGhlIHVzZXIgdHlwZWRcbiAgLy8gaXQsIHNvIHdoZW4gdGhlIHVzZXIgaGl0cyBcImJvYi5wcm9taXNlcy50by9mb29cIiB0aGUgR2xpdGNoIGFwcCBpcyBjYWxsZWRcbiAgLy8gd2l0aCBcIml3aWxsLmdsaXRjaC5tZS9ib2IucHJvbWlzZXMudG8vZm9vXCIgYW5kIHJlcS5vcmlnaW5hbFVybCBpc1xuICAvLyBcIi9ib2IucHJvbWlzZXMudG8vZm9vXCIgKHJlcS5vcmlnaW5hbFVybCBkb2Vzbid0IGluY2x1ZGUgdGhlIGhvc3RuYW1lIHdoaWNoXG4gIC8vIGZyb20gdGhlIHBlcnNwZWN0aXZlIG9mIHRoaXMgR2xpdGNoIGFwcCBpcyBcIml3aWxsLmdsaXRjaC5tZVwiKVxuICBsZXQgdXJ0eCA9IHJlcS5vcmlnaW5hbFVybC5zdWJzdHIoMSk7IC8vIGdldCByaWQgb2YgdGhlIGluaXRpYWwgc2xhc2hcbiAgLy8gdXJ0eCBpcyBub3csIGVnLCBcImJvYi5wcm9taXNlcy50by9mb29fdGhlX2Jhci9ieS85YW1cIlxuICBcbiAgLy8gVE9ET0xBVEVSOiBob3cgdG8gaGFuZGxlIFwiYm9iLnByb21pc2VzLnRvL2ZvbyViYXJcIlxuICAvLyBUT0RPTEFURVI6IG5lZWQgdG8gdXJsLWRlY29kZSB0byBoYW5kbGUgXCJib2IucHJvbWlzZXMudG8vZm9vXmJhclwiXG4gIC8vIFRPRE9MQVRFUjogaGFuZGxlIGJvYi5wcm9taXNlcy50by9kb19pdGVtXyMyL2J5LzlhbVxuICAvLyAgICAgICAgICAgIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzE4Nzk2NDIxL2NhcHR1cmUtYW5jaG9yLWxpbmtcbiAgXG4gIC8vIHF1aWNrIGhhY2sgdG8gbWFrZSBpdCBzbyBib3RoIGJvYi5jb21taXRzLnRvIGFuZCBib2IuY29tbWl0cy50by8gXG4gIC8vIHNob3cgdGhlIGZ1bGwgbGlzdCBvZiBwcm9taXNlczpcbiAgdXJ0eCA9IHVydHgucmVwbGFjZSgvXFwvJC8sICcnKVxuICBcbiAgLy9jb25zb2xlLmxvZygnaGFuZGxlUmVxdWVzdCcsIHJlcS5wYXJhbXMpO1xuICBcbiAgbGV0IHAgPSBwYXJzZVByb21pc2UodXJ0eCkgLy8gcCBpcyBub3cgYSBoYXNoIHt1c2VyLCB3aGF0LCB0aW5pLCB0ZHVlLCBldGN9XG4gIGNvbnNvbGUubG9nKGBERUJVRzogUFJPTUlTRSBQQVJTRUQ6ICR7SlNPTi5zdHJpbmdpZnkocCl9YClcbiAgXG4gIFxuICBpZiAocC51c2VyID09PSAnd3d3JyB8fCBwLnVzZXIgPT09ICcnKSB7IFxuICAgIC8vIHRoaXMgaXMgdGhlIGNhc2Ugb2Ygbm8gdXNlcm5hbWUsIGxpa2UgaWYgc29tZW9uZSBqdXN0IHdlbnQgdG9cbiAgICAvLyBcInByb21pc2VzLnRvXCIgb3IgdHJpZWQgdG8gZmV0Y2ggXCJwcm9taXNlcy50by9yb2JvdHMudHh0XCIgb3Igd2hhdGV2ZXJcbiAgICByZXNwLnJlZGlyZWN0KCcvJyk7XG4gIH0gZWxzZSBpZiAoIXVzZXJzLmluY2x1ZGVzKHAudXNlcikpIHtcbiAgICAvLyBkb24ndCBsZXQgcGVvcGxlIGNyZWF0ZSBuZXcgc3ViZG9tYWlucy91c2VycyBvbiB0aGUgZmx5XG4gICAgcmVzcC5yZWRpcmVjdCgnL3NpZ24tdXAnKVxuICB9IGVsc2Uge1xuICAgIC8vIENoZWNrIGlmIGEgcHJvbWlzZSBhbHJlYWR5IGV4aXN0cyB3aXRoIG1hdGNoaW5nIHVzZXIrJ3wnK3doYXRcbiAgICAvLyBJZiBub3QsIGNyZWF0ZSBpdFxuICAgIC8vIElmIHNvLCBkbyBub3RoaW5nXG5cbiAgICBjb25zb2xlLmxvZygndmFsaWQgcmVxdWVzdCcsIHJlcS5wYXJhbXMpO1xuICAgIFByb21pc2UuZmluZE9uZSh7IHdoZXJlOiB7dXJ0eH0gfSlcbiAgICAgIC50aGVuKHByb21pc2UgPT4ge1xuICAgICAgICBpZiAocHJvbWlzZSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdkdXBsaWNhdGUnLCB1cnR4LCBwcm9taXNlLmlkKVxuICAgICAgICAgIC8vIHJlc3AucmVkaXJlY3QodXJ0eClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnY3JlYXRpbmcgbmV3JywgdXJ0eClcbiAgICAgICAgICBQcm9taXNlLmNyZWF0ZShwKVxuICAgICAgICAgIG1haWxzZWxmKCdQUk9NSVNFJywgdXJ0eClcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmxvZygncHJvbWlzZXMudG8vIHJlcXVlc3QnLCByZXEucGFyYW1zKVxuICAgICAgICBcbiAgICAgIHJlc3AucmVuZGVyKCdwcm9taXNlJywge1xuICAgICAgICBwcm9taXNlLFxuICAgICAgfSlcbiAgICB9KVxuIFxuICB9XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "middleware.js"
      ],
      "names": [
        "handleRequest",
        "req",
        "resp",
        "urtx",
        "originalUrl",
        "substr",
        "replace",
        "p",
        "console",
        "log",
        "JSON",
        "stringify",
        "user",
        "redirect",
        "includes",
        "params",
        "findOne",
        "where",
        "then",
        "promise",
        "id",
        "create",
        "render"
      ],
      "mappings": ";;;;;kBAMwBA,a;;AALxB;;;;AACA;;;;AACA;;AACA;;;;AAJA;AAMe,SAASA,aAAT,CAAuBC,GAAvB,EAA4BC,IAA5B,EAAkC;AAC/C;AACA;AACA;AACA;AACA;AACA,MAAIC,OAAOF,IAAIG,WAAJ,CAAgBC,MAAhB,CAAuB,CAAvB,CAAX,CAN+C,CAMT;AACtC;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACAF,SAAOA,KAAKG,OAAL,CAAa,KAAb,EAAoB,EAApB,CAAP;;AAEA;;AAEA,MAAIC,IAAI,qBAAaJ,IAAb,CAAR,CApB+C,CAoBpB;AAC3BK,UAAQC,GAAR,6BAAsCC,KAAKC,SAAL,CAAeJ,CAAf,CAAtC;;AAGA,MAAIA,EAAEK,IAAF,KAAW,KAAX,IAAoBL,EAAEK,IAAF,KAAW,EAAnC,EAAuC;AACrC;AACA;AACAV,SAAKW,QAAL,CAAc,GAAd;AACD,GAJD,MAIO,IAAI,CAAC,YAAMC,QAAN,CAAeP,EAAEK,IAAjB,CAAL,EAA6B;AAClC;AACAV,SAAKW,QAAL,CAAc,UAAd;AACD,GAHM,MAGA;AACL;AACA;AACA;;AAEAL,YAAQC,GAAR,CAAY,eAAZ,EAA6BR,IAAIc,MAAjC;AACA,qBAAQC,OAAR,CAAgB,EAAEC,OAAO,EAACd,UAAD,EAAT,EAAhB,EACGe,IADH,CACQ,mBAAW;AACf,UAAIC,OAAJ,EAAa;AACXX,gBAAQC,GAAR,CAAY,WAAZ,EAAyBN,IAAzB,EAA+BgB,QAAQC,EAAvC;AACA;AACD,OAHD,MAGO;AACLZ,gBAAQC,GAAR,CAAY,cAAZ,EAA4BN,IAA5B;AACA,yBAAQkB,MAAR,CAAed,CAAf;AACA,4BAAS,SAAT,EAAoBJ,IAApB;AACD;AACDK,cAAQC,GAAR,CAAY,sBAAZ,EAAoCR,IAAIc,MAAxC;;AAEFb,WAAKoB,MAAL,CAAY,SAAZ,EAAuB;AACrBH;AADqB,OAAvB;AAGD,KAfD;AAiBD;AACF",
      "file": "middleware.js",
      "sourceRoot": "/app/lib",
      "sourcesContent": [
        "// --------------------------------- 80chars ---------------------------------->\nimport mailself from './mail.js'\nimport parsePromise from './parse.js'\nimport { domain, users } from '../data/seed.js'\nimport { Promise, sequelize } from '../models/promise.js'\n\nexport default function handleRequest(req, resp) {\n  // The server at promises.to passes along the full URL the way the user typed\n  // it, so when the user hits \"bob.promises.to/foo\" the Glitch app is called\n  // with \"iwill.glitch.me/bob.promises.to/foo\" and req.originalUrl is\n  // \"/bob.promises.to/foo\" (req.originalUrl doesn't include the hostname which\n  // from the perspective of this Glitch app is \"iwill.glitch.me\")\n  let urtx = req.originalUrl.substr(1); // get rid of the initial slash\n  // urtx is now, eg, \"bob.promises.to/foo_the_bar/by/9am\"\n  \n  // TODOLATER: how to handle \"bob.promises.to/foo%bar\"\n  // TODOLATER: need to url-decode to handle \"bob.promises.to/foo^bar\"\n  // TODOLATER: handle bob.promises.to/do_item_#2/by/9am\n  //            https://stackoverflow.com/questions/18796421/capture-anchor-link\n  \n  // quick hack to make it so both bob.commits.to and bob.commits.to/ \n  // show the full list of promises:\n  urtx = urtx.replace(/\\/$/, '')\n  \n  //console.log('handleRequest', req.params);\n  \n  let p = parsePromise(urtx) // p is now a hash {user, what, tini, tdue, etc}\n  console.log(`DEBUG: PROMISE PARSED: ${JSON.stringify(p)}`)\n  \n  \n  if (p.user === 'www' || p.user === '') { \n    // this is the case of no username, like if someone just went to\n    // \"promises.to\" or tried to fetch \"promises.to/robots.txt\" or whatever\n    resp.redirect('/');\n  } else if (!users.includes(p.user)) {\n    // don't let people create new subdomains/users on the fly\n    resp.redirect('/sign-up')\n  } else {\n    // Check if a promise already exists with matching user+'|'+what\n    // If not, create it\n    // If so, do nothing\n\n    console.log('valid request', req.params);\n    Promise.findOne({ where: {urtx} })\n      .then(promise => {\n        if (promise) {\n          console.log('duplicate', urtx, promise.id)\n          // resp.redirect(urtx)\n        } else {\n          console.log('creating new', urtx)\n          Promise.create(p)\n          mailself('PROMISE', urtx)\n        }\n        console.log('promises.to/ request', req.params)\n        \n      resp.render('promise', {\n        promise,\n      })\n    })\n \n  }\n}\n"
      ]
    },
    "mtime": 1507445457544
  },
  "{\"filename\":\"/app/lib/mail.js\",\"env\":{},\"retainLines\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"presets\":[],\"plugins\":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{\"loose\":false,\"spec\":false}],[[],null],[[],null],[[],{\"spec\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"loose\":false}],[[],null],[[],null],[[],null],[[],{\"loose\":false}],[[],null],[[],{\"loose\":false}],[[],null],[[],null],[[],{\"loose\":false}],[[],{\"async\":false,\"asyncGenerators\":false}]],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"minified\":false,\"sourceRoot\":\"/app/lib\",\"babelrc\":true,\"sourceType\":\"module\",\"moduleIds\":false,\"passPerPreset\":false,\"parserOpts\":false,\"generatorOpts\":false}:6.26.0": {
    "metadata": {
      "usedHelpers": [
        "interopRequireDefault"
      ],
      "marked": [],
      "modules": {
        "imports": [
          {
            "source": "mailgun-js",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Mailgun"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "mailself",
            "subj",
            "body"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "mailself",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "subj",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "body",
              "exported": "default"
            }
          ]
        }
      }
    },
    "options": {
      "filename": "/app/lib/mail.js",
      "filenameRelative": "/app/lib/mail.js",
      "env": {},
      "retainLines": false,
      "highlightCode": true,
      "suppressDeprecationMessages": false,
      "presets": [],
      "plugins": [
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false,
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "spec": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          null
        ],
        [
          [],
          null
        ],
        [
          [],
          {
            "loose": false
          }
        ],
        [
          [],
          {
            "async": false,
            "asyncGenerators": false
          }
        ]
      ],
      "ignore": [],
      "code": true,
      "metadata": true,
      "ast": false,
      "comments": true,
      "compact": "auto",
      "minified": false,
      "sourceMaps": "both",
      "sourceMapTarget": "mail.js",
      "sourceFileName": "mail.js",
      "sourceRoot": "/app/lib",
      "babelrc": false,
      "sourceType": "module",
      "moduleRoot": "/app/lib",
      "moduleIds": false,
      "passPerPreset": false,
      "parserOpts": false,
      "generatorOpts": false,
      "basename": "mail"
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = mailself;\n\nvar _mailgunJs = require('mailgun-js');\n\nvar _mailgunJs2 = _interopRequireDefault(_mailgunJs);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction mailself(subj, body) {\n  var mailgun = new _mailgunJs2.default({ apiKey: process.env.MAILGUN_KEY,\n    domain: process.env.MAILGUN_DOMAIN });\n  var data = {\n    from: process.env.MAILGUN_FROM,\n    to: process.env.MY_EMAIL,\n    subject: subj,\n    text: body\n  };\n  mailgun.messages().send(data, function (err, body) {});\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haWwuanMiXSwibmFtZXMiOlsibWFpbHNlbGYiLCJzdWJqIiwiYm9keSIsIm1haWxndW4iLCJhcGlLZXkiLCJwcm9jZXNzIiwiZW52IiwiTUFJTEdVTl9LRVkiLCJkb21haW4iLCJNQUlMR1VOX0RPTUFJTiIsImRhdGEiLCJmcm9tIiwiTUFJTEdVTl9GUk9NIiwidG8iLCJNWV9FTUFJTCIsInN1YmplY3QiLCJ0ZXh0IiwibWVzc2FnZXMiLCJzZW5kIiwiZXJyIl0sIm1hcHBpbmdzIjoiOzs7OztrQkFFd0JBLFE7O0FBRnhCOzs7Ozs7QUFFZSxTQUFTQSxRQUFULENBQWtCQyxJQUFsQixFQUF3QkMsSUFBeEIsRUFBOEI7QUFDM0MsTUFBSUMsVUFBVSx3QkFBWSxFQUFDQyxRQUFRQyxRQUFRQyxHQUFSLENBQVlDLFdBQXJCO0FBQ0NDLFlBQVFILFFBQVFDLEdBQVIsQ0FBWUcsY0FEckIsRUFBWixDQUFkO0FBRUEsTUFBSUMsT0FBTztBQUNUQyxVQUFTTixRQUFRQyxHQUFSLENBQVlNLFlBRFo7QUFFVEMsUUFBU1IsUUFBUUMsR0FBUixDQUFZUSxRQUZaO0FBR1RDLGFBQVNkLElBSEE7QUFJVGUsVUFBU2Q7QUFKQSxHQUFYO0FBTUFDLFVBQVFjLFFBQVIsR0FBbUJDLElBQW5CLENBQXdCUixJQUF4QixFQUE4QixVQUFDUyxHQUFELEVBQU1qQixJQUFOLEVBQWUsQ0FBRSxDQUEvQztBQUNEIiwiZmlsZSI6Im1haWwuanMiLCJzb3VyY2VSb290IjoiL2FwcC9saWIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTWFpbGd1biBmcm9tICdtYWlsZ3VuLWpzJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbWFpbHNlbGYoc3ViaiwgYm9keSkge1xuICB2YXIgbWFpbGd1biA9IG5ldyBNYWlsZ3VuKHthcGlLZXk6IHByb2Nlc3MuZW52Lk1BSUxHVU5fS0VZLCBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9tYWluOiBwcm9jZXNzLmVudi5NQUlMR1VOX0RPTUFJTn0pXG4gIHZhciBkYXRhID0ge1xuICAgIGZyb206ICAgIHByb2Nlc3MuZW52Lk1BSUxHVU5fRlJPTSxcbiAgICB0bzogICAgICBwcm9jZXNzLmVudi5NWV9FTUFJTCxcbiAgICBzdWJqZWN0OiBzdWJqLFxuICAgIHRleHQ6ICAgIGJvZHksXG4gIH1cbiAgbWFpbGd1bi5tZXNzYWdlcygpLnNlbmQoZGF0YSwgKGVyciwgYm9keSkgPT4ge30pXG59Il19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "mail.js"
      ],
      "names": [
        "mailself",
        "subj",
        "body",
        "mailgun",
        "apiKey",
        "process",
        "env",
        "MAILGUN_KEY",
        "domain",
        "MAILGUN_DOMAIN",
        "data",
        "from",
        "MAILGUN_FROM",
        "to",
        "MY_EMAIL",
        "subject",
        "text",
        "messages",
        "send",
        "err"
      ],
      "mappings": ";;;;;kBAEwBA,Q;;AAFxB;;;;;;AAEe,SAASA,QAAT,CAAkBC,IAAlB,EAAwBC,IAAxB,EAA8B;AAC3C,MAAIC,UAAU,wBAAY,EAACC,QAAQC,QAAQC,GAAR,CAAYC,WAArB;AACCC,YAAQH,QAAQC,GAAR,CAAYG,cADrB,EAAZ,CAAd;AAEA,MAAIC,OAAO;AACTC,UAASN,QAAQC,GAAR,CAAYM,YADZ;AAETC,QAASR,QAAQC,GAAR,CAAYQ,QAFZ;AAGTC,aAASd,IAHA;AAITe,UAASd;AAJA,GAAX;AAMAC,UAAQc,QAAR,GAAmBC,IAAnB,CAAwBR,IAAxB,EAA8B,UAACS,GAAD,EAAMjB,IAAN,EAAe,CAAE,CAA/C;AACD",
      "file": "mail.js",
      "sourceRoot": "/app/lib",
      "sourcesContent": [
        "import Mailgun from 'mailgun-js';\n\nexport default function mailself(subj, body) {\n  var mailgun = new Mailgun({apiKey: process.env.MAILGUN_KEY, \n                             domain: process.env.MAILGUN_DOMAIN})\n  var data = {\n    from:    process.env.MAILGUN_FROM,\n    to:      process.env.MY_EMAIL,\n    subject: subj,\n    text:    body,\n  }\n  mailgun.messages().send(data, (err, body) => {})\n}"
      ]
    },
    "mtime": 1507437053930
  }
}